!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Ya",[],t):"object"==typeof exports?exports.Ya=t():(e.Ya=e.Ya||{},e.Ya.Feedback=t())}(this,(()=>(()=>{var e={837:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81),o=n.n(i),s=n(645),r=n.n(s)()(o());r.push([e.id,".j9B7up68rde9UJix2n7v{cursor:pointer;pointer-events:all}.j9B7up68rde9UJix2n7v button{all:unset;position:fixed;font-size:var(--fb-lib-button-font-size);font-weight:var(--fb-lib-button-font-weight);font-family:var(--fb-lib-button-font-family);color:var(--fb-lib-button-font-color);background-color:var(--fb-lib-button-bg);border-radius:var(--fb-lib-button-border-radius);box-shadow:var(--fb-lib-button-shadow);z-index:1000;padding:10px 18px 10px 12px;height:auto;line-height:1;backface-visibility:hidden;outline:1px solid rgba(0,0,0,0);will-change:transform}.j9B7up68rde9UJix2n7v.GaiCtmG9gshFjfLqdzeG button,.j9B7up68rde9UJix2n7v.AIfawx9HF4cM9LuOMt0k button{border-bottom-right-radius:0;border-bottom-left-radius:0}.j9B7up68rde9UJix2n7v.b2ZKP3R8L2SZ3UdAXICQ button,.j9B7up68rde9UJix2n7v.mnuHg_VGaA9cmuJ7Fjgw button{border-top-left-radius:0;border-top-right-radius:0}.j9B7up68rde9UJix2n7v button:focus-visible{outline:2px solid #4285f4;outline-offset:2px}.j9B7up68rde9UJix2n7v.GaiCtmG9gshFjfLqdzeG button{right:17px;transform:translateX(50%) rotate(-90deg);transform-origin:center center}.j9B7up68rde9UJix2n7v.GGh_6dEqoE3cFL6TXe_X.GaiCtmG9gshFjfLqdzeG button{right:-52px}.j9B7up68rde9UJix2n7v.GGh_6dEqoE3cFL6TXe_X.b2ZKP3R8L2SZ3UdAXICQ button,.j9B7up68rde9UJix2n7v.GGh_6dEqoE3cFL6TXe_X.AIfawx9HF4cM9LuOMt0k button{padding:10px 0px 25px 12px;width:120px}.j9B7up68rde9UJix2n7v.mnuHg_VGaA9cmuJ7Fjgw button{left:17px;transform:translateX(-50%) rotate(-90deg);transform-origin:center center}.j9B7up68rde9UJix2n7v.GGh_6dEqoE3cFL6TXe_X.mnuHg_VGaA9cmuJ7Fjgw button{left:-52px}.j9B7up68rde9UJix2n7v.AIfawx9HF4cM9LuOMt0k button{bottom:0px}.j9B7up68rde9UJix2n7v.b2ZKP3R8L2SZ3UdAXICQ button{top:0px}.j9B7up68rde9UJix2n7v.AIfawx9HF4cM9LuOMt0k button,.j9B7up68rde9UJix2n7v.b2ZKP3R8L2SZ3UdAXICQ button{left:0;right:0;margin:auto;width:-moz-max-content;width:max-content;max-width:100vw;overflow:hidden;white-space:nowrap}.DCWAhLzY3KYtDo6YvM_c{max-height:calc(100vh - 80px);overflow:auto}iframe.VZqgWfc49uJhl0AG9j4I{min-height:auto;transition:height .3s}@media(max-width: 480px){.j9B7up68rde9UJix2n7v.GaiCtmG9gshFjfLqdzeG button,.j9B7up68rde9UJix2n7v.mnuHg_VGaA9cmuJ7Fjgw button{bottom:150px}}@media(min-width: 481px){.j9B7up68rde9UJix2n7v.GaiCtmG9gshFjfLqdzeG button,.j9B7up68rde9UJix2n7v.mnuHg_VGaA9cmuJ7Fjgw button{top:200px}}",""]),r.locals={this:"j9B7up68rde9UJix2n7v",right:"GaiCtmG9gshFjfLqdzeG",bottom:"AIfawx9HF4cM9LuOMt0k",top:"b2ZKP3R8L2SZ3UdAXICQ",left:"mnuHg_VGaA9cmuJ7Fjgw",headerHidden:"GGh_6dEqoE3cFL6TXe_X",iframeWrapper:"DCWAhLzY3KYtDo6YvM_c",heightAuto:"VZqgWfc49uJhl0AG9j4I"};const a=r},90:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81),o=n.n(i),s=n(645),r=n.n(s)()(o());r.push([e.id,'.u8n8V1CYJG6ACDwa777w{all:unset;position:absolute;display:block;width:16px;height:16px;font-size:0;background-repeat:no-repeat;background-position:50% 50%;border-radius:50%}.u8n8V1CYJG6ACDwa777w:after{position:absolute;content:"";width:44px;height:26px;left:-20px;top:-8px}.u8n8V1CYJG6ACDwa777w:hover{cursor:pointer;background-color:var(--fb-lib-close-hover-bg)}.u8n8V1CYJG6ACDwa777w:focus{outline:2px solid var(--fb-lib-close-focus-color);outline-offset:2px}.u8n8V1CYJG6ACDwa777w:focus:not(:focus-visible){outline:none}.u8n8V1CYJG6ACDwa777w:focus-visible{outline:2px solid var(--fb-lib-close-focus-color);outline-offset:2px}.u8n8V1CYJG6ACDwa777w:active{background-color:var(--fb-lib-close-active-bg, rgba(0, 0, 0, 0.1))}',""]),r.locals={this:"u8n8V1CYJG6ACDwa777w"};const a=r},211:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81),o=n.n(i),s=n(645),r=n.n(s)()(o());r.push([e.id,".qbORpikLObufPvziZ9y_{position:fixed;top:0;left:0;right:0;bottom:0;height:auto;transition:.5s all;z-index:9999;pointer-events:all;background-color:rgba(0,0,0,.25);display:flex;justify-content:center;align-items:center}.hHnggwS8sytaHsy6fuWZ{border:none;background:none;padding:0;position:relative;width:545px;max-width:100%;border-radius:16px;box-shadow:0px 4px 7px rgba(0,0,0,.25);background-color:var(--fb-lib-content-bg)}.wEOFUiLOfluq86BrDUfg{min-height:42px;border-radius:16px 16px 0px 0px;background:var(--fb-lib-header-modal-bg) 50% 55% no-repeat;background-size:132px}.wEOFUiLOfluq86BrDUfg._2M3fKxqWmql09JUCBEg{display:none}.fp0QgCrX1y48p3elvLVi{overflow:hidden;background:var(--fb-lib-content-bg);border-radius:0px 0px 16px 16px;height:auto}.fp0QgCrX1y48p3elvLVi._2M3fKxqWmql09JUCBEg{border-radius:16px}.fp0QgCrX1y48p3elvLVi iframe{display:block;border:0;overflow:auto;width:100%}.Phidw_u4HJIdFwFJpWzG{top:12px;right:12px}@media(max-height: 669px)and (min-height: 370px){.fp0QgCrX1y48p3elvLVi iframe{min-height:320px}}@media(min-height: 670px){.fp0QgCrX1y48p3elvLVi iframe{min-height:620px}}",""]),r.locals={visible:"qbORpikLObufPvziZ9y_",main:"hHnggwS8sytaHsy6fuWZ",header:"wEOFUiLOfluq86BrDUfg",header_hidden:"_2M3fKxqWmql09JUCBEg",content:"fp0QgCrX1y48p3elvLVi",close:"Phidw_u4HJIdFwFJpWzG"};const a=r},917:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81),o=n.n(i),s=n(645),r=n.n(s)()(o());r.push([e.id,".dzCDBUAznXSxVdGj1S7X{--thick-popup-offset: 16px;--horiz-shift: -100vw}.dzCDBUAznXSxVdGj1S7X{height:auto;background:var(--fb-lib-content-bg);border-radius:16px;pointer-events:none;z-index:9999}.dzCDBUAznXSxVdGj1S7X.fL5Owfu9xYWrxSlFekwz{position:absolute}.dzCDBUAznXSxVdGj1S7X.tFVNFALE8CgbdkspQgXJ{position:fixed}.dzCDBUAznXSxVdGj1S7X.TZbANCRE7ej6hWXvm4sw{left:var(--horiz-shift)}.dzCDBUAznXSxVdGj1S7X.sLWfm6BmA5C2rP8RH2lh{right:var(--horiz-shift)}.dzCDBUAznXSxVdGj1S7X.zyUt1ulGu7Lctcqt9Wwb{top:var(--vert-shift)}.dzCDBUAznXSxVdGj1S7X.NFKvx2noTZuUABoQOIgw{bottom:var(--vert-shift)}.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA{top:var(--vert-shift);left:var(--horiz-shift)}.dzCDBUAznXSxVdGj1S7X.NFKvx2noTZuUABoQOIgw.dzCDBUAznXSxVdGj1S7X.fL5Owfu9xYWrxSlFekwz{--vert-shift: 0}.yP6u_4fglSQcvruyoYvp{pointer-events:all;z-index:9999}.FJkGA3xCbqzGT0n2EMy7{margin-left:auto;position:relative;box-shadow:0px 8px 40px 0px rgba(33,32,31,.12);border-radius:16px}.A9lP13CP5JmkdVp3aYdq{min-height:36px;background:var(--fb-lib-header-popup-bg) 50% 50% no-repeat;background-size:100px;border-radius:16px 16px 0 0}.A9lP13CP5JmkdVp3aYdq.hoQR6MQKQAxgFUvjJ3vC{display:none}.h4aXscBoDD4zSt5DFRwg.hoQR6MQKQAxgFUvjJ3vC{border-radius:16px}.h4aXscBoDD4zSt5DFRwg{overflow:hidden;border-radius:0px 0px 16px 16px;background:var(--fb-lib-content-bg)}.h4aXscBoDD4zSt5DFRwg.hoQR6MQKQAxgFUvjJ3vC iframe{border-radius:16px}.h4aXscBoDD4zSt5DFRwg iframe{display:block;border:0;overflow:hidden;border-radius:0 0 16px 16px;width:320px}.h4aXscBoDD4zSt5DFRwg iframe.XsSKBX1_k9QpApPDM1zs{width:calc(100vw - 2*var(--thick-popup-offset))}.Fpgt_Kf0hCJU1CoBT8fx{top:8px;right:8px}@media(max-width: 500px){.dzCDBUAznXSxVdGj1S7X.yP6u_4fglSQcvruyoYvp{--horiz-shift: 16px}.dzCDBUAznXSxVdGj1S7X.NFKvx2noTZuUABoQOIgw.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6,.dzCDBUAznXSxVdGj1S7X.zyUt1ulGu7Lctcqt9Wwb.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6{--vert-shift: 12px}.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6{--vert-shift: 50%;transform:translate(0%, -50%)}.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6 .h4aXscBoDD4zSt5DFRwg iframe{transition:height .3s}.dzCDBUAznXSxVdGj1S7X.NFKvx2noTZuUABoQOIgw.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3,.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3{top:12px;bottom:unset}.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3 .h4aXscBoDD4zSt5DFRwg iframe{transition:none}}@media(min-width: 501px){.dzCDBUAznXSxVdGj1S7X.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6{--horiz-shift: 30px;--vert-shift: 30px}.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6{--horiz-shift: 50%;--vert-shift: 50%;transform:translate(-50%, -50%)}.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6 .h4aXscBoDD4zSt5DFRwg iframe{transition:height .3s}.dzCDBUAznXSxVdGj1S7X.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3{top:10px;bottom:unset;--horiz-shift: 30px}.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3{--horiz-shift: 50%;transform:translate(-50%, 0%)}.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3 .h4aXscBoDD4zSt5DFRwg iframe{transition:none}}@media(orientation: landscape)and (max-device-width: 500px){.dzCDBUAznXSxVdGj1S7X.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3{top:10px;bottom:unset;--horiz-shift: 10px}.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3{--horiz-shift: 50%;transform:translate(-50%, 0%)}.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6{--horiz-shift: 50%;--vert-shift: 50%;transform:translate(-50%, -50%)}.dzCDBUAznXSxVdGj1S7X.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6{--horiz-shift: 10px;--vert-shift: 10px}}",""]),r.locals={popup:"dzCDBUAznXSxVdGj1S7X",absolute:"fL5Owfu9xYWrxSlFekwz",fixed:"tFVNFALE8CgbdkspQgXJ",left:"TZbANCRE7ej6hWXvm4sw",right:"sLWfm6BmA5C2rP8RH2lh",top:"zyUt1ulGu7Lctcqt9Wwb",bottom:"NFKvx2noTZuUABoQOIgw",center:"sr2JfeVqmXom70U3vKtA",active:"yP6u_4fglSQcvruyoYvp",main:"FJkGA3xCbqzGT0n2EMy7",header:"A9lP13CP5JmkdVp3aYdq",header_hidden:"hoQR6MQKQAxgFUvjJ3vC",content:"h4aXscBoDD4zSt5DFRwg",slimclass:"XsSKBX1_k9QpApPDM1zs",close:"Fpgt_Kf0hCJU1CoBT8fx",small:"Y0n9jC_RhNVMcgcYWrA6",big:"AxucLDsdelBla_Bw3Fn3"};const a=r},470:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81),o=n.n(i),s=n(645),r=n.n(s)()(o());r.push([e.id,'.sftrMRAIFtK_kVzdUSLs[data-theme=light]{--fb-lib-header-popup-bg: #ffffff;--fb-lib-header-modal-bg: #ffffff;--fb-lib-content-bg: #fff;--fb-lib-close-cross: rgba(0, 0, 0, 0.3);--fb-lib-close-hover-bg: #d1d1d1}.sftrMRAIFtK_kVzdUSLs[data-theme=dark]{--fb-lib-header-popup-bg: #677a9e33;--fb-lib-header-modal-bg: #677a9e33;--fb-lib-content-bg: rgba(50, 49, 53, 1);--fb-lib-close-cross: rgba(255, 255, 255, 0.3);--fb-lib-close-hover-bg: rgba(255, 255, 255, 0.12)}.sftrMRAIFtK_kVzdUSLs{overflow-x:hidden;width:100%;height:100%;position:relative;--fb-lib-button-border-radius: 8px;--fb-lib-button-font-size: 14px;--fb-lib-button-font-weight: 400;--fb-lib-button-font-family: "YS Text", "Helvetica Neue", Helvetica, Arial, sans-serif;--fb-lib-button-font-color: rgba(0, 0, 0, 0.85);--fb-lib-button-bg: #f0f0f0;--fb-lib-button-shadow: 0px 4px 7px rgba(0, 0, 0, 0.25);--fb-lib-close-focus-color: #4285f4}.gWQ6kLPL_6XKDUip4ZQN{inset:0;position:absolute;pointer-events:none}.qUmstruTeB5JYz66X8oS{position:absolute;visibility:hidden;width:100%;height:1px;left:0;top:0}',""]),r.locals={root:"sftrMRAIFtK_kVzdUSLs",overflow_wrapper:"gWQ6kLPL_6XKDUip4ZQN","scroll-observer-line":"qUmstruTeB5JYz66X8oS"};const a=r},416:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81),o=n.n(i),s=n(645),r=n.n(s)()(o());r.push([e.id,"body.ya-feedback__modal_open {\n    overflow: hidden;\n}\n",""]);const a=r},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,o,s){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(r[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);i&&r[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},822:function(e,t,n){e.exports=function(e){function t(e){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[o.toLowerCase()]=o);var r=e[t.ontouchstart],a=e[t.ontouchtap],l=e[t.onclick];delete e[t.ontouchtap],e[t.onclick||"onClick"]=function(e){if(l&&l(e),!s)return a(e)},e[t.ontouchstart||"onTouchStart"]=function(e){var t=n(e);if(s=!0,addEventListener("touchend",(function e(o){removeEventListener("touchend",e);var s=n(o);Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2))<i.threshold&&a(o)})),r)return r(e)}}function n(e){var t=e.changedTouches&&e.changedTouches[0]||e.touches&&e.touches[0]||e;return{x:t.pageX,y:t.pageY,target:t.target}}var i={threshold:10},o=void 0,s=void 0;return function(n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);if(!o){o=!0;var r=e.options.vnode;e.options.vnode=function(e){var n=e.attributes;if(n)for(var i in n)if(n.hasOwnProperty(i)&&"ontouchtap"===i.toLowerCase()){t(n);break}r&&r(e)}}}}(n(400))},400:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Component:()=>A,Fragment:()=>g,cloneElement:()=>O,createContext:()=>M,createElement:()=>b,createRef:()=>y,h:()=>b,hydrate:()=>I,isValidElement:()=>r,options:()=>o,render:()=>Q,toChildArray:()=>z});var i,o,s,r,a,l,u,c,d,h={},v=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function p(e,t){for(var n in t)e[n]=t[n];return e}function f(e){var t=e.parentNode;t&&t.removeChild(e)}function b(e,t,n){var o,s,r,a={};for(r in t)"key"==r?o=t[r]:"ref"==r?s=t[r]:a[r]=t[r];if(arguments.length>2&&(a.children=arguments.length>3?i.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===a[r]&&(a[r]=e.defaultProps[r]);return m(e,a,o,s,null)}function m(e,t,n,i,r){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++s:r};return null==r&&null!=o.vnode&&o.vnode(a),a}function y(){return{current:null}}function g(e){return e.children}function w(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||_.test(t)?n:n+"px"}function k(e,t,n,i,o){var s;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||w(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||w(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?i||e.addEventListener(t,s?S:x,s):e.removeEventListener(t,s?S:x,s);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function x(e){a=!0;try{return this.l[e.type+!1](o.event?o.event(e):e)}finally{a=!1}}function S(e){a=!0;try{return this.l[e.type+!0](o.event?o.event(e):e)}finally{a=!1}}function A(e,t){this.props=e,this.context=t}function C(e,t){if(null==t)return e.__?C(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?C(e):null}function E(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return E(e)}}function P(e){a?setTimeout(e):c(e)}function F(e){(!e.__d&&(e.__d=!0)&&l.push(e)&&!U.__r++||u!==o.debounceRendering)&&((u=o.debounceRendering)||P)(U)}function U(){var e,t,n,i,o,s,r,a;for(l.sort((function(e,t){return e.__v.__b-t.__v.__b}));e=l.shift();)e.__d&&(t=l.length,i=void 0,o=void 0,r=(s=(n=e).__v).__e,(a=n.__P)&&(i=[],(o=p({},s)).__v=s.__v+1,T(a,s,o,n.__n,void 0!==a.ownerSVGElement,null!=s.__h?[r]:null,i,null==r?C(s):r,s.__h),X(i,s),s.__e!=r&&E(s)),l.length>t&&l.sort((function(e,t){return e.__v.__b-t.__v.__b})));U.__r=0}function L(e,t,n,i,o,s,r,a,l,u){var c,d,_,p,f,b,y,w=i&&i.__k||v,k=w.length;for(n.__k=[],c=0;c<t.length;c++)if(null!=(p=n.__k[c]=null==(p=t[c])||"boolean"==typeof p?null:"string"==typeof p||"number"==typeof p||"bigint"==typeof p?m(null,p,null,null,p):Array.isArray(p)?m(g,{children:p},null,null,null):p.__b>0?m(p.type,p.props,p.key,p.ref?p.ref:null,p.__v):p)){if(p.__=n,p.__b=n.__b+1,null===(_=w[c])||_&&p.key==_.key&&p.type===_.type)w[c]=void 0;else for(d=0;d<k;d++){if((_=w[d])&&p.key==_.key&&p.type===_.type){w[d]=void 0;break}_=null}T(e,p,_=_||h,o,s,r,a,l,u),f=p.__e,(d=p.ref)&&_.ref!=d&&(y||(y=[]),_.ref&&y.push(_.ref,null,p),y.push(d,p.__c||f,p)),null!=f?(null==b&&(b=f),"function"==typeof p.type&&p.__k===_.__k?p.__d=l=D(p,l,e):l=j(e,p,_,w,f,l),"function"==typeof n.type&&(n.__d=l)):l&&_.__e==l&&l.parentNode!=e&&(l=C(_))}for(n.__e=b,c=k;c--;)null!=w[c]&&("function"==typeof n.type&&null!=w[c].__e&&w[c].__e==n.__d&&(n.__d=B(i).nextSibling),N(w[c],w[c]));if(y)for(c=0;c<y.length;c++)H(y[c],y[++c],y[++c])}function D(e,t,n){for(var i,o=e.__k,s=0;o&&s<o.length;s++)(i=o[s])&&(i.__=e,t="function"==typeof i.type?D(i,t,n):j(n,i,i,o,i.__e,t));return t}function z(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){z(e,t)})):t.push(e)),t}function j(e,t,n,i,o,s){var r,a,l;if(void 0!==t.__d)r=t.__d,t.__d=void 0;else if(null==n||o!=s||null==o.parentNode)e:if(null==s||s.parentNode!==e)e.appendChild(o),r=null;else{for(a=s,l=0;(a=a.nextSibling)&&l<i.length;l+=1)if(a==o)break e;e.insertBefore(o,s),r=s}return void 0!==r?r:o.nextSibling}function B(e){var t,n,i;if(null==e.type||"string"==typeof e.type)return e.__e;if(e.__k)for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(i=B(n)))return i;return null}function T(e,t,n,i,s,r,a,l,u){var c,d,h,v,_,f,b,m,y,w,k,x,S,C,E,P=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(u=n.__h,l=t.__e=n.__e,t.__h=null,r=[l]),(c=o.__b)&&c(t);try{e:if("function"==typeof P){if(m=t.props,y=(c=P.contextType)&&i[c.__c],w=c?y?y.props.value:c.__:i,n.__c?b=(d=t.__c=n.__c).__=d.__E:("prototype"in P&&P.prototype.render?t.__c=d=new P(m,w):(t.__c=d=new A(m,w),d.constructor=P,d.render=G),y&&y.sub(d),d.props=m,d.state||(d.state={}),d.context=w,d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=P.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=p({},d.__s)),p(d.__s,P.getDerivedStateFromProps(m,d.__s))),v=d.props,_=d.state,d.__v=t,h)null==P.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==P.getDerivedStateFromProps&&m!==v&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(m,w),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(m,d.__s,w)||t.__v===n.__v){for(t.__v!==n.__v&&(d.props=m,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[],d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(m,d.__s,w),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(v,_,f)}))}if(d.context=w,d.props=m,d.__P=e,x=o.__r,S=0,"prototype"in P&&P.prototype.render){for(d.state=d.__s,d.__d=!1,x&&x(t),c=d.render(d.props,d.state,d.context),C=0;C<d._sb.length;C++)d.__h.push(d._sb[C]);d._sb=[]}else do{d.__d=!1,x&&x(t),c=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++S<25);d.state=d.__s,null!=d.getChildContext&&(i=p(p({},i),d.getChildContext())),h||null==d.getSnapshotBeforeUpdate||(f=d.getSnapshotBeforeUpdate(v,_)),E=null!=c&&c.type===g&&null==c.key?c.props.children:c,L(e,Array.isArray(E)?E:[E],t,n,i,s,r,a,l,u),d.base=t.__e,t.__h=null,d.__h.length&&a.push(d),b&&(d.__E=d.__=null),d.__e=!1}else null==r&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=V(n.__e,t,n,i,s,r,a,u);(c=o.diffed)&&c(t)}catch(e){t.__v=null,(u||null!=r)&&(t.__e=l,t.__h=!!u,r[r.indexOf(l)]=null),o.__e(e,t,n)}}function X(e,t){o.__c&&o.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){o.__e(e,t.__v)}}))}function V(e,t,n,o,s,r,a,l){var u,c,d,v=n.props,_=t.props,p=t.type,b=0;if("svg"===p&&(s=!0),null!=r)for(;b<r.length;b++)if((u=r[b])&&"setAttribute"in u==!!p&&(p?u.localName===p:3===u.nodeType)){e=u,r[b]=null;break}if(null==e){if(null===p)return document.createTextNode(_);e=s?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,_.is&&_),r=null,l=!1}if(null===p)v===_||l&&e.data===_||(e.data=_);else{if(r=r&&i.call(e.childNodes),c=(v=n.props||h).dangerouslySetInnerHTML,d=_.dangerouslySetInnerHTML,!l){if(null!=r)for(v={},b=0;b<e.attributes.length;b++)v[e.attributes[b].name]=e.attributes[b].value;(d||c)&&(d&&(c&&d.__html==c.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(function(e,t,n,i,o){var s;for(s in n)"children"===s||"key"===s||s in t||k(e,s,null,n[s],i);for(s in t)o&&"function"!=typeof t[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===t[s]||k(e,s,t[s],n[s],i)}(e,_,v,s,l),d)t.__k=[];else if(b=t.props.children,L(e,Array.isArray(b)?b:[b],t,n,o,s&&"foreignObject"!==p,r,a,r?r[0]:n.__k&&C(n,0),l),null!=r)for(b=r.length;b--;)null!=r[b]&&f(r[b]);l||("value"in _&&void 0!==(b=_.value)&&(b!==e.value||"progress"===p&&!b||"option"===p&&b!==v.value)&&k(e,"value",b,v.value,!1),"checked"in _&&void 0!==(b=_.checked)&&b!==e.checked&&k(e,"checked",b,v.checked,!1))}return e}function H(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){o.__e(e,n)}}function N(e,t,n){var i,s;if(o.unmount&&o.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||H(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){o.__e(e,t)}i.base=i.__P=null,e.__c=void 0}if(i=e.__k)for(s=0;s<i.length;s++)i[s]&&N(i[s],t,n||"function"!=typeof e.type);n||null==e.__e||f(e.__e),e.__=e.__e=e.__d=void 0}function G(e,t,n){return this.constructor(e,n)}function Q(e,t,n){var s,r,a;o.__&&o.__(e,t),r=(s="function"==typeof n)?null:n&&n.__k||t.__k,a=[],T(t,e=(!s&&n||t).__k=b(g,null,[e]),r||h,h,void 0!==t.ownerSVGElement,!s&&n?[n]:r?null:t.firstChild?i.call(t.childNodes):null,a,!s&&n?n:r?r.__e:t.firstChild,s),X(a,e)}function I(e,t){Q(e,t,I)}function O(e,t,n){var o,s,r,a=p({},e.props);for(r in t)"key"==r?o=t[r]:"ref"==r?s=t[r]:a[r]=t[r];return arguments.length>2&&(a.children=arguments.length>3?i.call(arguments,2):n),m(e.type,a,o||e.key,s||e.ref,null)}function M(e,t){var n={__c:t="__cC"+d++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,i;return this.getChildContext||(n=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,F(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}i=v.slice,o={__e:function(e,t,n,i){for(var o,s,r;t=t.__;)if((o=t.__c)&&!o.__)try{if((s=o.constructor)&&null!=s.getDerivedStateFromError&&(o.setState(s.getDerivedStateFromError(e)),r=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,i||{}),r=o.__d),r)return o.__E=o}catch(t){e=t}throw e}},s=0,r=function(e){return null!=e&&void 0===e.constructor},a=!1,A.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=p({},this.state),"function"==typeof e&&(e=e(p({},n),this.props)),e&&p(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),F(this))},A.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),F(this))},A.prototype.render=g,l=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,U.__r=0,d=0},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var s={},r=[],a=0;a<e.length;a++){var l=e[a],u=i.base?l[0]+i.base:l[0],c=s[u]||0,d="".concat(u," ").concat(c);s[u]=c+1;var h=n(d),v={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(v);else{var _=o(v,i);i.byIndex=a,t.splice(a,0,{identifier:d,updater:_,references:1})}r.push(d)}return r}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var s=i(e=e||[],o=o||{});return function(e){e=e||[];for(var r=0;r<s.length;r++){var a=n(s[r]);t[a].references--}for(var l=i(e,o),u=0;u<s.length;u++){var c=n(s[u]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}s=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},575:e=>{"use strict";e.exports=function(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={id:i,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";n.r(i),n.d(i,{App:()=>Oe,Feedback:()=>Me});var e=n(400);const t="PYTHIA_SESSION_DATA",o="survey.embed.rendered",s="survey.embed.page_switched",r="survey.embed.left_last_page",a="survey.embed.height_changed";var l,u;!function(e){e.Ru="ru",e.Kz="kz",e.By="by",e.Ua="ua",e.Com="com",e.ComTr="com.tr",e.Uz="uz"}(l||(l={})),function(e){e.TLD="tld",e.INIT="init"}(u||(u={}));const c="https://yastatic.net/s3/distribution/pythia/feedback-lib/latest";function d(e){return Object.fromEntries(Object.entries(e).filter((([e,t])=>void 0!==t)))}function h(){const e=window.location.origin.split(".").pop();return"tr"===e?l.ComTr:Object.values(l).includes(e)&&e||l.Ru}var v,_=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};!function(e){e.RENDERED="ya:feedback:survey:rendered",e.SYNC="ya:feedback:survey:sync",e.SKIP="ya:feedback:survey:skip",e.FINISHED="ya:feedback:survey:finished",e.CLOSE_ACTIVE="ya:feedback:active_survey:close",e.SUITABLE="ya:feedback:suitable",e.SHOW_PASSIVE="ya:feedback:passive_survey:show",e.CLOSE_PASSIVE="ya:feedback:passive_survey:close",e.HEIGHT_CHANGED="ya:feedback:height_changed"}(v||(v={}));class p{constructor(e,t){this.name=e,this.data=t}}class f{constructor(e,t,n,i,o,s,r=!0){this.isFinished=!1,this.isRendered=!1,this.enabled=!0,this.slug=e.slug,this.owner_id=t,this.uid=s,this.events=e.events,this.appearance=e.appearance,this.fulfilled_events={},this.enabled=r,this.getQueryParams=i;const a=(null==n?void 0:n.host.endsWith("."))?h():"";this.baseUrl=`${null==n?void 0:n.protocol}${null==n?void 0:n.host}${a}${null==n?void 0:n.path}`,this.dispatchEvent=o,this.events.forEach((e=>this.fulfilled_events[e.event]=!1))}setFulfilled(e){this.fulfilled_events[e]=!0}setRendered(){this.isRendered=!0,this.dispatchEvent(new p(v.RENDERED,{detail:{survey:this}}))}setClosed(){this.dispatchEvent(new p(v.CLOSE_ACTIVE,{detail:{survey:this}}))}setEnabled(e){this.enabled=e}isFullfilled(e){return this.fulfilled_events[e]}checkNoAnnoy(){return _(this,void 0,void 0,(function*(){const e=new URL(`${this.baseUrl}/no-annoy/sync`);e.search=this.getNoAnnoyQueryParams();const t=yield fetch(e,{method:"GET",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}}),n=yield t.json();return this.dispatchEvent(new p(v.SYNC,{detail:{survey:this,response:n}})),n.show||!1}))}getNoAnnoyQueryParams(){const e={owner_id:this.owner_id,site:window.location.hostname||"localhost",slug:this.slug};return this.uid&&(e.uid=this.uid),String(new URLSearchParams(e))}skip(){return _(this,void 0,void 0,(function*(){if(this.isFinished)return;const e=new URL(`${this.baseUrl}/no-annoy/skip`);e.search=this.getNoAnnoyQueryParams();const t=yield fetch(e,{method:"GET",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}}),n=yield t.json();return this.dispatchEvent(new p(v.SKIP,{detail:{survey:this,response:n}})),t.ok}))}setFinished(){this.isFinished=!0,this.dispatchEvent(new p(v.FINISHED,{detail:{survey:this}}))}checkShow(e){var t;return _(this,void 0,void 0,(function*(){let n=!1;if(!this.enabled||this.isRendered||this.isFinished)return!1;const i=Object.keys(this.fulfilled_events).filter((e=>["onload","scroll","reachGoal","session"].includes(e))),o=i.length>0&&i.every((e=>this.fulfilled_events[e])),s=null===(t=this.fulfilled_events)||void 0===t?void 0:t.action;switch(e){case"onload":case"scroll":case"reachGoal":case"session":n=o;break;case"action":n=s;break;case"survey_enabled":n=o||s;break;default:n=!1}return n&&this.checkNoAnnoy()}))}getPollUrl(e,t){var n,i,o,s,r,a,l,u,c,v,_,p;const f=this.appearance||{},b=d({spinner_view:null===(i=null===(n=null==f?void 0:f.branding)||void 0===n?void 0:n.spinner)||void 0===i?void 0:i.view,spinner_color:null===(s=null===(o=null==f?void 0:f.branding)||void 0===o?void 0:o.spinner)||void 0===s?void 0:s.color,underlay_bg:null===(a=null===(r=null==f?void 0:f.branding)||void 0===r?void 0:r.underlay)||void 0===a?void 0:a.bg,dark_spinner_color:null===(c=null===(u=null===(l=null==f?void 0:f.branding)||void 0===l?void 0:l.darkTheme)||void 0===u?void 0:u.spinner)||void 0===c?void 0:c.color,dark_underlay_bg:null===(p=null===(_=null===(v=null==f?void 0:f.branding)||void 0===v?void 0:v.darkTheme)||void 0===_?void 0:_.underlay)||void 0===p?void 0:p.bg}),m=Object.assign(this.getQueryParams(),b,{theme_mode:t,_origin_:e});return((e,t,n)=>{if(""===e)return"";const i=h(),o=new URL(`https://yandex.${i}/poll/feedback/enter/${e}`),s={_footer_enable_:"0",_embedded_:"1",_origin_:window.location.href};return n&&(s._height_="210px"),o.search=new URLSearchParams(Object.assign(Object.assign({},s),t)).toString(),o.toString()})(this.slug,m,null==f?void 0:f.isHeightAuto)}}class b extends f{skip(){return _(this,void 0,void 0,(function*(){return this.dispatchEvent(new p(v.SKIP,{detail:{survey:this}})),!0}))}}const m=class{constructor(){this.surveys=[],this.query_params={},this.event_callbacks={},this.surveys_disabled=!1}init(e,t){const{baseUrl:n,uid:i,lang:o="ru",testIds:s,customParams:r,integrationType:a}=t;this.owner_id=e,this.apiUrl=n||{host:"surveys.yandex.",path:"/api/v0/feedback",protocol:"https://"},this.query_params={default:{}},this.uid=i,this.lang=o,this.test_ids=s,this.event_callbacks={},this.custom_params=r,this.integration_type=a}dispatchEvent(e){var t;null===(t=this.event_callbacks[e.name])||void 0===t||t.forEach((t=>t(e.data)))}addEventListener(e,t){this.event_callbacks[e]=this.event_callbacks[e]||[],this.event_callbacks[e].push(t)}removeEventListener(e,t){var n;this.event_callbacks[e]=null===(n=this.event_callbacks[e])||void 0===n?void 0:n.filter((e=>e!==t))}fetchActiveSurveys(){return e=this,t=void 0,i=function*(){const e=this.apiUrl.host.endsWith(".")?h():"",t=new URL(`\n            ${this.apiUrl.protocol}${this.apiUrl.host}${e}${this.apiUrl.path}/survey/suitable\n        `),n={owner_id:this.owner_id,source_url:window.location.href};this.lang&&(n.lang=this.lang),this.uid&&(n.uid=this.uid),this.test_ids&&(n["test-id"]=this.test_ids.join(",")),t.search=String(new URLSearchParams(n));const i=yield fetch(t,{method:this.custom_params?"POST":"GET",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:this.custom_params?JSON.stringify({customParams:this.custom_params}):void 0}),o=yield i.json();this.surveys=null==o?void 0:o.activeFeedbackSurveys.map((e=>new f(e,this.owner_id,this.apiUrl,this.getQueryParams.bind(this,[e.slug]),this.dispatchEvent.bind(this),this.uid,!this.surveys_disabled))),Array.isArray(this.surveys)||(this.surveys=[]);const s=null==o?void 0:o.passiveFeedbackSurvey;this.passive_feedback=s?new f(Object.assign(Object.assign({},s),{events:(null==s?void 0:s.events)||[]}),this.owner_id,this.apiUrl,this.getQueryParams.bind(this,[s.slug]),this.dispatchEvent.bind(this),this.uid,!this.surveys_disabled):null,this.dispatchEvent(new p(v.SUITABLE,{detail:{suitable_surveys:o}}))},new((n=void 0)||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i}disableAllSurveys(){var e;this.surveys_disabled=!0,null===(e=this.surveys)||void 0===e||e.forEach((e=>e.setEnabled(!1)))}enableAllSurveys(){var e;this.surveys_disabled=!1,null===(e=this.surveys)||void 0===e||e.forEach((e=>e.setEnabled(!0)))}getSurveysByCondition(e){return this.surveys.filter((t=>t.events.some((t=>t.event===e.event&&t.value===e.value))))}getSurveys(){return this.surveys}getSurveyBySlug(e){return this.surveys.find((t=>t.slug===e))}hasPassiveFeedback(){var e;return Boolean(null===(e=this.passive_feedback)||void 0===e?void 0:e.slug)}getPassiveFeedback(){return this.passive_feedback}setQueryParams(e,t){this.query_params[e]=t}getQueryParams(e){return Object.assign({_widget_type_:"web",_wiget_web_integration_type_:this.integration_type},this.query_params.default,this.query_params[e])}},y=(0,e.createContext)("light"),g=(0,e.createContext)("ru"),w=(0,e.createContext)(u.TLD);var k,x,S,A,C=0,E=[],P=[],F=e.options.__b,U=e.options.__r,L=e.options.diffed,D=e.options.__c,z=e.options.unmount;function j(t,n){e.options.__h&&e.options.__h(x,t,C||n),C=0;var i=x.__H||(x.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({__V:P}),i.__[t]}function B(e){return C=1,function(e,t,n){var i=j(k++,2);if(i.t=e,!i.__c&&(i.__=[R(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=x,!x.u)){x.u=!0;var o=x.shouldComponentUpdate;x.shouldComponentUpdate=function(e,t,n){if(!i.__c.__H)return!0;var s=i.__c.__H.__.filter((function(e){return e.__c}));if(s.every((function(e){return!e.__N})))return!o||o.call(this,e,t,n);var r=!1;return s.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(r=!0)}})),!(!r&&i.__c.props===e)&&(!o||o.call(this,e,t,n))}}return i.__N||i.__}(R,e)}function T(t,n){var i=j(k++,3);!e.options.__s&&M(i.__H,n)&&(i.__=t,i.i=n,x.__H.__h.push(i))}function X(e){return C=5,V((function(){return{current:e}}),[])}function V(e,t){var n=j(k++,7);return M(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function H(e){var t=x.context[e.__c],n=j(k++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(x)),t.props.value):e.__}function N(){for(var t;t=E.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(I),t.__H.__h.forEach(O),t.__H.__h=[]}catch(n){t.__H.__h=[],e.options.__e(n,t.__v)}}e.options.__b=function(e){x=null,F&&F(e)},e.options.__r=function(e){U&&U(e),k=0;var t=(x=e.__c).__H;t&&(S===x?(t.__h=[],x.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=P,e.__N=e.i=void 0}))):(t.__h.forEach(I),t.__h.forEach(O),t.__h=[])),S=x},e.options.diffed=function(t){L&&L(t);var n=t.__c;n&&n.__H&&(n.__H.__h.length&&(1!==E.push(n)&&A===e.options.requestAnimationFrame||((A=e.options.requestAnimationFrame)||Q)(N)),n.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==P&&(e.__=e.__V),e.i=void 0,e.__V=P}))),S=x=null},e.options.__c=function(t,n){n.some((function(t){try{t.__h.forEach(I),t.__h=t.__h.filter((function(e){return!e.__||O(e)}))}catch(i){n.some((function(e){e.__h&&(e.__h=[])})),n=[],e.options.__e(i,t.__v)}})),D&&D(t,n)},e.options.unmount=function(t){z&&z(t);var n,i=t.__c;i&&i.__H&&(i.__H.__.forEach((function(e){try{I(e)}catch(e){n=e}})),i.__H=void 0,n&&e.options.__e(n,i.__v))};var G="function"==typeof requestAnimationFrame;function Q(e){var t,n=function(){clearTimeout(i),G&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);G&&(t=requestAnimationFrame(n))}function I(e){var t=x,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),x=t}function O(e){var t=x;e.__c=e.__(),x=t}function M(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function R(e,t){return"function"==typeof t?t(e):t}function J(e,t){var n,i;const o=h();null===(i=null===(n=null==e?void 0:e.current)||void 0===n?void 0:n.contentWindow)||void 0===i||i.postMessage({event:"survey.embed.set_theme_mode",mode:t},`https://yandex.${o}`)}function Y(){return H(y)}function q(e,t,n,i){T((()=>{i&&J(e,t)}),[e,t,n,i])}function W(){return H(g)}function Z(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof RegExp||e instanceof Date||e instanceof Set||e instanceof Map)}function K(e,t){return Object.keys(t).forEach((n=>{const i=t[n],o=e[n];Z(i)&&Z(o)?e[n]=K(o,i):e[n]=i})),e}const $={button:function(e){var t;const n=(null==e?void 0:e.button)||{},i=null==n?void 0:n.bg,o=null===(t=null==n?void 0:n.border)||void 0===t?void 0:t.radius,s=null==n?void 0:n.shadow,r=(null==n?void 0:n.font)||{};return{"--fb-lib-button-bg":i,"--fb-lib-button-border-radius":o,"--fb-lib-button-shadow":s,"--fb-lib-button-font-size":null==r?void 0:r.size,"--fb-lib-button-font-weight":null==r?void 0:r.weight,"--fb-lib-button-font-family":null==r?void 0:r.family,"--fb-lib-button-font-color":null==r?void 0:r.color}},modal:function(e){var t;return{"--fb-lib-header-modal-bg":null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.bg}},popup:function(e){var t;return{"--fb-lib-header-popup-bg":null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.bg}}};function ee(e,t,n){var i;const o=K({header:{bg:null==(i=e)?void 0:i.headerBg},spinner:{view:null==i?void 0:i.spinnerView},underlay:{bg:null==i?void 0:i.underlayBg},darkTheme:{header:{bg:null==i?void 0:i.darkHeaderBg},underlay:{bg:null==i?void 0:i.darkUnderlayBg}}},(null==e?void 0:e.branding)||{}),s=$[n],r=d(s(o));return"light"===t?r:K(r,d(s((null==o?void 0:o.darkTheme)||{})))}const te=JSON.parse('{"am":{"feedback":{"button.label":"ግብረ መልስ ይላኩ","modal.close":"Close survey","popup.close":"Close survey"}},"ar":{"feedback":{"button.label":"اترك ملاحظة","modal.close":"Close survey","popup.close":"Close survey"}},"az":{"feedback":{"button.label":"Rəy bildir","modal.close":"Close survey","popup.close":"Close survey"}},"be":{"feedback":{"button.label":"Пакінуць водгук","modal.close":"Закрыть опрос","popup.close":"Закрыть опрос"}},"de":{"feedback":{"button.label":"Feedback geben","modal.close":"Close survey","popup.close":"Close survey"}},"en":{"feedback":{"button.label":"Send feedback","modal.close":"Close survey","popup.close":"Close survey"}},"es":{"feedback":{"button.label":"Enviar comentarios","modal.close":"Close survey","popup.close":"Close survey"}},"fi":{"feedback":{"button.label":"Jätä palautetta","modal.close":"Close survey","popup.close":"Close survey"}},"fr":{"feedback":{"button.label":"Laisser un avis","modal.close":"Close survey","popup.close":"Close survey"}},"he":{"feedback":{"button.label":"שלחו משוב","modal.close":"Close survey","popup.close":"Close survey"}},"hi":{"feedback":{"button.label":"फीड़बैक दें","modal.close":"Close survey","popup.close":"Close survey"}},"hy":{"feedback":{"button.label":"Կարծիք թողնել","modal.close":"Закрыть опрос","popup.close":"Закрыть опрос"}},"id":{"feedback":{"button.label":"Berikan masukan","modal.close":"Close survey","popup.close":"Close survey"}},"it":{"feedback":{"button.label":"Invia feedback","modal.close":"Close survey","popup.close":"Close survey"}},"ka":{"feedback":{"button.label":"შეფასების დატოვება","modal.close":"Close survey","popup.close":"Close survey"}},"kk":{"feedback":{"button.label":"Пікір қалдыру","modal.close":"Закрыть опрос","popup.close":"Закрыть опрос"}},"ko":{"feedback":{"button.label":"피드백 보내기","modal.close":"설문조사 닫기","popup.close":"설문조사 닫기"}},"ky":{"feedback":{"button.label":"Пикир калтыруу","modal.close":"Закрыть опрос","popup.close":"Закрыть опрос"}},"no":{"feedback":{"button.label":"Gi tilbakemelding","modal.close":"Close survey","popup.close":"Close survey"}},"pl":{"feedback":{"button.label":"Zostaw opinię","modal.close":"Close survey","popup.close":"Close survey"}},"ro":{"feedback":{"button.label":"Trimite feedback","modal.close":"Close survey","popup.close":"Close survey"}},"ru":{"feedback":{"button.label":"Оставить отзыв","modal.close":"Закрыть опрос","popup.close":"Закрыть опрос"}},"sr":{"feedback":{"button.label":"Ostavi utisak","modal.close":"Close survey","popup.close":"Close survey"}},"tg":{"feedback":{"button.label":"Гузоштани фикру мулоҳиза","modal.close":"Закрыть опрос","popup.close":"Закрыть опрос"}},"tr":{"feedback":{"button.label":"Yorum bırak","modal.close":"Close survey","popup.close":"Close survey"}},"ur":{"feedback":{"button.label":"فیڈبیک بھیجیں","modal.close":"Close survey","popup.close":"Close survey"}},"uz":{"feedback":{"button.label":"Sharh qoldirish","modal.close":"Закрыть опрос","popup.close":"Закрыть опрос"}}}'),ne=function(e){return e&&"string"==typeof e&&e in te?te[e].feedback:te.en.feedback};var ie=n(822),oe=n.n(ie),se=n(379),re=n.n(se),ae=n(795),le=n.n(ae),ue=n(569),ce=n.n(ue),de=n(575),he=n.n(de),ve=n(216),_e=n.n(ve),pe=n(589),fe=n.n(pe),be=n(90),me={attributes:{"data-project":"feedback-lib"}};me.styleTagTransform=fe(),me.setAttributes=he(),me.insert=ce().bind(null,"head"),me.domAPI=le(),me.insertStyleElement=_e(),re()(be.Z,me);const ye=be.Z&&be.Z.locals?be.Z.locals:void 0;oe()();const ge=function(t){const n=Y();return(0,e.h)("button",{className:`${ye.this} ${t.className}`,onClick:t.onClick,style:{backgroundImage:`url(${c}/images/cross-${n}.svg)`},"aria-label":t.closeLabel,"data-testid":"fb-lib-close-button"})};var we=n(917),ke={attributes:{"data-project":"feedback-lib"}};ke.styleTagTransform=fe(),ke.setAttributes=he(),ke.insert=ce().bind(null,"head"),ke.domAPI=le(),ke.insertStyleElement=_e(),re()(we.Z,ke);const xe=we.Z&&we.Z.locals?we.Z.locals:void 0,Se=30,Ae=function(t){var n;const i=W(),l=Y(),{survey:u,onClose:d,showHeader:h=!0,direction:v="bottom-left"}=t,_=(null==u?void 0:u.appearance)||{},p=ee(_,l,"popup"),f=V((()=>l),[]),b=V((()=>window.location.href),[]),m=1e3*(null===(n=null==_?void 0:_.closeAfterSeconds)||void 0===n?void 0:n.time)||1e3,[y,g]=B(!1),[w,k]=B(210),[x,S]=B(document.body.scrollHeight),[A,E]=B(window.innerHeight),[P,F]=B(window.innerWidth),[U,L]=B(w>A?"big":"small"),D=X(null),z=X(null),j=u.getPollUrl(b,f),H=e=>{let t=e;return h&&(t+=36),e>A&&(t+=10),t},[N,G]=B(H(w)>=x?"absolute":"fixed");T((()=>{L(D.current.getBoundingClientRect().top<=Se&&D.current.getBoundingClientRect().bottom<=Se||H(w)+Se>=A?"big":"small"),G(H(w)>=x?"absolute":"fixed"),z.current.classList.toggle(xe.slimclass,P<=500)}),[w,A,x,P]);const Q=()=>{g(!1),d(),null==u||u.setClosed()},I=e=>{var t;if(e.source!==z.current.contentWindow)return;if(!u)return;const n=e.data;let i;if("string"==typeof n)try{i=JSON.parse(n)}catch(e){i=null}else i=n;(null==i?void 0:i.event)===o&&(g(!0),null==u||u.setRendered()),(null==i?void 0:i.event)===s&&-1!==(null==i?void 0:i.payload.pageNumber)&&k(null==i?void 0:i.payload.height),(null==i?void 0:i.event)!==a||u.isFinished||k(null===(t=null==i?void 0:i.payload)||void 0===t?void 0:t.height),(null==i?void 0:i.event)===r&&(k(210),u.setFinished(),setTimeout(Q,m))},O=function(e,t){return C=8,V((function(){return e}),t)}((()=>{!y||H(w)>=x||(D.current.getBoundingClientRect().top<=Se&&D.current.getBoundingClientRect().bottom<=Se||H(w)+Se>=A?w>A-Se+window.scrollY?D.current.style.top=10-window.scrollY+"px":D.current.style.top=A-w-10-Se+"px":D.current.style.top="")}),[w,A,x,y]);T((()=>(O(),window.addEventListener("scroll",O),function(){window.removeEventListener("scroll",O)})),[O]),T((()=>{window.addEventListener("message",I);const e=new ResizeObserver((e=>{S(e[0].contentRect.height),E(window.innerHeight),F(window.innerWidth)}));return e.observe(document.body),function(){window.removeEventListener("message",I),e.unobserve(document.body)}}),[]),q(z,l,j,y);const M=[xe.popup].concat(v.split("-").map((e=>xe[e])));return y&&M.push(xe.active),M.push(xe[U]),M.push(xe[N]),null!==u&&(0,e.h)("div",{className:M.join(" "),ref:D,style:p},(0,e.h)("div",{className:xe.main},(0,e.h)(ge,{className:xe.close,onClick:Q,closeLabel:ne(i)["popup.close"]}),(0,e.h)("div",{className:h?xe.header:`${xe.header} ${xe.header_hidden}`,style:h?{backgroundImage:`url(${c}/images/yandex-logo-${l}.svg)`}:{}}),(0,e.h)("div",{className:h?xe.content:`${xe.content} ${xe.header_hidden}`},(0,e.h)("iframe",{src:j,height:`${w}px`,ref:z,scrolling:"no",onLoad:()=>{J(z,l)}}))))};var Ce=n(211),Ee={attributes:{"data-project":"feedback-lib"}};Ee.styleTagTransform=fe(),Ee.setAttributes=he(),Ee.insert=ce().bind(null,"head"),Ee.domAPI=le(),Ee.insertStyleElement=_e(),re()(Ce.Z,Ee);const Pe=Ce.Z&&Ce.Z.locals?Ce.Z.locals:void 0;var Fe=n(416),Ue={attributes:{"data-project":"feedback-lib"}};Ue.styleTagTransform=fe(),Ue.setAttributes=he(),Ue.insert=ce().bind(null,"head"),Ue.domAPI=le(),Ue.insertStyleElement=_e(),re()(Fe.Z,Ue),Fe.Z&&Fe.Z.locals&&Fe.Z.locals;const Le=t=>{const{showHeader:n=!0,appearance:i={},onDismiss:o}=t,s=Y(),r=W(),a=ee(i,s,"modal"),l=X(null);return T((()=>{const e=l.current;if(!e)return;e.showModal();const t=e=>{e.preventDefault(),o()};return e.addEventListener("cancel",t),()=>{e.removeEventListener("cancel",t),e.open&&e.close()}}),[l,o]),(0,e.h)("div",{className:Pe.visible,style:a},(0,e.h)("dialog",{ref:l,className:Pe.main,onClick:e=>{e.target===l.current&&o()},"data-testid":"fb-lib-modal"},(0,e.h)(ge,{className:Pe.close,onClick:o,closeLabel:ne(r)["modal.close"]}),(0,e.h)("header",{className:n?Pe.header:`${Pe.header} ${Pe.header_hidden}`,style:{backgroundImage:`url(${c}/images/yandex-logo-${s}.svg)`}},t.title),(0,e.h)("div",{className:n?Pe.content:`${Pe.content} ${Pe.header_hidden}`},t.content)))};var De=n(837),ze={attributes:{"data-project":"feedback-lib"}};ze.styleTagTransform=fe(),ze.setAttributes=he(),ze.insert=ce().bind(null,"head"),ze.domAPI=le(),ze.insertStyleElement=_e(),re()(De.Z,ze);const je=De.Z&&De.Z.locals?De.Z.locals:void 0,Be=function({survey:t,origin:n,onLeftLastPage:i}){var l;const u=Y(),c=V((()=>u),[]),d=X(null),[h,v]=B(210),_=null!==(l=null==t?void 0:t.appearance)&&void 0!==l?l:{},p=(null==_?void 0:_.isHeightAuto)||!1,f=(null==t?void 0:t.slug)||"",b=t.getPollUrl(n,c);q(d,u,f,t.isRendered);const m=e=>{var n;if(null===d||null===d.current||e.source!==d.current.contentWindow)return;let l;if("string"==typeof e.data)try{l=JSON.parse(e.data)}catch(e){l=null}""!==f&&(null==l?void 0:l.event)===o&&t.setRendered(),""!==f&&l&&l.event===r&&(p&&v(210),i&&i()),p&&((null==l?void 0:l.event)===s&&-1!==(null==l?void 0:l.payload.pageNumber)&&v(null==l?void 0:l.payload.height),(null==l?void 0:l.event)===a&&v(null===(n=null==l?void 0:l.payload)||void 0===n?void 0:n.height))};return T((()=>(window.addEventListener("message",m),function(){window.removeEventListener("message",m)})),[]),(0,e.h)("div",{className:p&&je.iframeWrapper},(0,e.h)("iframe",{src:b,scrolling:p?"no":"auto",ref:d,height:p?`${h}px`:"auto",className:p&&je.heightAuto}))},Te=function(t){var n,i;const{survey:o,isModalVisible:s,onCloseModal:r,onShowModal:a,showHeader:l=!0}=t,d=Y(),h=V((()=>window.location.href),[]),v=W(),_=H(w),p=null!==(n=null==o?void 0:o.appearance)&&void 0!==n?n:{},f=(null==p?void 0:p.direction)||"right",b=function(e,t,n){return e===u.INIT?n:t||n}(_,null==p?void 0:p.lang,v),m=ee(p,d,"button"),y=(null==p?void 0:p.isButtonHidden)||!1,g=1e3*(null===(i=null==p?void 0:p.closeAfterSeconds)||void 0===i?void 0:i.time)||1e3,k=()=>{document.body.classList.remove("ya-feedback__modal_open"),r()};return(0,e.h)("div",null,!y&&(0,e.h)("div",{className:`${je.this} ${l?"":je.headerHidden} ${je[f]}`,style:m},(0,e.h)("button",{onClick:()=>{document.body.classList.add("ya-feedback__modal_open"),a()}},l&&(0,e.h)("img",{src:`${c}/images/logo-short.svg`,alt:"",height:12})," ",ne(b)["button.label"])),s&&(0,e.h)(Le,{content:(0,e.h)(Be,{survey:o,origin:h,onLeftLastPage:()=>{setTimeout(k,g)}}),showHeader:l,onDismiss:k,appearance:p}))};var Xe=n(470),Ve={attributes:{"data-project":"feedback-lib"}};Ve.styleTagTransform=fe(),Ve.setAttributes=he(),Ve.insert=ce().bind(null,"head"),Ve.domAPI=le(),Ve.insertStyleElement=_e(),re()(Xe.Z,Ve);const He=Xe.Z&&Xe.Z.locals?Xe.Z.locals:void 0;var Ne=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const Ge={fetch:null,init:null,fireEvent:null,setActiveFeedbackQueryParams:null,setPassiveFeedbackQueryParams:null,setDefaultQueryParams:null,setTheme:null,forceTheme:null,hideHeader:null,showHeader:null,showActiveFeedback:null,closeActiveFeedback:null,showPassiveFeedback:null,closePassiveFeedback:null,subscribe:null,unsubscribe:null,disableAllSurveys:null,enableAllSurveys:null,embed:(t=document.body)=>{const n=document.createElement("div");return t.appendChild(n),(0,e.render)((0,e.h)(Ie,null),n),()=>{t.removeChild(n)}},initEmbeddedApi:()=>new Qe};class Qe{constructor(){this.api=new m,Ge.init=this.init.bind(this),Ge.fetch=this.fetch.bind(this),Ge.setActiveFeedbackQueryParams=this.setActiveFeedbackQueryParams.bind(this),Ge.setDefaultQueryParams=this.setDefaultQueryParams.bind(this),Ge.subscribe=this.subscribe.bind(this),Ge.unsubscribe=this.unsubscribe.bind(this)}init(e,t){this.api.init(e,Object.assign({integrationType:"embedded"},t))}fetch(){return Ne(this,void 0,void 0,(function*(){return yield this.api.fetchActiveSurveys(),this.api.getSurveys()}))}subscribe(e,t){this.api.addEventListener(e,t)}unsubscribe(e,t){this.api.removeEventListener(e,t)}setActiveFeedbackQueryParams(e,t){this.api.setQueryParams(e,t)}setDefaultQueryParams(e){this.api.setQueryParams("default",e)}}class Ie extends e.Component{constructor(){super(Ie),this.timerIds={scroll:[],onload:[],action:[],reachGoal:[],session:[]},this.on_show_passive_callbacks=[],this.on_close_passive_callbacks=[],this.state={survey_active:null,has_passive_feedback:!1,observers:[],observer_active:!1,theme:null,is_header_hidden:!1,is_modal_visible:!1,is_theme_forced:!1,lang:"ru",lang_source:u.TLD},this.api=new m,this.scroll_observer_line_ref=(0,e.createRef)(),Ge.fireEvent=this.fireEvent.bind(this),Ge.init=this.init.bind(this),Ge.fetch=this.fetch.bind(this),Ge.setActiveFeedbackQueryParams=this.setActiveFeedbackQueryParams.bind(this),Ge.setPassiveFeedbackQueryParams=this.setPassiveFeedbackQueryParams.bind(this),Ge.setDefaultQueryParams=this.setDefaultQueryParams.bind(this),Ge.setTheme=this.setTheme.bind(this),Ge.forceTheme=this.forceTheme.bind(this),Ge.hideHeader=this.hideHeader.bind(this),Ge.showHeader=this.showHeader.bind(this),Ge.showActiveFeedback=this.showActiveFeedback.bind(this),Ge.closeActiveFeedback=this.closeActiveFeedback.bind(this),Ge.showPassiveFeedback=this.showPassiveFeedback.bind(this),Ge.closePassiveFeedback=this.closePassiveFeedback.bind(this),Ge.subscribe=this.subscribe.bind(this),Ge.unsubscribe=this.unsubscribe.bind(this),Ge.disableAllSurveys=this.disableAllSurveys.bind(this),Ge.enableAllSurveys=this.enableAllSurveys.bind(this)}fetch(){return Ne(this,void 0,void 0,(function*(){this.removeActiveFeedbackEventHandlers(),yield this.api.fetchActiveSurveys(),this.setupActiveFeedbackEventHandlers(),this.setState({has_passive_feedback:this.api.hasPassiveFeedback()})}))}fireEvent(e){return Ne(this,void 0,void 0,(function*(){this.api.getSurveysByCondition({event:"action",value:e}).forEach((e=>Ne(this,void 0,void 0,(function*(){e.events.filter((t=>"action"===t.event&&!e.isFullfilled("action"))).forEach(this.showActiveSurveyAfterDelay.bind(this,e))}))))}))}getLang(e){return e||(h()===l.Ru?"ru":"en")}init(e,t){(null==t?void 0:t.hideHeader)&&this.hideHeader(),(null==t?void 0:t.forceTheme)&&this.forceTheme(t.forceTheme);const n=this.getLang(null==t?void 0:t.lang);this.setState({lang:n,lang_source:(null==t?void 0:t.lang)?u.INIT:u.TLD}),this.api.init(e,Object.assign({integrationType:"common"},t))}subscribe(e,t){switch(e){case v.SHOW_PASSIVE:this.on_show_passive_callbacks.push(t);break;case v.CLOSE_PASSIVE:this.on_close_passive_callbacks.push(t);break;default:this.api.addEventListener(e,t)}}unsubscribe(e,t){var n,i;switch(e){case v.SHOW_PASSIVE:this.on_show_passive_callbacks=null===(n=this.on_show_passive_callbacks)||void 0===n?void 0:n.filter((e=>e!==t));break;case v.CLOSE_PASSIVE:this.on_close_passive_callbacks=null===(i=this.on_close_passive_callbacks)||void 0===i?void 0:i.filter((e=>e!==t));break;default:this.api.removeEventListener(e,t)}}setActiveFeedbackQueryParams(e,t){this.api.setQueryParams(e,t)}setPassiveFeedbackQueryParams(e){var t;const n=null===(t=this.api.getPassiveFeedback())||void 0===t?void 0:t.slug;this.api.setQueryParams(n,e)}setDefaultQueryParams(e){this.api.setQueryParams("default",e)}showActiveFeedback(e,t){var n;const i=(null==t?void 0:t.direction)||(null===(n=null==t?void 0:t.appearance)||void 0===n?void 0:n.direction)||"bottom-left",o=new b({appearance:Object.assign(Object.assign({},null==t?void 0:t.appearance),{direction:i}),slug:e,events:[]},"",null,this.api.getQueryParams.bind(this.api,[e]),(e=>{var n,i,o,s;switch(e.name){case v.RENDERED:null===(n=null==t?void 0:t.onRender)||void 0===n||n.call(t);break;case v.CLOSE_ACTIVE:null===(i=null==t?void 0:t.onClose)||void 0===i||i.call(t);break;case v.FINISHED:null===(o=null==t?void 0:t.onFinish)||void 0===o||o.call(t);break;case v.SKIP:null===(s=null==t?void 0:t.onSkip)||void 0===s||s.call(t)}}),"",!0);this.setState({survey_active:o})}closeActiveFeedback(e=!0){null!==this.state.survey_active&&(e&&this.state.survey_active.skip(),this.state.survey_active.setClosed(),this.setState({survey_active:null}))}showPassiveFeedback(){var e;this.setState({is_modal_visible:!0}),null===(e=this.on_show_passive_callbacks)||void 0===e||e.forEach((e=>e({detail:{survey:this.api.getPassiveFeedback()}})))}closePassiveFeedback(){var e;this.setState({is_modal_visible:!1}),null===(e=this.on_close_passive_callbacks)||void 0===e||e.forEach((e=>e({detail:{survey:this.api.getPassiveFeedback()}})))}renderPassiveFeedback(){var t;const n=this.api.getPassiveFeedback(),i=null!==(t=null==n?void 0:n.appearance)&&void 0!==t?t:{},o=this.state.is_modal_visible;return i.isButtonHidden||(Ge.showPassiveFeedback=null),(0,e.h)(Te,{survey:n,showHeader:!this.state.is_header_hidden,isModalVisible:o,onCloseModal:()=>this.closePassiveFeedback(),onShowModal:()=>this.showPassiveFeedback()})}renderActiveFeedback(){var t;const n=null===(t=this.state.survey_active.appearance)||void 0===t?void 0:t.direction;return(0,e.h)(Ae,{direction:n,showHeader:!this.state.is_header_hidden,survey:this.state.survey_active,onClose:()=>{this.state.survey_active.skip(),this.setState({survey_active:null})}})}renderScrollObserverLine(){return(0,e.h)("div",{ref:this.scroll_observer_line_ref,className:He["scroll-observer-line"]})}showActiveSurveyAfterDelay(e,t){var n;const i=window.setTimeout((()=>Ne(this,void 0,void 0,(function*(){document.hidden||(e.setFulfilled(t.event),(yield e.checkShow(t.event))&&this.setState({survey_active:e}))}))),null!==(n=t.delayMS)&&void 0!==n?n:0);this.timerIds[t.event].push(i)}showActiveSurveyAfterSession(e,n){if(!document.hidden)try{const{startedAt:i=0}=JSON.parse(window.localStorage.getItem(t)||"{}"),o=((null==n?void 0:n.delayMS)||0)-(Date.now()-i),s=window.setTimeout((()=>Ne(this,void 0,void 0,(function*(){e.setFulfilled(n.event),(yield e.checkShow(n.event))&&this.setState({survey_active:e})}))),o>0?o:0);this.timerIds[n.event].push(s)}catch(e){console.warn("Failed to access localStorage for session tracking:",e)}}setupOnloadEventHandlers(){this.api.getSurveys().forEach((e=>{0===e.events.length&&(e.events=[{event:"onload",delayMS:0}]),e.events.forEach((t=>{if(!e.isFullfilled(t.event))switch(t.event){case"onload":this.showActiveSurveyAfterDelay(e,t);break;case"session":this.updateSessionDataInLS(),this.showActiveSurveyAfterSession(e,t)}}))}))}updateSessionDataInLS(){try{const e=Date.now(),n=JSON.parse(window.localStorage.getItem(t)||"{}"),i=n.updatedAt||0,o=n.startedAt||0;i||o?e-i>=18e5?(n.updatedAt=e,n.startedAt=e):i&&o&&(n.updatedAt=e):(n.startedAt=e,n.updatedAt=e),window.localStorage.setItem(t,JSON.stringify(n))}catch(e){console.warn("Failed to update session data in localStorage:",e)}}removeOnloadEventHandlers(){Object.values(this.timerIds).forEach((e=>{e.forEach(clearTimeout),e.length=0}))}setupOnscrollEventHandlers(){const e=this.api.getSurveys().filter((e=>e.events.some((e=>"scroll"===e.event)))),t=[];e.map((e=>{const n=(e=>{var t;return parseInt(null===(t=e.events.find((e=>"scroll"===e.event)).value)||void 0===t?void 0:t.slice(0,-2),10)})(e),i=new IntersectionObserver((t=>{t.forEach((t=>Ne(this,void 0,void 0,(function*(){t.isIntersecting||(e.setFulfilled("scroll"),(yield e.checkShow("scroll"))&&this.setState({survey_active:e}),i.unobserve(t.target))}))))}),{rootMargin:`${n}px`});t.push(i)})),this.setState({observers:t})}setupActiveFeedbackEventHandlers(){this.setupOnloadEventHandlers(),this.setupOnscrollEventHandlers(),this.onVisibilityChange=()=>{"visible"===document.visibilityState&&this.setupOnloadEventHandlers(),"hidden"===document.visibilityState&&this.removeOnloadEventHandlers()},document.addEventListener("visibilitychange",this.onVisibilityChange)}removeActiveFeedbackEventHandlers(){var e;this.onVisibilityChange&&document.removeEventListener("visibilitychange",this.onVisibilityChange),this.removeOnloadEventHandlers(),null===(e=this.state.observers)||void 0===e||e.forEach((e=>e.disconnect()))}componentWillMount(){this.mq=window.matchMedia("(prefers-color-scheme: dark)"),this.onMqChange=e=>this.setTheme(e.matches?"dark":"light"),this.state.is_theme_forced||(this.setTheme(this.mq.matches?"dark":"light"),this.mq.addEventListener("change",this.onMqChange))}setTheme(e){"system"===e&&(e=this.mq.matches?"dark":"light"),this.setState({theme:e})}forceTheme(e){"system"===e?(e=this.mq.matches?"dark":"light",this.mq.addEventListener("change",this.onMqChange),this.setState({theme:e,is_theme_forced:!1})):(this.mq.removeEventListener("change",this.onMqChange),this.setState({theme:e,is_theme_forced:!0}))}hideHeader(){this.setState({is_header_hidden:!0})}showHeader(){this.setState({is_header_hidden:!1})}disableAllSurveys(){this.api.disableAllSurveys()}enableAllSurveys(){this.api.enableAllSurveys(),this.api.getSurveys().forEach((e=>Ne(this,void 0,void 0,(function*(){(yield e.checkShow("survey_enabled"))&&this.setState({survey_active:e})}))))}componentDidUpdate(){this.state.observer_active||this.state.observers.length&&(this.state.observers.forEach((e=>e.observe(this.scroll_observer_line_ref.current))),this.setState({observer_active:!0}))}componentWillUnmount(){this.mq.removeEventListener("change",this.onMqChange),this.removeActiveFeedbackEventHandlers()}render(){return(0,e.h)(y.Provider,{value:this.state.theme},(0,e.h)(g.Provider,{value:this.state.lang},(0,e.h)(w.Provider,{value:this.state.lang_source},(0,e.h)("div",{className:He.overflow_wrapper},(0,e.h)("div",{"data-theme":this.state.theme,className:He.root},this.state.has_passive_feedback&&this.renderPassiveFeedback(),this.state.survey_active&&this.renderActiveFeedback(),this.renderScrollObserverLine())))))}}const Oe=Ge,Me={App:Ge}})(),i})()));