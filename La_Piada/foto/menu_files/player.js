/*! For license information please see player-api.modern.js.LICENSE.txt */
(()=>{function e(t){var r=d[t];if(void 0!==r)return r.exports;var i=d[t]={id:t,exports:{}};return l[t].call(i.exports,i,i.exports,e),i.exports}var t,r,i,n,s,a,o,l={16116:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{y:()=>d});var n=r(58290),s=r(74735),a=r(14534),o=r(88114),l=r(88261);class d{constructor(e,t){this.params=e,this.getPlayerApi=t}async getSourceConfig(e){const{source:t}=await this.createInternalVhConfig(e).getPlayerConfig();let r=0;const s=i({},t,{update:async()=>{var t;const a=this.getPlayerApi();if(r>=1)return;r++;const l=()=>{r=0};null==a||a.on(o.E.ContentImpression,l),null==a||a.once(o.E.Destroy,()=>{null==a||a.off(o.E.ContentImpression,l)});const{sourceConfig:d}=await(0,n.s6)(null==(t=e.content)?void 0:t.content_id,this.params);return i({},d,{startPosition:void 0,update:s.update})}});return s}async getPlayerConfig(e){return i({},await this.createInternalVhConfig(e).getPlayerConfig(),{source:await this.getSourceConfig(e)})}getIframeParams(){var e,t;return{eventPrefix:null!=(e=this.params)&&e.event_prefix?String(null==(t=this.params)?void 0:t.event_prefix):void 0}}createInternalVhConfig(e){var t;const r=this.params&&this.params.prepared?this.params:(0,a.p)(null!=(t=this.params)?t:{},l.Z);return s.c.create({vhParams:e,query:r,playerApi:this.getPlayerApi()})}}},97649:(e,t,r)=>{"use strict";r.d(t,{l:()=>i});const i="playerapi_webp_support_info"},94125:(e,t,r)=>{"use strict";function i(e){return e?b.A.parse((0,E.en)(e).search):{}}function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}function a(e,t,r,a,u){const h=(0,l.K)(),{setReadyInstance:b,setSource:E}=h,P=s(h,w);let T,I,_=!1,O=!1;const R=(()=>{const s=(0,y.K)(r)?r:(0,g.H)(r)?i(r):{};return(0,A.r)(n({},(0,y.K)(t)?i(location.href):{},s),e)})(),D=async()=>{if("1"===String(R.test_mode))return async function(e){const t=["alive","avod","live","paid"].includes(e)?e:"default";return(await(0,v.W)({method:"GET",url:"https://playerweb-stands.s3.yandex.net/mediabox-test-presets/"+t+".json",responseType:"json",withCredentials:!1,retries:2})).response}(String(R.test_data));if((0,g.H)(t)){const e=t;return(await(0,m.s6)(e,R)).vhParams}return t.data};let x,N;const V=async()=>{var t;if(N)return N;x=x||await D(),(0,d.Vc)({flags:null==(t=x.request_info)?void 0:t.flags});const r=new o.y(R,()=>P),i=await r.getPlayerConfig(x),l=i.source,{trackings:c}=l,h=s(l,k);return N=n({},i,{source:n({},h,{trackings:null!=u&&u.disableVhTrackings?void 0:c,queryParams:R}),element:e,vhParams:x}),a&&(N.envName=a),N};let L=new f.B;const F=async e=>{const{disableOTTPlayerLoader:r}=(0,y.K)(t)?t:{disableOTTPlayerLoader:!1},i=r?{api:window.Ya.playerApi.create(e),withWrapper:!1,withTrackings:!1}:await async function(e){try{const t=await Ya.OTT.PlayerLoader.init(e);return(0,c.m)(t),t}catch(t){}return{api:window.Ya.playerApi.create(e),withWrapper:!1,withTrackings:!1}}(e);if((0,c.m)(i))return I=new p(i),b(I),void L.resolve();_=i.withWrapper,O=i.withTrackings,T=i.api,b(T),L.resolve()};V().then(async e=>{await F(e)}).catch(()=>{L.resolve()});const M=n({},P,{setSource:async(t,r)=>{var a,l;await L.promise;const d=(0,y.K)(r)?r:(0,g.H)(r)?i(r):{},c=(0,A.r)(d,e),h=await(async()=>{if((0,g.H)(t))return{contentId:t,queryParams:c};const e=new o.y(c,()=>P),r=await e.getSourceConfig(t.data),{trackings:i}=r;return n({},s(r,C),{trackings:null!=u&&u.disableVhTrackings?void 0:i,queryParams:c})})();if(T)return E(h);const p=(null==(a=I)?void 0:a.getAllHandlers())||{};await(null==(l=I)?void 0:l.destroy()),I=void 0,L=new f.B,await F(n({},await V(),{source:h}));const m=I||T;void 0!==m&&(0,S.M)(p,(e,t)=>{e&&e.forEach(e=>{let{once:r,fn:i}=e;m[r?"once":"on"](t,i)})})}});return Object.defineProperty(M,"skin",{get:()=>{var e;return null==(e=T)?void 0:e.skin}}),Object.defineProperty(M,"withOttWrapper",{get:()=>_}),Object.defineProperty(M,"withOttTrackings",{get:()=>O}),M}r.r(t),r.d(t,{createVhPlayerApi:()=>a});var o=r(16116),l=r(90957),d=r(65705),c=r(86110),u=r(58528),h=r(61693);class p extends h.h{constructor(e){super(void 0),this.ottPlaceholder=e,this.skin=void 0}publicEmit(e,t){if(e.indexOf("/")>-1)return this.emit(e,t);const r=new Error("Event "+e+" is invalid. Namespace is required: NAMESPACE/"+e);setTimeout(()=>{throw r},0)}getState(){}getReadyState(){return u.k.init}destroy(){return this.ottPlaceholder.innerHTML="",Promise.resolve()}setVideoTrack(){}setAudioTrack(){}setTextTrack(){}changeAdditionalParams(){}sendReportLog(){return Promise.reject()}setSource(){return Promise.reject()}releaseSource(){}preloadSource(){return Promise.reject()}requestVideoElementFullscreen(){return Promise.reject()}exitVideoElementFullscreen(){}setPlaybackRate(){}setMuted(){}setVolume(){}setPictureInPictureAllowed(){}setVideoStyle(){}setNativeControlsVisibility(){}setNativeTextTrackVisibility(){}setNativeAdControlsVisibility(){}setDebugPanelVisibility(){}requestDebugInfo(){return Promise.reject()}requestExternalPlay(){return Promise.reject()}requestExternalPlayerList(){return Promise.reject()}play(){return Promise.reject()}pause(){}seek(){}playInrollAd(){}skipAdPod(){}logEvent(){}logEventInternal(){}logError(){}insertInto(){return Promise.reject()}playAdViewers(){return Promise.reject()}seekToNextFrame(){return Promise.reject()}seekToPreviousFrame(){return Promise.reject()}saveVideoFrame(){return Promise.reject()}}var m=r(58290),v=r(74800),f=r(46321),g=r(16187),y=r(76101),S=r(66061),A=r(38939),b=r(20499),E=r(34118);r(94637);const w=["setReadyInstance","setInstance","setSource"],k=["trackings"],C=["trackings"]},58237:(e,t,r)=>{"use strict";function i(e){return new Promise((t,r)=>{const i=new Image;i.onload=function(){i.width>0&&i.height>0&&t(!0),r("Feature isn't supported")},i.onerror=function(){r("Feature isn't supported")},i.src="data:image/webp;base64,"+o[e]})}async function n(){try{const e=s.tO.getItem(a.l);if(null!==e){const{isWebpSupported:t,lastCheckTimestamp:r}=JSON.parse(e);if(t)return!0;if(Date.now()-r<864e5)return!1}return await Promise.all([i("lossy"),i("lossless"),i("alpha"),i("animation")]),s.tO.setItem(a.l,JSON.stringify(new l(!0))),!0}catch(e){return s.tO.setItem(a.l,JSON.stringify(new l(!1))),!1}}r.d(t,{C:()=>n});var s=r(35634),a=r(97649);const o={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};class l{constructor(e){this.isWebpSupported=void 0,this.lastCheckTimestamp=void 0,this.isWebpSupported=e,this.lastCheckTimestamp=Date.now()}}},38939:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e,t){if(e&&"adsdk-container-width"in e&&"adsdk-container-height"in e)return e;const r=t.getBoundingClientRect();return i({},e,{"adsdk-container-width":r.width,"adsdk-container-height":r.height})}r.d(t,{r:()=>n})},60146:(e,t,r)=>{"use strict";function i(e,t){var r,i,o,l,d,c,u;const h={yandexuid:a.h,reqid:t.reqid,from:t.from||((0,s.Kn)(null==(r=e.content)?void 0:r.additionalParams)?null==(i=e.content)||null==(o=i.additionalParams)?void 0:o.from:void 0),sandboxVersion:null==(l=e.request_info)?void 0:l.player_version,slots:(0,n.S)((null==(d=e.request_info)?void 0:d.slots)||"",t.slots||""),frontendVhReqid:e["apphost-reqid"]||(null==(c=e.user_data)?void 0:c.req_id),contentId:null!=(p=e.content)&&p.actual_episode?e.content.actual_episode.content_id:null==(m=e.content)?void 0:m.content_id,fromBlock:t.from_block,streamBlock:t.stream_block||(null==(u=e.content)?void 0:u.streamBlock)};var p,m,v;(!h.reqid&&(0,s.Kn)(t.counters)&&(h.reqid=t.counters.reqid),!h.reqid&&e.user_data)&&(h.reqid=null==(v=e.user_data)?void 0:v.req_id);return h.reqid||(h.reqid=""),h}r.d(t,{s:()=>i});var n=r(75114),s=r(79916),a=r(23444)},74735:(e,t,r)=>{"use strict";function i(e,t){(0,s.o8)(e)||(this[t]=e)}r.d(t,{c:()=>u});var n=r(96825),s=r(79916),a=r(95045),o=r(72905),l=r(20499),d=r(60146),c=r(66634);class u{static create(e){var t,r;let{query:i,vhParams:n,playerApi:a}=e;return null!=(t=n.content)&&t.ottParams&&(0,s.hj)(null==(r=n.content)?void 0:r.restriction_age)&&(i.meta=o.SV.restriction_age,i.m_duration=8,i.m_title=n.content.restriction_age+"+"),new u({query:i,params:{data:n},player:a,ids:(0,d.s)(n,i)})}constructor(e){this.params=void 0,this.query=void 0,this.ids=void 0,this.player=void 0,this.requestInfo=void 0,this.params=e.params,this.query=e.query,this.ids=e.ids,this.player=e.player,this.requestInfo=e.params.data.request_info||{}}async prepareVHParams(){const e=this.params.data.content||{},t=Object.create(e),r=e.actual_episode;if(r)for(const n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.stream&&(t.withCredentials=Boolean(t.stream.withCredentials)),t.loop=Boolean(t.loop);const i=e.max_video_size;return t.meta&&(t.meta.announce_thumbnail=await(0,n.Ax)(t.meta.announce_thumbnail,i)),t.thumbnail=await(0,n.Ax)(t.thumbnail,i),t.onto_poster=await(0,n.Ax)(t.onto_poster,i),t.cover=await(0,n.Ax)(t.cover,i),t.first_frame_url=await(0,n.Ax)(t.first_frame_url,i),t}getHiddenControls(e){var t;if(this.query.tv)return"*";let r=[];return(0,s.Kn)(null==e?void 0:e.auto_fields)&&null!=e&&e.auto_fields.player_controls_hidden&&(r=e.auto_fields.player_controls_hidden),[].concat(r,(null!=(t=this.query.hidden)?t:"").split(",")).join(",")}getSkinConfig(e){const t=this.getHiddenControls(e),r=this.getLogoConfig(e),i=this.getTitleSettings(),n=this.getSubscribeButton();return{showReportButton:!1,showUnmuteButtonForAll:Boolean(this.query.force_unmute),logoConfig:r,hiddenControls:t,showSubscribeButton:n,title:i,primaryColor:this.getColor(this.query.primary_color),secondaryColor:this.getColor(this.query.secondary_color),timelineThumbColor:this.getColor(this.query.timeline_thumb_color)}}async getPlayerConfig(){const e=await this.prepareVHParams(),t=this.getSourceConfig(e),r=this.getAutoplay(),i={source:t,skinParams:{skinConfig:this.getSkinConfig(e)},autoplay:r,allowPip:this.query.pip,volume:this.query.volume,muted:this.query.mute,lang:this.query.lang||this.requestInfo.lang,preload:this.getPreload(),platform:this.query.platform,togglePlaybackOnVisibilityChange:this.query.play_on_visible,useAbdBundle:this.requestInfo.use_aab_bundle,flags:this.requestInfo.flags,usePlayerApiMock:this.query.test_mode,slowConnection:this.requestInfo.slow_connection||this.query.slow_connection,logUrl:this.requestInfo.use_aab_bundle?this.requestInfo.logging_url:void 0,device:{id:this.query.device_id},objectFit:this.query.object_fit||this.query.poster_object_fit,backgroundColor:this.query.background_color,loadSkin:this.query.skin};return this.params.disableOTTPlayerLoader&&(i.disableOTTPlayerLoader=!0),i}getThumbnails(e){if(!this.query.preview_src)return null==e?void 0:e.thumbnails}getSourceConfig(e){var t;this.preparePlaybackParams(e),this.prepareAdParams(e);const r=String(this.getStreamParams(e)),i=this.getAdConfig(e),n=this.getVideoInfo(e),a=this.getTrackings(e),o=this.getOTTParams(e),l=this.getStartPosition(e),d=this.getAdditionalParams(e),c=this.getPreview(e),u=this.getThumbnails(e),h=this.getPosterStyle(),p={adConfig:i,videoInfo:n,trackings:a,preview:c,thumbnails:u,summaryUrl:null==e?void 0:e.summary_url,description:null==e?void 0:e.description,firstFrameHash:null==e?void 0:e.first_frame_hash,firstFrameUrl:null==e?void 0:e.first_frame_url,startPosition:l,enableRemoteProgressSaving:this.query.remote_progress_saving||this.query.progress,withCredentials:this.query.with_credentials||(null==e?void 0:e.withCredentials),loop:(null==e?void 0:e.loop)||this.query.loop,additionalParams:d,preferredTracks:{preferredAudioLangs:this.query.preferable_audio,preferredTextLangs:this.query.preferable_text},context:o,passportRetpath:this.query.retpath},m=null==(t=this.getStreamsConfig(e))?void 0:t.map((function(e){return r&&(e.url+=e.url.indexOf("?")>-1?"&":"?",e.url+=r),e}));return m&&(p.streams=m),h&&(p.posterStyle=h),(0,s.HD)(d.slots)&&(0,s.Kn)(p.context)&&(p.context.testIds=d.slots.split(";").map(e=>parseInt(e,10)).join(",")),p}preparePlaybackParams(e){e&&(e.start_time=parseInt(e.start_time,10)||void 0,e.finish_time=parseInt(e.finish_time,10),e.finish_time=isNaN(e.finish_time)?void 0:e.finish_time-1,e.dvr=parseInt(e.dvr,10)||void 0)}prepareAdParams(e){e&&(e.imp_id=1)}getStreamParams(e){const t={audio_only:this.query.audio_only,start:null==e?void 0:e.start_time,end:null==e?void 0:e.finish_time,dvr:null==e?void 0:e.dvr};return new l.A(t,{audio_only:{set(e,t){e&&(this[t]=1)}},start:{set:i},end:{set:i},dvr:{set:i}})}getStreamsConfig(e){const t=Array.isArray(this.query.streams)?this.query.streams:null==e?void 0:e.streams;if(Array.isArray(t))return t.reduce((function(e,t){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);if(!r.url)return e;const i=r.id||"default";return e.defId||(e.defId=i),r.drmConfig=r.drmConfig||r.drm_config||void 0,delete r.id,delete r.options,delete r.drm_config,i===e.defId&&e.result.push(r),e}),{result:[],defId:""}).result}getAdConfig(e){if((0,s.Kn)(this.query.adConfig))return this.query.adConfig;const t=(0,s.Kn)(null==e?void 0:e.adConfig)?null==e?void 0:e.adConfig:{},r=t||{};if(t){r.partnerId=t.partner_id||t.partnerId,r.category=t.category,r.videoContentId=t.video_content_id||t.videoContentId,r.videoContentName=t.video_content_name||t.videoContentName,r.videoGenreId=t.video_genre_id,r.videoGenreName=t.video_genre_name,r.hasPreroll=(0,s.jn)(this.query.has_preroll)?this.query.has_preroll:t.hasPreroll,r.distrId=this.query.distr_id||t.distr_id,r.useAdSession=(0,s.jn)(this.query.use_ad_session)?this.query.use_ad_session:t.useAdSession;const e=parseInt(r.partnerId,10);e&&(r.partnerId=e);const i=parseInt(r.category,10);i&&(r.category=i),t.video_publisher_id&&(r.videoPublisherId=t.video_publisher_id),t.video_publisher_name&&(r.videoPublisherName=t.video_publisher_name)}return this.query.vmap_id&&(r.vmapId=this.query.vmap_id),this.query.vmap_scenario_id&&(r.vmapScenarioId=this.query.vmap_scenario_id),(0,s.hj)(this.query.preferable_width)&&(0,s.hj)(this.query.preferable_height)&&(r.preferableAdSize={width:this.query.preferable_width,height:this.query.preferable_height}),r}getVideoInfo(e){const t=(0,s.Kn)(null==e?void 0:e.adConfig)?null==e?void 0:e.adConfig:{},r={videoContentId:null==e?void 0:e.content_id,videoContentName:null==e?void 0:e.title,videoContentDescription:null==e?void 0:e.description,videoPublisherId:(null==t?void 0:t.video_publisher_id)||"",videoPublisherName:(null==t?void 0:t.video_publisher_name)||""};return r.videoGenreId=String((null==t?void 0:t.video_genre_id)||""),r.videoGenreName=String((null==e?void 0:e.genres)||(null==t?void 0:t.video_genre_name)||""),Object.keys(r).reduce((function(e,t){const i=r[t];return i&&(e[t]=i),e}),{})}getTrackings(e){if("zen"===this.ids.from)return{trackingEvents:[]};let t=[];(0,s.Kn)(null==e?void 0:e.trackingEvents)&&(t=t.concat(e.trackingEvents)),(0,s.Kn)(null==e?void 0:e.stream)&&(0,s.Kn)(null==e?void 0:e.stream.trackings)&&(0,s.Kn)(null==e?void 0:e.stream.trackings.trackingEvents)&&(t=t.concat(e.stream.trackings.trackingEvents));const r=this.getYaVideoTrackings(e);return r&&(t=t.concat(r).filter(Boolean)),{trackingEvents:t}}getSubscribeButton(){return{type:this.query.subscribe_button}}getColor(e){return e&&(0,s.HD)(e)&&CSS.supports("color","#"+e)?"#"+e:e}getPreview(e){return this.query.preview_src?this.query.preview_src:this.query.preview&&!this.query.streams?null==e?void 0:e.thumbnail:""}getPosterStyle(){let e;const t=this.query.object_fit||this.query.poster_object_fit;return t&&(e={objectFit:String(t)}),e}getLogoConfig(e){return null!=e&&e.logoConfig?e.logoConfig:(0,s.Kn)(null==e?void 0:e.watermark)&&(0,s.HD)(null==e?void 0:e.watermark.src)?null==e?void 0:e.watermark:void 0}getTitleSettings(){if(void 0===this.query.meta)return;if(this.query.meta===o.SV.none)return null;const e={name:this.query.m_title,description:this.query.m_desc};switch(this.query.meta){case o.SV.always:e.isVisible=!0;break;case o.SV.start:e.isVisible=!0,e.duration=this.query.m_duration;break;case o.SV.restriction_age:e.isVisible=!0,e.visibleOnPlay=!0,e.duration=this.query.m_duration;break;case o.SV.ui:e.isVisible=!0,e.visibleWithSkinOnly=!0}return e}getOTTParams(e){const t=null==e?void 0:e.ottParams;return(0,s.Kn)(t)?(t.from=this.ids.from||"other",t.contentTypeID&&!t.contentTypeId&&(t.contentTypeId=t.contentTypeID),"cover"in(e||{})&&(t.cover=null==e?void 0:e.cover,t.thumbnailLogos=null==e?void 0:e.thumbnail_logos),t.container={context:this.query.platform||"",init:this.createOttEventTrigger.call(this,"placeholder:init"),mod:this.query.mod,paymentWidget:this.createOttEventTrigger.call(this,"placeholder:pay")},t):null}createOttEventTrigger(e){return t=>{var r;t.event===e&&(null==(r=this.player)||r.publicEmit("OTT/"+e,t))}}getStartPosition(e){return(0,s.hj)(this.query.t)?this.query.t:(0,s.hj)(null==e?void 0:e.progress)&&(0,s.hj)(null==e?void 0:e.duration)&&e.progress/e.duration>.95?0:this.query.progress&&(0,s.hj)(null==e?void 0:e.progress)?null==e?void 0:e.progress:void 0}getYaVideoTrackings(e){if(!(0,s.Kn)(e))return null;const t={from:this.ids.from,from_block:this.ids.fromBlock,reqid:this.ids.reqid,yandexuid:this.ids.yandexuid,content_id:this.ids.contentId,channel_id:e.channel_id,stream_block:this.ids.streamBlock,duration:e.duration};return(0,s.Kn)(e.ottParams)&&(t.licence=e.ottParams.monetizationModel,t.svod=e.ottParams.subscriptionType),(0,a.i)(t)}getAdditionalParams(e){const t=(0,s.Kn)(null==e?void 0:e.additionalParams)?e.additionalParams:{};if(this.ids.frontendVhReqid&&(t.frontend_vh_reqid=this.ids.frontendVhReqid),this.ids.reqid&&(t.reqid=this.ids.reqid),(null!=e&&e.puid||this.query.puid)&&(t.puid=(null==e?void 0:e.puid)||this.query.puid),null!=e&&e.content_id&&(t.content_id=e.content_id),null!=e&&e.folder_id&&(t.folder_id=e.folder_id),this.ids.from&&(t.from=this.ids.from),this.ids.fromBlock&&(t.from_block=this.ids.fromBlock),this.ids.slots&&(t.slots=this.ids.slots),this.ids.streamBlock&&(t.stream_block=this.ids.streamBlock),null!=e&&e.channel_id&&(t.channel_id=e.channel_id),!Array.isArray(this.query["brand-safety-categories"])||(0,s.Kn)(null==e?void 0:e.adTags)&&null!=e&&e.adTags["brand-safety-categories"]||(t["brand-safety-categories"]=this.prepareCategory("brand-safety-categories")),(0,s.Kn)(null==e?void 0:e.adTags))for(const r in null==e?void 0:e.adTags)null!=e&&e.adTags.hasOwnProperty(r)&&(t[r]=this.prepareCategory(r,e.adTags[r]));return t.sandboxVersion=this.ids.sandboxVersion,t}prepareCategory(e,t){const r=this.query[e];let i=[];if(Array.isArray(t)&&Array.isArray(r))i=t.concat(r);else if(Array.isArray(t))i=t;else{if(!Array.isArray(r))return null;i=r}return"brand-safety-categories"===e?"["+i.join(",")+"]":i.join("\n")}getAutoplay(){if((0,c.z)())return!1;const e=navigator&&navigator.connection&&navigator.connection.saveData;return!(this.requestInfo.slow_connection||this.query.slow_connection)&&!e&&((0,s.jn)(this.query.allow_muted)?{allowMuted:this.query.allow_muted}:Boolean(this.query.autoplay))}getPreload(){return!(0,c.z)()&&this.query.preload}}},72905:(e,t,r)=>{"use strict";function i(e){return e.reqid&&(0,p.Kn)(e.counters)&&!e.counters.reqid&&(e.counters.reqid=e.reqid),(0,p.Kn)(e.counters)&&e.counters.reqid&&!e.reqid&&(e.reqid=e.counters.reqid),(e.tv||e.nativeui||e.test_mode)&&(e.recommendations=""),function(e){const t={};(0,p.HD)(e.slots)&&e.slots.split(";").forEach((function(e){const r=e.split(",",1)[0];r&&(t[r]=e)}));Array.isArray(e["test-id"])&&e["test-id"].forEach((function(e){e&&(t[e]||(t[e]=e+",0,-1"))}));let r="";const i=[];for(const n in t)t.hasOwnProperty(n)&&(r+=r.length>0?";"+t[n]:t[n],i.push(n));r&&(e.slots=r);i.length>0&&(e["test-id"]=i)}(e),e}function n(e,t){this[t]=Boolean(e)}function s(e,t){this[t]=void 0!==e?Boolean(e):void 0}function a(e,t){e&&(this[t]=String(e))}function o(e,t){(0,p.hj)(e)&&(this[t]=e)}function l(e,t){const r=Number(e);this[t]=(0,p.hj)(r)?r:0}function d(e,t){if((0,p.hj)(e))this[t]=e;else if((0,p.HD)(e)&&function(e){return/^\d+h\d+m\d+(\.\d+)?s$/.test(e)||/^\d+m\d+(\.\d+)?s$/.test(e)||/^\d+(\.\d+)?s$/.test(e)}(e)){var r,i,n,s,a,o;const l=parseInt(null!=(r=null==(i=/^(\d+)h/.exec(e))?void 0:i[0])?r:"",10)||0;let d=e.replace(new RegExp("^"+l+"h"),"");const c=parseInt(null!=(n=null==(s=/^(\d+)m/.exec(d))?void 0:s[0])?n:"",10)||0;d=d.replace(new RegExp("^"+c+"m"),"");const u=parseFloat(null!=(a=null==(o=/^(\d+(\.\d+)?)s$/.exec(d))?void 0:o[0])?a:"")||0;this[t]=60*(60*l+c)+u}}function c(e,t){if(!e)return;const r=String(e),i=document.createElement("div").style;i.color=r,""===i.color&&(i.color="#"+r),""!==i.color&&(this[t]=i.color)}function u(){return{from:{set:a},slots:null,"test-id":{value:[],set(e,t){const r=(0,p.HD)(e)?h.A.parseJSON(e):e;r&&(Array.isArray(r)?this[t]=r.filter(Boolean).map(String):(0,p.HD)(r)?this[t]=r.split(/[,_]/).filter(Boolean):(0,p.hj)(r)&&(this[t]=[String(r)]))}},distr_id:null,audio_only:!1,tv:{value:!1,set:n},loop:{value:!1,set:n},preload:{value:!1,set:n},report:{value:!1,set:n},preview:{value:!0,set:n},preview_src:{value:"",set:a},poster_object_fit:{set:a},nativeui:{value:!1,set:n},remote_progress_saving:{value:!1,set:n},progress:{value:!0,set:n},force_unmute:{value:!0,set:n},stream_cms:{value:!0,set:n},event_prefix:{value:"",set:a},from_block:{set:a},hidden:{value:"",set:a},device_id:{value:"",set:a},primary_color:{set:a},secondary_color:{set:a},pip:{value:!0,set(e,t){0===e&&(this[t]=!1)}},autoplay:{value:!0,set(e,t){0===e&&(this[t]=!1)}},lang:{value:"",set(e,t){var r;(r=e,-1!==y.indexOf(r))&&(this[t]=e)}},allow_muted:{set:n},mute:{value:!1,set:s},volume:{set(e,t){(0,p.hj)(e)&&e>=0&&e<=100&&(this[t]=e)}},play_on_visible:{set(e,t){(0,p.hj)(e)?e>0&&e<=1&&(this[t]={threshold:e}):(0,p.o8)(e)||"undefined"===e||(this[t]=Boolean(e))}},adConfig:{set(e,t){(0,p.Kn)(e)&&(this[t]=e)}},streams:{set(e,t){Array.isArray(e)&&(this[t]=e)}},vmap_id:{set:l},vmap_scenario_id:{set:l},meta:{value:void 0,set(e,t){if(!(0,p.HD)(e))return;const r=m[e];(0,p.hj)(r)&&(this[t]=r)}},subscribe_button:{value:void 0,set(e,t){if(!(0,p.HD)(e))return;const r=v[e];(0,p.hj)(r)&&(this[t]=e)}},m_duration:{value:3e3,set(e,t){(0,p.hj)(e)&&e>=0&&(this[t]=1e3*e)}},m_title:{value:null,set:a},m_desc:{value:null,set:a},live_offset:{set(e,t){(0,p.hj)(e)&&e>=0&&(this[t]=e)}},platform:{set(e,t){f.indexOf(e)>-1&&(this[t]=e)}},mod:{value:"",set:a},t:{set:d},preferable_width:{set:o},preferable_height:{set:o},preferable_audio:{value:[],set(e,t){this[t]="string"===typeof e?e.split(",").filter(e=>e.length>0):[]}},preferable_text:{value:[],set(e,t){this[t]="string"===typeof e?e.split(",").filter(e=>e.length>0):[]}},release_timeout:{value:0,set:o},retpath:{set:a},ya_station:{value:!0,set:n},has_preroll:{set:n},velocity_metrics_sampled:{value:!0,set:n},test_mode:{value:!1,set:n},test_data:{value:"default",set(e,t){var r;(r=e,-1!==g.indexOf(r))&&(this[t]=e)}},object_fit:{set:a},background_color:{set:c},version:{set(e,t){/^(1\.0-\d+|\d+\.\d+\.\d+)$/.test(e)&&(this[t]=e)}}}}r.d(t,{Kv:()=>u,SV:()=>m,vC:()=>i});var h=r(20499),p=r(79916);const m={none:0,always:1,start:2,ui:3,restriction_age:4},v={plain:0,colourful:1,with_subscribe_info:2,with_subscribe_label:3},f=["desktop","touch","pad","app","tv","tvapp"],g=["default","live","paid","avod","alive"],y=["be","en","id","kk","ru","tr","tt","uk","uz"]},66073:(e,t,r)=>{"use strict";function i(e,t){return function(r,i){if(!(0,n.mf)(i))throw new Error("VHQuery: missing method for handling unsafe params.");const a=new s.A(r,e(),i.bind(this));return t(a)}}r.d(t,{X:()=>i});var n=r(79916),s=r(20499)},20499:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=r(79916);class n{static parse(e,t,r){const s={};if(!e||!(0,i.HD)(e))return s;let a=e;"?"!==a[0]&&"#"!==a[0]||(a=a.slice(1));const o=a.split(t||"&");for(let i=0;i<o.length;i++){const e=o[i].indexOf("=");if(-1===e){r&&(s[decodeURIComponent(o[i])]=!0);continue}s[decodeURIComponent(o[i].slice(0,e))]=n.parseJSON(decodeURIComponent(o[i].slice(e+1)))}return s}static parseJSON(e){try{return JSON.parse(e)}catch(t){return e}}constructor(e,t,r){const s={},a={};if((0,i.Kn)(t))for(const n in t){if(!t.hasOwnProperty(n))continue;const e=t[n];(0,i.Kn)(e)?((0,i.o8)(e.value)||(this[n]=e.value),(0,i.mf)(e.set)&&(s[n]=e.set),e.unsafe&&(a[n]=!0)):(0,i.o8)(e)||(this[n]=e)}let o;if(e){const t=(0,i.Kn)(e)?e:n.parse(e);for(const e in t){if(!t.hasOwnProperty(e))continue;const r=this[e],n=s[e];s.hasOwnProperty(e)&&(0,i.mf)(n)?n.call(this,t[e],e):this[e]=t[e],this[e]!==r&&a[e]&&(o=o||{},o[e]=this[e])}}o&&(0,i.mf)(r)&&r(o,this)}toString(e,t,r){void 0===e&&(e="&"),void 0===t&&(t=!1),void 0===r&&(r=[]);const n=encodeURIComponent,s=this;let a,o=Object.keys(this).filter((function(e){return!(0,i.o8)(s[e])&&!(0,i.mf)(s[e])})).map((function(e){return a=s[e],(0,i.Kn)(a)&&(a=JSON.stringify(a)),r.indexOf(e)>-1?e+"="+a:n(e)+"="+n(a)})).join(e);return t&&(o+=e),o}appendTo(e){const t=this.toString();return t?(e+=e.indexOf("?")>-1?"&":"?",e+=t):e}}},14534:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var i=r(72905);const n=(0,r(66073).X)((function(){return i.Kv()}),i.vC)},96825:(e,t,r)=>{"use strict";async function i(e,t){if(!(0,s.HD)(e))return;const r=e.replace(/https?:\/\//i,"").replace(/\/\//i,"").split("/")[1]||null;if(!r||-1===o.indexOf(r))return e;const i=(t?function(e){if("object"!==typeof e)return n.Horizontal;const{width:t,height:r}=e;return t&&r?t>r?n.Horizontal:n.Vertical:n.Horizontal}(t):n.Horizontal)===n.Horizontal?"1920x1080":"1080x1920",l=await(0,a.C)()?"q15":"q30";return e.replace("orig",""+i+l)}r.d(t,{Ax:()=>i});var n,s=r(79916),a=r(58237);!function(e){e.Horizontal="HORIZONTAL",e.Vertical="VERTICAL"}(n||(n={}));const o=["get-vh"]},95045:(e,t,r)=>{"use strict";function i(e){return new a.A(e).toString("/",!0,d)}function n(e,t){const r={content_id:t.content_id,stream_block:t.stream_block,channel_id:t.channel_id,path:"player-events."+e};return"error"===e&&(r.error_code="{{error-code}}"),"seek"===e&&(r.position_from="{{old-position}}"),function(e){if(c&&e.reqid===u)return c;u=e.reqid;const t={reqid:u,yandexuid:e.yandexuid,select_event:"click",cid:73037,pid:197,dtype:"stred",source:e.from,from_block:e.from_block};return e.licence&&(t.licence=e.licence),e.svod&&(t.svod=e.svod),c=o+"//yandex.ru/clck/jclck/"+i(t)}(t)+i({rnd:"{{random}}",fullscreen:"{{fullscreen}}",mute:"{{muted}}",duration:"{{duration}}",timestamp:"{{timestamp}}",user_ts:"{{vts}}",watchedTime:"{{fts}}",vsid:"{{vsid}}"})+i(r)+"*"}function s(e){const t={};var r;return t.heartbeat=[[n("heartbeat",e),{delay:3e4}],[n("deep_watch",e),{delay:1e3*(r=e.duration,r<=180?.57*r:r<=1200?72+.17*r:r<=3600?252+.02*r:216+.03*r),callsCount:1}]],l.forEach((function(r){t[r]=[n(r,e)]})),t}r.d(t,{i:()=>s});var a=r(20499);const o="undefined"!==typeof window&&"http:"===location.protocol?"http:":"https:",l=["init","error","adStart","adEnd","start","play","pause","end","seek"],d=["rnd","fullscreen","mute","duration","timestamp","user_ts","watchedTime","vsid","error_code","position_from"];let c="",u=""},73647:(e,t,r)=>{"use strict";r.d(t,{H:()=>i.H});var i=r(1806)},72052:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var i=r(9057);const n={};class s extends i.Z{constructor(e){if(super(),this.aborted=void 0,this.reason=void 0,this._onabort=()=>{},e!==n)throw new TypeError("Illegal constructor.");this.aborted=!1}set onabort(e){const t=this._onabort;t&&this.removeEventListener("abort",t),this._onabort=e,this.addEventListener("abort",e)}get onabort(){return this._onabort}throwIfAborted(){throw this.reason}}class a{constructor(){this._signal=void 0,this._signal=new s(n)}get signal(){return this._signal}abort(e){const t=this.signal;t.aborted||(t.aborted=!0,t.reason=e,t.dispatchEvent(new Event("abort")))}}},1806:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var i=r(86673),n=r(72052);const s="object"===typeof self?self:window,a=Boolean((0,i.Y)(()=>new s.AbortController))?s.AbortController:n.H},27804:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});const i=["","-webkit-","-ms-","-moz-","-o-"]},26853:(e,t,r)=>{"use strict";r.d(t,{t:()=>i});const i=["Googlebot","YandexBot","AhrefsBot","spider","Bot","HeadlessChrome"]},53333:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});const i=["Robotics"]},66634:(e,t,r)=>{"use strict";r.d(t,{z:()=>l});var i=r(2428),n=r(26853),s=r(53333);const a=new RegExp("("+n.t.join("|")+")","i"),o=new RegExp("("+s.w.join("|")+")","i"),l=function(e){return void 0===e&&(e=(0,i.i)()),!o.test(e)&&a.test(e)}},81819:(e,t,r)=>{"use strict";function i(e){void 0===e&&(e=window);const t=e.navigator.userAgent,r=t.indexOf("Android");return-1===r?-1:parseFloat(t.slice(r+8))}r.d(t,{d:()=>i})},59611:(e,t,r)=>{"use strict";function i(e){if(void 0===e&&(e=window),(0,n.P)(e)&&e.navigator){const t=(0,s.i)(e).match(/OS ([\d]+)_([\d]+)_?(\d+)?/i);if(!t)return{major:-1,minor:-1};const[,r,i]=t;return{major:parseInt(r,10),minor:parseInt(i,10)}}return{major:-1,minor:-1}}r.d(t,{o:()=>i});var n=r(20931),s=r(2428)},70083:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});var i=r(17422),n=r.n(i);const s=function(e){void 0===e&&(e=window);const t=n()(e);return"boolean"===typeof t?-1:t}},54330:(e,t,r)=>{"use strict";function i(e){void 0===e&&(e=window);const{userAgent:t=""}=e.navigator,r=/Android/.test(t),i=(0,n.y)(e),s=/com\.yandex\.mobile\.metrica\.ads\.sdk.*?Android/.test(t);return r&&!i||s}r.d(t,{C:()=>i});var n=r(9030)},54989:(e,t,r)=>{"use strict";function i(e){return void 0===e&&(e=window),/Apple/.test(e.navigator.vendor)&&(0,n.H)(e)}r.d(t,{B:()=>i});var n=r(82520)},55260:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});var i=r(2428);const n=function(e){void 0===e&&(e=window);return(0,i.i)(e).includes("CrKey")}},46630:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});var i=r(70083);const n=function(e){return void 0===e&&(e=window),(0,i.N)(e)>11}},10949:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});const i=function(e){return void 0===e&&(e=window),/firefox/.test(e.navigator.userAgent.toLowerCase())}},22905:(e,t,r)=>{"use strict";r.d(t,{E:()=>n});var i=r(70083);const n=function(e){return void 0===e&&(e=window),-1!==(0,i.N)(e)}},20931:(e,t,r)=>{"use strict";function i(e){void 0===e&&(e=window);const t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!(0,n.$)(e)}r.d(t,{P:()=>i});var n=r(10630)},86751:(e,t,r)=>{"use strict";function i(e){void 0===e&&(e=window);const t=(0,n.i)(e).toLowerCase();return/linux/.test(t)&&!(0,s.C)(e)}r.d(t,{A:()=>i});var n=r(2428),s=r(54330)},55687:(e,t,r)=>{"use strict";function i(e,t){if(!(0,n.m)(e.matchMedia))return!1;const r=e.matchMedia(t);return(0,s.K)(r)&&Boolean(r.matches)}r.d(t,{y:()=>i});var n=r(53159),s=r(76101)},48265:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});var i=r(2428);const n=function(e){void 0===e&&(e=window);const t=(0,i.i)(e).toLowerCase();if(t.indexOf("android")>-1)return!1;const r=t.replace(/\(.+?\)/gi,"").split(" ").map(e=>e.trim().split("/")[0]).filter(e=>e&&"mobile"!==e);return 4===r.length&&"mozilla"===r[0]&&"applewebkit"===r[1]&&"version"===r[2]&&"safari"===r[3]}},63416:(e,t,r)=>{"use strict";function i(e){return void 0===e&&(e=window),(0,a.B)(e)||(0,s.P)(e)||(0,n.B)(e)}r.d(t,{z:()=>i});var n=r(54989),s=r(20931),a=r(48265)},91003:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var i=r(2428);const n=function(e){void 0===e&&(e=window);return(0,i.i)(e).includes("Tizen")}},57354:(e,t,r)=>{"use strict";function i(e){const{DocumentTouch:t}=e;return Boolean(t)&&e.document instanceof t}r.d(t,{p:()=>i})},38303:(e,t,r)=>{"use strict";function i(e){return"ontouchstart"in e}r.d(t,{H:()=>i})},49015:(e,t,r)=>{"use strict";function i(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){const t=e.navigator||{},{msMaxTouchPoints:r,maxTouchPoints:i}=t;return r||i||0}(e)>0&&!(0,n.B)(e)}r.d(t,{H:()=>i});var n=r(46630)},82520:(e,t,r)=>{"use strict";function i(e){return void 0===e&&(e=window),(0,a.H)(e)||(0,o.g)(e)||(0,l.n)(e)||(0,n.p)(e)||(0,s.H)(e)}r.d(t,{H:()=>i});var n=r(57354),s=r(38303),a=r(49015),o=r(11026),l=r(66878)},11026:(e,t,r)=>{"use strict";function i(e){return(0,s.y)(e,a)}r.d(t,{g:()=>i});var n=r(27804),s=r(55687);const a=n.F.map(e=>"("+e+"any-pointer:coarse)").join(",")},66878:(e,t,r)=>{"use strict";function i(e){return(0,n.y)(e,s)}r.d(t,{n:()=>i});var n=r(55687);const s=r(27804).F.map(e=>"("+e+"touch-enabled)").join(",")},34377:(e,t,r)=>{"use strict";function i(e){return void 0===e&&(e=window),(0,n.H)(e)}r.d(t,{$:()=>i});var n=r(38303)},10630:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});const i=function(e){return void 0===e&&(e=window),e.navigator.userAgent.indexOf("UCBrowser")>-1}},77297:(e,t,r)=>{"use strict";r.d(t,{F:()=>n});var i=r(2428);const n=function(e){void 0===e&&(e=window);const t=(0,i.i)(e);return t.includes("VIDAA")||t.includes("Hisense")}},52438:(e,t,r)=>{"use strict";r.d(t,{V:()=>n});var i=r(2428);const n=function(e){void 0===e&&(e=window);return(0,i.i)(e).includes("Web0S")}},99716:(e,t,r)=>{"use strict";function i(e){void 0===e&&(e=window);const t=(0,n.i)(e).toLowerCase();return/windows/.test(t)}r.d(t,{U:()=>i});var n=r(2428)},9030:(e,t,r)=>{"use strict";r.d(t,{y:()=>i});const i=function(e){return void 0===e&&(e=window),/Windows Phone/i.test(e.navigator.userAgent)}},5360:(e,t,r)=>{"use strict";function i(e){if(void 0===e&&(e=window),(0,s.B)(e)){const t=(0,n.i)(e).match(/version\/([\d]+)\.([\d]+)/i);if(!t)return{major:-1,minor:-1};const[,r,i]=t;return{major:parseInt(r,10),minor:parseInt(i,10)}}return{major:-1,minor:-1}}r.d(t,{R:()=>i});var n=r(2428),s=r(48265)},20526:(e,t,r)=>{"use strict";function i(e){const t=(0,n.A)(e.documentElement).map(e=>e.ownerDocument);return t.unshift(e),t.map(e=>({location:(0,s.b)(e.defaultView),referrer:e.referrer}))}r.d(t,{F:()=>i});var n=r(68996),s=r(29487)},39720:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e){void 0===e&&(e={});const t={};for(const r in e){const i=e[r],n=typeof i;"string"!==n&&"number"!==n&&"boolean"!==n||(t[r]=i)}return t}function s(){const{plugins:e}=window.navigator;return void 0===e||0===e.length?[]:Array.from(e).map(n)}function a(){const e=window.navigator||{},t=window.performance||{},{location:r,referrer:a}=(0,o.w)(document);return{navigator:i({},n(e),{connection:n(e.connection),plugins:s()}),performance:{memory:n(t.memory)},playerLocation:location.href,iframeApiLocation:r,iframeApiReferrer:a}}r.d(t,{S:()=>a,r:()=>n});var o=r(16323)},16323:(e,t,r)=>{"use strict";function i(e){let t="",r="";if(e){(0,n.F)(e).reverse().forEach(e=>{let{location:i,referrer:n}=e;t=t||i,r=r||n})}return{location:t,referrer:r}}r.d(t,{w:()=>i});var n=r(20526)},68996:(e,t,r)=>{"use strict";function i(e,t){if(void 0===t&&(t=!0),(0,n.z)()&&t)return[];const r=[];let i=e;for(;;)try{if(i=i.ownerDocument.defaultView.frameElement,!i)return r;r.push(i)}catch(s){return r}}r.d(t,{A:()=>i});var n=r(63416)},2428:(e,t,r)=>{"use strict";function i(e){void 0===e&&(e=window);try{return(e.navigator||{}).userAgent||""}catch(t){return""}}r.d(t,{i:()=>i})},29487:(e,t,r)=>{"use strict";function i(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}r.d(t,{b:()=>i})},58710:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{j:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.ACCESS}))}getClass(){return a}}},97622:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{o:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.ADS}))}getClass(){return a}}},44676:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{c:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.CANNOT_PLAY}))}getClass(){return a}}},81261:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{x:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.CONFIG}))}getClass(){return a}}},9068:(e,t,r)=>{"use strict";r.d(t,{s:()=>p});var i=r(54926),n=r(96541);const s="DEFAULT_ERROR_MESSAGE",a=0,o="",l="?:?:?",d=!0,c="DEFAULT";var u=r(40497),h=r.n(u);class p extends Error{constructor(e,t){void 0===t&&(t={});const r="object"===typeof e?e:{message:String(e||s)};var i,u;super(),this.message=void 0,this.code=void 0,this.category=void 0,this.isFatal=void 0,this.details=void 0,this.stack=void 0,i=this,u=this.constructor,"captureStackTrace"in Error&&Error.captureStackTrace(i,u),h()(this,this.constructor.prototype),this.message=t.message||r.message||String(t.code||r.code||s),this.code=t.code||r.code||r.id||a,this.category=t.category||r.category||c,this.isFatal=Boolean(function(e){const[t]=(0,n.h)(e,e=>void 0!==e);return t}([t.isFatal,r.isFatal,d])),this.details=t.details||r.details||o,Object.defineProperty(this,"stack",{enumerable:!0});const p=t.stack||r.stack||function(e){const{url:t,line:r,col:i,fileName:n,columnNumber:s,lineNumber:a}=e;return(t||n||"?")+":"+(r||a||"?")+":"+(i||s||"?")}(r);let m=p===l?this.stack:p;if(m&&m!==l)this.stack=m;else if(!this.stack)try{throw new Error(this.message)}catch(v){this.stack=m=v.stack||l}}toString(){return(0,i.Y)(this.toJSON())||"{}"}toJSON(){return{message:this.message,code:this.code,category:this.category,isFatal:this.isFatal,details:this.details,stack:this.stack}}}},91434:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{b:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.DEFAULT}))}getClass(){return a}}},3816:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{s:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.DRM}))}getClass(){return a}}},58884:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{p:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.EXCEPTION}))}getClass(){return a}}},99218:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{c:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.MEDIA}))}getClass(){return a}}},38333:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{T:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.NETWORK_PLAYER}))}getClass(){return a}}},93499:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{j:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.NETWORK_REQUEST}))}getClass(){return a}get resourceType(){var e;return null==(e=this.errorData)?void 0:e.resourceType}get requestUrl(){var e;return null==(e=this.errorData)?void 0:e.requestUrl}get responseStatus(){var e;return null==(e=this.errorData)?void 0:e.responseStatus}get requestId(){var e;return null==(e=this.errorData)?void 0:e.requestId}}},4699:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{E:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.NO_CODECS}))}getClass(){return a}}},82651:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{r:()=>s});var n=r(9068);class s extends n.s{get messageDetails(){var e;return null==(e=this.errorData)?void 0:e.messageDetails}get vsid(){var e;return null==(e=this.errorData)?void 0:e.vsid}get helpLink(){var e;return null==(e=this.errorData)?void 0:e.helpLink}get cause(){var e;return null==(e=this.errorData)?void 0:e.cause}constructor(e){const t="object"===typeof e?e:{message:String(e),code:0};super(t),this.errorData=void 0,this.errorData=t}overridingClone(e){const t=this.getClass(),r=this.toJSON();return i(r,e),new t(r)}toJSON(){const e=super.toJSON();return i({},this.errorData,e)}}},52257:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{M:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.REGIONAL}))}getClass(){return a}}},42419:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{a:()=>a});var n=r(47134),s=r(82651);class a extends s.r{constructor(e){super(i({},e,{category:n.q.UNSUPPORTED_ENV}))}getClass(){return a}}},10869:(e,t,r)=>{"use strict";function i(e){const{issues:t,valiIssues:r}=e.pop();r.forEach(r=>{const i={expected:r.expected,received:r.received,message:r.message,kind:r.kind,type:r.type};r.issues&&(i.issues=[],e.push({issues:i.issues,valiIssues:r.issues})),r.path&&(i.path=[],r.path.forEach(e=>{var t;let{key:r,origin:n,type:s}=e;null==(t=i.path)||t.push({key:r,origin:n,type:s})})),t.push(i)})}function n(e){if((0,l.h)(e))return e.toJSON();if((0,o.yhs)(e)){const t=function(e){const t=[],r=[{issues:t,valiIssues:e.issues}];try{for(;r.length;)i(r)}catch(n){return"[parsing failed]"}return t}(e);return{details:t,message:JSON.stringify(t,null,4)}}return(0,a.K)(e)?e:(0,s.H)(e)?{message:e}:{message:"UNEXPECTED_ERROR_TYPE",details:e}}r.d(t,{K:()=>n});var s=r(16187),a=r(76101),o=r(60059),l=r(33139)},33139:(e,t,r)=>{"use strict";function i(e){if(!(0,n.K)(e))return!1;const t=e;return(0,s.H)(t.code)&&(0,s.H)(t.category)&&"boolean"===typeof t.isFatal&&"toJSON"in t&&"overridingClone"in t}r.d(t,{h:()=>i});var n=r(76101),s=r(16187)},47134:(e,t,r)=>{"use strict";let i;r.d(t,{q:()=>i}),function(e){e.NETWORK_REQUEST="NETWORK_REQUEST",e.DEFAULT="DEFAULT",e.MEDIA="MEDIA",e.NETWORK_PLAYER="NETWORK_PLAYER",e.NO_CODECS="NO_CODECS",e.CANNOT_PLAY="CANNOT_PLAY",e.UNSUPPORTED_ENV="UNSUPPORTED_ENV",e.EXCEPTION="EXCEPTION",e.ADS="ADS",e.CONFIG="CONFIG",e.REGIONAL="REGIONAL",e.DRM="DRM",e.ACCESS="ACCESS"}(i||(i={}))},9610:(e,t,r)=>{"use strict";function i(e,t){void 0===t&&(t=!1);const r=e.code;return"NO_CODECS"===r&&(0,n.U)()&&function(e){void 0===e&&(e=window);const t=(0,s.i)(e).toLowerCase(),r=/windows nt (\d+\.\d+)/.exec(t);if(r){const e=Number(r[1]);return e>0?e:-1}return-1}()>6?{title:"NO_CODECS_TITLE",message:"NO_CODECS_MESSAGE",helpLink:"https://yandex.cloud/ru/docs/video/troubleshooting#player-issues#no-codecs",helpLinkButtonText:"NO_CODECS_HELP_LINK_TITLE"}:"DRM_PROXY_ERROR_NEED_COOKIE"===r?{title:"NEED_COOKIE_TITLE",message:"NEED_COOKIE_MESSAGE",helpLink:e.helpLink||void 0,helpLinkButtonText:"NEED_COOKIE_HELP_LINK_TITLE"}:"DRM_PROXY_ERROR_NEED_TEAM_LOGIN"===r?{title:"NEED_TEAM_LOGIN_TITLE",message:"NEED_TEAM_LOGIN_MESSAGE",helpLink:e.helpLink||void 0,helpLinkButtonText:"NEED_TEAM_LOGIN_HELP_LINK_TITLE"}:"DRM_PROXY_ERROR_NEED_VIEW_PERMISSION"===r?{title:"NEED_VIEW_PERMISSION_TITLE",message:"NEED_VIEW_PERMISSION_MESSAGE",helpLink:e.helpLink||void 0,helpLinkButtonText:"NEED_VIEW_PERMISSION_HELP_LINK_TITLE"}:"BANNED"===r?{title:"BANNED_ERROR_CATEGORY_TITLE",message:"BANNED_ERROR_CATEGORY_MESSAGE",helpLink:null,helpLinkButtonText:"ERROR_SCREEN_DEFAULT_HELP_LINK"}:"REGIONAL_RESTRICTION"===r?{title:"REGIONAL_ERROR_CATEGORY_TITLE",message:void 0,helpLink:e.helpLink||void 0,helpLinkButtonText:"ERROR_SCREEN_DEFAULT_HELP_LINK"}:t&&(i=e.category,[a.q.NETWORK_PLAYER,a.q.NETWORK_REQUEST,a.q.DRM,a.q.ADS].indexOf(i)>-1)?{title:"ADBLOCK_DETECTED_TITLE",message:"ADBLOCK_DETECTED_MESSAGE",helpLink:"https://yandex.ru/support/common/ru/troubleshooting/yandex-in-adblock.html",helpLinkButtonText:"ERROR_SCREEN_DEFAULT_HELP_LINK"}:function(e){return{title:l[e],message:d[e],helpLink:o[e],helpLinkButtonText:c[e]||"ERROR_SCREEN_DEFAULT_HELP_LINK"}}(e.category);var i}r.d(t,{e:()=>i});var n=r(99716),s=r(2428),a=r(47134);const o={[a.q.MEDIA]:"https://yandex.cloud/ru/docs/video/troubleshooting#loading-issues",[a.q.NETWORK_REQUEST]:"https://yandex.cloud/ru/docs/video/troubleshooting#loading-issues",[a.q.NETWORK_PLAYER]:"https://yandex.cloud/ru/docs/video/troubleshooting#player-issues",[a.q.NO_CODECS]:"https://yandex.ru/search/?text=\u043a\u043e\u0434\u0435\u043a\u0438",[a.q.UNSUPPORTED_ENV]:"https://yandex.ru/soft/browsers/",[a.q.EXCEPTION]:"https://yandex.cloud/ru/docs/video/troubleshooting#loading-issues",[a.q.DRM]:"https://yandex.cloud/ru/docs/video/troubleshooting-drm"},l={[a.q.DEFAULT]:"DEFAULT_ERROR_CATEGORY_TITLE",[a.q.MEDIA]:"MEDIA_ERROR_CATEGORY_TITLE",[a.q.NETWORK_REQUEST]:"NETWORK_REQUEST_ERROR_CATEGORY_TITLE",[a.q.NETWORK_PLAYER]:"NETWORK_PLAYER_ERROR_CATEGORY_TITLE",[a.q.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_TITLE",[a.q.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_TITLE",[a.q.CANNOT_PLAY]:"CANNOT_PLAY_ERROR_CATEGORY_TITLE",[a.q.EXCEPTION]:"EXCEPTION_ERROR_CATEGORY_TITLE",[a.q.CONFIG]:"CONFIG_ERROR_CATEGORY_TITLE",[a.q.REGIONAL]:"REGIONAL_ERROR_CATEGORY_TITLE",[a.q.DRM]:"DRM_ERROR_CATEGORY_TITLE",[a.q.ACCESS]:"ACCESS_ERROR_CATEGORY_TITLE"},d={[a.q.DEFAULT]:"DEFAULT_ERROR_CATEGORY_MESSAGE",[a.q.MEDIA]:"MEDIA_ERROR_CATEGORY_MESSAGE",[a.q.NETWORK_REQUEST]:"NETWORK_REQUEST_ERROR_CATEGORY_MESSAGE",[a.q.NETWORK_PLAYER]:"NETWORK_PLAYER_ERROR_CATEGORY_MESSAGE",[a.q.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_MESSAGE",[a.q.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_MESSAGE",[a.q.CANNOT_PLAY]:"CANNOT_PLAY_ERROR_CATEGORY_MESSAGE",[a.q.EXCEPTION]:"EXCEPTION_ERROR_CATEGORY_MESSAGE",[a.q.CONFIG]:"CONFIG_ERROR_CATEGORY_MESSAGE",[a.q.DRM]:"DRM_ERROR_CATEGORY_MESSAGE",[a.q.ACCESS]:"ACCESS_ERROR_CATEGORY_MESSAGE"},c={[a.q.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_HELP_LINK",[a.q.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_HELP_LINK"}},68992:(e,t,r)=>{"use strict";function i(e){return e instanceof Error||"Error"===(0,n.M)(e)}r.d(t,{V:()=>i});var n=r(60375)},54588:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});var i=r(46667);class n extends i.v{destroy(){this.emit("Destroy"),this.off("Destroy"),Object.keys(this.handlers).forEach(e=>{this.off(e)}),Object.keys(this.onceHandlers).forEach(e=>{this.off(e)})}}},46667:(e,t,r)=>{"use strict";r.d(t,{v:()=>i});class i{constructor(){this.handlers=Object.create(null),this.onceHandlers=Object.create(null),this.maxEventListeners=10}setMaxListeners(e){!isFinite(e)||e<=0||(this.maxEventListeners=e)}on(e,t){const r=this.getHandlers(e);this.removeHandler(t,r),r.push(t),this.checkSubscriptions(e)}once(e,t){const r=this.getOnceHandlers(e);this.removeHandler(t,r),r.push(t),this.checkSubscriptions(e)}off(e,t){const r=this.getHandlers(e),i=this.getOnceHandlers(e);if(void 0===t)return r.length=0,void(i.length=0);this.removeHandler(t,r),this.removeHandler(t,i)}emit(e,t){const r=this.getHandlers(e),i=this.getOnceHandlers(e).slice();this.getOnceHandlers(e).length=0,r.slice().concat(i).forEach(e=>{try{e(t)}catch(r){setTimeout(()=>{throw r},0)}})}getHandlers(e){return void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e]}getOnceHandlers(e){return void 0===this.onceHandlers[e]&&(this.onceHandlers[e]=[]),this.onceHandlers[e]}checkSubscriptions(e){const t=this.getHandlers(e).length+this.getOnceHandlers(e).length;t>this.maxEventListeners&&console.warn("There are "+t+" subscriptions on event named "+String(e))}removeHandler(e,t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}},48703:(e,t,r)=>{"use strict";function i(e){let{flags:t,slots:r="",testids:i=[]}=e;try{const e=parseInt(String(t.web_experiment_checker_testid),10),n=i.concat(r).join(";").split(";").map(e=>parseInt(e,10)).filter(isFinite);return e||0!==n.length?e?-1===n.indexOf(e)?"NoTargetSlot":"Success":"NoFlag":"NoFlagNoSlots"}catch(n){return"Exception"}}r.d(t,{B:()=>i})},53905:(e,t,r)=>{"use strict";function i(e){return!(!(0,d.K)(e)||!(0,d.K)(e.flags))&&((0,c.Y)(()=>{(0,l.M)(e.flags,(e,t)=>{p.flags[t]=String(e)})}),!0)}function n(e){if(!p.flagsInited)try{p.flagsInited=!0,(0,o.H)(),m.some(t=>t(e))}finally{Array.isArray(p.onFlagsInit)&&p.onFlagsInit.forEach(e=>(0,c.Y)(e))}}function s(e){const t={},r=e.split(";");for(let i=0;i<r.length;i++){const e=r[i].split("=");t[e[0]]=e[1]}return t}r.d(t,{V:()=>n});var a=r(95925),o=r(8268),l=r(66061),d=r(76101),c=r(86673),u=r(83699),h=r(84608);const p=(0,a.r)(),m=[function(e){const t=(0,u.L)();if(!(0,d.K)(t))return!1;const{flags:r,slots:i,testids:n}=t;return(0,d.K)(r)&&(0,c.Y)(()=>{(0,l.M)(r,(e,t)=>{p.flags[t]=String(e)})}),p.slots=void 0!==i?String(i):void 0,p.testids=Array.isArray(n)?n.join(","):void 0!==n?String(n):void 0,!0},function(e){if(!Array.isArray(e))return!1;const{flags:t,testids:r}=(0,h.D)(e);return(0,c.Y)(()=>{(0,l.M)(t,(e,t)=>{p.flags[t]=String(e)})}),p.slots=void 0,p.testids=r.join(","),!0},function(e){return!(!(0,d.K)(e)||"string"!==typeof e.flags)&&i({flags:s(e.flags)})},i]},24172:(e,t,r)=>{"use strict";r.d(t,{s:()=>i});const i="__UAAS_CONFIG_INLINE__"},11936:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});const i=!1},86107:(e,t,r)=>{"use strict";(0,r(95925).r)()},83699:(e,t,r)=>{"use strict";function i(){return(0,s.Y)(()=>{const{flags:e,testids:t,slots:r,vpuid:i}=JSON.parse(a.s);return{flags:e,testids:t,slots:r,vpuid:i}})||void 0}r.d(t,{L:()=>o});var n=r(12693),s=r(86673),a=r(24172);const o=r(11936).T?i:(0,n.I)(i)},65705:(e,t,r)=>{"use strict";function i(){return c(),f.flags||{}}function n(e){const t=a(e);if("undefined"===typeof t){const t=v[e];if(m.T&&"undefined"===typeof t)throw new Error("Unexpected default value for string flag "+e);return t}return t}function s(e){return"true"===e||"1"===e||"false"!==e&&"0"!==e&&void 0}function a(e){return c(e),f.flags[e]}function o(e){const t=s(a(e));if("undefined"===typeof t){const t=s(v[e]);if(m.T&&"undefined"===typeof t)throw new Error("Unexpected default value for boolean flag "+e);return t}return t}function l(e){if("undefined"===typeof e)return;const t=parseFloat(e);return(0,u.z)(t)?t:void 0}function d(e){const t=l(a(e));if("undefined"===typeof t){const t=l(v[e]);if(m.T&&"undefined"===typeof t)throw new Error("Unexpected default value for numeric flag "+e);return t}return t}function c(e){if(f.flagsInited)return;const t=new Error(e?"Unexpected usage of player's flag "+e+" before any flag configuration":"Unexpected usage of player's getFlagsJson before any flag configuration");setTimeout(()=>{throw t})}r.d(t,{RW:()=>o,Vc:()=>h.V,jS:()=>d,qm:()=>i,r0:()=>n,rg:()=>p.r});var u=r(93966),h=r(53905),p=r(95925),m=r(11936);r(86107);const v="undefined"!==typeof{disable_multiplatform_interval_task:"false",web_debug_log_calls:"false",web_debug_log_events:"false",web_debug_log_internals:"false",web_debug_panel:"false",web_disable_seeking_logging:"false",web_experiment_checker_testid:"NaN",web_force_hls_js:"false",web_hls_js_force_start_level:"-1",web_ignore_render_stalled:"true",web_limited_bitrate_forward_gap:"false",web_multiplatform_fpa_call_process_after_last_response_end:"false",web_multiplatform_fpa_process_interval:"100",web_new_fullscreen_logic:"false",web_resolution_rule_aspect_ratio:"true",web_seek_range_fallback_enabled:"false",web_send_large_beacon:"true",web_v2_multiplatform_buffer_goal_manager:"false",web_yasp_action_on_timings_collection:"none",web_yasp_buffer_goal_bytes_size:"0",web_yasp_decode_time_batcher:"false",web_yasp_enable_hevc:"false",web_yasp_enable_network_traces:"false",web_yasp_enable_sextant:"false",web_yasp_enable_source_buffer_timeline:"false",web_yasp_enable_worker:"true",web_yasp_hash_instead_of_saved_position:"false",web_yasp_set_track_after_clear:"false",web_yasp_stalled_events:"false",web_yasp_static_timeout_for_low_latency:"true",web_yasp_target_latency_debug:"-1",web_yasp_time_to_start:"null",web_yasp_vpl_gap_offset:"false",yasp_abr_loading_segment:"false",yasp_body_timeout:"1000",yasp_enable_new_timeout:"false",yasp_fair_bandwidth:"false",yasp_headers_timeout:"5000",yasp_videosegment_expected_load_time_multiplier:"1"}?{disable_multiplatform_interval_task:"false",web_debug_log_calls:"false",web_debug_log_events:"false",web_debug_log_internals:"false",web_debug_panel:"false",web_disable_seeking_logging:"false",web_experiment_checker_testid:"NaN",web_force_hls_js:"false",web_hls_js_force_start_level:"-1",web_ignore_render_stalled:"true",web_limited_bitrate_forward_gap:"false",web_multiplatform_fpa_call_process_after_last_response_end:"false",web_multiplatform_fpa_process_interval:"100",web_new_fullscreen_logic:"false",web_resolution_rule_aspect_ratio:"true",web_seek_range_fallback_enabled:"false",web_send_large_beacon:"true",web_v2_multiplatform_buffer_goal_manager:"false",web_yasp_action_on_timings_collection:"none",web_yasp_buffer_goal_bytes_size:"0",web_yasp_decode_time_batcher:"false",web_yasp_enable_hevc:"false",web_yasp_enable_network_traces:"false",web_yasp_enable_sextant:"false",web_yasp_enable_source_buffer_timeline:"false",web_yasp_enable_worker:"true",web_yasp_hash_instead_of_saved_position:"false",web_yasp_set_track_after_clear:"false",web_yasp_stalled_events:"false",web_yasp_static_timeout_for_low_latency:"true",web_yasp_target_latency_debug:"-1",web_yasp_time_to_start:"null",web_yasp_vpl_gap_offset:"false",yasp_abr_loading_segment:"false",yasp_body_timeout:"1000",yasp_enable_new_timeout:"false",yasp_fair_bandwidth:"false",yasp_headers_timeout:"5000",yasp_videosegment_expected_load_time_multiplier:"1"}:{},f=(0,p.r)()},84608:(e,t,r)=>{"use strict";function i(e){const t={},r=[];return e.forEach(e=>{var i;if(!(0,n.K)(e))return;const{TESTID:s,CONTEXT:a}=e;Array.isArray(s)?s.filter(Boolean).forEach(e=>{r.push(String(e))}):s&&r.push(String(s)),"VDPLTFRM"===e.HANDLER&&(0,n.K)(null==a||null==(i=a.MAIN)?void 0:i.web_player)&&Object.entries(a.MAIN.web_player).forEach(e=>{let[r,i]=e;t[r]=i})}),{flags:t,testids:r}}r.d(t,{D:()=>i});var n=r(76101)},8268:(e,t,r)=>{"use strict";function i(){var e;const t=null==(e=(0,n.L)())?void 0:e.vpuid;t&&(0,s.i)(String(t))}r.d(t,{H:()=>i});var n=r(83699),s=r(40914)},64735:(e,t,r)=>{"use strict";r.d(t,{h:()=>i.h});var i=r(32700)},99181:(e,t,r)=>{"use strict";function i(){const e=window.location.hostname.split(".");if(1===e.length)return;const t=e.pop();return isFinite(parseInt(t,10))?void 0:t}r.d(t,{x:()=>i})},32700:(e,t,r)=>{"use strict";function i(e){return"frontend.vh.yandex."+e}function n(){const e=(0,s.x)();return void 0===e||-1===a.indexOf(e)?i("ru"):i(e)}r.d(t,{h:()=>n});var s=r(99181);const a=["ru","by","com","uz","kz"]},40813:(e,t,r)=>{"use strict";function i(){return"object"===typeof self?self:"object"===typeof window?window:globalThis}r.d(t,{I:()=>i})},47779:(e,t,r)=>{"use strict";function i(e){const t=e.document;let r=t.getElementsByTagName("head")[0];return r||(r=t.createElement("head"),t.documentElement.appendChild(r)),r}r.d(t,{c:()=>i})},13854:(e,t,r)=>{"use strict";r.r(t),r.d(t,{be:()=>i});const i={TRACK_AUTO:"\u0410\u045e\u0442\u0430"}},24277:(e,t,r)=>{"use strict";r.r(t),r.d(t,{en:()=>i});const i={TRACK_AUTO:"Auto"}},37969:(e,t,r)=>{"use strict";r.r(t),r.d(t,{id:()=>i});const i={TRACK_AUTO:"Otomatis"}},45448:(e,t,r)=>{"use strict";r.r(t),r.d(t,{kk:()=>i});const i={TRACK_AUTO:"\u0410\u0432\u0442\u043e"}},65097:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ru:()=>i});const i={TRACK_AUTO:"\u0410\u0432\u0442\u043e"}},76935:(e,t,r)=>{"use strict";r.r(t),r.d(t,{tr:()=>i});const i={TRACK_AUTO:"Oto"}},20667:(e,t,r)=>{"use strict";r.r(t),r.d(t,{tt:()=>i});const i={TRACK_AUTO:"\u0410\u0432\u0442\u043e"}},35144:(e,t,r)=>{"use strict";r.r(t),r.d(t,{uk:()=>i});const i={TRACK_AUTO:"\u0410\u0432\u0442\u043e"}},67109:(e,t,r)=>{"use strict";r.r(t),r.d(t,{uz:()=>i});const i={TRACK_AUTO:"Avto"}},53878:(e,t,r)=>{"use strict";function i(e,t){if(void 0===t&&(t=!1),!e)return!1;const r=t?Function.prototype.toString.call(e):e.toString?e.toString():"";return/\[native code\]/.test(r)||/\/\* source code not available \*\//.test(r)}r.d(t,{t:()=>i})},88085:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e){const{dropCacheOnRetry:t=!1,onBeforeLoad:r=l.Z,retries:n=0}=e;if(e.checkLoad&&e.checkLoad())return void(e.onLoad&&e.onLoad());let s=r,a=0;return t&&n>0&&(s=e=>{if(r(e),a>0){const t=-1===e.src.indexOf("?")?"?":"&",r=function(e){const t=1e9;let r=Math.floor(Math.random()*t)%t;return Number.isFinite(r)||(r=0),r+=Date.now()%t,String(e)+r.toString(36)}(a);e.src+=t+r}a++}),function e(t){const{src:r,win:n=window,charset:s="utf-8",async:a=!0,retries:c=0,onRetry:u=l.Z,retryDelay:h=0,checkLoad:p=d,onBeforeLoad:m=l.Z,onLoad:v=l.Z,onError:f=l.Z}=t,g=n.document.createElement("script"),y=n=>{var s;c>0?(u(n),e(i({},t,{src:r,retries:c-1}))):f(n),null==(s=g.parentNode)||s.removeChild(g)};g.type="text/javascript",g.async=a,g.onload=()=>p(g)?v():(()=>{const e=new Error("checkLoad for "+r.split("?")[0]+" failed");e.additional=i({},e.additional,{src:r}),y(e)})(),g.onerror=e=>{try{n.setTimeout(()=>{y(e)},h)}catch(t){}},g.src=r,g.charset=s,m(g),(0,o.c)(n).appendChild(g)}(i({},e,{onBeforeLoad:s}))}function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function a(e){return new Promise((t,r)=>{n(s({},e,{onLoad:t,onError:r}))})}r.d(t,{T:()=>a});var o=r(47779),l=r(88261);const d=e=>!0},36354:(e,t,r)=>{"use strict";function i(e){return e&&"function"===typeof e.catch&&e.catch(e=>{}),e}r.d(t,{v:()=>i})},91761:(e,t,r)=>{"use strict";r.d(t,{my:()=>i.my});var i=r(3758)},46445:(e,t,r)=>{"use strict";function i(e){return e}r.d(t,{y:()=>i})},3758:(e,t,r)=>{"use strict";r.d(t,{my:()=>i});const i=r(46445).y},95925:(e,t,r)=>{"use strict";function i(){return l}function n(e){if(l.flagsInited)return(0,a.Y)(e);l.onFlagsInit||(l.onFlagsInit=[]),l.onFlagsInit.push(e)}r.d(t,{a:()=>n,r:()=>i});var s=r(40813),a=r(86673);const o=(0,s.I)();o.Ya||(o.Ya={}),o.Ya.streamPlayer||(o.Ya.streamPlayer={}),o.Ya.streamPlayer.exp||(o.Ya.streamPlayer.exp={});const l=o.Ya.streamPlayer.exp;l.flags||(l.flags={})},38580:(e,t,r)=>{"use strict";let i;r.d(t,{M:()=>i}),function(e){e[e.PLAYING=1]="PLAYING",e[e.NOT_PLAYING=2]="NOT_PLAYING"}(i||(i={}))},81323:(e,t,r)=>{"use strict";let i;r.d(t,{W:()=>i}),function(e){e.fairplay="fairplay",e.playready="playready",e.widevine="widevine",e.clearkey="clearkey",e.none="none"}(i||(i={}))},31969:(e,t,r)=>{"use strict";let i;r.d(t,{D:()=>i}),function(e){e.LIVE="LIVE",e.EVENT="EVENT",e.VOD="VOD"}(i||(i={}))},88114:(e,t,r)=>{"use strict";let i;r.d(t,{E:()=>i}),function(e){e.Ready="Ready",e.SkinReady="SkinReady",e.PosterReady="PosterReady",e.UserReady="UserReady",e.Destroy="Destroy",e.ContentImpression="ContentImpression",e.ResourcesIdle="ResourcesIdle",e.SourceChange="SourceChange",e.StreamChange="StreamChange",e.StreamsWithSupportInfoChange="StreamsWithSupportInfoChange",e.StartStageChange="StartStageChange",e.PlayingStateChange="PlayingStateChange",e.RequestPlayingState="RequestPlayingState",e.VideoTypeChange="VideoTypeChange",e.UtcStartTimeChange="UtcStartTimeChange",e.DVRStartTimeChange="DVRStartTimeChange",e.DVRDurationChange="DVRDurationChange",e.CurrentTimeChange="CurrentTimeChange",e.WatchedTimeChange="WatchedTimeChange",e.LiveLatencyChange="LiveLatencyChange",e.DurationChange="DurationChange",e.VolumeChange="VolumeChange",e.MutedChange="MutedChange",e.VolumeChangeReasonChange="VolumeChangeReasonChange",e.FullscreenStateChange="FullscreenStateChange",e.RequestFullscreenStateChange="RequestFullscreenStateChange",e.PictureInPictureStateChange="PictureInPictureStateChange",e.VisibleStateChange="VisibleStateChange",e.VideoSizeChange="VideoSizeChange",e.VideoTracksChange="VideoTracksChange",e.VideoTrackChange="VideoTrackChange",e.AudioTracksChange="AudioTracksChange",e.AudioTrackChange="AudioTrackChange",e.TextTracksChange="TextTracksChange",e.TextTrackChange="TextTrackChange",e.SubtitlesChange="SubtitlesChange",e.ErrorChange="ErrorChange",e.PlaybackRateRangeChange="PlaybackRateRangeChange",e.PlaybackRateChange="PlaybackRateChange",e.AdStateChange="AdStateChange",e.NextAdRemainingTimeChange="NextAdRemainingTimeChange",e.BeforeAdPodStart="BeforeAdPodStart",e.AdPodStart="AdPodStart",e.AdPodSkip="AdPodSkip",e.AdPodEnd="AdPodEnd",e.AdSkippableStateChange="AdSkippableStateChange",e.AdVolumeAvailabilityStateChange="AdVolumeAvailabilityStateChange",e.AdPodCloseStateChange="AdPodCloseStateChange",e.AdPodDurationChange="AdPodDurationChange",e.AdPodCurrentTimeChange="AdPodCurrentTimeChange",e.AdPodTimeToSkipChange="AdPodTimeToSkipChange",e.AdInteraction="AdInteraction",e.BufferedRangesChange="BufferedRangesChange",e.TileMetaInfoChange="TileMetaInfoChange",e.TileMetaInfoUrlChange="TileMetaInfoUrlChange",e.RecoverStart="RecoverStart",e.ConnectionQualityChange="ConnectionQualityChange",e.DrmSystemChange="DrmSystemChange",e.AdLoaded="AdLoaded",e.AdError="AdError",e.AdPodClick="AdPodClick",e.InrollFrame="InrollFrame",e.UgcLiveStatusChange="UgcLiveStatusChange",e.FrameRendered="FrameRendered",e.RequestSeek="RequestSeek"}(i||(i={}))},58528:(e,t,r)=>{"use strict";let i;r.d(t,{k:()=>i}),function(e){e.init="init",e.ready="ready",e.broken="broken",e.destroyed="destroyed"}(i||(i={}))},10730:(e,t,r)=>{"use strict";let i;r.d(t,{l:()=>i}),function(e){e.Unknown="Unknown",e.ExternalApi="ExternalApi",e.VisiblePlayback="VisiblePlayback",e.PlayRejected="PlayRejected",e.RestoreAfterInsertInto="RestoreAfterInsertInto",e.WaitForSourceConfigUpdate="WaitForSourceConfigUpdate",e.CompletedRecoverSourceConfig="CompletedRecoverSourceConfig",e.StartPlayingAnotherPlayer="StartPlayingAnotherPlayer",e.PlayerListSdkPauseOnActiveItemChange="PlayerListSdkPauseOnActiveItemChange",e.PlayerListSdkPlayOnActiveItemChange="PlayerListSdkPlayOnActiveItemChange",e.BackwardPlayback="BackwardPlayback"}(i||(i={}))},24635:(e,t,r)=>{"use strict";let i;r.d(t,{$:()=>i}),function(e){e.NATIVE="native",e.HLS="hls",e.MP4="mp4",e.YASP="yasp"}(i||(i={}))},90015:(e,t,r)=>{"use strict";let i;r.d(t,{X:()=>i}),function(e){e.PLAY="play",e.PAUSE="pause",e.BUFFERING="buffering",e.END="end"}(i||(i={}))},62404:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});const i=!(0,r(53878).t)(Math.random)||Math.random()===Math.random()},72177:(e,t,r)=>{"use strict";r.d(t,{M:()=>s});var i=r(62404),n=r(82484);const s=i.i?n.U:function(){return Math.random()}},82484:(e,t,r)=>{"use strict";function i(){return s=16807*s%2147483647,(s-1)/2147483646}r.d(t,{U:()=>i});var n=r(46869);let s=(0,n.m6)()*(0,n.no)()%2147483647},35634:(e,t,r)=>{"use strict";function i(e){return{getItem(t){try{return e.getItem(t)}catch(r){return null}},setItem(t,r){try{e.setItem(t,r)}catch(i){}},removeItem(t){try{e.removeItem(t)}catch(r){}},clear(){try{e.clear()}catch(t){}},hasItem(t){try{return null!==e.getItem(t)}catch(r){return!1}},get length(){try{return e.length}catch(t){return 0}},key(t){try{return e.key(t)}catch(r){return null}}}}r.d(t,{EN:()=>a,KK:()=>o,tO:()=>s});var n=r(24577);const s=i(n.iW),a=i(n.qr),o=i(n.iZ)},49892:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});class i{constructor(){this.data={}}getItem(e){return this.data[e]||null}setItem(e,t){this.data[e]=t}removeItem(e){delete this.data[e]}clear(){this.data={}}get length(){return Object.keys(this.data).length}key(e){const t=Object.keys(this.data);return e>=0&&e<t.length?t[e]:null}}},24577:(e,t,r)=>{"use strict";r.d(t,{iW:()=>a,iZ:()=>l,qr:()=>o});var i=r(49892),n=r(7041);class s{constructor(e){void 0===e&&(e=["local","session","memory"]),this.fallbackOrder=void 0,this.fallbackOrder=e}getStorage(){for(const e of this.fallbackOrder)if((0,n.G)(e))return this.createStorage(e);return new i.k}createStorage(e){switch(e){case"local":return window.localStorage;case"session":return window.sessionStorage;case"memory":return new i.k;default:return window.localStorage}}}const a=(new s).getStorage(),o=new s(["local","memory"]).getStorage(),l=new s(["session","memory"]).getStorage()},7041:(e,t,r)=>{"use strict";function i(e){try{return e.setItem("__test_storage__","test"),e.removeItem("__test_storage__"),!0}catch(t){return!1}}function n(e){try{switch(e){case"local":return i(window.localStorage);case"session":return i(window.sessionStorage);case"memory":return!0;default:throw new Error("Unsupported storage type: "+e)}}catch(t){return!1}}r.d(t,{G:()=>n})},18397:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e){const{method:t,url:r,async:d=!0,data:c,responseType:u="text",onBeforeSend:h=a.Z,onRetry:p=a.Z,checkStatus:m=(e=>l===e),headers:v={},xhrConstructor:f=XMLHttpRequest,retries:g=0,timeout:y=0,withCredentials:S,onAbort:A,onSetup:b}=e;if(!f)return;const E=e.onSuccess?(0,s.I)(e.onSuccess):a.Z,w=e.onError?(0,s.I)(e.onError):a.Z;let k,C=!1,P=0,T=e=>{C=!0,T=a.Z,k=e,I(new Error("Abort request")),"function"===typeof A&&A(e)};const I=t=>{_.onerror=null,_.onreadystatechange=null,P&&clearTimeout(P);if(P&&4!==_.readyState||C)try{_.abort()}catch(r){}if(!C)if(g>0){const r=p(t,_);if("boolean"!==typeof r||r||T(),C)return;n(i({},e,{onSetup:e=>{let{abort:t}=e;T=e=>t(e),C&&t(k)},retries:g-1}))}else T=a.Z,w(t,_)},_=new f;try{_.open(t,r,d)}catch(O){return void I(O)}if(_.responseType=u,_.withCredentials=Boolean(S),(0,o.M)(v,(e,t)=>{try{_.setRequestHeader(t,e)}catch(O){}}),y>0&&isFinite(y)&&(P=window.setTimeout(()=>{I(new Error("Request timeout, "+r))},y)),_.onerror=I,_.onreadystatechange=()=>{if(4===_.readyState){const{status:e}=_;m(e)?(T=a.Z,clearTimeout(P),E(_)):I(new Error("Invalid request status "+e+", "+r))}},("function"!==typeof b||(b({abort:e=>T(e)}),!C))&&(h(_,e),!C))try{_.send(c)}catch(O){I(O)}}r.d(t,{W:()=>n});var s=r(12693),a=r(88261),o=r(66061);const l=200},74800:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e){return new Promise((t,r)=>{(0,s.W)(i({},e,{onSuccess:t,onError:r}))})}r.d(t,{W:()=>n});var s=r(18397)},2705:(e,t,r)=>{"use strict";function i(e){function t(){if(0===r.length)return;const e=r.slice();r.length=0,e.forEach(e=>{let{task:t,onPromiseReject:r}=e;if(o)r(s);else try{t(i)}catch(n){}}),r.length>0&&t()}const r=[];let i,s,a=!1,o=!1;return e.then(e=>{i=e,a=!0,t()}),e.catch(e=>{s=e,o=!0,t()}),function(e,t){if(void 0===t&&(t=n.Z),o)t(s);else if(!a||r.length>0)r.push({task:e,onPromiseReject:t});else try{e(i)}catch(l){}}}r.d(t,{P:()=>i});var n=r(88261)},18566:(e,t,r)=>{"use strict";function i(e){function t(){return i.length<e}function r(e){function r(){i.splice(i.indexOf(s),1),function(){if(!t())return;const e=n.shift();e&&e()}()}const s=e.then(r,r);return i.push(s),e}void 0===e&&(e=1);const i=[],n=[];return{waitAndLock:function(e){return t()?r(e()):new Promise(t=>{n.push(()=>{t(r(e()))})})},addLock:r,isFree:t}}r.d(t,{l:()=>i})},15749:(e,t,r)=>{"use strict";r.d(t,{X:()=>i});r(91761);const i=Math.max(Math.abs(0),0)},9766:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});r(91761);var i=r(99444),n=r(15749);const s={remainingBufferedTime:Math.max(Math.abs(0),0),state:i.X.BUFFERING,currentTime:n.X,watchedTime:Math.max(Math.abs(0),0),duration:Math.max(0,0)}},60435:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{M0:()=>k,ad:()=>b.a,lY:()=>A.l});var n=r(99444),s=(r(91761),r(1648)),a=r(86037),o=r(54360),l=r(81161),d=r(78041),c=r(84780),u=r(6632),h=r(56920),p=r(8053),m=r(6055),v=r(86673),f=r(46869),g=(r(7312),r(16802)),y=r(36486),S=r(3684),A=r(70159),b=r(20348);const E={enabled:!0,events:[n.r.Watched10Sec,n.r.Watched20Sec,n.r.Heartbeat30Sec]},w={logVersion:"1.3.0"};class k{static getVpuid(){return y.vi}constructor(e){let{sendLog:t,playerInfo:r,getState:i}=e;this.watchedTimeTracker=void 0,this.fatalTracker=void 0,this.playbackTracker=void 0,this.playerAliveController=void 0,this.stalledController=void 0,this.remoteProgressSavingInfo=E,this.staticParams={},this.playerInfo=void 0,this.useOfDeprecatedMethodIsLogged=!1,this.timer=void 0,this.timerStartTime=Date.now(),this.sendLog=void 0,this.getState=void 0,this.destroyed=!1,this.wasInitBufferingLogged=!1,this.externalStalledDuration=0,this.initialStalledDuration=0,this.wasInitBufferingHandled=!1,this.initialStalledTimestamp=void 0,this.initialStalledTimestampStop=void 0,this.eventIndex=0,this.reportNumber=0,this.sourceIndexes={current:0,last:0},this.playerInfo=r,this.sendLog=t,this.getState=i,this.playbackTracker=new s.$({onEvent:e=>this.logEvent({name:e})}),this.stalledController=new l.H({getState:this.getState,logEvent:e=>this.logEvent(e)}),this.watchedTimeTracker=new g.Y(i,e=>this.playbackTracker.onWatchedTimeChange(e)),this.playerAliveController=new o.m({getState:i,onFlushStates:e=>this.logEvent({name:"PlayerAlive",data:{states:e}}),getTimestamp:()=>this.getLogTimestamp(),stalledController:this.stalledController,getWatchedTime:()=>this.watchedTimeTracker.getWatchedTime()}),this.fatalTracker=new a.g,this.initOnVisibilityChangeHandling(),this.timer=new S.A}getLogTimestamp(){return Math.round(this.timerStartTime+this.timer.now())}initOnVisibilityChangeHandling(){const e=(0,h.Y)(document,e=>{e||this.playerAliveController.flushStates()});this.playerAliveController.addDestroyHandler(e)}setStaticParams(e,t){this.staticParams=t?i({},e):i({},this.staticParams,e)}enableRemoteProgressSaving(e){this.remoteProgressSavingInfo.enabled=e}updateWatchedTime(){this.useOfDeprecatedMethodIsLogged||(this.logEvent({name:"DeprecatedTelemetryMethodUsed",data:{method:"updateWatchedTime"}}),this.useOfDeprecatedMethodIsLogged=!0),(0,c.L)(new Error("Deprecated method used. Method is Telemetry#updateWatchedTime(). Just remove. Telemetry calculates watchedTime itself now."))}setPlayingState(e){this.playbackTracker.onPlayingStateChange(e),this.handleInitialBuffering(),e===n.X.BUFFERING?this.setBuffering(!0):this.setBuffering(!1)}logEvent(e,t){if(this.destroyed)return;const r=this.getFullEventLog(e,t),i=this.getUrlParams(r.eventType,r.eventName,e.labels);this.sendData(r,i)}logError(e,t){let{error:r,labels:i,extraRootFields:n}=e;if(this.destroyed)return;r.isFatal=this.fatalTracker.checkIsFatal(r.isFatal,this.staticParams.streamUrl);const s=this.getFullErrorLog({error:r,labels:i,extraRootFields:n,sourceIndex:t}),a=this.getUrlParams(s.eventType,s.eventName,i);this.sendData(s,a)}getUrlParams(e,t,r){return i({},r,{[this.playerInfo.service]:this.playerInfo.version,[e]:String(t)})}getFullEventLog(e,t){const r=this.getState(),n=i({},this.staticParams.labels,e.labels,{videoType:null==r?void 0:r.videoType}),s=u.P.includes(e.name)?i({},e.data,this.getDataToSend(r)):e.data,a={};return this.remoteProgressSavingInfo.events.includes(e.name)&&r&&(a.playbackProgress={time:r.currentTime}),i({},w,this.staticParams,e.extraRootFields,a,this.playerInfo,{vpuid:y.vi,eventType:"event",eventName:e.name,timestamp:this.getLogTimestamp(),documentIsVisible:(0,d.s)(document),eventIndex:this.eventIndex,data:s,labels:n,sourceIndex:null!=t?t:this.sourceIndexes.current})}getFullErrorLog(e){let{error:t,labels:r,extraRootFields:n,sourceIndex:s}=e;const a=i({},this.staticParams.labels,r);return t.details=(0,v.Y)(()=>"string"===typeof t.details?t.details:JSON.stringify(t.details))||t.details,i({},w,this.playerInfo,this.staticParams,n,{vpuid:y.vi,eventType:t.isFatal?"fatal":"error",eventName:String(t.code),timestamp:this.getLogTimestamp(),documentIsVisible:(0,d.s)(document),eventIndex:this.eventIndex,data:t,labels:a,sourceIndex:null!=s?s:this.sourceIndexes.current})}getDataToSend(e){if(!e)return{};const{duration:t,currentTime:r,utcStartTime:i,isFullscreen:n,volume:s,muted:a}=e;return{watchedSec:this.watchedTimeTracker.getWatchedTime(),duration:isNaN(t)?void 0:t,time:r,utcTime:void 0===i?void 0:i+r,isFullscreen:n,isMuted:a||0===s}}sendData(e,t){void 0!==e&&((0,v.Y)(()=>this.sendLog(e,t),c.L),this.eventIndex++)}checkStalledReason(e){return this.stalledController.getCurrentStalledReason()===e}setBuffering(e,t){this.stalledController.setBuffering(e,t)}setExpectedBuffering(e){let{reason:t,details:r}=e;switch(this.checkInitBuffering(t),t){case p.k.SetSource:this.setBuffering(!1),this.clearBufferingHistory();break;case p.k.Init:break;default:this.checkStalledReason(t)||this.setBuffering(!1)}return this.stalledController.setExpectedStalled((0,m.y)(t,r))}checkInitBuffering(e){this.wasInitBufferingLogged||e===p.k.Init||this.onInitBuffering()}setExternalStalledDuration(e){const t=this.getExpectedStalled();t.reason===p.k.Init&&e&&(t.details={externalStalledDuration:e/1e3},this.setExpectedBuffering(t))}startInitBufferingTimer(){this.initialStalledTimestamp=(0,f.no)()}stopInitBufferingTimer(){this.initialStalledTimestampStop=(0,f.no)()}onInitBuffering(e){if(this.wasInitBufferingLogged)return;const t=this.initialStalledTimestamp&&!this.initialStalledTimestampStop,r=this.initialStalledTimestamp&&this.initialStalledTimestampStop;this.initialStalledDuration=t?(0,f.no)()-this.initialStalledTimestamp:r?this.initialStalledTimestampStop-this.initialStalledTimestamp:0,this.externalStalledDuration=null!=e?e:0;const{playingState:i}=this.getState()||{};"pause"!==i&&this.handleInitialBuffering(),this.wasInitBufferingLogged=!0,this.initialStalledTimestamp=void 0,this.initialStalledTimestampStop=void 0}handleInitialBuffering(){this.wasInitBufferingHandled||(this.externalStalledDuration&&this.setExternalStalledDuration(this.externalStalledDuration),this.setBuffering(!0,this.initialStalledDuration),this.wasInitBufferingHandled=!0)}destroy(e){this.stalledController.destroy(),this.playerAliveController.destroy(),this.watchedTimeTracker.destroy(),this.logEvent({name:"DestroyPlayer",data:{reason:null==e?void 0:e.reason}}),this.timer.stop(),this.destroyed=!0}getExpectedStalled(){return this.stalledController.getExpectedStalled()}clearBufferingHistory(){return this.stalledController.clearStalledHistory()}setPreloadDetails(){this.useOfDeprecatedMethodIsLogged||(this.logEvent({name:"DeprecatedTelemetryMethodUsed",data:{method:"setPreloadDetails"}}),this.useOfDeprecatedMethodIsLogged=!0),(0,c.L)(new Error("Deprecated method used. Method is Telemetry#setPreloadDetails(). Just remove it."))}writePlayerAliveStateManually(){return this.playerAliveController.writeStateManually()}flushStates(){return this.playerAliveController.flushStates()}onCreatePlayer(e,t){this.logEvent({name:"CreatePlayer",data:e,extraRootFields:t})}onBeforePreload(){return++this.sourceIndexes.last}getSourceIndex(){return this.sourceIndexes.current}onBeforeSetSource(){return++this.sourceIndexes.last}onSetSource(e,t,r){var i;if(this.flushStates(),this.sourceIndexes.current=this.sourceIndexes.last>this.sourceIndexes.current?this.sourceIndexes.last:++this.sourceIndexes.last,this.watchedTimeTracker.reset(),r&&this.setStaticParams(r),this.logEvent({name:"SetSource",data:null!=e?e:void 0}),!e||!t)return;this.setExpectedBuffering({reason:p.k.SetSource,details:t});const s=null==(i=this.getState())?void 0:i.playingState;s!==n.X.PAUSE&&s!==n.X.END&&this.setBuffering(!0)}sendReportLog(e,t,r){void 0===r&&(r=!0);const i=null!=t?t:this.generateReportId();return this.logEvent({name:"ReportLog",data:{reportId:i,reported:r,reportData:e}}),i}generateReportId(){return this.playerInfo.vsid+"x"+this.reportNumber++}onExpectedBuffering(e){let{reason:t,details:r}=e;return this.checkInitBuffering(t),this.stalledController.setExpectedStalled((0,m.y)(t,r))}onSeek(e){this.setExpectedBuffering({reason:p.k.Seek,details:e})}onVideoTrackChange(e){this.setExpectedBuffering({reason:p.k.VideoTrackChange,details:e})}onAudioTrackChange(e){this.setExpectedBuffering({reason:p.k.AudioTrackChange,details:e})}onRecover(e){this.setExpectedBuffering({reason:p.k.Recover,details:e})}onMediaError(e){this.setExpectedBuffering({reason:p.k.MediaError,details:e})}onNetworkStatusChange(e){this.setExpectedBuffering({reason:p.k.Offline,details:e})}onRepresentationsChange(e){this.setExpectedBuffering({reason:p.k.RepresentationsChange,details:e})}onLiveEdge(e){this.setExpectedBuffering({reason:p.k.LiveEdge,details:e})}onAdStart(e){this.setExpectedBuffering({reason:p.k.AdStart,details:e})}onAdBetween(e){this.setExpectedBuffering({reason:p.k.AdBetween,details:e})}onAdEnd(e){this.setExpectedBuffering({reason:p.k.AdEnd,details:e})}}},86037:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});class i{constructor(){this.lastSourceIndexWithFatal=null}extractSourceIndex(e){const t=e.split("?")[1];if(t){const e=t.split("&");for(const t of e){const[e,r]=t.split("=");if("source_index"===e)return r?Number(r):null}}return null}checkIsFatal(e,t){if(!e||!t)return e;const r=this.extractSourceIndex(t);return null===r?e:(null===this.lastSourceIndexWithFatal||r>this.lastSourceIndexWithFatal)&&(this.lastSourceIndexWithFatal=r,!0)}}},25588:(e,t,r)=>{"use strict";function i(e){return Math.floor(e/30)}r.d(t,{p:()=>i})},1648:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});r(91761);var i=r(99444),n=r(54314),s=r(13e3),a=r(16815),o=r(91923),l=r(62585);class d{constructor(e){this.params=e,this.previousWatchedTime=0}onWatchedTimeChange(e){const{previousWatchedTime:t}=this;t!==e&&((0,s.G)(t,e)?this.params.onEvent(i.r.Start):(0,l.h)(t,e)?this.params.onEvent(i.r.Watched4Sec):(0,a.o)(t,e)?this.params.onEvent(i.r.Watched10Sec):(0,o.h)(t,e)?this.params.onEvent(i.r.Watched20Sec):(0,n.k)(t,e)&&this.params.onEvent(i.r.Heartbeat30Sec),this.previousWatchedTime=e)}onPlayingStateChange(e){e===i.X.END&&this.params.onEvent(i.r.End)}}},54314:(e,t,r)=>{"use strict";function i(e,t){return(0,n.p)(e)<(0,n.p)(t)}r.d(t,{k:()=>i});var n=r(25588)},13e3:(e,t,r)=>{"use strict";function i(e,t){return 0===e&&t>0}r.d(t,{G:()=>i})},16815:(e,t,r)=>{"use strict";function i(e,t){return e<10&&t>=10}r.d(t,{o:()=>i})},91923:(e,t,r)=>{"use strict";function i(e,t){return e<20&&t>=20}r.d(t,{h:()=>i})},62585:(e,t,r)=>{"use strict";function i(e,t){return e<4&&t>=4}r.d(t,{h:()=>i})},30786:(e,t,r)=>{"use strict";r.d(t,{M:()=>s});var i=r(5274),n=r(46869);class s{constructor(e,t){this.onTick=e,this.onFlush=t,this.wasFirstFlush=!1,this.isDestroyed=!1,this.lastFlushTime=void 0,this.startTime=void 0,this.timer=void 0,this.handleTimeout=()=>{this.onTick(),this.handleFlush(),this.nextTick()},this.startTime=this.lastFlushTime=(0,n.no)(),this.timer=window.setTimeout(()=>{this.onTick(),this.nextTick()},0)}next(){this.isDestroyed||(window.clearTimeout(this.timer),this.handleFlush(),this.nextTick())}destroy(){window.clearTimeout(this.timer),this.isDestroyed=!0}nextTick(){this.isDestroyed||(window.clearTimeout(this.timer),this.timer=window.setTimeout(this.handleTimeout,this.getTimeout()))}handleFlush(){this.needFlush()&&(this.onFlush(),this.lastFlushTime=this.wasFirstFlush?(0,n.no)():this.startTime,this.wasFirstFlush=!0)}needFlush(){const e=(0,n.no)();return this.wasFirstFlush?e-this.lastFlushTime>=i.fu:e-this.startTime>=i.D}getTimeout(){return(0,n.no)()-this.startTime<i.D?i.qm:i.zB}}},5274:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,fu:()=>a,qm:()=>n,zB:()=>s});r(91761);const i=1e4,n=1e3,s=5e3,a=3e4},54360:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{m:()=>p});r(91761);var n=r(70627),s=r.n(n),a=r(30786),o=r(9766),l=r(5050),d=r(84729),c=r(66532),u=r(32520),h=r(20929);class p{constructor(e){this.props=e,this.prevState=void 0,this.states=[],this.timer=void 0,this.destroyHandlers=[],this.writeStateManually=(0,u.D)(()=>{this.writeState(),this.timer.next()},0),this.timer=new a.M(()=>this.writeState(),()=>this.flushStates())}addDestroyHandler(e){this.destroyHandlers.push(e)}destroy(){this.timer.destroy(),this.flushStates(),this.destroyHandlers.forEach(e=>{e()}),this.destroyHandlers=[]}getStates(){return[...this.states]}flushStates(){this.writeStateManually.now();const e=this.getStates();e.length>0&&this.props.onFlushStates(e),this.states.length=0}writeState(){const e=this.getPlayerAliveState();s()(this.prevState,e)||(this.prevState=e,this.states.push(i({},e,{timestamp:this.props.getTimestamp()})))}getPlayerAliveState(){var e,t;const r=i({},o.e,{saveData:(0,l.R)(),rtt:(0,d.n)()},this.props.stalledController.getStalledHistory()),n=this.props.getState();if(!n)return i({},r);const{currentTime:s,duration:a,muted:u,playingState:p,remainingBufferedTime:m,adState:v,liveLatency:f,videoTracks:g,audioTrack:y,videoSize:S,isVisible:A,capHeight:b,capWidth:E,containerHeight:w,containerWidth:k,bandwidthEstimate:C,bandwidthSource:P,droppedFrames:T,shownFrames:I,isFullscreen:_,isPictureInPicture:O,volume:R,playbackRate:D}=n,x=g.find(e=>e.selected),N=[...g].sort((e,t)=>t.bitrate-e.bitrate),V=(null==v?void 0:v.state)===c.M.PLAYING,L=!V,F=this.props.getWatchedTime();return i({},r,{watchedTime:Math.max(0,F),currentTime:isNaN(s)?0:Math.max(0,s),duration:isNaN(a)?0:Math.max(0,a),isMuted:u,state:p,remainingBufferedTime:(null==m?void 0:m.total)||0,remainingAudioBufferedTime:void 0===(null==m?void 0:m.audio)?void 0:Math.max(0,m.audio),remainingVideoBufferedTime:void 0===(null==m?void 0:m.video)?void 0:Math.max(0,m.video),ad:V?null==v?void 0:v.type:void 0,liveLatency:void 0===f?void 0:Math.max(0,f),stalledReason:this.props.stalledController.getCurrentStalledReason(),auto:void 0===(null==x?void 0:x.auto)?void 0:x.auto,isVisible:A,bitrate:null!=x&&x.bitrate?Math.max(0,Math.floor(1e3*x.bitrate)):void 0,width:void 0===(null==S?void 0:S.videoWidth)||isNaN(null==S?void 0:S.videoWidth)?void 0:Math.max(0,Math.floor(null==S?void 0:S.videoWidth)),height:void 0===(null==S?void 0:S.videoHeight)||isNaN(null==S?void 0:S.videoHeight)?void 0:Math.max(0,Math.floor(null==S?void 0:S.videoHeight)),maxWidth:L&&null!=(e=N[0])&&e.width?Math.max(0,Math.floor(N[0].width)):void 0,maxHeight:L&&null!=(t=N[0])&&t.height?Math.max(0,Math.floor(N[0].height)):void 0,audioTrack:(null==y?void 0:y.value)||void 0,audioLang:(null==y?void 0:y.lang)||void 0,audioBitrate:null!=y&&y.bitrate?Math.max(0,Math.floor(1e3*y.bitrate)):void 0,capHeight:L&&b?Math.max(0,Math.floor(b)):void 0,capWidth:L&&E?Math.max(0,Math.floor(E)):void 0,containerHeight:void 0!==w?Math.max(0,Math.floor(w)):void 0,containerWidth:void 0!==k?Math.max(0,Math.floor(k)):void 0,bandwidthEstimate:void 0===C||isNaN(C)?void 0:Math.max(0,Math.round(C)),bandwidthSource:P||void 0,droppedFrames:void 0===T?void 0:Math.max(0,Math.floor(T)),shownFrames:void 0===I?void 0:Math.max(0,Math.floor(I)),viewport:(0,h.U)(_,O),volume:R,playbackRate:D})}}},62058:(e,t,r)=>{"use strict";r.d(t,{j:()=>i});const i=new RegExp("^https?:\\/\\/([^\\/]+\\.)?("+["(an|strm)\\.yandex\\.(ru|net)","yastatic\\.net","strm-ott\\.akamaized\\.net","cdn\\.ngenix\\.net","strm\\.yandex\\.cdnga\\.net","strm-yandex\\.gcdn\\.co","(widevine|playready|fairplay)-proxy\\.ott\\.yandex\\.ru","drm\\.yandex-team\\.ru"].join("|")+")\\/(?!log|perf|jstracer)")},7312:(e,t,r)=>{"use strict";function i(e){var t,r,i,n;return null!=(t=null==(r=e.performance)?void 0:r.timeOrigin)?t:null==(i=e.performance)||null==(n=i.timing)?void 0:n.navigationStart}r.d(t,{$W:()=>l});r(91761);var n=r(26174),s=r(41682),a=r(46869),o=r(17571);class l{constructor(e){this.config=e,this.intervalId=void 0,this.contexts=[],this.allowedUrls=new Map}addAllowedUrl(e){const t=(0,o.S)(e);return!!t&&(this.allowedUrls.set(e,t),!0)}addAllowedUrls(e){for(const t of e)this.addAllowedUrl(t)}removeAllowedUrl(e){this.allowedUrls.delete(e)}getAllowedUrls(){return Array.from(this.allowedUrls.keys())}clearAllowedUrls(){this.allowedUrls.clear()}attach(e){(0,s.B)(e)&&-1===this.contexts.indexOf(e)&&(0===this.contexts.length&&(this.intervalId=setInterval(()=>this.flush(),3e4)),this.contexts.push(e))}detach(e){const t=this.contexts.indexOf(e);-1!==t&&this.contexts.splice(t,1),0===this.contexts.length&&clearInterval(this.intervalId)}destroy(){this.flush(),this.contexts.length=0,clearInterval(this.intervalId),this.clearAllowedUrls()}flush(){const e=[],t=this.contexts.map(i),r=Math.min(...t);if(this.contexts.forEach((i,s)=>{(function(e){try{var t,r;const i=null!=(t=e.performance.getEntriesByType)?t:e.performance.webkitGetEntriesByType,n=null!=(r=e.performance.clearResourceTimings)?r:e.performance.webkitClearResourceTimings,s=i.call(e.performance,"resource");return n.call(e.performance),s}catch(i){return[]}})(i).forEach(i=>{this.shouldLogResource(i.name)&&e.push((0,n.I)(i,t[s],r))})}),0===e.length)return;const s=(0,a.m6)();(function(e,t){void 0===t&&(t=65536);const r=new TextEncoder,i=[];let n=[],s=0;for(const a of e){const e=JSON.stringify(a),o=r.encode(e).length;s+o>t?(i.push(n),n=[a],s=o):(n.push(a),s+=o)}return n.length>0&&i.push(n),i})(e).forEach((e,t)=>{setTimeout(()=>{this.config.sendLog(e,{perfnow:String(s),navstart:String(r)})},500*t)})}shouldLogResource(e){return!l.SERVICE_ENDPOINTS_REGEX.test(e)&&(!!this.config.ignoreWhiteList||(!!l.MEDIA_EXTENSION_REGEX.test(e)||!!this.allowedUrls.size&&this.hasSameBaseUrl(e)))}hasSameBaseUrl(e){const t=(0,o.S)(e);if(!t)return!1;const r=Array.from(this.allowedUrls.values());for(const i of r)if(i&&i===t)return!0;return!1}}l.SERVICE_ENDPOINTS_REGEX=/\/(log|perf|jstracer)/,l.MEDIA_EXTENSION_REGEX=/\.(m4s|ts|mp4|webm|m3u8|mpd)(\?|$)/},41682:(e,t,r)=>{"use strict";function i(e){return e.performance&&((0,n.m)(e.performance.getEntriesByType)||(0,n.m)(e.performance.webkitGetEntriesByType))&&((0,n.m)(e.performance.clearResourceTimings)||(0,n.m)(e.performance.webkitClearResourceTimings))}r.d(t,{B:()=>i});var n=r(93671)},26174:(e,t,r)=>{"use strict";function i(e,t,r){return e&&"number"===typeof e?e+t-r:e}function n(e,t,r){const{duration:n,entryType:s,name:a,startTime:o,connectEnd:l,connectStart:d,decodedBodySize:c,domainLookupEnd:u,domainLookupStart:h,encodedBodySize:p,fetchStart:m,initiatorType:v,nextHopProtocol:f,redirectEnd:g,redirectStart:y,requestStart:S,responseEnd:A,responseStart:b,secureConnectionStart:E,transferSize:w,workerStart:k,serverTiming:C,responseStatus:P,deliveryType:T,renderBlockingStatus:I,firstInterimResponseStart:_}=e;return{duration:n,entryType:s,name:a,encodedBodySize:p,decodedBodySize:c,initiatorType:v,transferSize:w,nextHopProtocol:f,serverTiming:C,responseStatus:P,deliveryType:T,renderBlockingStatus:I,startTime:i(o,t,r),connectEnd:i(l,t,r),connectStart:i(d,t,r),domainLookupEnd:i(u,t,r),domainLookupStart:i(h,t,r),fetchStart:i(m,t,r),redirectEnd:i(g,t,r),redirectStart:i(y,t,r),requestStart:i(S,t,r),responseEnd:i(A,t,r),responseStart:i(b,t,r),secureConnectionStart:i(E,t,r),workerStart:i(k,t,r),firstInterimResponseStart:i(_,t,r)}}r.d(t,{I:()=>n})},61798:(e,t,r)=>{"use strict";r.d(t,{B7:()=>l,EW:()=>o});var i=r(84780),n=r(86673),s=r(46869);class a{setTimeout(e,t){if(t<=0)return void(0,n.Y)(e,i.L);const r=window.setTimeout(e,t);return()=>window.clearTimeout(r)}now(){return(0,s.m6)()}}class o{constructor(e){void 0===e&&(e=0),this.time=e,this.tasks=void 0,this.tasks=[]}setTimeout(e,t){const r=this.time+t,s={task:e,time:r,isCanceled:!1,isRunned:!1};let a=0;for(;a<this.tasks.length&&!(r<this.tasks[a].time);a+=1);if(this.tasks.splice(a,0,s),!(t<=0))return()=>s.isCanceled=!0;(0,n.Y)(()=>this.runTask(s),i.L)}setTime(e){if(isNaN(e))return;let t=0;for(;t<this.tasks.length&&!(e<this.tasks[t].time);t+=1)this.runTask(this.tasks[t]);this.time=e,this.tasks.splice(0,t)}now(){return this.time}tick(e){this.setTime(this.time+e)}reset(){this.time=0,this.tasks=[]}runTask(e){e.isRunned||e.isCanceled||(e.isRunned=!0,this.time=e.time,e.task())}}class l{constructor(e,t){void 0===t&&(t=new a),this.distributionFunction=e,this.clock=t,this.stopped=!0,this.cancel=void 0,this.lastNow=0,this.lastKnockTime=void 0,this.lastTimeout=0,this.restTime=0,this.destroyed=!1,this.isFirstKnock=!0,this.count=0}setEnabled(e){return e?this.start():this.stop(),this}stop(){return this.stopped||(this.stopped=!0,this.cancelTimeout(),this.restTime=Math.max(this.restTime-(this.clock.now()-this.lastKnockTime),0)),this}start(){return this.stopped&&!this.destroyed&&(this.stopped=!1,this.lastKnockTime=this.clock.now(),this.setTimeout(()=>this.knock(this.lastNow+this.lastTimeout),this.restTime)),this}destroy(){this.cancelTimeout(),this.stopped=!0,this.destroyed=!0}knock(e){this.lastNow=e,this.lastKnockTime=this.clock.now(),this.isFirstKnock?this.isFirstKnock=!1:this.count++;const t=this.restTime=this.lastTimeout=this.distributionFunction({time:e,count:this.count});this.stopped||this.destroyed||this.setTimeout(()=>this.knock(e+t),t)}cancelTimeout(){void 0!==this.cancel&&this.cancel(),this.cancel=void 0}setTimeout(e,t){this.cancelTimeout();const r=this.clock.setTimeout(e,t);void 0!==r&&(this.cancelTimeout(),this.cancel=r)}}},11216:(e,t,r)=>{"use strict";r.d(t,{P6:()=>o,TW:()=>l,hC:()=>n,jz:()=>a});r(91761);var i=r(8053);const n=[0,1,4,5];let s=0;const a=n.map(e=>(s=e+s,s)),o=1e3*a[a.length-1],l=[i.k.Init]},6055:(e,t,r)=>{"use strict";function i(e,t){return{reason:e,details:t,getElapsedTime:(0,n.u)()}}r.d(t,{y:()=>i});var n=r(35276)},85962:(e,t,r)=>{"use strict";function i(e){return void 0===e?0:e.duration+e.getElapsedTime()/1e3}r.d(t,{F:()=>i});r(91761)},81161:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{H:()=>u});r(91761);var n=r(8053),s=r(85962),a=r(11216),o=r(61798),l=r(35276),d=r(6055),c=r(66532);class u{constructor(e){let{getState:t,logEvent:r}=e;this.isBuffering=!1,this.timer=void 0,this.stalledId=1,this.stalledDurationRemainder=0,this.getState=void 0,this.logEvent=void 0,this.expectedStalled=(0,d.y)(n.k.Init,{}),this.currentStalled=void 0,this.stalledTime=0,this.stalledCount=0,this.getState=t,this.logEvent=r}setBuffering(e,t){if(void 0===t&&(t=0),e!==this.isBuffering)if(this.isBuffering=e,this.isBuffering){const e=[],r=a.hC.filter((r,i)=>{const n=this.currentStalled?this.currentStalled.expectedStalled:this.getExpectedStalled(),s=a.jz[i];if(t/1e3>s){const e=this.currentStalled?this.currentStalled.id:this.stalledId++;return this.currentStalled||this.stalledCount++,this.currentStalled={id:e,expectedStalled:n,duration:s,getElapsedTime:(0,l.u)()},this.send(!1,n,s,e),!1}return e.push(s),!0});this.currentStalled&&(this.stalledDurationRemainder=t/1e3-this.currentStalled.duration),r.length&&(r[0]=r[0]-this.stalledDurationRemainder),this.timer=new o.B7(t=>{let{count:i}=t;const n=this.currentStalled?this.currentStalled.expectedStalled:this.getExpectedStalled();if(i>0){const t=e[i-1],r=this.currentStalled?this.currentStalled.id:this.stalledId++;this.currentStalled||this.stalledCount++,this.currentStalled={id:r,expectedStalled:n,duration:t,getElapsedTime:(0,l.u)()},this.send(!1,n,t,r)}return i>=r.length?(this.destroyTimer(),1/0):1e3*r[i]}),this.timer.start()}else{if(this.currentStalled){var r,i;const{expectedStalled:e,id:t}=this.currentStalled,a=(0,s.F)(this.currentStalled)+this.stalledDurationRemainder;this.send(!0,e,a,t),this.currentStalled=void 0,this.stalledDurationRemainder=0,this.stalledTime=a+this.stalledTime;const o=(null==(r=this.getState())||null==(i=r.adState)?void 0:i.state)===c.M.PLAYING?n.k.AdOther:n.k.Other;this.setExpectedStalled((0,d.y)(o,void 0))}this.destroyTimer()}}getStalledHistory(){const{stalledCount:e,stalledTime:t}=this;return{stalledCount:Math.max(Math.floor(e)),stalledTime:Math.max(t,0)}}clearStalledHistory(){this.stalledCount=0,this.stalledTime=0}destroy(){this.destroyTimer()}getCurrentStalledReason(){var e;return null==(e=this.currentStalled)?void 0:e.expectedStalled.reason}setExpectedStalled(e){this.expectedStalled=e}isExpiredStalled(e){const{getElapsedTime:t,reason:r}=e;return!(a.TW.indexOf(r)>-1)&&((!this.currentStalled||this.currentStalled.expectedStalled!==e)&&t()>=a.P6)}getExpectedStalled(){const e=this.expectedStalled;return this.isExpiredStalled(e)?(0,d.y)(n.k.Other,void 0):e}destroyTimer(){this.timer&&(this.timer.destroy(),this.timer=void 0)}send(e,t,r,n){const{reason:s,details:a}=t,o={id:n,isStalledEnd:e,reason:s,stalledDuration:r,details:a};let l=i({},o.details,{stalledDuration:o.stalledDuration,stalledId:o.id});const d=this.getState();if(d){const{muted:e,remainingBufferedTime:t,videoTracks:r}=d;l=i({},l,{remainingBufferedTime:t,videoTrack:r.find(e=>e.selected),isMuted:e})}this.logEvent({name:o.isStalledEnd?"StalledEnd":"Stalled",data:l,labels:{reason:o.reason}})}}},8053:(e,t,r)=>{"use strict";let i;r.d(t,{k:()=>i}),function(e){e.Init="Init",e.SetSource="SetSource",e.Seek="Seek",e.VideoTrackChange="VideoTrackChange",e.AudioTrackChange="AudioTrackChange",e.Recover="Recover",e.MediaError="MediaError",e.Offline="Offline",e.Other="Other",e.Render="Render",e.RepresentationsChange="RepresentationsChange",e.LiveEdge="LiveEdge",e.AdStart="AdStart",e.AdOther="AdOther",e.AdBetween="AdBetween",e.AdEnd="AdEnd"}(i||(i={}))},63440:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});r(91761);var i=r(35276);class n{constructor(){this.lastUpdate=void 0,this.committed=0,this.pending=[],this.videoCredit=0,this.pendingClock=0,this.watchedTime=0,this.CONFIRM_WINDOW=1.2,this.JUMP_MIN=2,this.SMALL_NEG=.02}calc(e,t,r){if(void 0!==this.lastUpdate){const i=this.lastUpdate.getElapsedTime()/1e3,n=(e-this.lastUpdate.videoTime)/t,s=i>=0?i:0,a=0-n>this.JUMP_MIN,o=n>this.SMALL_NEG?n:0,l=n>this.JUMP_MIN;r?(this.pendingClock=this.pendingClock+s,this.dropExpired(),l||a?this.resetPending():(s>0&&this.pending.push({amount:s,bornAt:this.pendingClock}),o>0&&(this.videoCredit=this.videoCredit+o),this.consumeCredit())):this.resetPending()}this.lastUpdate=r?{getElapsedTime:(0,i.u)(),videoTime:e}:void 0}get(){return this.watchedTime}reset(){this.committed=0,this.resetPending(),this.watchedTime=0,this.lastUpdate=void 0}restoreLastUpdate(){this.lastUpdate=void 0}consumeCredit(){for(;this.videoCredit>0&&this.pending.length>0;){const e=this.pending[0],t=this.videoCredit<=e.amount?this.videoCredit:e.amount;if(e.amount=e.amount-t,this.videoCredit=this.videoCredit-t,this.committed=this.committed+t,!(e.amount<=0))break;this.pending.shift()}this.watchedTime=this.committed}dropExpired(){for(;this.pending.length>0;){const e=this.pending[0];if(!(this.pendingClock-e.bornAt>this.CONFIRM_WINDOW))break;this.pending.shift()}}resetPending(){this.pending=[],this.videoCredit=0,this.pendingClock=0,this.watchedTime=this.committed}}},16802:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});var i=r(99444),n=r(66532),s=r(63440);class a{constructor(e,t){this.getState=e,this.onChange=t,this.intervalId=void 0,this.watchedTimeCounter=void 0,this.onTick=()=>{var e;const t=this.getState();if(!t)return;const{currentTime:r,playbackRate:s=1,playingState:a,adState:o}=t,l=(null==o?void 0:o.state)===n.M.PLAYING;this.watchedTimeCounter.calc(r,s,a===i.X.PLAY&&!l),null==(e=this.onChange)||e.call(this,this.watchedTimeCounter.get())},this.intervalId=setInterval(this.onTick,100),this.watchedTimeCounter=this.createWatchedTimeCounter()}createWatchedTimeCounter(){return new s.p}reset(){var e;this.watchedTimeCounter=this.createWatchedTimeCounter(),null==(e=this.onChange)||e.call(this,this.watchedTimeCounter.get())}getWatchedTime(){return this.watchedTimeCounter.get()}destroy(){clearInterval(this.intervalId),this.intervalId=void 0}}},70159:(e,t,r)=>{"use strict";function i(e){return(0,a.Q)(String(e%Math.pow(10,4)),4,"0")}function n(e,t){if(3!==t.length)throw new Error("playerType should contains exact 3 symbols");return[(0,s.a)(44),t,i(e),(0,a.Q)(Date.now().toString().slice(0,10),10,"0")].join("x")}r.d(t,{l:()=>n});var s=r(20348),a=r(65393)},66532:(e,t,r)=>{"use strict";let i,n;r.d(t,{M:()=>i}),function(e){e[e.PLAYING=1]="PLAYING",e[e.NOT_PLAYING=2]="NOT_PLAYING"}(i||(i={})),function(e){e.preroll="preroll",e.midroll="midroll",e.postPauseroll="postPauseroll",e.postroll="postroll",e.inroll="inroll"}(n||(n={}))},99444:(e,t,r)=>{"use strict";let i,n;r.d(t,{X:()=>n,r:()=>i}),function(e){e.Start="Start",e.Watched4Sec="4SecWatched",e.Watched10Sec="10SecWatched",e.Watched20Sec="20SecWatched",e.Heartbeat30Sec="30SecHeartbeat",e.End="End"}(i||(i={})),function(e){e.PLAY="play",e.PAUSE="pause",e.BUFFERING="buffering",e.END="end"}(n||(n={}))},6632:(e,t,r)=>{"use strict";r.d(t,{P:()=>i});const i=["Start","4SecWatched","10SecWatched","20SecWatched","30SecHeartbeat","End"]},3684:(e,t,r)=>{"use strict";function i(){return(0,n.m6)()}r.d(t,{A:()=>s});r(91761);var n=r(46869);class s{constructor(e){void 0===e&&(e=n.no),this.lastDateNow=void 0,this.lastPerformanceNow=void 0,this.total=0,this.interval=void 0,this.getTime=void 0,this.now=()=>{const e=i(),t=this.getTime(),r=t-this.lastPerformanceNow,n=e-this.lastDateNow,s=r=>(this.lastDateNow=e,this.lastPerformanceNow=t,this.total=this.total+r,this.total);return s(n<=0?r:n)},this.getTime=e,this.lastDateNow=i(),this.lastPerformanceNow=e(),this.interval=setInterval(this.now,1e3)}stop(){clearInterval(this.interval)}}},32520:(e,t,r)=>{"use strict";function i(e,t,r,i){function s(){null!==a&&clearTimeout(a),a=null}3===arguments.length&&"boolean"!==typeof r&&(i=r,r=!1);let a=null,o=n.Z;const l=function(){const l=arguments;i=i||this,o=()=>{s(),o=n.Z,e.apply(i,l)},r&&null===a&&e.apply(i,l),s(),a=window.setTimeout((function(){r||e.apply(i,l),a=null}),t)};return l.cancel=s,l.now=()=>{o()},l}r.d(t,{D:()=>i});var n=r(20290)},20348:(e,t,r)=>{"use strict";function i(e){let t="";for(let r=0;r<e;r++)t+=(16*(0,n.M)()|0).toString(16);return t}r.d(t,{a:()=>i});var n=r(72177)},17571:(e,t,r)=>{"use strict";function i(e){const t=e.match(/^(https?:\/\/[^\/\?#]+)/);return t?t[1]:null}r.d(t,{S:()=>i})},9533:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});const i=e=>"hidden"in e?"hidden":"webkitHidden"in e?"webkitHidden":void 0},78041:(e,t,r)=>{"use strict";function i(e,t){void 0===t&&(t=!0);const r=(0,n.k)(e);if(!r)return t;return!e[r]}r.d(t,{s:()=>i});var n=r(9533)},31030:(e,t,r)=>{"use strict";function i(e){const t=(0,n.k)(e);if(t)return t.replace(/hidden/i,"visibilitychange")}r.d(t,{Z:()=>i});var n=r(9533)},84729:(e,t,r)=>{"use strict";function i(e){if(void 0===e&&(e=window),!e.navigator)return n;const{connection:t={}}=e.navigator;return"number"===typeof(r=t.rtt)&&isFinite(r)?t.rtt:n;var r}r.d(t,{n:()=>i});const n=NaN},5050:(e,t,r)=>{"use strict";function i(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:r={}}=t;return Boolean(r.saveData)}r.d(t,{R:()=>i})},20929:(e,t,r)=>{"use strict";function i(e,t){return e?"fullscreen":t?"pip":"default"}r.d(t,{U:()=>i})},93671:(e,t,r)=>{"use strict";function i(e){return"function"===typeof e||"Function"===(0,n.M)(e)}r.d(t,{m:()=>i});var n=r(60375)},20290:(e,t,r)=>{"use strict";function i(){}r.d(t,{Z:()=>i})},56920:(e,t,r)=>{"use strict";function i(e,t){const r=(0,a.Z)(e);if(!r)return n.Z;const i=()=>{t((0,s.s)(e))};return e.addEventListener(r,i),()=>e.removeEventListener(r,i)}r.d(t,{Y:()=>i});var n=r(20290),s=r(78041),a=r(31030)},84780:(e,t,r)=>{"use strict";function i(e){setTimeout(()=>{throw e},0)}r.d(t,{L:()=>i})},65393:(e,t,r)=>{"use strict";function i(e,t,r){void 0===r&&(r=" ");const i=t-e.length;if(i>0){let t=r;for(;t.length<i;)t+=t;return(t.length>i?t.substr(0,i):t)+e}return e}r.d(t,{Q:()=>i})},43919:(e,t,r)=>{"use strict";r.d(t,{M:()=>s});const i={}.toString,n=/\[object (\w+)\]/,s=e=>{const t=i.call(e);if(!t)return null;const r=t.match(n);if(!r)return null;const s=r[1];return s||null}},46869:(e,t,r)=>{"use strict";function i(e){return"function"===typeof e||"Function"===(0,n.M)(e)}r.d(t,{m6:()=>s,no:()=>u});r(91761);var n=r(43919);const s=Date&&i(Date.now)?()=>Date.now():()=>(new Date).getTime(),a="undefined"===typeof window?void 0:window.performance,o=a&&i(a.now),l=a&&a.timing&&a.timing.navigationStart,d=a&&a.timeOrigin?a.timeOrigin:l?a.timing.navigationStart:s();let c=0;const u=()=>o?a.now():(()=>{const e=s()-d;return c=Math.max(e,c),c})()},86673:(e,t,r)=>{"use strict";function i(e,t){try{return e()}catch(r){"function"===typeof t&&t(r)}}r.d(t,{Y:()=>i})},96541:(e,t,r)=>{"use strict";r.d(t,{h:()=>i});const i=(e,t,r)=>{const i=[];for(let n=0;n<e.length;n++){const s=e[n];t.call(r,s,n,e)&&i.push(s)}return i}},47858:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});var i=r(53878);const n=[].find,s=(0,i.t)(n)?(e,t)=>n.call(e,t):(e,t)=>{for(let r=0;r<e.length;r++){const i=e[r];if(t(i,r,e))return i}}},32620:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});const i=(e,t,r)=>{for(let i=0;i<e.length;i++)t.call(r,e[i],i,e)}},29003:(e,t,r)=>{"use strict";r.d(t,{k:()=>s});var i=r(60375);const n=(0,r(59381).C)(Array,"isArray"),s=n?e=>n.call(Array,e):e=>"Array"===(0,i.M)(e)},66169:(e,t,r)=>{"use strict";function i(e){if(!e)return[];const t=[];for(let r=0;r<e.length;r++)t.push(e[r]);return t}r.d(t,{w:()=>i})},71424:(e,t,r)=>{"use strict";function i(e,t){const r=[],i=[];return(0,n.E)(e,(n,s)=>{t(n,s,e)?r.push(n):i.push(n)}),[r,i]}r.d(t,{x:()=>i});var n=r(32620)},72391:(e,t,r)=>{"use strict";function i(e,t,r,i){const a=function(e){let t=!1,r=!1,i=!1;return!0===e?t=!0:"object"===typeof e&&(t=Boolean(e.capture),r=Boolean(e.passive),i=Boolean(e.once)),{capture:t,passive:r,once:i}}(i),o=s.FF?a:a.capture,l=a.once&&!s.vE?function(e){d(),r.call(this,e)}:r,d=()=>{(0,n.f)(e,t,l,o)};return(0,n.h)(e,t,l,o),d}r.d(t,{O:()=>i});var n=r(58653),s=r(70322)},4238:(e,t,r)=>{"use strict";r.d(t,{L:()=>i});const i=e=>{try{const{left:t,right:r,top:i,bottom:n}=e.getBoundingClientRect();return{left:t,right:r,top:i,bottom:n,width:r-t,height:n-i}}catch(t){return{left:0,width:0,top:0,height:0,right:0,bottom:0}}}},86110:(e,t,r)=>{"use strict";function i(e){return(0,n.H)(e.tagName)}r.d(t,{m:()=>i});var n=r(16187)},58653:(e,t,r)=>{"use strict";r.d(t,{f:()=>a,h:()=>s});var i=r(59381),n=r(53159);let s=function(e,t,r){(0,n.m)(e.attachEvent)&&e.attachEvent("on"+t,r)},a=function(e,t,r){(0,n.m)(e.detachEvent)&&e.detachEvent("on"+t,r)};(0,i.C)(EventTarget.prototype,"addEventListener")&&(0,i.C)(EventTarget.prototype,"removeEventListener")&&(s=function(e,t,r,n){const s=e&&(0,i.C)(e,"addEventListener");s&&s.call(e,t,r,n)},a=function(e,t,r,n){const s=e&&(0,i.C)(e,"removeEventListener");s&&s.call(e,t,r,n)})},65435:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{b:()=>d});var n=r(72391),s=r(4238),a=r(28634),o=r(17338),l=r(20817);r(91761);class d extends a.V{constructor(e){super(),this.onResize=void 0,this.resizeObserverCallback=e=>{let[{contentRect:{width:t,height:r}}]=e;this.onResize.dispatch({width:t,height:r})};const t=(0,s.L)(e);if(this.onResize=new o.R({width:t.width,height:t.height},(e,t)=>{let{width:r,height:i}=t;return!!(isNaN(r)||isNaN(i)||r<1||i<1)||e.width===r&&e.height===i}),this.addDestroyHandler(()=>{this.onResize.removeAll()}),"undefined"!==typeof ResizeObserver)try{const t=new ResizeObserver(this.resizeObserverCallback);t.observe(e),this.addDestroyHandler(()=>{t.disconnect()})}catch(r){this.fallbackToCustomDetectionMethods(e)}else this.fallbackToCustomDetectionMethods(e)}getSize(){return i({},this.onResize.getValue())}fallbackToCustomDetectionMethods(e){const{ownerDocument:t}=e;if(!t)return;const{defaultView:r}=t;if(!r)return;const i=()=>{const t=(0,s.L)(e);this.onResize.dispatch({width:t.width,height:t.height})};this.addDestroyHandler((0,n.O)(r,"resize",i,{passive:!0})),this.addDestroyHandler((0,l.X)(i))}}},70322:(e,t,r)=>{"use strict";r.d(t,{FF:()=>o,vE:()=>s,wI:()=>a});var i=r(88261),n=r(58653);let s=!1,a=!1,o=!1;try{const e=document.createElement("div"),t={};Object.defineProperty(t,"once",{get:()=>s=!0}),Object.defineProperty(t,"passive",{get:()=>a=!0}),Object.defineProperty(t,"capture",{get:()=>o=!0}),(0,n.h)(e,"click",i.Z,t)}catch(l){}},46321:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});var i=r(88261);class n{constructor(){this.resolve=void 0,this.reject=void 0,this.promise=void 0;let e=i.Z,t=i.Z;this.promise=new Promise((r,i)=>{e=r,t=i}),this.resolve=e,this.reject=t}}},28634:(e,t,r)=>{"use strict";r.d(t,{V:()=>n});var i=r(70286);class n{constructor(){this._isDestroyed=!1,this.destroyHandlers=[],this._destroyReason=void 0}get destroyReason(){return this._destroyReason}get isDestroyed(){return this._isDestroyed}static addErrorHandler(e){n.errorHandlers.push(e)}addDestroyHandler(e){this._isDestroyed?e(this._destroyReason):this.destroyHandlers.push(e)}destroy(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[s]=t;if(!this._isDestroyed){this._isDestroyed=!0,this._destroyReason=s;try{(0,i.p)(this.destroyHandlers,...t)}catch(a){(0,i.p)(n.errorHandlers,a)}this.destroyHandlers.length=0}}}n.errorHandlers=[]},70286:(e,t,r)=>{"use strict";function i(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];(0,n.k)(e)&&e.forEach(e=>{"function"===typeof e&&e(...r)})}r.d(t,{p:()=>i});var n=r(29003)},53159:(e,t,r)=>{"use strict";function i(e){return"function"===typeof e||"Function"===(0,n.M)(e)}r.d(t,{m:()=>i});var n=r(60375)},88261:(e,t,r)=>{"use strict";function i(){}r.d(t,{Z:()=>i})},12693:(e,t,r)=>{"use strict";function i(e){let t=function(){let r;return t=()=>r,r=e.apply(this,arguments),r};return function(){return t.apply(this,arguments)}}r.d(t,{I:()=>i})},3569:(e,t,r)=>{"use strict";function i(e){return new Promise(t=>setTimeout(t,e))}r.d(t,{_:()=>i})},54926:(e,t,r)=>{"use strict";function i(e,t){return e+"/"+t}function n(e){if("string"===typeof e&&(e={message:e}),"object"===typeof e&&null!==e||(e={}),"function"===typeof e.toJSON)try{return{__stringifyError:e.toJSON()}}catch(n){}const{name:t,message:r,stack:i}=e;return{__stringifyError:{name:t,message:r,stack:i}}}function s(e,t,r,n){const s=o(e[t],i(r,t),n);return void 0===s?"null":s}function a(e){return JSON.stringify(e)}function o(e,t,r){switch(typeof e){case"boolean":return e?"true":"false";case"string":return a(e);case"undefined":return;case"bigint":return a(e.toString());case"function":return a("[Function"+("string"===typeof e.name&&e.name.length>0?" "+e.name:"")+"]");case"symbol":return a("[Symbol]");case"number":return isNaN(e)||!isFinite(e)?"null":String(e);case"object":if(null===e)return"null";if(l=e,"[object Window]"===Object.prototype.toString.call(l))return a("[object Window]");if((0,u.m)(e))return a("[DOMNode "+e.tagName+"]");if(function(e){return"undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}(e)){const{name:t}=e.constructor;return a("["+(t||"TypedArray")+"("+(e.byteLength||0)+")]")}const d=r.get(e);if(void 0!==d)return a("[Circular "+d+"]");r.set(e,t);return(0,c.k)(e)?function(e,t,r){if(0===e.length)return"[]";let i="["+s(e,0,t,r);for(let n=1;n<e.length;n++)i+=","+s(e,n,t,r);return i+"]"}(e,t,r):function(e,t,r){if("function"===typeof e.toJSON){let s;try{s=e.toJSON()}catch(d){s=n(d)}return o(s,i(t,"toJSON"),r)}let s="{",l=!0;for(const c in e){if(!Object.prototype.hasOwnProperty.call(e,c))continue;let u;try{u=e[c]}catch(d){u=n(d)}const h=o(u,i(t,c),r);void 0!==h&&(l?l=!1:s+=",",s+=a(c)+":"+h)}return s+"}"}(e,t,r)}var l}function l(e){try{return o(e,"~",function(){const e="undefined"!==typeof WeakMap?new WeakMap:void 0,t=[];return{set:(r,i)=>{if(void 0!==e)try{e.set(r,i)}catch(n){t.push({path:i,value:r})}else t.push({path:i,value:r})},get:r=>{const i=(0,d.s)(t,e=>e.value===r);return void 0!==e&&void 0===i?e.get(r):i?i.path:void 0}}}())}catch(t){return JSON.stringify(n(t))}}r.d(t,{Y:()=>l});var d=r(47858),c=r(29003),u=r(86110)},72550:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});r(91761);const i=3e4},48261:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var i=r(26939),n=r(76163),s=r(50576),a=r(72550),o=r(54588),l=r(88261);class d extends o.M{constructor(e){super(),this.lastRpcRequestId=1,this.waiters=Object.create(null),this.send=void 0,this.onRun=void 0,this.serialize=void 0,this.deserialize=void 0,this.send=e.send,this.onRun=e.onRun,this.serialize=e.serialize,this.deserialize=e.deserialize}destroy(){super.destroy(),this.onRun=l.Z;for(const e in this.waiters)this.waiters[e](new Error("Stop on destroy"))}request(e,t){let{method:r,params:n}=e;void 0===t&&(t=a.F);const s=this.getUniqueRpcRequestId();return this.sendMessage((0,i.o)({id:s,method:r,params:n})),this.waitForResponse(s,t,r)}sendEvent(e){let{method:t,params:r}=e;return this.sendMessage((0,i.o)({method:t,params:r})),Promise.resolve()}getUniqueRpcRequestId(){return String(this.lastRpcRequestId++)}waitForResponse(e,t,r){const i=setTimeout(()=>{const i=this.waiters[e];void 0!==i&&i(new Error("Timeout fired ("+t+"ms) on method "+r+" for id="+e+"."))},t),n=()=>{clearTimeout(i),delete this.waiters[e]};return new Promise((t,r)=>{this.waiters[e]=(e,i)=>(n(),null!==e?r(e):t(i))})}sendMessage(e){this.send(this.serialize(e))}handleRpcRequest(e){let{id:t,method:r,params:n}=e;this.onRun({method:r,params:n},(e,r)=>{t&&this.sendMessage((0,i.c)({id:t,error:e,result:r}))})}handleRpcResponse(e){const t=this.waiters[e.id];if(void 0!==t)if("error"in e){t(new s.l(e.error.message,e.error.code,"string"===typeof e.error.data?e.error.data:void 0,e.error.cause))}else t(null,e.result);else this.emit("Warn",new Error("Response for missed waiter for id="+JSON.stringify(e.id)))}handleMessage(e){try{const t=(0,n.T)(this.deserialize(e));"result"in t||"error"in t?this.handleRpcResponse(t):"method"in t&&this.handleRpcRequest(t)}catch(t){this.emit("Error",t)}}}},50576:(e,t,r)=>{"use strict";r.d(t,{l:()=>a});var i=r(85564),n=r(40497),s=r.n(n);class a extends Error{constructor(e,t,r,n){void 0===t&&(t=i.v.UNKNOWN_ERROR),super(e),this.message=void 0,this.stack=void 0,this.toJSON=void 0,this.code=void 0,this.cause=void 0,s()(this,a.prototype),this.message=e,this.code=t,this.stack=null!=r?r:this.stack,this.cause=n,this.toJSON=()=>({code:this.code,message:this.message,data:this.stack,cause:n})}toString(){return JSON.stringify(this.toJSON())}}},85564:(e,t,r)=>{"use strict";let i;r.d(t,{v:()=>i}),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"}(i||(i={}))},26939:(e,t,r)=>{"use strict";function i(e){let{id:t,method:r,params:i}=e;return t?{jsonrpc:"2.0",id:t,method:r,params:i}:{jsonrpc:"2.0",method:r,params:i}}function n(e){let{id:t,error:r,result:i}=e;return r?{jsonrpc:"2.0",id:t,error:r.toJSON()}:{jsonrpc:"2.0",id:t,result:void 0===i?null:i}}r.d(t,{c:()=>n,o:()=>i})},76163:(e,t,r)=>{"use strict";function i(e){if(!("params"in e))return[];if(Array.isArray(e.params))return e.params;if((0,c.K)(e.params))return e.params;throw new Error("Expect #params to be an array or an object if present in "+JSON.stringify(e))}function n(e){return s(e)}function s(e){if((0,d.z)(e.id)){if(Math.floor(e.id)!==e.id)throw new Error("Expect #id to be an integer if it's a number in "+JSON.stringify(e));return e.id}if((0,u.H)(e.id)||null===e.id)return e.id;throw new Error("Expect #id to be an integer, string or null (not recommended) in "+JSON.stringify(e))}function a(e){if(!("id"in e))throw new Error("Expect #id to present in rpc response "+JSON.stringify(e));return s(e)}function o(e){if("object"!==typeof e.error||null===e.error)throw new Error("Expect #error to be an object in "+JSON.stringify(e));const t=e.error;if(!(0,d.z)(t.code))throw new Error("Expect #error#code to be an number in "+JSON.stringify(e));if(!(0,u.H)(t.message))throw new Error("Expect #error#message to be an string in "+JSON.stringify(e));const r="cause"in t?t.cause:void 0;return"data"in t?{code:t.code,message:t.message,data:t.data,cause:r}:{code:t.code,message:t.message,cause:r}}function l(e){const t=function(e){if(!(0,c.K)(e))throw new Error("Can't parse \""+e+'" as object');return e}(e);if(!function(e){return"2.0"===e.jsonrpc}(t))throw new Error("Expect "+((0,h.Y)(()=>JSON.stringify(e))||e)+" to be a json-rpc v2 message");if((0,u.H)(t.method))return function(e){return"id"in e?{jsonrpc:e.jsonrpc,method:e.method,params:i(e),id:n(e)}:{jsonrpc:e.jsonrpc,method:e.method,params:i(e)}}(t);if("result"in t)return function(e){return{jsonrpc:e.jsonrpc,result:e.result,id:a(e)}}(t);if("error"in t)return function(e){return{jsonrpc:e.jsonrpc,error:o(e),id:a(e)}}(t);throw new Error("Expect "+((0,h.Y)(()=>JSON.stringify(e))||e)+" to be a json-rpc v2 message")}r.d(t,{T:()=>l});var d=r(93966),c=r(76101),u=r(16187),h=r(86673)},8580:(e,t,r)=>{"use strict";r.d(t,{I:()=>i});const i=Number.EPSILON||Math.pow(2,-52)},85084:(e,t,r)=>{"use strict";function i(e,t,r){return e>r?r:e<t?t:e}r.d(t,{u:()=>i})},93966:(e,t,r)=>{"use strict";function i(e){return"number"===typeof e&&isFinite(e)}r.d(t,{z:()=>i})},66061:(e,t,r)=>{"use strict";function i(e,t,r){for(const i in e)(0,n.n)(e,i)&&t.call(r,e[i],i,e)}r.d(t,{M:()=>i});var n=r(28203)},11874:(e,t,r)=>{"use strict";function i(e){return"function"===typeof Object.entries?Object.entries(e):(0,n.Z)(e).map(t=>[t,e[t]])}r.d(t,{J:()=>i});var n=r(44706)},44706:(e,t,r)=>{"use strict";function i(e){if("function"===typeof Object.keys)return Object.keys(e);const t=[];for(const r in e)(0,n.n)(e,r)&&t.push(r);return t}r.d(t,{Z:()=>i});var n=r(28203)},62720:(e,t,r)=>{"use strict";function i(e){const t=Object.values;if("function"===typeof t)return t(e);const r=[];for(const i in e)(0,n.n)(e,i)&&r.push(e[i]);return r}r.d(t,{z:()=>i});var n=r(28203)},59798:(e,t,r)=>{"use strict";r.d(t,{I:()=>i});const i=(0,r(53878).t)(Object.getPrototypeOf)?e=>Object.getPrototypeOf(e):e=>e.__proto__||Object.prototype},28203:(e,t,r)=>{"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.d(t,{n:()=>i})},76101:(e,t,r)=>{"use strict";function i(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}r.d(t,{K:()=>i})},5929:(e,t,r)=>{"use strict";function i(e){const t=(0,n.I)(e);return t?()=>{(0,n.I)(e)!==t&&a()(e,t)}:o.Z}r.d(t,{n:()=>i});var n=r(59798),s=r(40497),a=r.n(s),o=r(88261)},53405:(e,t,r)=>{"use strict";r.d(t,{n:()=>i});const i=e=>{let t=0;return{promise:new Promise(r=>{t=window.setTimeout(r,e)}),clear(){clearTimeout(t)},timeoutId:t}}},79814:(e,t,r)=>{"use strict";r.d(t,{_:()=>i});const i=async(e,t)=>{let r;try{await new Promise((i,n)=>{t&&t.then(i,n),r=window.setTimeout(i,e)})}finally{window.clearTimeout(r)}}},17338:(e,t,r)=>{"use strict";r.d(t,{R:()=>s});var i=r(65220),n=r(74789);class s extends i.M{constructor(e,t){void 0===t&&(t=(e,t)=>e===t),super(),this.checkToEqualFunction=t,this.value=void 0,this.value=e}getValue(){return this.value}subscribeValueCondition(e,t){return this.add(r=>{e(r)&&(0,n.p)(t,r)})}subscribeValueConditionOnce(e,t){const r=this.subscribeValueCondition(e,e=>{r(),(0,n.p)(t,e)});return r}dispatch(e){this.checkToEqualFunction(this.value,e)||(this.value=e,super.dispatch(e))}}},74789:(e,t,r)=>{"use strict";function i(e,t){(0,n.$)(e)?e.dispatch(t):e(t)}r.d(t,{p:()=>i});var n=r(277)},6447:(e,t,r)=>{"use strict";function i(e,t){e.forEach(e=>{(0,n.p)(e,t)})}r.d(t,{k:()=>i});var n=r(74789)},65220:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});var i=r(6447);class n{constructor(){this.on=[],this.once=[]}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.on.push(...t),()=>this.remove(...t)}addOne(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.once.push(...t),()=>this.remove(...t)}promise(){return new Promise(e=>this.addOne(e))}dispatch(e){const{once:t}=this;this.once=[],(0,i.k)(this.on,e),(0,i.k)(t,e)}removeAll(){this.on.length=0,this.once.length=0}remove(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.on=this.on.filter(e=>t.indexOf(e)<0),this.once=this.once.filter(e=>t.indexOf(e)<0)}}},277:(e,t,r)=>{"use strict";function i(e){return"function"===typeof e.dispatch}r.d(t,{$:()=>i})},16187:(e,t,r)=>{"use strict";function i(e){return"string"===typeof e}r.d(t,{H:()=>i})},79916:(e,t,r)=>{"use strict";function i(e){return"undefined"===typeof e}function n(e){return"boolean"===typeof e}function s(e){return"number"===typeof e&&e===e}function a(e){return"string"===typeof e}function o(e){return"function"===typeof e}function l(e){return Boolean(e)&&"object"===typeof e}r.d(t,{HD:()=>a,Kn:()=>l,hj:()=>s,jn:()=>n,mf:()=>o,o8:()=>i})},68693:(e,t,r)=>{"use strict";function i(e,t){const r=new RegExp("[?&]"+e+"=*([^&#]*)","g");let i=null,n=null;for(;n=r.exec(t);)i=n;return i&&"string"===typeof i[1]?decodeURIComponent(i[1]):void 0}r.d(t,{c:()=>i})},11200:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e){const t=new URL(e,location.origin);let r=t.pathname||"";"/"!==r.charAt(0)&&(r="/"+r);const i=e.indexOf("?"),n=e.indexOf("#");let s;return s=-1===i&&-1===n?e:-1===i?e.slice(0,n):-1===n?e.slice(0,i):e.slice(0,Math.min(i,n)),{originalPath:s,href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,pathname:r,search:t.search,hash:t.hash}}function s(e,t){if(void 0===t&&(t=!1),t){const t=e.originalPath,r="/"===e.pathname&&"/"!==t[t.length-1];return e.originalPath+(r?"/":"")+e.search+e.hash}const r="443"===e.port||"80"===e.port?e.hostname:e.host;return e.protocol+"//"+r+e.pathname+e.search+e.hash}function a(e){try{return decodeURIComponent(e)}catch(t){return e}}function o(e){const t={},r=e.replace(/^[?#]+/,"").replace(/#.*$/,"").split("&");for(let i=0;i<r.length;i++){const e=r[i].indexOf("=");let n,s;if(-1===e?(n=a(r[i]),s=""):(n=a(r[i].slice(0,e)),s=r[i].slice(e+1)),n){const e=Boolean(/(\[\])$/.exec(n));n=n.replace(/\[\]$/,""),e?void 0===t[n]?t[n]=[a(s)]:t[n]=[].concat(t[n],a(s)):t[n]=a(s)}}return t}function l(e,t){return t.map(t=>e+"[]="+encodeURIComponent(t)).join("&")}function d(e){const t=[];for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];(0,m.k)(i)?t.push(l(r,i)):void 0!==i&&t.push(r+"="+encodeURIComponent(i))}return"?"+t.join("&")}function c(e,t,r){if(void 0===r)return e;const a=n(e),l=o(a.search);return l[t]=r,s(i({},a,{search:d(l)}))}function u(e,t,r){let{override:a=!0,saveOriginalPath:l=!1}=void 0===r?{}:r;const c=n(e),u=o(c.search);(0,v.M)(t,(e,t)=>{(void 0===u[t]||a)&&(u[t]=e)});return s(i({},c,{search:d(u)}),l)}function h(e){return n(e).pathname.split("/").pop()||""}function p(e){const t=h(e).split(".");return t.length>1?t.pop():""}r.d(t,{Ou:()=>c,Sr:()=>u,UO:()=>h,dD:()=>o,en:()=>n,hA:()=>s,lm:()=>p});var m=r(29003),v=r(66061)},98569:(e,t,r)=>{"use strict";function i(e){return new RegExp("^(?:[a-z+]+:)?//","i").test(e.trim())}r.d(t,{s:()=>i})},34118:(e,t,r)=>{"use strict";r.d(t,{Ou:()=>i.Ou,Sr:()=>i.Sr,UO:()=>i.UO,Yc:()=>a.Yc,ce:()=>s.c,dD:()=>i.dD,en:()=>i.en,hA:()=>i.hA,lm:()=>i.lm,pp:()=>a.pp,sD:()=>n.s,zP:()=>a.zP});var i=r(11200),n=r(98569),s=r(68693),a=r(57098)},57098:(e,t,r)=>{"use strict";function i(e,t){return(((0,a.en)(e).hash||"").slice(1).split("&").map(e=>e.split("=")).map(e=>{let[t,r]=e;return[t,void 0===r?"":r]}).find(e=>{let[r]=e;return r===t})||[])[1]}function n(e,t,r){if(void 0===t)return e;if(void 0===r)return e;const i=encodeURIComponent(t)+"="+encodeURIComponent(r),n=new URL(e,location.origin);return n.hash=n.hash?n.hash+"&"+i:""+i,n.href}function s(e,t,r){return e=function(e,t){if(-1===e.indexOf("#"))return e;const r=new URL(e,location.origin),i=function(e,t){return e.split("&").filter(e=>e!==t&&0!==e.indexOf(t+"=")).join("&")}(r.hash.slice(1),t);return r.hash=i?"#"+i:"",r.href}(e,t),void 0===r?e:n(e,t,r)}r.d(t,{Yc:()=>s,pp:()=>i,zP:()=>n});var a=r(11200)},60375:(e,t,r)=>{"use strict";r.d(t,{M:()=>s});const i={}.toString,n=/\[object (\w+)\]/,s=e=>{const t=i.call(e);if(!t)return null;const r=t.match(n);if(!r)return null;const s=r[1];return s||null}},59381:(e,t,r)=>{"use strict";function i(e,t){let r=e[t];if(!(0,n.t)(r)){const n=r;try{delete e[t];const i=e[t];"function"===typeof i&&(r=i),e[t]=n}catch(i){}}return r}r.d(t,{C:()=>i});var n=r(53878)},35276:(e,t,r)=>{"use strict";function i(e){void 0===e&&(e=n.no);const t=e();return()=>Math.max(0,e()-t)}r.d(t,{u:()=>i});var n=r(46869);r(91761)},14321:(e,t,r)=>{"use strict";r.d(t,{X:()=>i});const i=250},20817:(e,t,r)=>{"use strict";function i(e){return 0===a.length&&(s=window.setInterval(()=>{a.forEach(e=>e())},n.X)),a.push(e),()=>{const t=a.indexOf(e);t>-1&&a.splice(t,1),0===a.length&&clearInterval(s)}}r.d(t,{X:()=>i});var n=r(14321);let s=0;const a=[]},39962:(e,t,r)=>{"use strict";r.d(t,{_:()=>i});const i=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]}]},80188:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,dn:()=>l,h9:()=>s,ly:()=>i,oo:()=>a,xE:()=>o});const i="com.widevine.alpha",n="com.apple.fairplay",s="com.apple.fps.1_0",a="com.apple.fps.2_0",o="com.microsoft.playready",l="org.w3.clearkey"},55748:(e,t,r)=>{"use strict";r.d(t,{z:()=>i});const i="videoplayer-bandwidth-estimate"},54381:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});const i=(0,r(82520).H)()?9e5:864e5},49992:(e,t,r)=>{"use strict";function i(e){if(isNaN(e.value))return;if(!d.includes(e.source))return;const t={bandwidthEstimate:Math.floor(e.value),time:(0,s.m6)(),source:e.source};a.tO.setItem(o.z,JSON.stringify(t))}function n(){try{const e=a.tO.getItem(o.z);if(!e)return NaN;const{bandwidthEstimate:t,time:r,source:i}=JSON.parse(e);return d.includes(i)&&(0,s.m6)()-r<l.w?t:NaN}catch(e){return NaN}}r.d(t,{J:()=>i,N:()=>n});var s=r(46869),a=(r(91761),r(35634)),o=r(55748),l=r(54381);const d=["ewma","hlsjs"]},16899:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});const i="com.apple.fps.1_0"},82554:(e,t,r)=>{"use strict";function i(e){if(void 0===e||!(0,n.K)(e))return!1;const{servers:t,advanced:r}=e;return(0,n.K)(t)&&(0,s.H)(t[a.N])&&(0,n.K)(r)&&(0,n.K)(r[a.N])&&(0,s.H)(r[a.N].processSPCPath)}r.d(t,{n:()=>i});var n=r(76101),s=r(16187),a=r(16899)},47978:(e,t,r)=>{"use strict";r.d(t,{y:()=>i});class i{constructor(e){this.length=e,this.list=[]}push(e){this.list.length>=this.length&&this.list.shift(),this.list.push(e)}getAll(){return this.list}clear(){this.list.length=0}copy(){const e=new i(this.length);return e.list=this.list.slice(),e}has(e){return-1!==this.list.indexOf(e)}size(){return this.list.length}}},48446:(e,t,r)=>{"use strict";function i(e){const t=e.map(e=>{let{start:t,end:r}=e;return{start:t,end:r}}).sort((e,t)=>e.start-t.start);if(t.length<=1)return t;const r=[t[0]];return t.slice(1).forEach((e,t)=>{const i=r[r.length-1];i.end<e.start?r.push(e):i.end<e.end&&(i.end=e.end)}),r}r.d(t,{l:()=>i})},39789:(e,t,r)=>{"use strict";function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=t.map(n),s="YA PLAYER: "+(new Date).toString()+" "+i.join(" ");return s}function n(e){return e&&"object"===typeof e?JSON.stringify(e,Object.getOwnPropertyNames(e)):e}r.d(t,{Y:()=>l});var s=r(54926),a=r(76101);const o=[];class l{static enableConsole(){l.consoleEnabled=!0,l.log("YA PLAYER VERSION: 1.0-13565")}static log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];l.consoleEnabled&&console.log(i(...t)),l.addToHistory("log",t)}static warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];l.consoleEnabled&&console.warn(i(...t)),l.addToHistory("warn",t)}static error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];l.consoleEnabled&&console.error(i(...t)),l.addToHistory("error",t)}static getHistory(){return[...o]}static addToHistory(e,t){o.length>=150&&o.shift(),o.push("["+e+"]["+Date.now()+"] "+t.map(e=>{try{return(0,s.Y)(e)}catch(t){return(0,a.K)(t)?JSON.stringify(["stringify_error",t.stack]):JSON.stringify(["stringify_error","not_an_object_error"])}}).join())}}l.consoleEnabled=void 0},9972:(e,t,r)=>{"use strict";r.d(t,{I:()=>i});const i=100},86566:(e,t,r)=>{"use strict";r.d(t,{h:()=>l});var i=r(72391),n=r(28634),s=r(47978),a=r(39789),o=r(9972);class l extends n.V{constructor(e){super(),this.history=new s.y(o.I),this.addDestroyHandler((0,i.O)(e,"logposted",e=>{a.Y.log("chrome://media-internals event",e.data),this.history.push(e.data)})),this.addDestroyHandler(()=>{this.history=null})}getHistory(){return this.history?[...this.history.getAll()]:["MediaInternalsHistory is destroyed"]}}},3991:(e,t,r)=>{"use strict";r.d(t,{E:()=>a,s:()=>o});var i=r(5486),n=(r(91761),r(20817)),s=r(59600);const a=(e,t,r)=>{var i,s;let a=!1;const l=null==r?void 0:r.hasGapJumper,d=null!=(i=null==r?void 0:r.bufferingThreshold)?i:.15,c=null!=(s=null==r?void 0:r.playingThreshold)?s:.3,u=()=>{const r=o(e,a?c:d,l);r!==a&&(a=r,t(a))},h=(0,n.X)(u),p=setTimeout(u,0);return()=>{h(),clearTimeout(p)}},o=function(e,t,r){void 0===t&&(t=.15);const{currentTime:n,duration:a}=e;if(e.readyState<e.HAVE_FUTURE_DATA)return!0;return(!(null!==(0,s.L)(e.buffered,e.currentTime))||!r)&&!(0,i.w)(e).some(e=>{let{start:r,end:i}=e;return!(n<r||n>i)&&(a<=i||n+t<i)})}},72485:(e,t,r)=>{"use strict";r.d(t,{$:()=>n});r(91761);var i=r(54588);class n extends i.M{constructor(e,t){super();let r={videoWidth:e.videoWidth,videoHeight:e.videoHeight};const i=()=>{const{videoWidth:i,videoHeight:n}=e;isNaN(i)||isNaN(n)||i<1||n<1||r.videoWidth===i&&r.videoHeight===n||(r={videoWidth:i,videoHeight:n},t({videoWidth:i,videoHeight:n}))};if("onresize"in e)e.addEventListener("resize",i),this.once("Destroy",()=>e.removeEventListener("resize",i));else{e.addEventListener("timeupdate",i),this.once("Destroy",()=>e.removeEventListener("timeupdate",i));const t=setInterval(i,1e3);this.once("Destroy",()=>clearInterval(t))}}}},25921:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e){if("function"===typeof e.getVideoPlaybackQuality){const t=e.getVideoPlaybackQuality();return{droppedVideoFrames:t.droppedVideoFrames,corruptedVideoFrames:t.corruptedVideoFrames,totalVideoFrames:t.totalVideoFrames}}const t=e;return"number"===typeof t.webkitDroppedFrameCount&&"number"===typeof t.webkitDecodedFrameCount?i({},s,{droppedVideoFrames:t.webkitDroppedFrameCount,totalVideoFrames:t.webkitDecodedFrameCount}):s}r.d(t,{cd:()=>n,oI:()=>s});const s={droppedVideoFrames:0,corruptedVideoFrames:0,totalVideoFrames:0}},88370:(e,t,r)=>{"use strict";r.d(t,{Q:()=>s});var i=r(28634),n=r(25921);class s extends i.V{constructor(e){super(),this.video=void 0,this.playbackQuality=n.oI,this.persistedPlaybackQuality=n.oI,this.accumulatedPlaybackQuality=n.oI,this.video=e,this.addDestroyHandler(()=>{this.reset(),this.video=void 0})}update(){if(!this.video)return;const e=(0,n.cd)(this.video);this.playbackQuality=e,0!==this.persistedPlaybackQuality.totalVideoFrames&&(this.persistedPlaybackQuality.totalVideoFrames>e.totalVideoFrames&&(this.accumulatedPlaybackQuality={droppedVideoFrames:this.accumulatedPlaybackQuality.droppedVideoFrames+this.persistedPlaybackQuality.droppedVideoFrames,corruptedVideoFrames:this.accumulatedPlaybackQuality.corruptedVideoFrames+this.persistedPlaybackQuality.corruptedVideoFrames,totalVideoFrames:this.accumulatedPlaybackQuality.totalVideoFrames+this.persistedPlaybackQuality.totalVideoFrames}),this.persistedPlaybackQuality=n.oI)}persist(){0!==this.playbackQuality.totalVideoFrames&&(this.persistedPlaybackQuality=this.playbackQuality,this.playbackQuality=n.oI)}reset(){this.playbackQuality=n.oI,this.persistedPlaybackQuality=n.oI,this.accumulatedPlaybackQuality=n.oI}getPlaybackQuality(){return this.persistedPlaybackQuality.totalVideoFrames>0?n.oI:{droppedVideoFrames:this.playbackQuality.droppedVideoFrames+this.accumulatedPlaybackQuality.droppedVideoFrames,corruptedVideoFrames:this.playbackQuality.corruptedVideoFrames+this.accumulatedPlaybackQuality.corruptedVideoFrames,totalVideoFrames:this.playbackQuality.totalVideoFrames+this.accumulatedPlaybackQuality.totalVideoFrames}}}},87853:(e,t,r)=>{"use strict";r.d(t,{Dj:()=>n,ej:()=>s,vq:()=>i});r(91761);const i=2395888,n=3904120,s=1e5},84189:(e,t,r)=>{"use strict";r.d(t,{D:()=>i});r(91761);const i=Math.max(5,0)},14690:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});const i="source_index"},92831:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});const i=["strm.yandex.net","strm.yandex.ru","strm-ott.akamaized.net","media.strm.yandex.net","cdn.ngenix.net","streaming.tst.strm.yandex.net"]},6134:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const i="auto"},88226:(e,t,r)=>{"use strict";function i(e,t,r){return void 0===r&&(r=0),(0,n.s)(e,e=>{let{start:i,end:n}=e;return i-r<=t&&t<=n+r})}r.d(t,{k:()=>i});var n=r(47858)},5486:(e,t,r)=>{"use strict";function i(e){const t=[];for(let i=0;i<e.buffered.length;i++)try{t.push({start:e.buffered.start(i),end:e.buffered.end(i)})}catch(r){}return(0,n.l)(t)}r.d(t,{w:()=>i});var n=r(48446);r(91761)},42848:(e,t,r)=>{"use strict";function i(e,t){const r=(0,n.k)(e,t);return void 0===r?void 0:r.end-t}r.d(t,{p:()=>i});r(91761);var n=r(88226)},59600:(e,t,r)=>{"use strict";r.d(t,{L:()=>i});const i=function(e,t){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(let r=0;r<e.length;r++)if(e.start(r)>t&&(0===r||e.end(r-1)-t<=.5))return r;return null}},16594:(e,t,r)=>{"use strict";function i(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:r={}}=t;return Boolean(r.saveData)}r.d(t,{R:()=>i})},42326:(e,t,r)=>{"use strict";function i(e){return n.T.indexOf((0,s.en)(e).hostname)>-1}r.d(t,{o:()=>i});var n=r(92831),s=r(34118)},99501:(e,t,r)=>{"use strict";r.d(t,{DZ:()=>s,OI:()=>a,dA:()=>n});var i=r(34118);const n=e=>"m3u8"===(0,i.lm)(e.toLocaleLowerCase()),s=e=>"mpd"===(0,i.lm)(e.toLocaleLowerCase()),a=e=>"mp4"===(0,i.lm)(e.toLocaleLowerCase())},54030:(e,t,r)=>{"use strict";function i(e){const t=new URL(e);return t.searchParams.set(n,String(Date.now())),t.href}r.d(t,{c:()=>i,j:()=>n});const n="t"},87887:(e,t,r)=>{"use strict";r.d(t,{v:()=>i});const i="vpuid"},40816:(e,t,r)=>{"use strict";r.d(t,{j:()=>i});const i=10},49428:(e,t,r)=>{"use strict";function i(){const e=[];for(let t=0;t<s.j;t++)e.push(a[Math.floor((0,n.M)()*a.length)]);return e.join("")}r.d(t,{L:()=>i});var n=r(72177),s=r(40816);const a="qwertyuiopasdfghjklzxcvbnm0123456789"},21944:(e,t,r)=>{"use strict";function i(){return s.tO.getItem(n.v)}r.d(t,{j:()=>i});var n=r(87887),s=r(35634)},36486:(e,t,r)=>{"use strict";r.d(t,{vi:()=>o});var i,n=r(21944),s=r(49428),a=r(40914);const o=null!=(i=(0,n.j)())?i:(0,s.L)();(0,a.i)(o)},40914:(e,t,r)=>{"use strict";function i(e){s.tO.setItem(n.v,e)}r.d(t,{i:()=>i});var n=r(87887),s=r(35634)},34902:(e,t,r)=>{"use strict";r.d(t,{r:()=>s});var i=r(28557);const n=["media-src","connect-src"];class s{constructor(e){this.violatedSources=void 0,this.unsubscribeEvent=void 0,this.securityPolicyViolationCallback=e=>{let{blockedURI:t,violatedDirective:r,originalPolicy:i}=e;if(!n.includes(r))return;if(t.includes("/ping"))return;const s={blockedURI:t,violatedDirective:r,originalPolicy:i};this.violatedSources.push(s)},this.violatedSources=new i.d(50),e.addEventListener("securitypolicyviolation",this.securityPolicyViolationCallback),this.unsubscribeEvent=()=>{e.removeEventListener("securitypolicyviolation",this.securityPolicyViolationCallback)}}getViolatedSourceBySrc(e){return this.violatedSources.toArray().find(t=>{let{blockedURI:r}=t;const i=r.split("?")[0];return e.split("?")[0].includes(i)})}destroy(){this.violatedSources.clear(),this.unsubscribeEvent()}}},2929:(e,t,r)=>{"use strict";r.d(t,{G:()=>i});class i{constructor(e){this.onTick=void 0,this.cancelPending=void 0,this.onTick=e,this.cancelPending=null}tickAfter(e){this.stop();let t=!0,r=null;this.cancelPending=()=>{self.clearTimeout(r),t=!1};return r=self.setTimeout(()=>{t&&this.onTick()},1e3*e),this}stop(){this.cancelPending&&(this.cancelPending(),this.cancelPending=null)}}},78299:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});var i=r(2929);class n{constructor(e){this.onTick=void 0,this.ticker=void 0,this.onTick=e,this.ticker=null}tickNow(){return this.stop(),this.onTick(),this}tickAfter(e){return this.stop(),this.ticker=new i.G(()=>{this.onTick()}).tickAfter(e),this}tickEvery(e){return this.stop(),this.ticker=new i.G(()=>{var t;null==(t=this.ticker)||t.tickAfter(e),this.onTick()}).tickAfter(e),this}stop(){this.ticker&&(this.ticker.stop(),this.ticker=null)}}},13460:(e,t,r)=>{"use strict";function i(e){void 0===e&&(e=window);const t=e.SourceBuffer||e.WebKitSourceBuffer;if(!t)return!1;return!(t.prototype&&(0,n.m)(t.prototype.appendBuffer)&&(0,n.m)(t.prototype.remove))}r.d(t,{$:()=>i});var n=r(53159)},22956:(e,t,r)=>{"use strict";function i(e){void 0===e&&(e=window);const t=e.ManagedMediaSource||e.MediaSource||e.WebKitMediaSource;return t&&(0,n.m)(t.isTypeSupported)&&!(0,s.$)(e)?t:void 0}r.d(t,{Q:()=>i});var n=r(53159),s=r(13460)},10005:(e,t,r)=>{"use strict";function i(e){return void 0===e||"string"!==typeof e?"":function(e){try{const t=new URL(e);return t.searchParams.delete(s.g),t.href}catch(t){return e}}(e).replace(/#.+$/,"")}function n(e){try{return new URL(e).searchParams.get(s.g)}catch(t){return null}}r.d(t,{Hi:()=>i,IN:()=>n});var s=r(14690)},5898:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});const i=.1},39745:(e,t,r)=>{"use strict";r.d(t,{S:()=>i});const i=1},88019:(e,t,r)=>{"use strict";r.d(t,{L:()=>v});r(91761);var i=r(91003),n=r(77297),s=r(52438),a=r(55260),o=r(5486),l=r(42848),d=r(36354),c=r(88261),u=r(5898),h=r(39745),p=r(79549);const m=(0,n.F)()||(0,s.V)()||(0,i.y)();class v{constructor(e,t,r,i){void 0===t&&(t=c.Z),void 0===r&&(r=u.g),void 0===i&&(i=h.S),this.video=void 0,this.wasMakingProgress=void 0,this.value=void 0,this.lastUpdateSeconds=void 0,this.didJump=void 0,this.didTryToEscape=void 0,this.didTryToEscapeSeekingStucking=void 0,this.skipOffset=void 0,this.stallThresholdSeconds=void 0,this.extraThresholdSeconds=void 0,this.onEvent=void 0,this.makePP=()=>{this.video&&(this.video.pause(),(0,d.v)(this.video.play()),this.onEvent("pause-play"))},this.handleTVPoll=(e,t)=>{if(!this.video)return!1;if(this.video.seeking)return this.tryToEscapeSeekingStucking(e);if((0,n.F)()&&!this.video.paused&&this.video.readyState>=this.video.HAVE_CURRENT_DATA&&e>=.3&&this.video.duration-this.video.currentTime<.3&&!0===this.video.loop&&this.video.seekable.length&&this.video.seekable.start(0)===p.S/1e3&&!this.didJump){const e=this.video.seekable.start(0);return this.video.currentTime=e,this.didJump=!0,this.value=this.video.currentTime,this.onEvent("loop-emulation"),!0}if(e>=this.stallThresholdSeconds&&t&&!this.didJump)return this.onStall(),this.didJump=!0,this.value=this.video.currentTime,!0;return!(!(e>=this.extraThresholdSeconds&&t)||this.didTryToEscape)&&this.tryToEscapeTVStucking()},this.handlePoll=(e,t)=>{if(!this.video)return!1;const r=e>=this.stallThresholdSeconds&&t&&!this.didJump;return r&&(this.onStall(),this.didJump=!0,this.value=this.video.currentTime),r},this.video=e,this.wasMakingProgress=this.shouldBeMakingProgress(),this.value=null==e?void 0:e.currentTime,this.lastUpdateSeconds=Date.now()/1e3,this.didJump=!1,this.didTryToEscape=!1,this.didTryToEscapeSeekingStucking=!1,this.skipOffset=r,this.stallThresholdSeconds=i,this.extraThresholdSeconds=2*i,this.onEvent=t}release(){this.video=null,this.onEvent=c.Z}onStall(){if(!this.video)return;const e=this.video.currentTime;if((0,s.V)()||(0,i.y)()||(0,a.M)()||!this.skipOffset)this.makePP();else{const t=e+this.skipOffset;this.nudgeCurrentTime(t)}}poll(){if(!this.video)return;const e=this.shouldBeMakingProgress(),t=this.video.currentTime,r=Date.now()/1e3;(this.value!==t||this.wasMakingProgress!==e)&&(this.lastUpdateSeconds=r,this.value=t,this.wasMakingProgress=e,this.didJump=!1,this.didTryToEscape=!1,this.didTryToEscapeSeekingStucking=!1);const i=r-this.lastUpdateSeconds;return(m?this.handleTVPoll:this.handlePoll)(i,e)}shouldBeMakingProgress(){return!!this.video&&(!this.video.paused&&(0!==this.video.playbackRate&&(0!==this.video.buffered.length&&this.hasContentFor(this.video.currentTime))))}tryToEscapeTVStucking(){if(!this.video)return!1;if((0,n.F)())return!(this.video.readyState<this.video.HAVE_ENOUGH_DATA)&&(this.didTryToEscape=!0,setTimeout(()=>{var e;null!=(e=this.video)&&e.paused||this.makePP()},2e3),!0);if((0,i.y)()){const e=(0,l.p)((0,o.w)(this.video),this.video.currentTime);if(!e||e<7.5)return!1;if(this.video.readyState===this.video.HAVE_METADATA){const e=this.video.currentTime+this.skipOffset;return this.nudgeCurrentTime(e),this.value=this.video.currentTime,this.didTryToEscape=!0,!0}}return!1}nudgeCurrentTime(e){this.video&&(this.video.currentTime=e,this.onEvent("currentTime-nudge"))}tryToEscapeSeekingStucking(e){if(!this.video||this.didTryToEscapeSeekingStucking||!this.video.paused||e<this.extraThresholdSeconds)return!1;if(this.video.readyState===this.video.HAVE_METADATA){const e=this.video.currentTime+this.skipOffset;return this.nudgeCurrentTime(e),this.value=this.video.currentTime,this.didTryToEscapeSeekingStucking=!0,!0}return!1}hasContentFor(e){if(!this.video)return!1;for(const{start:t,end:r}of(0,o.w)(this.video))if(!(e<t-.1)&&!(e>r-.5))return!0;return!1}}},79549:(e,t,r)=>{"use strict";r.d(t,{S:()=>i});r(91761);const i=100},24735:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{h:()=>a});var n=r(65705),s=r(28557);class a{constructor(e){void 0===e&&(e=200),this.timings=null,this.action="none",this.processInstanceCounter=0;switch((0,n.r0)("web_yasp_action_on_timings_collection")){case"log":this.action="log";break;case"save":this.action="save",this.timings=new s.d(e);break;default:this.action="none"}}destroy(){var e;null==(e=this.timings)||e.clear(),this.timings=null}handleProcess(e,t){if("none"===this.action)return;const{endTimestamp:r,endReason:i=""}=t||{},n=void 0!==r?"end":"start",s="start"===n;switch(this.action){case"log":const{processName:t,component:o,details:l,data:d,startTimestamp:c,processId:u}=e,{type:h,isInit:p}=d||{},m="start"===n?c:r,v=h?h+" - "+(p?"Init Segment":"Segment"):"",f=JSON.stringify(l,null,2),g=d?JSON.stringify(d,null,2):"";console.log("%c ----- ["+m+"] ["+o+"] ["+t+"] ["+u+"] "+v+" ["+n+"] ["+i+"]\n                    details: "+f+"\n                    data: "+g,"color: #32CD32");break;case"save":var a;if(s)null==(a=this.timings)||a.push(e);else e.endTimestamp=r,e.endReason=i;break;default:return}}startProcess(e,t,r,n){void 0===r&&(r={});const s=this.processInstanceCounter++;let a=!1;const o={component:t,processName:e,processId:s,startTimestamp:Date.now(),details:r,data:n};return this.handleProcess(o),{end:(e,t)=>{a||(o.details=i({},o.details,t),this.handleProcess(o,{endTimestamp:Date.now(),endReason:e}),a=!0)},isFinished:()=>a}}extractTimings(){var e,t;return null!=(e=null==(t=this.timings)?void 0:t.toArray())?e:[]}}},89737:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});const i=100},28557:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});class i{constructor(e){this.buffer=[],this.head=0,this.capacity=void 0,this.capacity=e}push(e){this.capacity&&(this.buffer.length<this.capacity?this.buffer.push(e):this.buffer[this.head]=e,this.head=(this.head+1)%this.capacity)}toArray(){return this.capacity?this.buffer.length<this.capacity?[...this.buffer]:[...this.buffer.slice(this.head),...this.buffer.slice(0,this.head)]:[]}clear(){this.buffer=[],this.head=0}}},70022:(e,t,r)=>{"use strict";function i(e,t){return(0,n.Hi)(e)===(0,n.Hi)(t)}r.d(t,{g:()=>i});var n=r(10005)},43071:(e,t,r)=>{"use strict";function i(e){switch(e.source){case"default":case"default-slow":case"cache":case"timing-api":case"network-api":case"ewma":case"hlsjs":case"external-yasp":return e;default:return{value:e.value,source:"external-yasp"}}}r.d(t,{S:()=>i})},93823:(e,t,r)=>{"use strict";function i(){return(0,n.$)(self)?s.vq:s.Dj}r.d(t,{M:()=>i});var n=r(34377),s=r(87853)},67251:(e,t,r)=>{"use strict";function i(e,t){var r;const{url:i}=null!=(r=t.details)?r:{url:null};if(!i)return t;const n=e.getViolatedSourceBySrc(i);if(!n)return t;const{originalPolicy:a,violatedDirective:o}=n;return new s.x({code:"YASP_SECURITY_POLICY_VIOLATION",details:{url:i,originalPolicy:a,violatedDirective:o},message:"CSP violation",isFatal:!0})}function n(e){return"YASP_SECURITY_POLICY_VIOLATION"===e.code}r.d(t,{n:()=>n,t:()=>i});var s=r(81261)},53096:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});const i=0},11021:(e,t,r)=>{"use strict";function i(){return"media-track-"+R++}function n(e,t){if(void 0===t&&(t={bubbles:!1,cancelable:!1,detail:void 0}),"function"===typeof CustomEvent)return new CustomEvent(e,t);const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}function s(e,t){for(let r=0;r<e.length;r++)t.id!==e[r].id&&(e[r].enabled=!1)}function a(e){if(void 0!==e)for(;e.length>0;)e.removeTrack(e[0])}function o(e,t){for(let r=0;r<e.length;r++)Object.keys(e[r]).length&&t.id!==e[r].id&&(e[r].selected=!1)}function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function c(e){if("configureSource"!==e.method)return e;const t=e.params;if(!t||"object"!==typeof t)return e;const r=t.config;if(!r||"object"!==typeof r||Array.isArray(r))return e;return d({},e,{params:d({},t,{config:function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(r,Ee)})})}async function u(e){let t,{inline:i,workerConfig:n}=e,s=!1;try{t=new Worker(new URL(r.p+r.u(568),r.b)),(0,be.t)(t.constructor)||t.terminate()}catch(d){try{t=await new we(new URL(r.p+r.u(568),r.b)).createWorker(),(0,be.t)(t.constructor)||(i=!0,t.terminate())}catch(h){i=!0}}if(i){const{runWorker:e}=await r.e(599).then(r.bind(r,82701));t=new ge(e),s=!0}const a=new Se.A(e=>{if(s)t.postMessage(e);else{const r=c(e);t.postMessage(r,(0,Ae._)(r))}},s);let o=!1;const l=new Promise((e,r)=>{const s=a.request({method:"initWorker",params:n}),l=r=>{o||i?console.error(r):(d(),t.terminate(),e(u({inline:!0,workerConfig:n})))},d=()=>{t.removeEventListener("error",l)};s.then(()=>{o=!0,d(),e({worker:t,rpc:a})}).catch(l),t.addEventListener("error",l),t.addEventListener("message",e=>{a.handleMessage(e)})});return(0,ye.v)(l),l}function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function m(e){switch(e.category){case Ot.q.NETWORK_REQUEST:return new It.j(e);case Ot.q.DRM:return new Ct.s(e);case Ot.q.MEDIA:return new Pt.c(e);case Ot.q.NETWORK_PLAYER:return new Tt.T(e);case Ot.q.NO_CODECS:return new _t.E(e);case Ot.q.CANNOT_PLAY:return new Et.c(e);case Ot.q.UNSUPPORTED_ENV:return new St.a(e);case Ot.q.EXCEPTION:return new gt.p(e);case Ot.q.ADS:return new bt.o(e);case Ot.q.CONFIG:return new wt.x(e);case Ot.q.REGIONAL:return new yt.M(e);case Ot.q.ACCESS:return new At.j(e);case Ot.q.DEFAULT:default:return new kt.b(e)}}function v(e){return(0,Ne.K)(e)&&"cause"in e&&function(e){if(!(0,Ne.K)(e))return!1;const t=e;return(0,Ve.H)(t.code)&&(0,Ve.H)(t.category)&&"boolean"===typeof t.isFatal}(e.cause)}function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function g(e){var t;return(t=class t extends e{constructor(){super(...arguments),this.airplayController=void 0,this.progressWatcher=void 0,this.yaspEventListeners=void 0,this.yaspErrorListeners=void 0,this.gapController=void 0,this.bufferingController=void 0,this.eventsWatcher=void 0,this.playheadMover=void 0,this.cspErrorHandler=void 0,this.srcSetDeferred=void 0,this.detachCallbacks=void 0,this.detachPromise=void 0,this.playCalled=void 0,this.shouldPlay=void 0,this.recoverHelper=void 0,this.mediaInternalsHistory=void 0,this.restorePrototype=void 0,this.yaspSrc=void 0,this.yaspError=null,this.error=null,this.audioTrackList=void 0,this.mediaStateNotifier=void 0,this.stallDetector=null,this.yaspSeekable=void 0,this.startTime=NaN,this.scopeId=ft.$}static isSupported(){var e;return"function"===typeof(null==(e=(0,Je.Q)())?void 0:e.isTypeSupported)}static isCurrentSrc(e,r){return!(null===r||!t.isYaspElement(e))&&(0,dt.g)(e.yaspSrc,r)}static getDefaultBandwidthEstimate(){const e=t.bandwidth;if(e)return(0,De.S)(e);const r=(0,Ue.N)();return r?{value:r,source:"cache"}:{value:(0,Dt.M)(),source:"default"}}static attachElement(e,r,i,n){var s;if(!t.isSupported())throw new Error("Unsupported platform");if(t.isYaspElement(r))return(0,We.L)(new Error("Unexpected YaspMediaElement.attach(yaspMediaElement) call")),r;t.setWorkerConfig(n,i);const a=(0,fe.n)(r);ve()(r,e.prototype);const o=r;o.setScopeId(i),o.restorePrototype=a,o.detachCallbacks=[],o.yaspEventListeners=new Set,o.yaspErrorListeners=new Set,o.initEventsWatcher(),o.recoverHelper=new lt({retryDelays:at});const l=null==(s=o.eventsWatcher)?void 0:s.startProcess("element attach","Media Element");o.registerMediaRpcHandlers(),o.initAudioTrackList(),o.initPlayheadMover(),o.initWatchdog(),o.initBufferingController(),o.initCspErrorHandler(),o.initNativeErrorHandling(),o.initAirplayController(),o.mediaInternalsHistory=new Rt.h(r);const d=t.overrideYaspGetters(o);return o.detachCallbacks.push(d),t.instances.push(o),(0,U.Y)(()=>{const e=t.getExpConfig(),r=(0,ht.B)(e);t.messenger.emit("yasp-event",{name:"YaspExperimentCheck"+r,data:e})}),null==l||l.end(),o}static warmUp(){(0,A.Z)(t.worker)}static async destroy(e){var r;(void 0===e&&(e=ft.$),await Promise.all(t.instances.map(t=>t.scopeId!==e?Promise.resolve():t.detach())),t.hasActiveInstance())||(null==(r=t.workerImpl)||r.destroy())}static hasActiveInstance(){return Boolean(t.instances.length)}static overrideYaspGetters(e){const r=t.initYaspSeekable(e),i=t.attachErrorStore(e),n=t.initYaspCurrentSrc(e);return()=>{r(),i(),n()}}static attachErrorStore(e){return Object.defineProperty(e,"error",{get(){const r=this;return void 0!==r.yaspError?r.yaspError:t.getNativeErrorAndAttachErrorStore(e)},configurable:!0}),()=>delete e.error}static getNativeErrorAndAttachErrorStore(e){delete e.error;const{error:r}=e;return t.attachErrorStore(e),r}static getNativeSeekableAndInitYaspSeekable(e){delete e.seekable;const{seekable:r}=e;return t.initYaspSeekable(e),r}set airplaySrc(e){this.airplayController&&(this.airplayController.airplaySrc=e)}get airplaySrc(){var e;return null==(e=this.airplayController)?void 0:e.airplaySrc}static isYaspElement(e){return!0===e.yasp}get audioTracks(){var e;return this.yaspSrc?this.audioTrackList:null!=(e=super.audioTracks)?e:this.audioTrackList}canPlayType(e){return super.canPlayType(e)}load(){if(!this.yaspSrc)return super.load()}rethrowEmptySrc(e){e||(0,We.L)(new Error("Setting empty src"))}getAttribute(e){return"src"===e&&void 0!==this.yaspSrc?this.yaspSrc:super.getAttribute(e)}setAttribute(e,t){return"src"===e?(this.rethrowEmptySrc(t),this.setSrc(t)):super.setAttribute(e,t)}removeAttribute(e){"src"===e&&this.setSrc(""),super.removeAttribute(e)}get src(){var e;return void 0===this.yaspSrc?null!=(e=HTMLMediaElement.prototype.getAttribute.call(this,"src"))?e:"":this.yaspSrc}set src(e){this.rethrowEmptySrc(e),this.setSrc(e)}addEventListener(e,t,r){var i;if(super.addEventListener(e,t,r),"yasp-event"===e)null==(i=this.yaspEventListeners)||i.add(t);else if("yasp-error"===e){var n;null==(n=this.yaspErrorListeners)||n.add(t)}}removeEventListener(e,t,r){var i;if(super.removeEventListener(e,t,r),"yasp-event"===e)null==(i=this.yaspEventListeners)||i.delete(t);else if("yasp-error"===e){var n;null==(n=this.yaspErrorListeners)||n.delete(t)}}get yasp(){return!0}getMediaElementDebugDump(){const{paused:e,seeking:r,yaspError:i,yaspSeekable:n,currentTime:s,yaspSrc:a,readyState:o,duration:l,mediaInternalsHistory:d}=this,c=Re.getTimeRanges(t.getNativeSeekableAndInitYaspSeekable(this)),u=t.getNativeErrorAndAttachErrorStore(this),h=(0,ze.w)(this);return{error:u,yaspError:i,paused:e,seeking:r,seekable:c,yaspSeekable:n,buffered:h,bufferedTime:(0,Qe.p)(h,this.currentTime),currentTime:s,src:HTMLMediaElement.prototype.getAttribute.call(this,"src"),yaspSrc:a,readyState:o,duration:l,mediaInternalsHistory:d?d.getHistory():null}}static async preloadSrc(e,r,i){var n;void 0===i&&(i=ft.$);const s=r.yaspSourceConfig;return s?t.configureSource(e,s,i):t.shouldSaveBandwidth&&t.worker.sendEvent({method:"configureSource",params:{source:e,config:{defaultBandwidthEstimate:t.getDefaultBandwidthEstimate()},scopeId:i}}),t.worker.request({method:"load",params:{source:e,contentId:null==s||null==(n=s.offlineParams)?void 0:n.contentId,preloadBufferGoal:null==s?void 0:s.preloadBufferGoal,ignoreNetworkQuality:null==s?void 0:s.ignoreNetworkQuality,displace:!1,scopeId:i}})}static async releaseSrc(e,r){return void 0===r&&(r=ft.$),t.worker.request({method:"destroy",params:{source:e,reason:"ExternalApi",scopeId:r}}).catch(ut.Y.warn)}async yaspReleaseSrc(e){return t.releaseSrc(e,this.scopeId)}async yaspRequestDebugInfo(){var e,r;const i=t.worker.request({method:"requestDebugInfo",params:{source:this.yaspSrc,scopeId:this.scopeId}}),n={mediaElement:f({},this.getMediaElementDebugDump()),time:(0,Ke.no)()/1e3,mediaEventsHistory:null==(e=this.eventsWatcher)?void 0:e.getEventHistory()},s=await i;return f({},n,s,{timings:[...(null==(r=this.eventsWatcher)?void 0:r.getTimings())||[],...s.timings]})}async detachInternal(){var e,r,i,n,s,a,o,l,d,c,u;void 0!==this.yaspSrc&&await t.worker.request({method:"detach",params:{source:this.yaspSrc,scopeId:this.scopeId,reason:{name:"detachInternal"}}}),this.detachCallbacks&&(this.detachCallbacks.filter(Boolean).forEach(async e=>{try{await e()}catch(t){(0,We.L)(t)}}),this.detachCallbacks.length=0,delete this.detachCallbacks),null==(e=this.yaspErrorListeners)||e.clear(),this.yaspErrorListeners=void 0,null==(r=this.yaspEventListeners)||r.clear(),this.yaspEventListeners=void 0,null==(i=this.gapController)||i.release(),this.stallDetector=null,this.gapController=void 0,null==(n=this.bufferingController)||n.release(),this.bufferingController=void 0,null==(s=this.cspErrorHandler)||s.destroy(),this.cspErrorHandler=void 0,null==(a=this.progressWatcher)||a.release(),this.progressWatcher=void 0,null==(o=this.playheadMover)||o.release(),this.playheadMover=void 0,null==(l=this.eventsWatcher)||l.release(),this.eventsWatcher=void 0,null==(d=this.mediaInternalsHistory)||d.destroy(),this.mediaInternalsHistory=void 0,this.restore(),this.removeEventListener("progress",this.onSegmentAppended),this.removeEventListener("seeking",this.onSeeking),this.removeEventListener("canplay",this.onCanPlay),this.removeEventListener("error",this.onNativeError),this.removeAttribute("src"),t.messenger.emit("yasp-event",{name:"YaspDetached",data:void 0}),null==(c=this.restorePrototype)||c.call(this),this.restorePrototype=void 0,t.instances=t.instances.filter(e=>e!==this),null==(u=this.mediaStateNotifier)||u.disable()}detach(){return this.detachPromise||(this.detachPromise=(async()=>{try{await this.detachInternal()}finally{this.detachPromise=void 0}})()),this.detachPromise}yaspDispatchEvent(e,t,r){const i=new CustomEvent(e,f({detail:t},r));super.dispatchEvent(i)}static getStats(){return{bandwidth:t.bandwidth}}static configureSource(e,r,i){void 0===i&&(i=ft.$);const n=r.defaultBandwidthEstimate?(0,De.S)(r.defaultBandwidthEstimate):void 0;void 0!==n&&(t.shouldSaveBandwidth=!1);const s=n?f({},r,{defaultBandwidthEstimate:n}):r;t.worker.sendEvent({method:"configureSource",params:{source:e,config:s,scopeId:i}})}static setWorkerConfig(e,r){void 0===r&&(r=ft.$),void 0!==e&&(r===ft.$&&(void 0!==e.sourceLimit&&(t.workerConfig.sourceLimit=null===e.sourceLimit?void 0:e.sourceLimit),void 0!==e.perfLogUrl&&(t.workerConfig.perfLogUrl=null===e.perfLogUrl?void 0:e.perfLogUrl),void 0!==e.isLowMemoryMode&&(t.workerConfig.isLowMemoryMode=null===e.isLowMemoryMode?void 0:e.isLowMemoryMode),void 0!==e.retryConfig&&(t.workerConfig.retryConfig=null===e.retryConfig?void 0:e.retryConfig),void 0!==e.enabled&&(t.workerConfig.enabled=null===e.enabled||e.enabled),void 0!==e.bufferingController&&(t.workerConfig.bufferingController=null===e.bufferingController?void 0:e.bufferingController),void 0!==e.enableSourceBufferTimeline&&(t.workerConfig.enableSourceBufferTimeline=null===e.enableSourceBufferTimeline?void 0:e.enableSourceBufferTimeline)),void 0!==t.workerImpl&&t.workerImpl.sendEvent({method:"setWorkerConfig",params:{workerConfig:e,scopeId:r}}))}static get worker(){if(void 0!==t.workerImpl)return t.workerImpl;const e=(0,Je.Q)(),r=!!e&&"canConstructInDedicatedWorker"in e&&Boolean(e.canConstructInDedicatedWorker),i=!!(t.workerConfig.enabled&&(0,xe.RW)("web_yasp_enable_worker")&&r)&&Boolean(window.MediaSourceHandle);return t.workerImpl=new ke({useWebWorker:i,workerConfig:f({},t.workerConfig,{flags:(0,xe.qm)()}),onTerminate:()=>{t.messenger.emit("yasp-event",{name:"YaspWorkerTerminate",data:void 0}),t.workerImpl=void 0}}),t.workerImpl.registerStaticRpcHandler("updateBandwidthEstimate",e=>(t.bandwidth=e.bandwidth,t.shouldSaveBandwidth&&(0,Ue.J)(e.bandwidth),{done:!0,value:void 0})),t.workerImpl.registerStaticRpcHandler("updateBufferedInfo",e=>(t.messenger.emit("BufferedInfoChanged",e),{done:!0,value:void 0})),t.workerImpl.registerStaticRpcHandler("error",t.globalErrorRpcHandler),t.workerImpl.registerStaticRpcHandler("event",t.globalEventRpcHandler),t.workerImpl}handleError(e){const t=this.processCspError(e);var r;t.isFatal?(this.yaspError=this.createMediaError(MediaError.MEDIA_ERR_NETWORK,t.message,t),this.yaspDispatchEvent("error",void 0),this.yaspDispatchEvent("yasp-event",{name:"MediaInternalsHistoryOnFatal",data:{history:null==(r=this.mediaInternalsHistory)?void 0:r.getHistory()}},{cancelable:!0})):("YASP_BUFFER_ALLOCATION_ERROR"!==t.code&&"YASP_QUOTA_EXCEEDED_ERROR"!==t.code||(t.details.memory=function(){if(!self)return{};const e=self.performance||{};return(0,He.r)(e.memory)}()),this.yaspDispatchEvent("yasp-error",t,{cancelable:!0}))}yaspSetAudioTrack(e){e&&t.configureSource(this.src,{tracks:{audioLang:e}})}initAudioTrackList(){if(void 0!==this.audioTrackList)return;const e=new F;e.addEventListener("change",()=>{(0,q.w)(e).find(e=>{e.enabled&&t.configureSource(this.src,{tracks:{audioLang:e.language}})});const r=new Event("change");(0,U.Y)(()=>{super.audioTracks.dispatchEvent(r)})}),this.audioTrackList=e}updateObjectUrl(e){this.rethrowEmptySrc(e);const t="string"===typeof e,r=!t;t?HTMLMediaElement.prototype.setAttribute.call(this,"src",e):this.srcObject=e,this.yaspDispatchEvent("yasp-event",{name:"YaspUpdateObjectUrl",data:{hasSrc:t,hasSrcObject:r}},{cancelable:!0})}registerRpcHandlerForInstance(e,r){this.detachCallbacks.push(t.worker.registerRpcHandler(e,e=>t.isCurrentSrc(this,"source"in e?e.source:null)&&e.scopeId===this.scopeId?r(e):{done:!1,value:void 0}))}registerMediaRpcHandlers(){this.registerRpcHandlerForInstance("setStartInfo",e=>{var t,r;let{source:i,startPosition:n,objectUrl:s}=e;return s&&this.updateObjectUrl(s),this.setStartPosition(n),this.readyState<HTMLMediaElement.HAVE_METADATA&&this.addEventListener("loadedmetadata",()=>{(0,dt.g)(this.yaspSrc,i)&&this.setStartPosition(n)},{once:!0}),null==(t=this.mediaStateNotifier)||t.handleTimeupdate(),null==(r=this.srcSetDeferred)||r.resolve(),{done:!0,value:void 0}}),this.registerRpcHandlerForInstance("addAudioTrack",e=>{var t,r,i;return(null==(t=this.audioTrackList)?void 0:t.getTrackById(e.track.id))&&(0,dt.g)(this.yaspSrc,e.source)||null==(r=this.audioTrackList)||r.addTrack(new N({enabled:e.track.selected,label:e.track.label,language:null!=(i=e.track.language)?i:void 0,id:e.track.id,kind:e.track.kind,bitrate:e.track.bitrate,channels:e.track.channels,codecs:e.track.codecs})),{done:!0,value:void 0}}),this.registerRpcHandlerForInstance("changeSelectedAudioLanguage",e=>{if(!this.audioTrackList)return{done:!0,value:void 0};for(let t=0;t<this.audioTrackList.length;t++)this.audioTrackList[t].enabled=this.audioTrackList[t].language===e.language;return{done:!0,value:void 0}}),this.registerRpcHandlerForInstance("applyDrmInfos",e=>(this.yaspDispatchEvent("yasp-drmInfoReceived",e.drmInfos,{cancelable:!0}),{done:!0,value:void 0})),this.registerRpcHandlerForInstance("notifyWaitForKey",e=>(this.yaspDispatchEvent("yasp-waitForKey",e,{cancelable:!0}),{done:!0,value:void 0})),this.registerRpcHandlerForInstance("emsg",e=>(this.yaspDispatchEvent("yasp-emsg",e.emsg,{cancelable:!0}),{done:!0,value:void 0})),this.registerRpcHandlerForInstance("logSegmentLoaded",e=>{const t="[SegmentLoader] loaded type = "+e.info.type+", number = "+e.info.number+", cmaf = "+e.info.cmaf;return this.yaspDispatchEvent("yasp-debug",t,{cancelable:!0}),{done:!0,value:void 0}}),this.registerRpcHandlerForInstance("updateUtcStartTime",e=>(this.startTime=e.time,{done:!0,value:void 0})),this.registerRpcHandlerForInstance("updateSeekableRange",e=>(this.yaspSeekable={start:e.start,end:e.end},{done:!0,value:void 0})),this.registerRpcHandlerForInstance("urlObjectUpdated",e=>{const t=this.currentTime;return this.updateObjectUrl(e.objectUrl),this.currentTime===t?(this.currentTime=t,this.yaspDispatchEvent("yasp-event",{name:"YaspUrlObjectUpdatedSeek",data:{currentTime:t}},{cancelable:!0})):this.setStartPosition(t),{done:!0,value:void 0}}),this.registerRpcHandlerForInstance("flushMediaPipeline",e=>{if(0===this.buffered.length){const e=this.currentTime,t=this.currentTime-.001;this.currentTime=t,this.yaspDispatchEvent("yasp-event",{name:"YaspFlushMediaPipelineNudge",data:{from:e,to:t}},{cancelable:!0})}return{done:!0,value:void 0}}),this.registerRpcHandlerForInstance("event",e=>{var t;let{source:r,event:i}=e;return(0,dt.g)(r,this.yaspSrc)&&null!=(t=this.yaspEventListeners)&&t.size?(this.yaspDispatchEvent("yasp-event",i,{cancelable:!0}),{done:!0,value:void 0}):{done:!1,value:void 0}}),this.registerRpcHandlerForInstance("error",e=>{var r;let{error:i,source:n}=e;if(!(0,dt.g)(n,this.yaspSrc))return{done:!1,value:void 0};const s=t.parseErrorString(i);return s.isFatal&&t.worker.sendEvent({method:"destroy",params:{source:n,reason:"Error",scopeId:this.scopeId}}),null!=(r=this.yaspErrorListeners)&&r.size?(this.handleError(s),{done:!0,value:void 0}):{done:!1,value:void 0}})}setStartPosition(e){var t;(()=>e<=0&&0===this.currentTime)()||this.currentTime!==e&&(this.yaspDispatchEvent("yasp-event",{name:"YaspSetStartPosition",data:{position:e,reason:"setStartPosition called"}},{cancelable:!0}),null==(t=this.playheadMover)||t.moveTo(e))}forceTimeUpdate(){var e;null==(e=this.mediaStateNotifier)||e.handleTimeupdate()}clearTrackLists(){a(this.audioTrackList)}createMediaError(e,t,r){let i=r;if(this.error)try{const e="string"===typeof(null==r?void 0:r.details)?f({},JSON.parse(r.details),{mediaTagError:this.error}):f({},r.details,{mediaTagError:this.error});i=m(f({},r,{details:e}))}catch(n){}return{code:e,message:t,yaspError:i}}static parseErrorString(e,t){void 0===t&&(t=!0);try{const r=JSON.parse(e),i=t?void 0:{message:"Detached mediaElement error: "+r.message,isFatal:!1,details:f({},r.details,{detached:!0})};return m(r).overridingClone(i)}catch(r){return new gt.p({code:"YASP_PARSE_ERROR_EXCEPTION",details:{error:r,errorString:e},message:"Expect error to be serialized error.",isFatal:!0})}}initNativeErrorHandling(){this.addEventListener("error",this.onNativeError)}async yaspRecover(){return new Promise(async(e,r)=>{if(!this.yaspSrc)return void r();try{await t.worker.request({method:"detach",params:{source:this.yaspSrc,scopeId:this.scopeId,reason:{name:"yaspRecover",details:"decode"}}})}catch(a){return void r()}const i=this.yaspSrc;if(!t.isCurrentSrc(this,i))return;if(await(0,ot._)(500),!t.isCurrentSrc(this,i))return;try{await t.worker.request({method:"attach",params:{source:this.yaspSrc,scopeId:this.scopeId}})}catch(a){return void r()}const n=setTimeout(()=>{r()},1e3),s=()=>{clearTimeout(n),this.removeEventListener("canplaythrough",s),e()};this.addEventListener("canplaythrough",s)})}async onNativeError(){var e,r;if(t.messenger.emit("yasp-event",{name:"MediaInternalsHistoryOnFatal",data:{history:null==(e=this.mediaInternalsHistory)?void 0:e.getHistory()}}),!this.yaspSrc||null!=(r=this.recoverHelper)&&r.isRecovering())return;const i=t.getNativeErrorAndAttachErrorStore(this);if((null==i?void 0:i.code)===MediaError.MEDIA_ERR_DECODE)try{var n,s;await(null==(n=this.recoverHelper)?void 0:n.recover(()=>this.yaspRecover())),null==(s=this.eventsWatcher)||s.pushCustomEvent({event:"YaspMseRecovered",timestamp:Date.now()}),this.yaspDispatchEvent("yasp-event",{name:"YaspMseRecovered",data:void 0},{cancelable:!0})}catch(a){t.worker.sendEvent({method:"destroy",params:{source:this.yaspSrc,reason:"Error",scopeId:this.scopeId}})}else i&&t.worker.sendEvent({method:"destroy",params:{source:this.yaspSrc,reason:"Error",scopeId:this.scopeId}})}initEventsWatcher(){this.eventsWatcher=new st(this,()=>this.getMediaElementDebugDump())}initPlayheadMover(){this.playheadMover=new Ze(this,3,(e,t)=>{this.yaspDispatchEvent("yasp-event",{name:"YaspPlayheadMove",data:{from:e,to:t}},{cancelable:!0})})}initCspErrorHandler(){this.cspErrorHandler=new mt.r(window)}processCspError(e){if(!this.cspErrorHandler||!this.yaspSrc)return e;const r=(0,vt.t)(this.cspErrorHandler,e);if((0,vt.n)(r)){const e=r.details;t.worker.sendEvent({method:"notifyCspError",params:{source:this.yaspSrc,url:e.url,scopeId:this.scopeId}})}return r}initBufferingController(){const e=t.workerConfig.bufferingController;if(!e)return;if(this.bufferingController)return;const r={bufferThreshold:e.bufferThreshold,pollInterval:e.pollInterval,isPlaybackRateSupported:e.isPlaybackRateSupported,hasGapJumper:Boolean(this.gapController)};this.bufferingController=new _e(this,r,(e,t)=>this.yaspDispatchEvent(e,t,{cancelable:!0}))}initWatchdog(){this.initStallDetector(),this.gapController||(this.gapController=new Ie(this,{getSeekRangeEnd:()=>this.seekable.end(0)},{jumpLargeGaps:!0,jumpOnPause:!0,largeGapLimit:Be.D},this.stallDetector,(e,t)=>{var r;const i=t?"YaspSmallGap":"YaspLargeGap";null==(r=this.eventsWatcher)||r.pushCustomEvent({event:i,timestamp:Date.now(),dump:e}),this.yaspDispatchEvent("yasp-event",{name:i,data:e},{cancelable:!0})}),this.addEventListener("seeking",this.onSeeking),this.addEventListener("canplay",this.onCanPlay),this.addEventListener("progress",this.onSegmentAppended),this.progressWatcher=new Ge(this))}onCanPlay(){var e;null==(e=this.gapController)||e.configure({jumpOnPause:!1}),this.shouldPlay&&(this.yaspDispatchEvent("yasp-event",{name:"YaspPlayCalledOnCanPlay",data:void 0},{cancelable:!0}),(0,ye.v)(this.play()))}onSegmentAppended(){var e;null==(e=this.gapController)||e.onSegmentAppended()}clampPosition(e){if(!this.seekable.length)return null;const{length:t,start:r,end:i}=this.seekable,n=i(t-1);if(0===e&&t&&r(0)===pt.S/1e3){const{currentTime:e}=this,t=r(0);return this.currentTime=t,this.yaspDispatchEvent("yasp-event",{name:"YaspClampPosition",data:{from:e,to:t,seekableStart:r(0),seekableEnd:n}},{cancelable:!0}),this.currentTime}const s=n;if(e<=s+.15)return null;const a=this.currentTime;return this.currentTime=s,this.yaspDispatchEvent("yasp-event",{name:"YaspClampPosition",data:{from:a,to:s,seekableStart:r(0),seekableEnd:n}},{cancelable:!0}),this.currentTime}onSeeking(){var e,r;if(!this.yaspSrc)return;if(null!==this.clampPosition(this.currentTime))return;null==(e=this.gapController)||e.configure({jumpOnPause:!0});const i=Re.isBuffered(this.buffered,this.currentTime,.5);var n;(null==(r=this.mediaStateNotifier)||r.handleTimeupdate(),!i&&this.yaspSrc)?t.worker.request({method:"seeking",params:{source:this.yaspSrc,scopeId:this.scopeId}}).then(async()=>{var e,t;(null==(e=this.gapController)||e.onSeeking(),(0,ae.z)())&&Promise.resolve().then(null==(t=this.mediaStateNotifier)?void 0:t.handleTimeupdate)}).catch(A.Z):null==(n=this.gapController)||n.onSeeking();t.worker.sendEvent({method:"positionChanged",params:{source:this.yaspSrc,scopeId:this.scopeId}})}updateShouldPlayState(e){this.shouldPlay=e}async play(){var e;(this.playCalled=!0,this.updateShouldPlayState(!0),this.yaspSrc&&"none"===this.preload&&this.readyState===HTMLMediaElement.HAVE_NOTHING&&t.worker.sendEvent({method:"load",params:{source:this.yaspSrc,displace:!0,scopeId:this.scopeId}}),HTMLMediaElement.prototype.getAttribute.call(this,"src")||this.srcObject)||await(null==(e=this.srcSetDeferred)?void 0:e.promise);if(this.playCalled)return this.playCalled=!1,this.handleLivePresentationWindowDropout(),super.play()}pause(){this.playCalled=!1,this.updateShouldPlayState(!1),super.pause()}isSupportedSrc(e){return(0,G.DZ)(e)}initAirplayController(){this.airplayController||(this.airplayController=new ct(this,e=>this.logAirplayStateChange(e)))}logAirplayStateChange(e){this.yaspDispatchEvent("yasp-event",{name:"AirplayStateChange",data:{enabled:e}})}restorePlaybackRate(){(0,U.Y)(()=>{this.playbackRate=this.defaultPlaybackRate})}setSrc(e){if(this.yaspSrc&&(0,dt.g)(this.yaspSrc,e))return this.yaspSrc=e,t.worker.request({method:"updateUrl",params:{newUrl:e,scopeId:this.scopeId}}).catch(()=>{this.setSrcWithDetach(e)}),void this.restorePlaybackRate();this.setSrcWithDetach(e)}setSrcWithDetach(e){var r,i,n,s,a,o;this.yaspSrc&&(t.worker.sendEvent({method:"detach",params:{source:this.yaspSrc,scopeId:this.scopeId,reason:{name:"setSrc"}}}),this.yaspSrc=void 0,this.clearSrcFromNativeElements(),null==(r=this.srcSetDeferred)||r.reject("Source loading interrupted: new source requested before previous load completed"),this.srcSetDeferred=void 0,null==(i=this.mediaStateNotifier)||i.disable(),this.clearTrackLists(),this.restore(),null==(n=this.recoverHelper)||n.reset(),null==(s=this.gapController)||s.resetLastJump());if((0,xe.RW)("web_force_hls_js")||(this.srcSetDeferred=new Fe.B,(0,ye.v)(this.srcSetDeferred.promise)),this.isSupportedSrc(e))return(0,xe.RW)("web_force_hls_js")&&(this.srcSetDeferred=new Fe.B,(0,ye.v)(this.srcSetDeferred.promise)),this.airplayController&&this.airplayController.airplayEnabled?void(this.airplayController.detachedSrc=e):(this.yaspSrc=e,t.worker.request({method:"attach",params:{source:e,scopeId:this.scopeId}},3e5).catch(r=>{const i=t.isYaspElement(this),n=v(r)?m(r.cause):new gt.p({code:"YASP_ATTACH_FAILED",details:{detached:i,url:e,error:r},isFatal:(0,dt.g)(e,this.yaspSrc)});i?this.yaspDispatchEvent("yasp-error",n,{cancelable:!0}):t.messenger.emit("yasp-error",n.overridingClone({fatal:!1}))}),null==(a=this.mediaStateNotifier)||a.enable(),null==(o=this.gapController)||o.configure({jumpOnPause:!0}),"none"!==this.preload&&t.worker.sendEvent({method:"load",params:{source:e,displace:!0,scopeId:this.scopeId}}),void(t.shouldSaveBandwidth&&t.worker.sendEvent({method:"configureSource",params:{source:e,config:{defaultBandwidthEstimate:t.getDefaultBandwidthEstimate()},scopeId:this.scopeId}})));e?HTMLMediaElement.prototype.setAttribute.call(this,"src",e):HTMLMediaElement.prototype.removeAttribute.call(this,"src")}clearSrcFromNativeElements(){this.srcObject=null,HTMLMediaElement.prototype.removeAttribute.call(this,"src")}initStallDetector(){if(this.stallDetector)return;this.stallDetector=new Ye.L(this,e=>{var t;let r;r="pause-play"===e?"YaspStallDetectorPausePlay":"loop-emulation"===e?"YaspForcedLoop":"YaspNudgeStalled",null==(t=this.eventsWatcher)||t.pushCustomEvent({event:r,timestamp:Date.now(),dump:this.getMediaElementDebugDump()}),this.yaspDispatchEvent("yasp-event",{name:r,data:void 0},{cancelable:!0})})}static initYaspCurrentSrc(e){return Object.defineProperty(e,"currentSrc",{get(){return this.src},configurable:!0}),()=>delete e.currentSrc}static initYaspSeekable(e){return Object.defineProperty(e,"seekable",{get(){return this.yaspSeekable?{start:e=>{if(e>this.length-1)throw new Error("Failed to execute 'start' on 'TimeRanges': The index provided ("+e+") is greater than the maximum bound ("+(this.length-1)+")");return this.yaspSeekable.start},end:e=>{if(e>this.length-1)throw new Error("Failed to execute 'end' on 'TimeRanges': The index provided ("+e+") is greater than the maximum bound ("+(this.length-1)+")");return this.yaspSeekable.end},length:1}:t.getNativeSeekableAndInitYaspSeekable(this)},configurable:!0}),()=>delete e.seekable}restore(){this.startTime=NaN,this.yaspSeekable=void 0,this.shouldPlay=void 0}handleLivePresentationWindowDropout(){if(this.duration===1/0&&this.seekable.length&&this.currentTime<this.seekable.start(0)){const e=this.currentTime,t=this.seekable.end(this.seekable.length-1);this.currentTime=t,this.yaspDispatchEvent("yasp-event",{name:"YaspLivePresentationWindowReturn",data:{from:e,to:t}},{cancelable:!0})}}getStartDate(){return this.yaspSrc||"function"!==typeof super.getStartDate?new Date(this.startTime):new Date(super.getStartDate())}isFatalErrorRecoverable(){var e;return null==(e=this.recoverHelper)?void 0:e.isRecovering()}static getExpConfig(){const{flags:e,testids:t,slots:r}=(new je).getConfig();return{flags:e,testids:t,slots:r}}setScopeId(e){this.scopeId=e}}).instances=[],t.shouldSaveBandwidth=!0,t.bandwidth=void 0,t.workerImpl=void 0,t.messenger=new Ce.v,t.workerConfig={enabled:!0},t.globalErrorRpcHandler=e=>{let{error:r,source:i,scopeId:n}=e;const s=t.parseErrorString(r,!1);return s.isFatal&&i&&t.worker.sendEvent({method:"destroy",params:{source:i,reason:"Error",scopeId:n}}),t.messenger.emit("yasp-error",s),{done:!0,value:void 0}},t.globalEventRpcHandler=e=>{let{event:r,isWorkerMessage:i}=e;var n;return t.messenger.emit("yasp-event",f({},r,{name:i?r.name:(n=r.name,n.startsWith("DETACHED_")?n:"DETACHED_"+n)})),{done:!0,value:void 0}},t.currentScopeId=ft.$,t}function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function S(){return(S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{e:()=>Nt});var A=r(88261);const b=e=>e.devicePixelRatio||e.screen.deviceXDPI&&e.screen.deviceXDPI/e.screen.logicalXDPI||1;var E=r(91003),w=r(52438),k=r(77297),C=r(12693);const P=(0,C.I)(async e=>{const t=b(e);if(!(0,E.y)())return t;const r=e.tizen;if(!r)return t;const i=e.screen.height;try{const e=await new Promise(e=>{r.systeminfo.getPropertyValue("PANEL",t=>e(t.panelHeight))});return e?e/i:t}catch(n){return t}}),T=(0,C.I)(e=>{let t=b(e);if(!(0,k.F)())return t;const r=e.Hisense_GetPanelResolution,i=e.Hisense_Get4KSupportState;if(i&&i()&&(t=2),!r)return t;const n=e.screen.height;try{const e=r(),{height:i}=I(e);return i?i/n:t}catch(s){return t}}),I=e=>{const t=e.split("*");return{height:parseInt(t[1],10),width:parseInt(t[0],10)}},_=(0,C.I)(async e=>{const t=b(e);if(!(0,w.V)())return t;const r=e.webOS;if(!r)return t;const i=e.screen.height;try{const e=await new Promise(e=>{r.deviceInfo(t=>e(t.screenHeight))});return e?e/i:t}catch(n){return t}}),O=e=>(0,E.y)()?P(e):(0,w.V)()?_(e):(0,k.F)()?Promise.resolve(T(e)):Promise.resolve(b(e));let R=0;class D{constructor(e){let{label:t="",language:r="",id:n=i(),sourceBuffer:s=null,props:a}=e;this.label=void 0,this.id=void 0,this.language=void 0,this.kind="",this.props=void 0,this.sourceBuffer=null,this.label=t,this.language=r,this.id=n,this.sourceBuffer=s,this.props=a}}const x=["enabled","bitrate","channels","codecs"];class N extends D{constructor(e){let t=void 0===e?{}:e,{enabled:r=!1,bitrate:i,channels:n,codecs:s}=t;super(function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(t,x)),this._enabled=!1,this.bitrate=void 0,this.channels=void 0,this.codecs=void 0,this.onenabledchange=void 0,this._enabled=r,this.bitrate=i,this.channels=n,this.codecs=s}_destroy(){delete this.onenabledchange}get enabled(){return this._enabled}set enabled(e){var t;"boolean"===typeof e&&e!==this._enabled&&(this._enabled=e,null==(t=this.onenabledchange)||t.call(this))}}var V=r(9057);class L extends V.Z{constructor(e){void 0===e&&(e=[]),super(),this.tracks=[],this._changing=!1;for(let t=0;t<e.length;t++)this.addTrack(e[t])}get length(){return this.tracks.length}addTrack(e){if(-1!==this.tracks.indexOf(e))return;const t=this.tracks.length;Object.defineProperty(this,t,{get:()=>this.tracks[t],enumerable:!1,configurable:!0}),this.tracks.push(e),this.dispatchTrackEvent("addtrack",e)}removeTrack(e){const t=this.tracks.indexOf(e);if(-1===t)return;null==e._destroy||e._destroy();const r=this.tracks.length-1;String(r)in this&&Object.defineProperty(this,r,{get:void 0,enumerable:!1,configurable:!0}),this.tracks.splice(t,1),this.dispatchTrackEvent("removetrack",e)}getTrackById(e){return this.tracks.find(t=>t.id===e)||null}item(e){return this.tracks[e]}dispatchTrackEvent(e,t){const r=n(e);r.track=t,this.dispatchEvent(r)}}class F extends L{constructor(e){void 0===e&&(e=[]);for(let t=e.length-1;t>=0;t--)if(e[t].enabled){s(e,e[t]);break}super(e),this.onaddtrack=void 0,this.onchange=void 0,this.onremovetrack=void 0,this.onaddtrack=null,this.onchange=null,this.onremovetrack=null,this.addEventListener("change",e=>{var t;return null==(t=this.onchange)?void 0:t.call(this,e)}),this.addEventListener("addtrack",e=>{var t;return null==(t=this.onaddtrack)?void 0:t.call(this,e)}),this.addEventListener("removetrack",e=>{var t;return null==(t=this.onremovetrack)?void 0:t.call(this,e)})}addTrack(e){e.enabled&&s(this,e),super.addTrack(e),e.onenabledchange=()=>{this._changing||(this._changing=!0,s(this,e),this._changing=!1,this.dispatchEvent(n("change")))}}addEventListener(e,t,r){super.addEventListener(e,t,r)}removeEventListener(e,t,r){super.removeEventListener(e,t,r)}}const M=["selected","width","height","bitrate","frameRate","codecs"];class j extends D{constructor(e){let t=void 0===e?{}:e,{selected:r=!1,width:i,height:n,bitrate:s,frameRate:a,codecs:o}=t;super(function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(t,M)),this._selected=!1,this.width=void 0,this.height=void 0,this.bitrate=void 0,this.frameRate=void 0,this.codecs=void 0,this.onselectedchange=void 0,this.selected=r,this.bitrate=s,this.frameRate=a,this.width=i,this.height=n,this.codecs=o}_destroy(){delete this.onselectedchange}get selected(){return this._selected}set selected(e){var t;"boolean"===typeof e&&e!==this._selected&&(this._selected=e,null==(t=this.onselectedchange)||t.call(this))}}class B extends L{constructor(e){void 0===e&&(e=[]);for(let t=e.length-1;t>=0;t--)if(e[t].selected){o(e,e[t]);break}super(e),this.onaddtrack=void 0,this.onchange=void 0,this.onremovetrack=void 0,this.onaddtrack=null,this.onchange=null,this.onremovetrack=null,this.addEventListener("change",e=>{var t;return null==(t=this.onchange)?void 0:t.call(this,e)}),this.addEventListener("addtrack",e=>{var t;return null==(t=this.onaddtrack)?void 0:t.call(this,e)}),this.addEventListener("removetrack",e=>{var t;return null==(t=this.onremovetrack)?void 0:t.call(this,e)})}addEventListener(e,t,r){super.addEventListener(e,t,r)}removeEventListener(e,t,r){super.removeEventListener(e,t,r)}get selectedIndex(){for(let e=0;e<this.length;e++)if(this[e].selected)return e;return-1}addTrack(e){e.selected&&o(this,e),super.addTrack(e),e.onselectedchange=()=>{this._changing||(this._changing=!0,o(this,e),this._changing=!1,this.dispatchEvent(n("change")))}}}var U=r(86673);var Y=r(72391);const H=URL.createObjectURL(new Blob(["WEBVTT"],{type:"text/vtt"}));var W=r(35276),q=r(66169),G=(r(91761),r(99501)),z=r(10005),K=r(72485),Q=r(88370);class Z{constructor(e,t){this.callback=void 0,this.intervalId=void 0,this.playbackQualityController=void 0,this.oldValues={},this.dprCheckingInProgress=!1,this.tick=()=>{var e;null==(e=this.playbackQualityController)||e.update();const t=this.getFramesValue();void 0!==t&&this.callback("frames",t),this.checkDevicePixelRatio()},this.callback=t,this.playbackQualityController=new Q.Q(e),this.intervalId=null}getFramesValue(){var e,t;if(null===this.playbackQualityController||null===this.oldValues)return;const{droppedVideoFrames:r,totalVideoFrames:i}=this.playbackQualityController.getPlaybackQuality();return(null==(e=this.oldValues.frames)?void 0:e.dropped)!==r||(null==(t=this.oldValues.frames)?void 0:t.total)!==i?(this.oldValues.frames={dropped:Math.max(Math.floor(r)),total:Math.max(Math.floor(i))},this.oldValues.frames):void 0}checkDevicePixelRatio(){if(null===this.oldValues)return;if(this.dprCheckingInProgress)return;const e="undefined"!==typeof globalThis?globalThis:window;this.oldValues.devicePixelRatio||this.handleDpr(b(e)),this.dprCheckingInProgress=!0,O(e).then(e=>{this.handleDpr(e)}).catch(()=>{this.handleDpr(b(e))})}handleDpr(e){this.dprCheckingInProgress=!1,null!==this.oldValues&&this.oldValues.devicePixelRatio!==e&&(this.oldValues.devicePixelRatio=e,void 0!==e&&this.callback("devicePixelRatio",e))}enable(){this.tick(),this.intervalId=setInterval(this.tick,250)}disable(){var e;this.oldValues={},null==(e=this.playbackQualityController)||e.persist(),clearInterval(this.intervalId)}destroy(){var e;this.disable(),null==(e=this.playbackQualityController)||e.destroy(),this.callback=A.Z,this.oldValues=null}}var J=r(65435),X=r(28634),$=r(17338);class ee extends X.V{constructor(){super(),this.onResize=void 0;const e=this.getWindowSize();this.onResize=new $.R(e,(e,t)=>{let{width:r,height:i}=t;return!!(isNaN(r)||isNaN(i)||r<1||i<1)||e.width===r&&e.height===i}),this.addDestroyHandler(()=>this.onResize.removeAll()),this.setupEventListeners()}getSize(){return l({},this.onResize.getValue())}getWindowSize(){return{width:window.innerWidth,height:window.innerHeight}}setupEventListeners(){const e=()=>{const e=this.getWindowSize();this.onResize.dispatch(e)};this.addResizeListener(e);const t=setInterval(e,5e3);this.addDestroyHandler(()=>clearInterval(t))}addResizeListener(e){window&&(this.addDestroyHandler((0,Y.O)(window,"resize",e,{passive:!0})),this.addDestroyHandler((0,Y.O)(window,"orientationchange",e,{passive:!0})),window.visualViewport&&this.addDestroyHandler((0,Y.O)(window.visualViewport,"resize",e,{passive:!0})))}}class te{constructor(e){this.observer=void 0,this.lastValue=void 0,this.video=void 0,this.onChangeCallbacks=[],this.video=e,this.lastValue=this.computeObjectFit(),this.observer=new MutationObserver(e=>{for(const t of e)if("attributes"===t.type&&("class"===t.attributeName||"style"===t.attributeName)){const e=this.computeObjectFit();this.lastValue!==e&&(this.lastValue=e,this.onChangeCallbacks.forEach(t=>t(e)))}}),this.observer.observe(e,{attributes:!0,attributeFilter:["class","style"]})}computeObjectFit(){if(!this.video)throw new Error("No video-element to compute object-fit");return self.getComputedStyle(this.video).getPropertyValue("object-fit")}getObjectFit(){return this.lastValue}onChange(e){this.onChangeCallbacks.push(e)}destroy(){var e;null==(e=this.observer)||e.disconnect(),this.observer=null,this.video=null,this.onChangeCallbacks=[]}}const re={attributes:!0,childList:!1,subtree:!1,attributeFilter:["loop"]};class ie{constructor(e,t){this.observer=void 0,this.observer=new MutationObserver((function(r){for(const i of r){if("attributes"!==i.type)return;const r=i.attributeName;t(r,e[r])}})),this.observer.observe(e,re)}destroy(){var e;null==(e=this.observer)||e.disconnect(),this.observer=null}}var ne=r(70286),se=r(22905),ae=r(63416),oe=r(20817);const le=(0,se.E)()||(0,ae.z)()?(e,t)=>{let r=e.paused;return(0,oe.X)(()=>{e.paused!==r&&(r=e.paused,t(r))})}:(e,t)=>{let r=e.paused;const i=e=>{const i="pause"===e.type;i!==r&&(r=i,t(r))},n=(0,Y.O)(e,"pause",i,{passive:!0}),s=(0,Y.O)(e,"playing",i,{passive:!0}),a=(0,Y.O)(e,"play",i,{passive:!0});return()=>{n(),s(),a()}};class de{constructor(e){this.unsubscribers=[],this.media=void 0,this.destroy=()=>{(0,ne.p)(this.unsubscribers)},this.unsubscribers=[],this.media=e}observe(e){const t=le(this.media,e),r=()=>{t(),this.unsubscribers=this.unsubscribers.filter(e=>e!==r)};return this.unsubscribers.push(r),r}}var ce=r(3991);class ue{constructor(e,t){void 0===t&&(t=!1),this.enableYaspStalledEvents=t,this.unsubscribers=[],this.media=void 0,this.destroy=()=>{(0,ne.p)(this.unsubscribers)},this.unsubscribers=[],this.media=e}observe(e){return this.enableYaspStalledEvents?this.observeYaspBuffering(e):this.observeStandardBuffering(e)}observeYaspBuffering(e){const t=()=>{e(!0)},r=()=>{e(!1)};this.media.addEventListener("yasp-stalled",t),this.media.addEventListener("yasp-stalledend",r);const i=()=>{this.media.removeEventListener("yasp-stalled",t),this.media.removeEventListener("yasp-stalledend",r),this.unsubscribers=this.unsubscribers.filter(e=>e!==i)};return this.unsubscribers.push(i),i}observeStandardBuffering(e){const t=(0,ce.E)(this.media,e,{hasGapJumper:!1}),r=()=>{t(),this.unsubscribers=this.unsubscribers.filter(e=>e!==r)};return this.unsubscribers.push(r),r}}class he{constructor(e,t,r){void 0===r&&(r=!1),this.enableYaspStalledEvents=r,this.yaspMediaElement=void 0,this.notifyCallback=void 0,this.notify=void 0,this.attributeObserver=null,this.pausedObserver=null,this.bufferingObserver=null,this.handlePaused=e=>{this.notify("updatePaused",e)},this.handleBuffering=e=>{this.notify("updateBuffering",e)},this.handleBuffered=()=>{if(null===this.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");const e=[],t=this.yaspMediaElement.buffered;for(let r=0;r<t.length;r++)e.push([t.start(r),t.end(r)]);this.notify("updateBuffered",e)},this.handleRatechange=()=>{if(null===this.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");this.notify("updatePlaybackRate",this.yaspMediaElement.playbackRate)},this.handleTimeupdate=()=>{if(null===this.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");this.notify("updateCurrentTime",Math.max(this.yaspMediaElement.currentTime,0))},this.handleDurationchange=()=>{if(null===this.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");this.notify("updateDuration",Math.max(this.yaspMediaElement.duration,0))},this.yaspMediaElement=e,this.notifyCallback=t,this.notify=(e,t)=>{this.notifyCallback&&this.notifyCallback(e,t)}}enable(){var e;null!==this.yaspMediaElement&&(this.disable(),this.yaspMediaElement.addEventListener("ratechange",this.handleRatechange,{passive:!0}),this.yaspMediaElement.addEventListener("timeupdate",this.handleTimeupdate,{passive:!0}),this.yaspMediaElement.addEventListener("seeking",this.handleTimeupdate,{passive:!0}),this.yaspMediaElement.addEventListener("durationchange",this.handleDurationchange,{passive:!0}),this.yaspMediaElement.addEventListener("progress",this.handleBuffered,{passive:!0}),this.attributeObserver=new ie(this.yaspMediaElement,(e,t)=>{"loop"===e&&this.handleLoop(null!=t&&t)}),this.pausedObserver=new de(this.yaspMediaElement),this.bufferingObserver=new ue(this.yaspMediaElement,this.enableYaspStalledEvents),this.pausedObserver.observe(this.handlePaused),this.bufferingObserver.observe(this.handleBuffering),this.handleLoop(null!=(e=this.yaspMediaElement.loop)&&e))}disable(){var e,t,r;null!==this.yaspMediaElement&&(this.yaspMediaElement.removeEventListener("ratechange",this.handleRatechange),this.yaspMediaElement.removeEventListener("timeupdate",this.handleTimeupdate),this.yaspMediaElement.removeEventListener("seeking",this.handleTimeupdate),this.yaspMediaElement.removeEventListener("durationchange",this.handleDurationchange),this.yaspMediaElement.removeEventListener("progress",this.handleBuffered),null==(e=this.attributeObserver)||e.destroy(),this.attributeObserver=null,null==(t=this.pausedObserver)||t.destroy(),this.pausedObserver=null,null==(r=this.bufferingObserver)||r.destroy(),this.bufferingObserver=null)}destroy(){this.disable(),this.yaspMediaElement=null,this.notifyCallback=null}handleLoop(e){this.notify("updateLoop",e)}}class pe extends he{constructor(e,t,r){void 0===r&&(r=!1),super(e,t,r),this.intervalWatcher=null,this.videoSizeObserver=null,this.videoSizeSensor=null,this.windowSizeSensor=null,this.objectFitObserver=null,this.handleIntervalUpdate=(e,t)=>{switch(e){case"frames":return void this.handleFrames(t);case"devicePixelRatio":return void this.handleDevicePixelRatio(t)}},this.handleVideoResize=()=>{if(null===this.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");this.notify("updateVideoSize",{height:Math.max(Math.floor(this.yaspMediaElement.videoHeight)),width:Math.max(Math.floor(this.yaspMediaElement.videoWidth))})},this.handleResize=(e,t)=>{if(null===this.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");this.notify("updateContainerSize",{height:Math.max(Math.floor(t),0),width:Math.max(Math.floor(e),0)})},this.handleWindowSize=(e,t)=>{if(null===this.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");this.notify("updateWindowSize",{height:Math.max(Math.floor(t),0),width:Math.max(Math.floor(e),0)})},this.handleObjectFit=e=>{this.notify("updateObjectFit",e)},this.yaspMediaElement=e,this.intervalWatcher=new Z(this.yaspMediaElement,this.handleIntervalUpdate)}enable(){if(null===this.intervalWatcher)return;super.enable(),this.intervalWatcher.enable(),this.videoSizeObserver=new K.$(this.yaspMediaElement,this.handleVideoResize),this.videoSizeSensor=new J.b(this.yaspMediaElement),this.videoSizeSensor.onResize.add(e=>{let{width:t,height:r}=e;return this.handleResize(t,r)}),this.windowSizeSensor=new ee,this.windowSizeSensor.onResize.add(e=>{let{width:t,height:r}=e;return this.handleWindowSize(t,r)}),this.objectFitObserver=new te(this.yaspMediaElement),this.objectFitObserver.onChange(this.handleObjectFit);const e=this.videoSizeSensor.getSize();this.handleResize(e.width,e.height);const t=this.windowSizeSensor.getSize();this.handleWindowSize(t.width,t.height)}disable(){var e,t,r,i;null!==this.intervalWatcher&&(super.disable(),this.intervalWatcher.disable(),null==(e=this.videoSizeSensor)||e.destroy(),null==(t=this.videoSizeObserver)||t.destroy(),this.videoSizeObserver=null,null==(r=this.windowSizeSensor)||r.destroy(),this.windowSizeSensor=null,null==(i=this.objectFitObserver)||i.destroy(),this.objectFitObserver=null)}destroy(){var e;super.destroy(),null==(e=this.intervalWatcher)||e.destroy(),this.intervalWatcher=null}handleFrames(e){if(null===this.yaspMediaElement)throw new Error("Unexpected notification call after destroy");this.notify("updateFrames",e)}handleDevicePixelRatio(e){if(null===this.yaspMediaElement)throw new Error("Unexpected notification call after destroy");this.notify("updateDevicePixelRatio",e)}}var me=r(40497),ve=r.n(me),fe=r(5929);class ge{constructor(e){this.externalEventTarget=new V.Z,this.internalEventTarget=new V.Z,this.isFakeWorker=!0,e({addEventListener:this.internalEventTarget.addEventListener.bind(this.internalEventTarget),removeEventListener:this.internalEventTarget.removeEventListener.bind(this.internalEventTarget),postMessage:e=>{const t=new MessageEvent("message",{data:e});Promise.resolve().then(()=>this.externalEventTarget.dispatchEvent(t))}})}addEventListener(e,t,r){this.externalEventTarget.addEventListener(e,t,r)}removeEventListener(e,t,r){this.externalEventTarget.removeEventListener(e,t,r)}terminate(){}postMessage(e){const t=new MessageEvent("message",{data:e});this.internalEventTarget.dispatchEvent(t)}}var ye=r(36354),Se=r(41466),Ae=r(68753),be=r(53878);const Ee=["factories"];class we{constructor(e,t){this.url=e,this.options=t,this.blobPromise=void 0,this.blobPromise=fetch(this.url).then(e=>e.blob())}async createWorker(){const e=URL.createObjectURL(await this.blobPromise),t=new Worker(e,this.options);return URL.revokeObjectURL(e),t}}class ke{constructor(e){this.workerPromise=void 0,this.terminateHandlers=[],this.workerPromise=u({inline:!e.useWebWorker,workerConfig:e.workerConfig}),this.terminateHandlers.push(e.onTerminate)}async postMessage(){const{worker:e}=await this.workerPromise;e.postMessage(...arguments)}sendEvent(e){let{method:t,params:r}=e;return this.workerPromise.then(e=>{let{rpc:i}=e;return i.sendEvent({method:t,params:r})})}request(e,t){let{method:r,params:i}=e;return this.workerPromise.then(e=>{let{rpc:n}=e;return n.request({method:r,params:i},t)})}registerRpcHandler(e,t){return this.workerPromise.then(r=>{let{rpc:i}=r;return i.registerHandler(e,t)}),()=>this.removeRpcHandler(e,t)}registerStaticRpcHandler(e,t){return this.workerPromise.then(r=>{let{rpc:i}=r;return i.registerStaticHandler(e,t)}),()=>this.removeRpcHandler(e,t)}removeRpcHandler(e,t){this.workerPromise.then(r=>{let{rpc:i}=r;return i.removeHandler(e,t)})}onTerminate(e){this.terminateHandlers.push(e)}destroy(){this.workerPromise.then(e=>{let{worker:t,rpc:r}=e;t.terminate(),r.destroy(),this.terminateHandlers=this.terminateHandlers.filter(e=>((0,U.Y)(()=>e()),!1))})}}var Ce=r(46667),Pe=r(78299),Te=r(59600);class Ie{constructor(e,t,r,i,n){this.media=void 0,this.timeline=void 0,this.config=void 0,this.stallDetector=void 0,this.onEvent=void 0,this.unsubscribe=void 0,this.seekingEventReceived=void 0,this.prevReadyState=void 0,this.didFireLargeGap=void 0,this.hadSegmentAppended=void 0,this.gapJumpTimer=void 0,this.lastJumpTo=void 0,this.media=e,this.timeline=t,this.config=r,this.stallDetector=i,this.onEvent=n,this.seekingEventReceived=!1,this.prevReadyState=e.readyState,this.didFireLargeGap=!1,this.hadSegmentAppended=!1,this.lastJumpTo=null,this.unsubscribe=(0,Y.O)(e,"waiting",()=>this.onPollGapJump(),!1),this.gapJumpTimer=new Pe.B(()=>{this.onPollGapJump()}).tickEvery(.25)}release(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),null!==this.gapJumpTimer&&(this.gapJumpTimer.stop(),this.gapJumpTimer=null),this.stallDetector&&(this.stallDetector.release(),this.stallDetector=null),this.onEvent=null,this.timeline=null,this.media=null}configure(e){this.config=h({},this.config,e)}onSegmentAppended(){this.hadSegmentAppended=!0,this.onPollGapJump()}onSeeking(){this.seekingEventReceived=!0,this.hadSegmentAppended=!1,this.didFireLargeGap=!1,this.lastJumpTo=null}resetLastJump(){this.lastJumpTo=null}onPollGapJump(){var e,t,r,i,n;if(!this.media)return;if(0===this.media.readyState)return;if(this.media.seeking){if(!this.seekingEventReceived)return}else this.seekingEventReceived=!1;if(this.media.paused&&(null==(e=this.config)||!e.jumpOnPause))return;if(this.media.readyState!==this.prevReadyState&&(this.didFireLargeGap=!1,this.prevReadyState=this.media.readyState),null!=(t=this.stallDetector)&&t.poll())return;if((0,E.y)()&&!this.media.currentTime&&this.media.readyState>=this.media.HAVE_FUTURE_DATA)return;const s=(null==(r=this.config)?void 0:r.smallGapLimit)||.5,a=(null==(i=this.config)?void 0:i.largeGapLimit)||1/0,o=this.media.currentTime,l=this.media.buffered,d=(0,Te.L)(l,o);if(null===d)return;const c=l.start(d),u=c-o;if(0===d&&!this.hadSegmentAppended&&u>.1)return;if(c>=((null==(n=this.timeline)?void 0:n.getSeekRangeEnd())||0))return;const h=u<=s;let p=!1;if(u<Ie.BROWSER_GAP_TOLERANCE)return;const m=[];for(let g=0;g<this.media.buffered.length;g++)m.push([this.media.buffered.start(g),this.media.buffered.end(g)]);var v;h||this.didFireLargeGap||(this.didFireLargeGap=!0,null!=(v=this.config)&&v.jumpLargeGaps&&u<a&&(p=!0));if(h||p){var f;if(this.lastJumpTo===c)return;null==(f=this.onEvent)||f.call(this,{currentTime:o,gapSize:u,bufferedRanges:m},h),this.lastJumpTo=c,this.media.currentTime=c}}}Ie.BROWSER_GAP_TOLERANCE=.001;class _e{constructor(e,t,r){var i,n,s,a;void 0===t&&(t={}),this.media=void 0,this.config=void 0,this.timer=void 0,this.isStalled=!1,this.savedPlaybackRate=1,this.dispatchEvent=void 0,this.boundOnWaiting=void 0,this.boundOnPlaying=void 0,this.boundOnCanPlay=void 0,this.boundOnPause=void 0,this.boundOnPlay=void 0,this.media=e,this.config={bufferThreshold:null!=(i=t.bufferThreshold)?i:.15,pollInterval:null!=(n=t.pollInterval)?n:.25,isPlaybackRateSupported:null!=(s=t.isPlaybackRateSupported)&&s,hasGapJumper:null!=(a=t.hasGapJumper)&&a},this.dispatchEvent=null!=r?r:null,this.boundOnWaiting=this.onWaiting.bind(this),this.boundOnPlaying=this.onPlaying.bind(this),this.boundOnCanPlay=this.onCanPlay.bind(this),this.boundOnPause=this.onPause.bind(this),this.boundOnPlay=this.onPlay.bind(this),this.savedPlaybackRate=e.defaultPlaybackRate||1,this.timer=new Pe.B(()=>this.poll()),this.subscribeToEvents(),this.timer.tickEvery(this.config.pollInterval)}subscribeToEvents(){this.media&&(this.media.addEventListener("waiting",this.boundOnWaiting),this.media.addEventListener("playing",this.boundOnPlaying),this.media.addEventListener("canplay",this.boundOnCanPlay),this.media.addEventListener("canplaythrough",this.boundOnCanPlay),this.media.addEventListener("pause",this.boundOnPause),this.media.addEventListener("play",this.boundOnPlay))}unsubscribeFromEvents(){this.media&&(this.media.removeEventListener("waiting",this.boundOnWaiting),this.media.removeEventListener("playing",this.boundOnPlaying),this.media.removeEventListener("canplay",this.boundOnCanPlay),this.media.addEventListener("canplaythrough",this.boundOnCanPlay),this.media.removeEventListener("pause",this.boundOnPause),this.media.removeEventListener("play",this.boundOnPlay))}onWaiting(){this.config.isPlaybackRateSupported?this.poll():this.setStalled(!0)}onPlaying(){this.config.isPlaybackRateSupported?this.poll():this.setStalled(!1)}onCanPlay(){this.poll()}onPause(){this.isStalled&&this.setStalled(!1)}onPlay(){this.poll()}poll(){if(!this.media)return;if(this.media.paused)return void(this.isStalled&&this.setStalled(!1));const e=this.checkShouldBeStalled();e!==this.isStalled&&this.setStalled(e)}checkShouldBeStalled(){return!!this.media&&(this.media.readyState<3||!!this.config.isPlaybackRateSupported&&this.checkBufferingWithThreshold())}checkBufferingWithThreshold(){return!!this.media&&(0,ce.s)(this.media,this.isStalled?.3:this.config.bufferThreshold,this.config.hasGapJumper)}setStalled(e){this.isStalled!==e&&(this.isStalled=e,e?this.onStalledStart():this.onStalledEnd())}onStalledStart(){var e;if(this.media&&(null==(e=this.dispatchEvent)||e.call(this,"yasp-stalled"),this.config.isPlaybackRateSupported)){this.savedPlaybackRate=this.media.playbackRate||this.media.defaultPlaybackRate||1;try{this.media.playbackRate=0}catch(t){}}}onStalledEnd(){var e;if(this.media&&(null==(e=this.dispatchEvent)||e.call(this,"yasp-stalledend"),this.config.isPlaybackRateSupported))try{this.media.playbackRate=this.savedPlaybackRate}catch(t){}}getIsStalled(){return this.isStalled}forceCheck(){this.poll()}release(){var e;if(null==(e=this.timer)||e.stop(),this.timer=null,this.unsubscribeFromEvents(),this.isStalled&&this.config.isPlaybackRateSupported&&this.media)try{this.media.playbackRate=this.savedPlaybackRate}catch(t){}this.media=null,this.dispatchEvent=null}}var Oe=r(48446);class Re{static isBuffered(e,t,r){if(void 0===r&&(r=0),!e||!e.length)return!1;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return!1;if(t>e.end(e.length-1))return!1;for(let i=0;i<e.length;i++)if(t+r>=e.start(i)&&t-r<=e.end(i))return!0;return!1}static getTimeRanges(e){const t=[];for(let i=0;i<e.length;i++)try{t.push({start:e.start(i),end:e.end(i)})}catch(r){}return(0,Oe.l)(t)}}var De=r(43071),xe=r(65705),Ne=r(76101),Ve=r(16187),Le=r(95925),Fe=r(46321);const Me=new Fe.B;(0,Le.a)(Me.resolve);class je{isInited(){const{flagsInited:e}=(0,Le.r)();return e}waitForInit(){return this.isInited()?Promise.resolve(this.getConfig()):Me.promise.then(()=>this.getConfig())}getConfig(){const{flags:e,testids:t,slots:r}=(0,Le.r)();return{flags:(0,Ne.K)(e)?JSON.parse(JSON.stringify(e)):{},testids:(0,Ve.H)(t)?t.split(",").map(Number).filter(Boolean):[],slots:(0,Ve.H)(r)?r:""}}}var Be=r(84189),Ue=r(49992),Ye=r(88019),He=r(39720),We=r(84780),qe=r(62720);class Ge{constructor(e){this.media=null,this.wasNativeProgressEmited={default:!1,onPause:!1},this.interval=null,this.lastBufferedEnd=0,this.onPoll=()=>{if(!this.media)return;const{length:e}=this.media.buffered;if(!e)return void(this.lastBufferedEnd=0);const t=this.media.buffered.end(e-1);this.lastBufferedEnd<t&&this.emitProgress(),this.lastBufferedEnd=t},this.onProgress=e=>{this.media&&("detail"in e&&e.detail.synthetic||(this.media.paused?this.wasNativeProgressEmited.onPause=!0:this.wasNativeProgressEmited.default=!0,this.shouldStopPolling()&&this.release()))},this.media=e,e.addEventListener("progress",this.onProgress),this.interval=setInterval(this.onPoll,250)}shouldStopPolling(){return(0,qe.z)(this.wasNativeProgressEmited).every(Boolean)}release(){var e;null==(e=this.media)||e.removeEventListener("progress",this.onProgress),this.interval&&(clearInterval(this.interval),this.interval=null),this.media=null}emitProgress(){var e,t;this.shouldStopPolling()||(this.wasNativeProgressEmited.default||null!=(e=this.media)&&e.paused)&&(this.wasNativeProgressEmited.onPause||null==(t=this.media)||!t.paused)||this.dispatchSyntheticProgress()}dispatchSyntheticProgress(){var e;null==(e=this.media)||e.dispatchEvent(new CustomEvent("progress",{detail:{synthetic:!0}}))}}var ze=r(5486),Ke=r(46869),Qe=r(42848);class Ze{constructor(e,t,r){this.maxAttempts=t,this.remainingAttempts=0,this.originTime=0,this.targetTime=0,this.timer=new Pe.B(()=>{this.onTick()}),this.media=void 0,this.onMove=null,this.media=e,this.onMove=r||null}release(){this.timer&&(this.timer.stop(),this.timer=null),this.media=null}moveTo(e){var t;this.media&&this.timer&&(this.originTime=this.media.currentTime,this.targetTime=e,this.remainingAttempts=this.maxAttempts,this.media.currentTime=e,null==(t=this.onMove)||t.call(this,this.originTime,e),this.timer.tickEvery(.1))}onTick(){var e;this.media&&this.timer&&(this.remainingAttempts<=0?this.timer.stop():this.media.currentTime===this.originTime?(this.remainingAttempts--,this.media.currentTime=this.targetTime,null==(e=this.onMove)||e.call(this,this.originTime,this.targetTime)):this.timer.stop())}}var Je=r(22956),Xe=r(24735),$e=r(89737),et=r(28557);const tt=["play","playing","pause","error","waiting","stalled","suspend","ended","loadstart","abort","loadedmetadata","loadeddata","canplay","canplaythrough","durationchange","seeking","seeked","encrypted","ratechange","emptied"],rt=["error","waiting","seeking","seeked","canplay","encrypted","durationchange"],it=["waiting","canplay","canplaythrough","loadedmetadata","loadeddata","emptied"],nt=["seeking","seeked"];class st{startProcess(e,t,r,i){void 0===r&&(r={});const n=p({},r,{sourceKey:(0,z.Hi)(this.media.src)});return this.timingsCollector.startProcess(e,t,n,i)}constructor(e,t){this.media=e,this.getDump=t,this.history=new et.d($e.K),this.timingsCollector=new Xe.h,this.readyStateChangeProcess=void 0,this.seekprocess=null,this.handleEvent=e=>{const t=e.type,r={event:t,timestamp:Date.now()};rt.includes(t)&&(r.dump=this.getDump()),this.history.push(r);const{readyState:i}=this.media;var n,s;(it.includes(t)&&this.readyStateChangeProcess.readyState!==i&&(this.readyStateChangeProcess.process.end(),this.readyStateChangeProcess.process=this.startProcess("ready state change","MediaElement",void 0,{readyState:i}),this.readyStateChangeProcess.readyState=i),nt.includes(t))&&("seeked"===t?null==(n=this.seekprocess)||n.end(void 0,{seekTo:this.media.currentTime}):(null==(s=this.seekprocess)||s.end("Seek while seeking"),this.seekprocess=this.startProcess("seek","MediaElement",{seekFrom:this.media.currentTime,readyState:i})))};const{readyState:r}=this.media;this.readyStateChangeProcess={readyState:r,process:this.startProcess("ready state change","MediaElement",void 0,{readyState:r})},this.subscribeToEvents()}subscribeToEvents(){tt.forEach(e=>{this.media.addEventListener(e,this.handleEvent)})}release(){tt.forEach(e=>{this.media.removeEventListener(e,this.handleEvent)}),this.history.clear(),this.timingsCollector.destroy(),this.seekprocess=null}getTimings(){return this.timingsCollector.extractTimings()}getEventHistory(){return this.history.toArray()}pushCustomEvent(e){this.history.push(e)}}const at=[400,800,1e3];var ot=r(3569);class lt{constructor(e){this.props=e,this.currentAttempt=0,this.recovering=!1}recover(e){return new Promise(async(t,r)=>{if(this.props.retryDelays&&this.props.retryDelays.length){for(this.recovering=!0;this.currentAttempt<this.props.retryDelays.length;){await(0,ot._)(this.props.retryDelays[this.currentAttempt]),this.currentAttempt=this.currentAttempt+1;try{await e(),this.currentAttempt=0,t();break}catch(i){}}this.recovering=!1,this.currentAttempt>=this.props.retryDelays.length&&r()}else r()})}reset(){this.currentAttempt=0,this.recovering=!1}isRecovering(){return this.recovering}}var dt=r(70022);class ct{constructor(e,t){this.yaspMedia=void 0,this.detachedSrcInternal=void 0,this.airplaySrcInternal=void 0,this.airplayEnabled=void 0,this.lastSetSrcTime=void 0,this.onAirplayStateChange=void 0,this.airplayEnabled=e.webkitCurrentPlaybackTargetIsWireless,this.onAirplayStateChange=t,this.yaspMedia=e,this.setUpAirplay()}set airplaySrc(e){this.airplaySrcInternal=e,this.airplayEnabled&&e&&(this.lastSetSrcTime=(0,Ke.no)(),this.yaspMedia.src=e,this.yaspMedia.play())}get airplaySrc(){return this.airplaySrcInternal}set detachedSrc(e){this.detachedSrcInternal=e}get detachedSrc(){return this.detachedSrcInternal}setUpAirplay(){let e;this.yaspMedia.setAttribute("x-webkit-airplay","allow"),this.yaspMedia.disableRemotePlayback=!0,this.yaspMedia.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",t=>{const r=(0,Ke.no)();if(this.lastSetSrcTime&&r-this.lastSetSrcTime<3e3)return;if(e&&r-e<2e3)return;e=(0,Ke.no)();const{currentTime:i}=this.yaspMedia;this.yaspMedia.disableRemotePlayback?(this.yaspMedia.disableRemotePlayback=!1,this.onAirplayStateChange(!0),this.airplayEnabled=!0,this.detachedSrc=this.yaspMedia.src,this.yaspMedia.src=this.airplaySrcInternal,this.yaspMedia.addEventListener("loadedmetadata",()=>{this.yaspMedia.currentTime=i,this.yaspMedia.play()})):(this.airplayEnabled=!1,this.onAirplayStateChange(!1),this.yaspMedia.disableRemotePlayback=!0,this.yaspMedia.src=this.detachedSrc,this.yaspMedia.addEventListener("loadedmetadata",()=>{this.yaspMedia.currentTime=i,this.yaspMedia.play()}))})}}var ut=r(39789),ht=r(48703),pt=r(79549),mt=r(34902),vt=r(67251),ft=r(53096),gt=r(58884),yt=r(52257),St=r(42419),At=r(58710),bt=r(97622),Et=r(44676),wt=r(81261),kt=r(91434),Ct=r(3816),Pt=r(99218),Tt=r(38333),It=r(93499),_t=r(4699),Ot=r(47134),Rt=r(86566),Dt=r(93823);const xt=g(HTMLVideoElement);class Nt extends xt{constructor(){super(...arguments),this.videoTrackList=void 0,this.unsubscribeTextTracksChange=void 0,this.unsubscribeTextTracksAdd=void 0,this.isLowLatency=!1,this.serverTimeInfo=void 0,this.streamEndTime=void 0}static setDevicePixelRatioForSource(e,t){Nt.worker.request({method:"setDevicePixelRatio",params:{source:e,devicePixelRatio:b(window),scopeId:t}}).catch(A.Z),O(window).then(r=>Nt.worker.request({method:"setDevicePixelRatio",params:{source:e,devicePixelRatio:r,scopeId:t}})).catch(A.Z)}static attach(e,t,r){var i;if(void 0===r&&(r=ft.$),Nt.isYaspVideoElement(e))return e.setScopeId(r),e;const n=xt.attachElement(Nt,e,r,t);return n.registerVideoRpcHandlers(),n.initVideoStateNotifier(),n.initVideoTrackList(),xt.messenger.emit("yasp-event",{name:"YaspAttached",data:{message:null!=(i=(0,U.Y)(()=>"1.0-13565"))?i:""}}),n}get videoTracks(){var e;return this.yaspSrc?this.videoTrackList:null!=(e=super.videoTracks)?e:this.videoTrackList}canPlayType(e){return Nt.isSupported()&&"application/dash+xml"===e?super.canPlayType('video/mp4; codecs="avc1.42E01E"'):super.canPlayType(e)}static isYaspVideoElement(e){return!0===e.yasp}addEventListener(e,t,r){super.addEventListener(e,t,r)}removeEventListener(e,t,r){super.removeEventListener(e,t,r)}async yaspRequestDebugInfo(){const{videoTracks:e,audioTracks:t,textTracks:r}=this;return y({},{videoElement:{audioTracks:(0,q.w)(t),videoTracks:(0,q.w)(e),textTracks:(0,q.w)(r)}},await super.yaspRequestDebugInfo())}static async preloadSrc(e,t,r){return void 0===r&&(r=ft.$),Nt.setDevicePixelRatioForSource(e,r),super.preloadSrc(e,t,r)}async yaspPreloadSrc(e,t){return Nt.preloadSrc(e,t,this.scopeId)}yaspSetVideoElementSizes(e){Nt.setVideoElementSizes(this.src,e,this.scopeId)}static setVideoElementSizes(e,t,r){void 0===r&&(r=ft.$),(0,G.DZ)(e)&&Nt.configureSource(e,{videoSizes:t},r)}yaspDispatchEvent(e,t,r){const i=new CustomEvent(e,y({detail:t},r));super.dispatchEvent(i)}static getStats(){return y({},xt.getStats(),{maxCapAllowedVideoTrack:Nt.maxCapAllowedVideoTrack})}static get worker(){const e=xt.worker;return this.workerHandlersRegistered||(e.registerStaticRpcHandler("updateMaxCapAllowedVideoTrack",e=>(Nt.maxCapAllowedVideoTrack=e.maxCapAllowedVideoTrack,{done:!0,value:void 0})),e.registerStaticRpcHandler("workerInited",e=>(Nt.sourceLimit=e.sourceLimit,{done:!0,value:e.sourceLimit})),e.onTerminate(()=>{Nt.workerHandlersRegistered=!1}),this.workerHandlersRegistered=!0),e}initVideoTrackList(){if(void 0!==this.videoTrackList)return;const e=new B;e.addEventListener("change",()=>{const{id:t}=e[e.selectedIndex];Nt.configureSource(this.src,{tracks:{videoTrackId:t}});const r=new Event("change");(0,U.Y)(()=>{super.videoTracks.dispatchEvent(r)})}),this.videoTrackList=e}static removeCues(e){if(!e.cues)return;const t=e.cues;for(let r=t.length-1;r>=0;r--){const i=t[r];i&&e.removeCue(i)}}initTextTrackList(){(0,k.F)()&&(this.unsubscribeTextTracksAdd=(0,Y.O)(this.textTracks,"addtrack",e=>{let{track:t}=e;const r=t;var i;"empty-yasp-text-track"===r.id&&"showing"===r.mode&&(r.mode="disabled",null==(i=this.findEmptyTextTrack())||i.remove())})),this.unsubscribeTextTracksChange=(0,Y.O)(this.textTracks,"change",e=>{let{target:t}=e;const r={source:this.yaspSrc,track:null},i=t;for(let s=0;s<i.length;s++){const e=i[s];var n;if("empty-yasp-text-track"!==e.id)"disabled"!==e.mode&&(Nt.removeCues(e),r.track={id:e.id,label:e.label,language:e.language,kind:e.kind});else null==(n=this.findEmptyTextTrack())||n.remove()}Nt.configureSource(this.src,{tracks:{textTrack:r.track}})})}findEmptyTextTrack(){return this.querySelector('track[id="empty-yasp-text-track"]')}registerVideoRpcHandlers(){this.registerRpcHandlerForInstance("addTextTrack",e=>{const t=this.getElementsByTagName("track"),r=(0,q.w)(t).some(t=>t.id===e.track.id);if((0,dt.g)(this.yaspSrc,e.source)&&r)return{done:!0,value:void 0};if((0,k.F)()&&!this.findEmptyTextTrack()){const t=document.createElement("track");t.setAttribute("kind",e.track.kind),t.setAttribute("default","true"),t.setAttribute("id","empty-yasp-text-track"),t.src=H,this.appendChild(t)}const i=document.createElement("track");return i.setAttribute("kind",e.track.kind),i.setAttribute("label",e.track.label),i.setAttribute("srclang",e.track.language),i.setAttribute("id",e.track.id),i.src=H,this.appendChild(i),{done:!0,value:void 0}}),this.registerRpcHandlerForInstance("cuesCleared",()=>{for(let e=0;e<this.textTracks.length;e++)Nt.removeCues(this.textTracks[e]);return{done:!0,value:void 0}}),this.registerRpcHandlerForInstance("cuesAdded",e=>{let t,{cues:r,label:i}=e;for(let n=0;n<this.textTracks.length;n++)this.textTracks[n].label===i&&(t=this.textTracks[n]);return t?(r.forEach(e=>{const{startTime:r,endTime:i,payload:n}=e;if("\0"!==n&&"\x1f"!==n){const e=new VTTCue(r,i,n);t.addCue(e)}}),{done:!0,value:void 0}):{done:!0,value:void 0}}),this.registerRpcHandlerForInstance("changeVideoTracks",e=>{const{added:t,removed:r}=e;return r.forEach(e=>{var t;const r=null==(t=this.videoTrackList)?void 0:t.getTrackById(e);var i;r&&(null==(i=this.videoTrackList)||i.removeTrack(r))}),t.forEach(e=>{var t,r,i;let{source:n,track:s}=e;const a=null==(t=this.videoTrackList)?void 0:t.getTrackById(s.id);(0,dt.g)(this.yaspSrc,n)&&a||null==(r=this.videoTrackList)||r.addTrack(new j({selected:s.selected,width:s.width,height:s.height,bitrate:s.bitrate,label:s.label,language:null!=(i=s.language)?i:void 0,frameRate:s.frameRate,id:s.id,kind:s.kind,codecs:s.codecs}))}),{done:!0,value:void 0}}),this.registerRpcHandlerForInstance("changeSelectedVideoTrack",e=>{if(!this.videoTrackList)return{done:!0,value:void 0};const t=this.videoTrackList.getTrackById(e.trackId);return t?(t.selected=!0,{done:!0,value:void 0}):{done:!0,value:void 0}}),this.registerRpcHandlerForInstance("changeMediaType",e=>(this.yaspDispatchEvent("yasp-videoTypeChange",e.mediaType,{cancelable:!0}),{done:!0,value:void 0})),this.registerRpcHandlerForInstance("changeIsLowLatency",e=>(this.isLowLatency=e.isLowLatency,{done:!0,value:void 0})),this.registerRpcHandlerForInstance("updateTargetLatency",e=>(this.yaspDispatchEvent("yasp-updateTargetLatency",e.latency,{cancelable:!0}),{done:!0,value:void 0})),this.registerRpcHandlerForInstance("updateServerTime",e=>(this.serverTimeInfo?(this.serverTimeInfo.time=e.time,this.serverTimeInfo.getTime=(0,W.u)()):this.serverTimeInfo={time:e.time,getTime:(0,W.u)()},{done:!0,value:void 0})),this.registerRpcHandlerForInstance("updateStreamEndTime",e=>(this.streamEndTime=e.time,{done:!0,value:void 0}))}initVideoStateNotifier(){var e;const t=Boolean(null==(e=Nt.workerConfig.bufferingController)?void 0:e.enabled);this.mediaStateNotifier=new pe(this,(e,t)=>{null!==this.yasp&&Nt.worker.postMessage({jsonrpc:"2.0",method:e,sourceKey:(0,z.Hi)(this.yaspSrc),scopeId:this.scopeId,params:t})},t),this.mediaStateNotifier.enable()}getServerTime(){if(this.serverTimeInfo&&this.serverTimeInfo.time)return(this.serverTimeInfo.time+this.serverTimeInfo.getTime())/1e3}getStreamEndTime(){return this.streamEndTime?this.streamEndTime/1e3:null}isLowLatencyLive(){return this.isLowLatency}clearTextTrackList(){for(let t=0;t<this.textTracks.length;t++)this.textTracks[t].mode="disabled";const e=this.getElementsByTagName("track");for(;e.length;)e[0].remove()}clearTrackLists(){super.clearTrackLists(),a(this.videoTrackList),this.clearTextTrackList()}setSrc(e){var t,r;(super.setSrc(e),(0,G.DZ)(e))?(Nt.setDevicePixelRatioForSource(e,this.scopeId),this.initTextTrackList()):(null==(t=this.unsubscribeTextTracksChange)||t.call(this),this.unsubscribeTextTracksChange=void 0,null==(r=this.unsubscribeTextTracksAdd)||r.call(this),this.unsubscribeTextTracksAdd=void 0)}restore(){super.restore(),this.streamEndTime=void 0,this.serverTimeInfo=void 0,this.isLowLatency=!1}getScope(){return this.scopeId&&Nt.scopeObjects.get(this.scopeId)||Nt}static createScope(e){void 0===e&&(e={}),Nt.warmUp();const t=++Nt.currentScopeId,r={isSupported:Nt.isSupported,attach:(e,r)=>Nt.attach(e,r,t),isYaspVideoElement:Nt.isYaspVideoElement,preloadSrc:(e,r)=>Nt.preloadSrc(e,r,t),releaseSrc:e=>Nt.releaseSrc(e,t),getStats:Nt.getStats,configureSource:(e,r)=>Nt.configureSource(e,r,t),destroy:()=>Nt.destroy(t),getExpConfig:Nt.getExpConfig,setWorkerConfig:e=>Nt.setWorkerConfig(e,t),messenger:Nt.messenger};return r.setWorkerConfig(e),Nt.scopeObjects.set(t,r),r}}Nt.maxCapAllowedVideoTrack=void 0,Nt.sourceLimit=null,Nt.workerHandlersRegistered=!1,Nt.scopeObjects=new Map;class Vt extends he{constructor(e,t){super(e,t)}}const Lt=g(HTMLAudioElement);class Ft extends Lt{static attach(e,t,r){var i;if(void 0===r&&(r=ft.$),Ft.isYaspAudioElement(e))return(0,We.L)(new Error("Unexpected YaspAudioElement.attach(yaspAudioElement) call")),e.setScopeId(r),e;const n=Lt.attachElement(Ft,e,r,t);return n.initAudioStateNotifier(),Lt.messenger.emit("yasp-event",{name:"YaspAttached",data:{message:null!=(i=(0,U.Y)(()=>"1.0-13565"))?i:""}}),n}isSupportedSrc(e){return super.isSupportedSrc(e)||this.isSupportedAudioSrc(e)}isSupportedAudioSrc(e){var t;const r=new URL(e,"https://domain.com"),i=Boolean(r.searchParams.get("codec")),n=(0,G.OI)(e)||"mp4"===(null==(t=r.searchParams.get("container"))?void 0:t.toLowerCase());return i&&n}initAudioStateNotifier(){this.mediaStateNotifier=new Vt(this,(e,t)=>{null!==this.yasp&&Ft.worker.postMessage({jsonrpc:"2.0",method:e,sourceKey:(0,z.Hi)(this.yaspSrc),scopeId:this.scopeId,params:t})}),this.mediaStateNotifier.enable()}async yaspRequestDebugInfo(){const{audioTracks:e}=this;return S({},{audioElement:{audioTracks:(0,q.w)(e)}},await super.yaspRequestDebugInfo())}static isYaspAudioElement(e){return!0===e.yasp}async yaspPreloadSrc(e,t){return Ft.preloadSrc(e,t)}getScope(){return this.scopeId&&Ft.scopeObjects.get(this.scopeId)||Ft}static createScope(e){Ft.warmUp();const t=++Ft.currentScopeId,r={isSupported:Ft.isSupported,attach:(e,r)=>Ft.attach(e,r,t),isYaspAudioElement:Ft.isYaspAudioElement,preloadSrc:(e,r)=>Ft.preloadSrc(e,r,t),releaseSrc:e=>Ft.releaseSrc(e,t),getStats:Ft.getStats,configureSource:(e,r)=>Ft.configureSource(e,r,t),destroy:()=>Ft.destroy(t),getExpConfig:Ft.getExpConfig,setWorkerConfig:e=>Ft.setWorkerConfig(e,t),messenger:Ft.messenger};return r.setWorkerConfig(e),Ft.scopeObjects.set(t,r),r}}Ft.scopeObjects=new Map},80441:(e,t,r)=>{"use strict";r.d(t,{L:()=>i});const i=[..."undefined"!==typeof MediaSourceHandle?[MediaSourceHandle]:[]]},68753:(e,t,r)=>{"use strict";function i(e,t){void 0===t&&(t=[]);for(const r in e)s.L.some(t=>{var i;return null!=(i=(0,n.Y)(()=>e[r]instanceof t))&&i})?t.push(e[r]):null!==e[r]&&"object"===typeof e[r]&&i(e[r],t);return t}r.d(t,{_:()=>i});var n=r(86673),s=r(80441)},41466:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var i=r(33139),n=r(48261),s=r(50576),a=r(85564),o=r(76101);class l{constructor(e,t){void 0===t&&(t=!1),this.jsonRpcMessenger=void 0,this.handlers={},this.staticHandlers={};this.jsonRpcMessenger=new n.A({send:e,onRun:async(e,t)=>{if(!(e.method in this.handlers)&&!(e.method in this.staticHandlers))return t(new s.l("Unknown method: "+e.method,a.v.METHOD_NOT_FOUND));if(this.handlers[e.method])for(const n of this.handlers[e.method])try{const{done:r,value:i}=await n(e.params);if(r)return t(null,i)}catch(r){return t(new s.l((0,o.K)(r)?r.message:"",a.v.INTERNAL_ERROR,(0,o.K)(r)?r.stack:"",(0,i.h)(r)?r.toJSON():void 0))}if(this.staticHandlers[e.method]){let n=!1;for(const l of this.staticHandlers[e.method])try{const{done:r,value:i}=await l(e.params);r&&(n||(n=!0,t(null,i)))}catch(r){return t(new s.l((0,o.K)(r)?r.message:"",a.v.INTERNAL_ERROR,(0,o.K)(r)?r.stack:"",(0,i.h)(r)?r.toJSON():void 0))}if(n)return}return t(new s.l("No handler for existed method: "+e.method,a.v.INVALID_REQUEST))},serialize:e=>e,deserialize:e=>e}),this.jsonRpcMessenger.on("Warn",console.warn),this.jsonRpcMessenger.on("Error",console.error)}registerHandler(e,t){var r;this.handlers[e]=null!=(r=this.handlers[e])?r:[],this.handlers[e].push(t)}registerStaticHandler(e,t){var r;this.staticHandlers[e]=null!=(r=this.staticHandlers[e])?r:[],this.staticHandlers[e].push(t)}removeHandler(e,t){for(const r of["handlers","staticHandlers"])this[r][e]&&(this[r][e]=void 0===t?[]:this[r][e].filter(e=>e!==t),0===this[r][e].length&&delete this[r][e])}request(e,t){let{method:r,params:i}=e;return this.jsonRpcMessenger.request({method:String(r),params:i},t)}sendEvent(e){let{method:t,params:r}=e;return this.jsonRpcMessenger.sendEvent({method:String(t),params:r})}destroy(){this.jsonRpcMessenger.destroy()}handleMessage(e){this.jsonRpcMessenger.handleMessage(e.data)}}},24795:(e,t,r)=>{"use strict";r.d(t,{uM:()=>s,th:()=>n});var i=r(44706);let n;!function(e){e.ALL="*",e.PLAY="play",e.START_SCREEN_PLAY="startScreenPlay",e.VOLUME="sound",e.VOLUME_SLIDER="volumeSlider",e.SETTINGS="settings",e.SETTINGS_ITEM="settingsItem",e.FULLSCREEN="fullscreen",e.TIMELINE="timeline",e.TIMELINE_PREVIEW="timelinePreview",e.LIVE="live",e.POSTER="poster",e.TIME_DISPLAY="time",e.TITLE_DISPLAY="titleDisplay",e.REPORT="report",e.FORWARD="forward",e.BACKWARD="backward",e.LOGO="logo",e.PRELOADER="preloader",e.CONTEXT_MENU="contextMenu",e.START_SCREEN="startScreen",e.PLAYBACK_RATE="playbackRate",e.EXTERNAL_PLAYBACK="externalPlayback",e.RECOMMENDATIONS="recommendations",e.CLOSE_BUTTON="closeButton",e.NEXT_AD_INFO="nextAdInfo",e.SUBTITLES_TOGGLE="subtitlesToggle",e.SKIP_AD="skipAd",e.MOBILE_SEEK_BUTTONS="mobileSeekButtons",e.TITLE="title",e.CONTENT_STATUS_TEXT="contentStatusText"}(n||(n={}));const s=(0,i.Z)(n).map(e=>n[e])},78421:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});const i="playerskin-native-ui-mode"},93247:(e,t,r)=>{"use strict";r.d(t,{mw:()=>i});const i=1},23980:(e,t,r)=>{"use strict";function i(e){return!!e.includes(n.th.ALL)||n.uM.every(t=>t===n.th.ALL||e.includes(t))}r.d(t,{p:()=>i});var n=r(24795)},90957:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e){function t(t){if(e&&console.log("[PLAYER] [CALL]",t.name,t.params),void 0!==n)return n[t.name].apply(n,t.params);if(void 0!==c&&f.indexOf(t.name)>-1)return c[t.name].apply(c,t.params);if(!t.async)return void y.push(t);const r=i({},t,{resolve:d.Z,reject:d.Z});return y.push(r),new Promise((e,t)=>{r.resolve=e,r.reject=t})}function r(e,t){e.forEach(e=>{e.async?t[e.name].apply(t,e.params).then(e.resolve,e.reject):t[e.name].apply(t,e.params)}),e.length=0}let n,c,g=!1,y=[];const S={getReadyState:()=>g?l.k.broken:n?n.getReadyState():l.k.init,getState:()=>{if(n)return n.getState()},setReadyInstance(e){n=e,r(y,n)},handlePlayerDestroy(){n=void 0,c=void 0},setInstance(e){c=e;const[t,i]=(0,s.x)(y,e=>{let{name:t}=e;return h.n.indexOf(t)>-1});y=i,r(t,c)},emitErrorOnStart(e){if(n)throw new Error("Can't emit error on lazyApi after #setInstance()");g=!0,(0,m.h)(y,e instanceof Error?e:new Error("NOT_AN_OBJECT_ERROR: "+e))},emitEventOnStart(e,t){c||(0,v.K)(y,e,t)}};return Object.defineProperty(S,"skin",{get:()=>n?n.skin:void 0}),p.t.forEach(e=>{S[e]="pause"===e?function(r){return void 0===r&&(r=o.l.ExternalApi),S.emitEventOnStart("RequestPlayingState",{playingState:a.X.PAUSE,playingStateReason:r}),t({name:e,params:Array.prototype.slice.call(arguments),async:!1})}:function(){return t({name:e,params:Array.prototype.slice.call(arguments),async:!1})}}),u.o.forEach(e=>{S[e]="play"===e?function(r){return void 0===r&&(r=o.l.ExternalApi),S.emitEventOnStart("RequestPlayingState",{playingState:a.X.PLAY,playingStateReason:r}),t({name:e,params:Array.prototype.slice.call(arguments),async:!0})}:function(){return t({name:e,params:Array.prototype.slice.call(arguments),async:!0})}}),S}r.d(t,{K:()=>n});var s=r(71424),a=r(90015),o=r(4018),l=r(49635),d=r(88261),c=r(53777),u=r(97735),h=r(84740),p=r(77009),m=r(91630),v=r(14895);const f=[...h.n,...c.V]},91630:(e,t,r)=>{"use strict";function i(e,t){return(0,n.K)(e,"ErrorChange",{error:t})}r.d(t,{h:()=>i});var n=r(14895)},14895:(e,t,r)=>{"use strict";function i(e,t,r,i){let{params:n}=e;(0,o.K)(n[0])?((0,a.M)(n[0],(e,i)=>{i===t&&(Array.isArray(e)?e.forEach(e=>e(r)):e(r))}),i&&(n[0][t]=[])):n[0]===t&&(0,s.m)(n[1])&&(n[1](r),i&&(n[1]=l.Z))}function n(e,t,r){for(let n=0;n<e.length;n++){const s=e[n];"on"===s.name?i(s,t,r,!1):"once"===s.name&&i(s,t,r,!0)}}r.d(t,{K:()=>n});var s=r(53159),a=r(66061),o=r(76101),l=r(88261)},25630:(e,t,r)=>{"use strict";r.d(t,{O:()=>i});const i=(0,r(63416).z)()?"":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},28040:(e,t,r)=>{"use strict";r.d(t,{e:()=>o});const i=(0,r(22956).Q)(),n=window.SourceBuffer||window.WebKitSourceBuffer,s=i&&"function"===typeof i.isTypeSupported&&i.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!n||n.prototype&&"function"===typeof n.prototype.appendBuffer&&"function"===typeof n.prototype.remove,o=Boolean(s)&&Boolean(a)},98538:(e,t,r)=>{"use strict";r.d(t,{W:()=>i});r(91761);const i=1e3},23444:(e,t,r)=>{"use strict";r.d(t,{h:()=>i});const i=(0,r(25299).e)(document,"yandexuid")},43546:(e,t,r)=>{"use strict";r.d(t,{p:()=>i,s:()=>n.s});r(84379);const i=window.Ya.playerApi;var n=r(2646)},25299:(e,t,r)=>{"use strict";r.d(t,{e:()=>i});const i=(e,t)=>{let r=[];try{r=e.cookie?e.cookie.split("; "):[]}catch(s){}const i=/(%[0-9A-Z]{2})+/g;let n;for(let a=0;a<r.length;a++){const e=r[a].split("="),o=e.slice(1).join("=");try{const r=e[0].replace(i,decodeURIComponent);if(o.replace(i,decodeURIComponent),t===r){n=decodeURIComponent(o);break}}catch(s){return}}return n}},92069:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});var i=r(29487);const n=e=>{const t=[],r=[];for(;e;)try{if(r.push((0,i.b)(e)),t.push(e),e.parent===e)break;e=e.parent}catch(n){break}return{windowChain:t,locationChain:r}}},76520:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});var i=r(92069);const{windowChain:n}=(0,i.T)(window)},99279:(e,t,r)=>{"use strict";function i(e,t){void 0===t&&(t={});const{silent:r=!0,allowRelative:i=!1}=t;return i||(0,n.sD)(e)?new Promise((t,i)=>{const n=document.createElement("img");n.onload=()=>t(e),n.onerror=r?()=>t(null):()=>i(new Error("knockPixel failed to load image ["+e+"]")),n.src=e}):r?Promise.resolve(null):Promise.reject("["+e+"] is not an absolute url, to knock this pixel use { allowRelative: true } option")}r.d(t,{W:()=>i});var n=r(34118)},82486:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function s(e){return new Promise((t,r)=>{!function(e){const{win:t=window,src:r,retries:n=0,onLoad:s=o.Z,onError:d=o.Z}=e,c=new a.s({id:"LOAD_SCRIPT_ERROR",message:"Failed to load script ["+r+"]",details:{src:r,isSelfWindow:t===window,onBeforeLoad:Boolean(e.onBeforeLoad),retries:n}});(0,l.T)(i({},e,{win:t})).then(s).catch(()=>d(c))}(n({},e,{onLoad:t,onError:r}))})}r.d(t,{v:()=>s});var a=r(9068),o=r(88261),l=r(88085)},39383:(e,t,r)=>{"use strict";function i(e,t,r){let i,n=0;const s=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e.call(r,...i)};return function(){const e=Date.now(),r=e-n;clearTimeout(i);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];r<t?i=window.setTimeout(s,t-r,...o):(n=e,s(...o))}}r.d(t,{P:()=>i})},19554:(e,t,r)=>{"use strict";r.d(t,{a:()=>s,y:()=>n});var i=r(76101);let n;!function(e){e[e.MEDIA_ERR_CUSTOM=0]="MEDIA_ERR_CUSTOM",e[e.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",e[e.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED",e[e.MEDIA_ERR_ENCRYPTED=5]="MEDIA_ERR_ENCRYPTED"}(n||(n={}));class s{constructor(e){this.code=0,this.message="",this.details=void 0,"number"===typeof e?this.code=e:"string"===typeof e?this.message=e:(0,i.K)(e)&&("number"===typeof e.code&&(this.code=e.code),"string"===typeof e.message&&(this.message=e.message),this.details=e.details),this.message||(this.message=n[this.code]||"")}}},12790:(e,t,r)=>{"use strict";r.d(t,{u:()=>i});const i=document.createElement("video")},86348:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});var i=r(73304),n=r(12790);const s=i.Y?function(e,t){return void 0===t&&(t=n.u),Boolean(t.canPlayType(e).replace(/no/,""))}:()=>!1},10521:(e,t,r)=>{"use strict";r.d(t,{x:()=>n});var i=r(81819);const n=(0,r(86348).N)("application/vnd.apple.mpegurl")||(0,i.d)()>=4.4},51254:(e,t,r)=>{"use strict";function i(e){const{error:t}=e;return new n.a(t)}r.d(t,{Q:()=>i});var n=r(19554)},73304:(e,t,r)=>{"use strict";r.d(t,{Y:()=>i});const i="function"===typeof r(12790).u.load},2742:(e,t,r)=>{"use strict";function i(e,t){const r={audio_mbr:"1",mburl:"1",drm_packager:"1"};return(e.startsWith("https://strm.yandex.ru/live/")||e.startsWith("https://streaming.tst.strm.yandex.net/live/"))&&(r.packager="1"),(0,n.RW)("web_yasp_enable_hevc")&&(r.enable_hevc="1"),(0,n.RW)("web_yasp_enable_sextant")&&(r.sextant_manifest="1"),(0,a.Sr)((0,s.o)(e,t),r,{saveOriginalPath:!0})}r.d(t,{A:()=>i});var n=r(65705),s=r(27266),a=r(34118)},27266:(e,t,r)=>{"use strict";function i(e,t){if(void 0===t)return e;return void 0!==function(e){const t=(0,n.pp)(e,"t");return void 0===t?t:Number(t)}(e)?(0,n.Yc)(e,"t",t):(0,n.zP)(e,"t",String(t))}r.d(t,{o:()=>i});r(91761);var n=r(34118)},49635:(e,t,r)=>{"use strict";r.d(t,{k:()=>i.k});var i=r(58528)},7553:(e,t,r)=>{"use strict";function i(){return{init:[],start:[],end:[],setSource:[],adStart:[],adRequest:[],adError:[],adEnd:[],adPodStart:[],adPodClick:[],adPodEnd:[],adPodSkip:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[]}}r.d(t,{c:()=>i})},11208:(e,t,r)=>{"use strict";function i(e,t,r){var i;void 0===r&&(r=window);const l=(0,s.b)(r),d=t((0,o.ce)(e,l));if(void 0!==d)return console&&(0,a.m)(console.warn)&&console.warn("using "+e+"="+d+" from query"),d;const c=t(null!=(i=n.EN.getItem(e))?i:void 0);return void 0!==c?(console&&(0,a.m)(console.warn)&&console.warn("using "+e+"="+c+" from localStorage"),c):void 0}r.d(t,{O:()=>i});var n=r(35634),s=r(29487),a=r(53159),o=r(34118)},75114:(e,t,r)=>{"use strict";function i(){const e={};for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];r.filter(Boolean).join(";").split(";").forEach(t=>{if(!/^\d+,\d+,-?\d+$/.test(t))return;const r=parseInt(t,10);e[r]=e[r]||t});const n=[];for(const s in e)e.hasOwnProperty(s)&&n.push(e[s]);return 0<n.length?n.join(";"):void 0}r.d(t,{S:()=>i})},643:(e,t,r)=>{"use strict";function i(e,t,r){return e.replace(new RegExp("{{"+t+"}}","gm"),encodeURIComponent(r))}r.d(t,{H:()=>i})},65822:(e,t,r)=>{"use strict";function i(e,t){if(void 0===t||!t)return e;const r=(0,n.en)(e),i=r.hostname;return r.hostname=i.split(".").slice(0,-1).concat(t).join("."),r.host=r.host.replace(i,r.hostname),(0,n.hA)(r)}r.d(t,{j:()=>i});var n=r(34118)},58290:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e,t,r){const n=(()=>{if(r)return r;if((0,c.C)(e)){const t=(0,p.en)(e);return(0,p.hA)(i({},t,{pathname:t.pathname+".json"}))}const n=(0,o.j)("https://frontend.vh.yandex.ru/player",function(e){return(0,l.H)(null==e?void 0:e.tld)?null==e?void 0:e.tld:(0,h.h)().split(".").pop()}(t));return((0,m.I)(window).contentBaseUrl||n)+"/"+e+".json"})();return(0,p.Sr)(n,i({},t||{},{vpuid:d.M0.getVpuid()}))}async function s(e,t,r){var s,o;const l=await function(e,t,r){const s=n(e,t,r);return(async()=>{const e=new u.H,t=setTimeout(()=>e.abort(),15e3);try{const r={credentials:"include"};return await(await window.fetch(s,i({signal:e.signal},r))).json()}catch(r){if(e.signal.aborted)throw new Error("requestVhParams timeout");throw r}finally{clearTimeout(t)}})()}(e,t,r);(0,v.Vc)({flags:null==(s=l.request_info)?void 0:s.flags});const d=new a.y(t,()=>{}),c=await d.getPlayerConfig(l);return{vhParams:l,playerConfig:c,sourceConfig:c.source,skinConfig:(null==(o=c.skinParams)?void 0:o.skinConfig)||{}}}r.d(t,{s6:()=>s});var a=r(16116),o=r(65822),l=r(16187),d=r(60435),c=r(56239),u=(r(91761),r(73647)),h=r(64735),p=r(34118),m=r(17988),v=r(65705)},56239:(e,t,r)=>{"use strict";function i(e){try{return(0,n.Z)(new URL(e)),!0}catch(t){return!1}}r.d(t,{C:()=>i});var n=r(88261)},24672:(e,t,r)=>{"use strict";async function i(e){let{url:t,data:r,contentType:i}=e;if((0,n.RW)("web_send_large_beacon")||r.length<64e3){if(((e,t)=>{if("function"!==typeof navigator.sendBeacon)return!1;try{return navigator.sendBeacon(e,t)}catch(r){return!1}})(t,i?new Blob([r],{type:i}):r))return}const s=new XMLHttpRequest;s.open("POST",t),s.withCredentials=!0,void 0!==i&&s.setRequestHeader("Content-Type",i),s.send(r)}r.d(t,{N:()=>i});var n=r(65705)},53777:(e,t,r)=>{"use strict";r.d(t,{V:()=>i});const i=["play","setSource","destroy"]},97735:(e,t,r)=>{"use strict";r.d(t,{o:()=>i});const i=["sendReportLog","preloadSource","requestVideoElementFullscreen","requestDebugInfo","requestExternalPlay","requestExternalPlayerList","insertInto","playAdViewers","seekToNextFrame","seekToPreviousFrame","saveVideoFrame",...r(53777).V]},84740:(e,t,r)=>{"use strict";r.d(t,{n:()=>i});const i=["pause","on","once","off","publicEmit"]},77009:(e,t,r)=>{"use strict";r.d(t,{t:()=>i});const i=["setVideoTrack","setAudioTrack","setTextTrack","changeAdditionalParams","exitVideoElementFullscreen","setPlaybackRate","setMuted","setVolume","setPictureInPictureAllowed","setVideoStyle","setNativeControlsVisibility","setNativeTextTrackVisibility","logEvent","logEventInternal","logError","seek","playInrollAd","skipAdPod","setNativeAdControlsVisibility","setDebugPanelVisibility","releaseSource",...r(84740).n]},53276:(e,t,r)=>{"use strict";function i(e){const t=(0,n.en)(e).pathname;return 0===t.indexOf("/vod/")||0===t.indexOf("/live/")||0===t.indexOf("/kal/")}r.d(t,{A:()=>i});var n=r(34118)},84379:(e,t,r)=>{"use strict";var i=r(97735),n=r(77009);const s=[...i.o,...n.t,"getState","getReadyState"],a=window;a.Ya||(a.Ya={}),a.Ya.playerApi||(a.Ya.playerApi={}),a.Ya.playerApi.METHODS||(a.Ya.playerApi.METHODS=s)},20950:(e,t,r)=>{"use strict";function i(e,t,r){(0,a.K)(t)?(0,s.M)(t,(t,r)=>{(Array.isArray(t)?t:[t]).forEach(t=>{e(r,t)})}):(0,n.m)(r)&&e(t,r)}r.d(t,{Q:()=>i});var n=r(53159),s=r(66061),a=r(76101)},2646:(e,t,r)=>{"use strict";r.d(t,{s:()=>i});r(84379);const i=window.Ya.playerApi},61693:(e,t,r)=>{"use strict";r.d(t,{h:()=>o});var i=r(53159),n=r(44706),s=r(76101),a=r(20950);class o{constructor(e){this.handlers=Object.create(null),this.filters=Object.create(null),this.batchFn=e=>e(),(0,s.K)(e)&&(0,i.m)(e.eventListenersBatch)&&(this.batchFn=e.eventListenersBatch)}on(e,t){(0,a.Q)((e,t)=>this.getHandlers(e).push({once:!1,fn:t}),e,t)}once(e,t){(0,a.Q)((e,t)=>this.getHandlers(e).push({once:!0,fn:t}),e,t)}off(e,t){const r=this.getHandlers(e),i=r.findIndex(e=>{let{fn:r}=e;return r===t});-1!==i&&r.splice(i,1)}setFilter(e,t){this.filters[e]=t}unsetFilter(e){delete this.filters[e]}getAllHandlers(){return this.handlers}emit(e,t){const r=this.filters[e];r&&!r(t)||this.batchFn(()=>{this.getHandlers(e).slice().forEach(r=>{try{r.once&&this.off(e,r.fn),r.fn(t)}catch(i){setTimeout(()=>{throw i},0)}})})}destroy(){(0,n.Z)(this.handlers).forEach(e=>{this.handlers[e]=void 0})}getHandlers(e){return void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e]}}},73933:(e,t,r)=>{"use strict";r.d(t,{W:()=>n,m:()=>i});r(91761);const i=1,n=10},59470:(e,t,r)=>{"use strict";function i(e){return void 0!==e.ad.adInfo}r.d(t,{I:()=>i})},32802:(e,t,r)=>{"use strict";function i(e){const{controller:{videoType:t}}=e;return t!==n.D.VOD&&function(e){const{controller:{currentTime:t,bufferingRanges:r},skin:{skinDVRStartTime:i,skinDVRDuration:n}}=e;if(0===r.length)return!1;const a=i+n-s.W;return n===1/0||t>a}(e)}r.d(t,{x:()=>i});var n=r(31969),s=r(73933)},46153:(e,t,r)=>{"use strict";function i(e,t,r,i){if((0,n.B)()||!(0,o.x)(e)||(0,a.I)(e)||!r)return;const{controller:{playingState:d,playbackRate:h}}=e;if(d!==s.X.PLAY)return;if(!(Math.abs(h-1)<u))return;const p=t.total;let m;if(p<2){const e=5*(p-2),t=2*c/(1+Math.exp(-e));m=1-c+t}else{const e=.02;if(Math.abs(r-i)<=e*i)return 1;const t=5*(r-i),n=2*c/(1+Math.exp(-t));m=1-c+n}const v=Math.abs(h-m)<=l,f=Math.abs(h-m)>=u;return v||f||h===m?void 0:m}r.d(t,{Mf:()=>d,RJ:()=>i,_y:()=>c});var n=r(48265),s=r(90015),a=r(59470),o=r(32802);const l=(0,n.B)()?.25:.02,d=7,c=.03,u=2*c},68109:(e,t,r)=>{"use strict";function i(e){const{currentTime:t,bufferingRanges:r}=e.controller;return(0,n.p)(r,t)}r.d(t,{r:()=>i});var n=r(42848)},84727:(e,t,r)=>{"use strict";let i,n,s,a;r.d(t,{Cb:()=>a,Dt:()=>i,jY:()=>s,rE:()=>n}),function(e){e.inStreamPlayingState="inStreamPlayingState",e.adConfig="adConfig",e.adInfo="adInfo",e.originalBroadcastAdCueId="originalBroadcastAdCueId",e.originalBroadcastAdCues="originalBroadcastAdCues",e.adblockDetected="adblockDetected",e.hasPreroll="hasPreroll",e.adSyncInit="adSyncInit",e.nextAdInfo="nextAdInfo",e.nativeAdControlsVisibility="nativeAdControlsVisibility"}(i||(i={})),function(e){e.hiddenControls="hiddenControls",e.useNativeSubtitles="useNativeSubtitles",e.nativeControlsVisibility="nativeControlsVisibility",e.skinDVRStartTime="skinDVRStartTime",e.skinDVRDuration="skinDVRDuration"}(n||(n={})),function(e){e.engine="engine",e.autoplay="autoplay",e.allowMuted="allowMuted",e.autoplayImpossible="autoplayImpossible",e.startStage="startStage",e.preload="preload",e.duration="duration",e.encoderState="encoderState",e.from="from",e.vsid="vsid",e.streams="streams",e.stream="stream",e.streamsWithSupportInfo="streamsWithSupportInfo",e.sourceParams="sourceParams",e.sourceId="sourceId",e.bufferingRanges="bufferingRanges",e.userVolume="userVolume",e.currentTime="currentTime",e.currentTimeLowGranularity="currentTimeLowGranularity",e.watchedTime="watchedTime",e.startPosition="startPosition",e.videoType="videoType",e.playingState="playingState",e.errorInfo="errorInfo",e.lastRecoverPosition="lastRecoverPosition",e.preview="preview",e.isFullscreen="isFullscreen",e.isPip="isPip",e.isVisible="isVisible",e.togglePlaybackOnVisibilityChangeSetting="togglePlaybackOnVisibilityChangeSetting",e.isDocumentVisible="isDocumentVisible",e.lastKnownBandwidthEstimate="lastKnownBandwidthEstimate",e.fragmentDuration="fragmentDuration",e.dvrStartTime="dvrStartTime",e.dvrDuration="dvrDuration",e.programDateTime="programDateTime",e.isAbrSupported="isAbrSupported",e.isAbrEnabled="isAbrEnabled",e.defaultQuality="defaultQuality",e.videoTrackValue="videoTrackValue",e.videoTracks="videoTracks",e.userVideoTrackName="userVideoTrackName",e.userVideoTrackHeight="userVideoTrackHeight",e.audioTrackValue="audioTrackValue",e.audioTracks="audioTracks",e.userAudioTrackName="userAudioTrackName",e.userAudioTrackLang="userAudioTrackLang",e.textTrackEnabled="textTrackEnabled",e.nativeTextTrackVisible="nativeTextTrackVisible",e.textTrackValue="textTrackValue",e.textTracks="textTracks",e.userTextTrackEnabled="userTextTrackEnabled",e.userTextTrackName="userTextTrackName",e.userTextTrackLang="userTextTrackLang",e.playbackRate="playbackRate",e.expectedStalled="expectedStalled",e.videoWidth="videoWidth",e.videoHeight="videoHeight",e.volume="volume",e.videoElementStyle="videoElementStyle",e.playerConfig="playerConfig",e.feed="feed",e.shouldEmitFrameRendered="shouldEmitFrameRendered"}(s||(s={})),function(e){e.PlaybackRateCatchupSelection="PlaybackRateCatchupSelection",e.Recover="Recover",e.Other="Other"}(a||(a={}))},98e3:(e,t,r)=>{"use strict";function i(){o=(0,s.s)(document)}function n(){return o}r.d(t,{C:()=>i,p:()=>n});var s=r(78041),a=r(56920);let o=(0,s.s)(document);(0,a.Y)(document,e=>{e||(o=e)})},41595:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(){return v||(!function(){try{m=encodeURIComponent(JSON.stringify(i({},h,p)))}catch(e){}}(),v=!0),m}function s(){try{return(u.Z||window.Ya.Rum.setVars)({"-additional":JSON.stringify(h)})}catch(e){}}function a(){try{return(u.Z||window.Ya.Rum.updateErrors)({additional:i({},h)})}catch(e){}}function o(e){return void 0===e||void 0===e.additional?n():encodeURIComponent(JSON.stringify(i({},h,p,e.additional)))}function l(e){h=i({},{},e),s(),a(),v=!1}function d(e,t){h=i({},{},{[e]:t}),s(),a(),v=!1}function c(e){p=e,v=!1}r.d(t,{B6:()=>o,I8:()=>l,Pj:()=>c,Z$:()=>d});var u=r(88261);let h={},p={},m="",v=!1},8037:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}function s(e){(0,d.Y)(()=>{(p.Z||window.Ya.Rum.time)(e)})}function a(e,t){void 0===t&&(t={}),(0,u.p)()&&(0,d.Y)(()=>{const r=n(t,m);(p.Z||window.Ya.Rum.timeEnd)(e,i({},r,{"-additional":(0,c.B6)(t)}))})}function o(e,t,r){void 0===r&&(r={}),(0,u.p)()&&(0,d.Y)(()=>{const{additional:s,initSubpage:a=!1}=r,o=n(r,v);if(a&&(0,h.bk)()>0)return;const d=(0,h.x)(),u=(0,l.K)(d)?d.additional:void 0;(p.Z||window.Ya.Rum.sendDelta)(e,t,i({},d,o,{"-additional":(0,l.K)(s)?(0,c.B6)(i({},u,s)):(0,c.B6)(u)}))})}r.d(t,{iW:()=>s,uo:()=>o,vG:()=>a});var l=r(76101),d=r(86673),c=r(41595),u=r(98e3),h=r(68161),p=r(88261);const m=["additional"],v=["additional","initSubpage"]},89001:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e,t,r,n){void 0===n&&(n={}),(0,a.Y)(()=>{const{additional:a={}}=n,d=function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(n,l);(s.Z||window.Ya.Rum.sendTimeMark)(e,t,r,i({},d,{"-additional":(0,o.B6)(n)}))})}r.d(t,{s:()=>n});var s=r(88261),a=r(86673),o=r(41595);const l=["additional"]},68161:(e,t,r)=>{"use strict";function i(e){o=(a.Z||window.Ya.Rum.makeSubPage)(e?"Init":"SetSource"),l++}function n(){return o}function s(){return l}r.d(t,{QJ:()=>i,bk:()=>s,x:()=>n});var a=r(88261);let o,l=-1},46528:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e){const t=(0,A.x)();return i({},t,{additional:i({},(0,p.K)(t)?t.additional:void 0,e)})}function s(e){const t=0===R,r=D[e];return D[e]=!0,(0,y.p)()&&t&&!r}function a(){s("sourceStart")&&(0,S.s)(b.autoplayFalse)}function o(e){let{reason:t="unknown"}=e,r=function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,E);s("sourceStart")&&(0,S.s)(b.firstStartAdSDKFailed,void 0,void 0,i({reason:t},r))}function l(){R++,D.sourceStart=!1;const e=0===R;e?(0,S.s)(b.firstLoadSource):(0,y.C)();try{(0,A.QJ)(e);const t=(0,A.x)();(0,v.Pj)((null==t?void 0:t.additional)||{})}catch(t){}}function d(e,t){if(!(0,y.p)()||D.sourceStart)return;const r=0===R;r&&t?(0,g.iW)(I[e]):r?(0,g.iW)(T[e]):t?(0,g.iW)(O[e]):(0,g.iW)(_[e])}function c(e,t,r){const i=D.sourceStart;if(D.sourceStart=!0,!(0,y.p)()||i)return;if(0===R){const i=r?k[e]:w[e],n=r?I[e]:T[e];(0,S.s)(i,void 0,!1,{additional:t}),(0,g.vG)(n,{additional:t})}else r?(0,g.vG)(O[e],n(t)):(0,g.vG)(_[e],n(t))}function u(e,t,r){s("yaFirstFrameDecoded")&&(r&&"AD"!==e||(0,S.s)(C[e],void 0,!1,{additional:t}))}function h(e,t,r){s("yaFirstFrameShown")&&(r&&"AD"!==e||(0,S.s)(P[e],void 0,!1,{additional:t}))}r.d(t,{Kp:()=>o,cA:()=>a,Fw:()=>d,Cf:()=>l,G1:()=>c,CN:()=>u,qB:()=>h});var p=r(76101),m=r(86419),v=r(41595);let f;!function(e){e.firstNetworkAdSDK="first.network.adsdk",e.firstNetworkHls="first.network.hls",e.firstNetworkMpd="first.network.mpd",e.firstNetworkMp4="first.network.mp4",e.firstNetworkNative="first.network.native",e.firstNetworkYasp="first.network.yasp",e.firstNetworkAdSDKHls="first.network.adsdk.hls",e.firstNetworkAdSDKMpd="first.network.adsdk.mpd",e.firstNetworkAdSDKMp4="first.network.adsdk.mp4",e.firstNetworkAdSDKNative="first.network.adsdk.native",e.firstNetworkAdSDKYasp="first.network.adsdk.yasp",e.setSourceNetworkAdSDK="setsource.network.adsdk",e.setSourceNetworkHls="setsource.network.hls",e.setSourceNetworkMpd="setsource.network.mpd",e.setSourceNetworkMp4="setsource.network.mp4",e.setSourceNetworkNative="setsource.network.native",e.setSourceNetworkYasp="setsource.network.yasp",e.setSourceNetworkAdSDKHls="setsource.network.adsdk.hls",e.setSourceNetworkAdSDKMpd="setsource.network.adsdk.mpd",e.setSourceNetworkAdSDKMp4="setsource.network.adsdk.mp4",e.setSourceNetworkAdSDKNative="setsource.network.adsdk.native",e.setSourceNetworkAdSDKYasp="setsource.network.adsdk.yasp"}(f||(f={}));var g=r(8037),y=r(98e3),S=r(89001),A=r(68161);let b;!function(e){e.firstLoadSource="firstloadsource",e.yaFirstFrameDecodedMp4="ya.firstframedecoded.mp4",e.yaFirstFrameDecodedMpd="ya.firstframedecoded.mpd",e.yaFirstFrameDecodedHls="ya.firstframedecoded.hls",e.yaFirstFrameDecodedYandex="ya.firstframedecoded.yandex",e.yaFirstFrameDecodedYasp="ya.firstframedecoded.yasp",e.yaFirstFrameDecodedNative="ya.firstframedecoded.native",e.yaFirstFrameDecodedAdSDK="ya.firstframedecoded.adsdk",e.yaFirstFrameShownMp4="ya.firstframeshown.mp4",e.yaFirstFrameShownMPD="ya.firstframeshown.mpd",e.yaFirstFrameShownHls="ya.firstframeshown.hls",e.yaFirstFrameShownYandex="ya.firstframeshown.yandex",e.yaFirstFrameShownYasp="ya.firstframeshown.yasp",e.yaFirstFrameShownNative="ya.firstframeshown.native",e.yaFirstFrameShownAdSDK="ya.firstframeshown.adsdk",e.autoplayFalse="autoplayfalse",e.firstStartAdSDKFailed="firststart.adsdk.failed",e.firstStartAdSDK="firststart.adsdk",e.firstStartYandex="firststart.yandex",e.firstStartYasp="firststart.yasp",e.firstStartHls="firststart.hls",e.firstStartMp4="firststart.mp4",e.firstStartMpd="firststart.mpd",e.firstStartNative="firststart.native",e.firstStartAdSDKYandex="firststart.adsdk.yandex",e.firstStartAdSDKYasp="firststart.adsdk.yasp",e.firstStartAdSDKHls="firststart.adsdk.hls",e.firstStartAdSDKMpd="firststart.adsdk.mpd",e.firstStartAdSDKMp4="firststart.adsdk.mp4",e.firstStartAdSDKNative="firststart.adsdk.native"}(b||(b={}));const E=["reason"],w={[m.$.HLS]:b.firstStartHls,[m.$.MP4]:b.firstStartMp4,[m.$.NATIVE]:b.firstStartNative,[m.$.YASP]:b.firstStartYasp,AD:b.firstStartAdSDK},k={[m.$.HLS]:b.firstStartAdSDKHls,[m.$.MP4]:b.firstStartAdSDKMp4,[m.$.NATIVE]:b.firstStartAdSDKNative,[m.$.YASP]:b.firstStartAdSDKYasp,AD:b.firstStartAdSDK},C={[m.$.HLS]:b.yaFirstFrameDecodedHls,[m.$.MP4]:b.yaFirstFrameDecodedMp4,[m.$.NATIVE]:b.yaFirstFrameDecodedNative,[m.$.YASP]:b.yaFirstFrameDecodedYasp,AD:b.yaFirstFrameDecodedAdSDK},P={[m.$.HLS]:b.yaFirstFrameShownHls,[m.$.MP4]:b.yaFirstFrameShownMp4,[m.$.NATIVE]:b.yaFirstFrameShownNative,[m.$.YASP]:b.yaFirstFrameShownYasp,AD:b.yaFirstFrameShownAdSDK},T={[m.$.HLS]:f.firstNetworkHls,[m.$.MP4]:f.firstNetworkMp4,[m.$.NATIVE]:f.firstNetworkNative,[m.$.YASP]:f.firstNetworkYasp,AD:f.firstNetworkAdSDK},I={[m.$.HLS]:f.firstNetworkAdSDKHls,[m.$.MP4]:f.firstNetworkAdSDKMp4,[m.$.NATIVE]:f.firstNetworkAdSDKNative,[m.$.YASP]:f.firstNetworkAdSDKYasp,AD:f.firstNetworkAdSDK},_={[m.$.HLS]:f.setSourceNetworkHls,[m.$.MP4]:f.setSourceNetworkMp4,[m.$.NATIVE]:f.setSourceNetworkNative,[m.$.YASP]:f.setSourceNetworkYasp,AD:f.setSourceNetworkAdSDK},O={[m.$.HLS]:f.setSourceNetworkAdSDKHls,[m.$.MP4]:f.setSourceNetworkAdSDKMp4,[m.$.NATIVE]:f.setSourceNetworkAdSDKNative,[m.$.YASP]:f.setSourceNetworkAdSDKYasp,AD:f.setSourceNetworkAdSDK};let R=-1;const D={sourceStart:!1,yaFirstFrameDecoded:!1,yaFirstFrameShown:!1}},50755:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});r(91761);const i=0},51057:(e,t,r)=>{"use strict";r.d(t,{l:()=>i});const i={sourceLimit:Number.MAX_SAFE_INTEGER}},790:(e,t,r)=>{"use strict";function i(){if((0,n.RW)("web_yasp_stalled_events"))return{enabled:!0,isPlaybackRateSupported:s.H}}r.d(t,{O:()=>i});var n=r(65705),s=r(54295)},54295:(e,t,r)=>{"use strict";r.d(t,{H:()=>i});const i=function(){const e=document.createElement("video");if(!("playbackRate"in e))return!1;try{return e.playbackRate-=.05,!0}catch(t){return!1}}()},42466:(e,t,r)=>{"use strict";function i(e){let{win:t=window,src:r,checkLoad:i,onBeforeLoad:n=o.Z,onLoad:l=o.Z,withCredentials:d=!1}=e;a.s["ll1.0-13565"]=a.s["ll1.0-13565"]||{};const c=a.s["ll1.0-13565"];return c[r]||(c[r]=(0,s.v)({checkLoad:i,win:t,src:r,retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{d||(e.crossOrigin="anonymous"),n()}}).then(l),c[r].catch(()=>delete c[r])),c[r]}function n(){let e=!1;return i({src:d.v,checkLoad:()=>"undefined"!==typeof Hls,onBeforeLoad:()=>{e=!0,(0,l.iW)("lib.hlsjs")},onLoad:()=>{e&&(0,l.vG)("lib.hlsjs")}})}r.d(t,{N:()=>n,Y:()=>i});var s=r(82486),a=r(43546),o=r(88261),l=r(8037),d=r(20340)},54932:(e,t,r)=>{"use strict";let i;r.d(t,{o:()=>i}),function(e){e.init="init",e.waitForUserPlay="waitForUserPlay",e.waitForDocumentVisibility="waitForDocumentVisibility",e.starting="starting",e.started="started",e.broken="broken",e.destroyed="destroyed"}(i||(i={}))},90286:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});r(91761);const i=-1},18972:(e,t,r)=>{"use strict";r.d(t,{_:()=>i,d:()=>n});const i=1,n=0},73175:(e,t,r)=>{"use strict";let i;r.d(t,{u:()=>i}),function(e){e.BroadcastAdReceived="BroadcastAdReceived",e.BroadcastAdInit="BroadcastAdInit",e.StreamPlayerReceivedMetadata="StreamPlayerReceivedMetadata",e.StreamPlayerChooseMetadata="StreamPlayerChooseMetadata",e.PlayWithoutRAAResults="PlayWithoutRAAResults",e.CanPlay="CanPlay",e.ContentImpression="ContentImpression",e.WaitForPlayCompleted="WaitForPlayCompleted",e.DrmSystemsSupportDetected="DrmSystemsSupportDetected",e.InrollAdStart="InrollAdStart",e.InrollAdPodStart="InrollAdPodStart",e.InrollAdPodEnd="InrollAdPodEnd",e.InrollAdEnd="InrollAdEnd",e.PlayAdViewers="PlayAdViewers",e.AdStart="AdStart",e.AdPodImpression="AdPodImpression",e.AdPodLoading="AdPodLoading",e.AdPodError="AdPodError",e.AdPodStart="AdPodStart",e.AdPodEnd="AdPodEnd",e.AdEnd="AdEnd",e.AdClickThru="AdClickThru",e.NoAdPodsToPlayAd="NoAdPodsToPlayAd",e.Stalled="Stalled",e.NudgeStalledFailed="NudgeStalledFailed",e.LoadSource="LoadSource",e.PrerollInit="PrerollInit",e.WaitForUserGesture="WaitForUserGesture",e.WaitForDocumentVisibility="WaitForDocumentVisibility",e.HiddenAutoplayPrevented="HiddenAutoplayPrevented",e.PlayVideoOnVisibilityChange="PlayVideoOnVisibilityChange",e.PauseVideoOnVisibilityChange="PauseVideoOnVisibilityChange",e.StreamStopWhileLoadingMultiroll="StreamStopWhileLoadingMultiroll",e.StreamStopWhileChoosingStream="StreamStopWhileChoosingStream",e.StreamStopWhileDestroyVideoController="StreamStopWhileDestroyVideoController",e.StreamStopDuringDefineAutoplaySettings="StreamStopDuringDefineAutoplaySettings",e.StreamStopWhileWaitingForPlay="StreamStopWhileWaitingForPlay",e.StreamStopWhileWaitingForDocumentVisibility="StreamStopWhileWaitingForDocumentVisibility",e.StreamStopWhileLoadingPreroll="StreamStopWhileLoadingPreroll",e.StreamStopWhilePreloadingPreroll="StreamStopWhilePreloadingPreroll",e.SourceOpenEventTimeout="SourceOpenEventTimeout",e.PreloadSource="PreloadSource",e.UsePreloadedHlsJs="UsePreloadedHlsJs",e.PlayAfterWaitingForDocumentVisibility="PlayAfterWaitingForDocumentVisibility",e.ResourcesIdle="ResourcesIdle",e.ClientInfo="ClientInfo",e.HlsJsForceCappingStart="HlsJsForceCappingStart",e.ExternalPlaybackOpenButtonClick="ExternalPlaybackOpenButtonClick",e.ExternalPlaybackCloseButtonClick="ExternalPlaybackCloseButtonClick",e.ExternalPlayerListVisibleStatusChange="ExternalPlayerListVisibleStatusChange",e.ExternalPlaybackPlayerCsrfFetching="ExternalPlaybackPlayerCsrfFetching",e.ExternalPlaybackPlayerCsrfFetchSuccess="ExternalPlaybackPlayerCsrfFetchSuccess",e.ExternalPlaybackPlayerCsrfFetchError="ExternalPlaybackPlayerCsrfFetchError",e.ExternalPlaybackPlayerListHasAnyDevice="ExternalPlaybackPlayerListHasAnyDevice",e.ExternalPlaybackPlayerListFetching="ExternalPlaybackPlayerListFetching",e.ExternalPlaybackPlayerListFetchSuccess="ExternalPlaybackPlayerListFetchSuccess",e.ExternalPlaybackPlayerListFetchError="ExternalPlaybackPlayerListFetchError",e.ExternalPlaybackPlayerActivate="ExternalPlaybackPlayerActivate",e.ExternalPlaybackPlayerActivateSucceed="ExternalPlaybackPlayerActivateSucceed",e.ExternalPlaybackPlayerActivateFailed="ExternalPlaybackPlayerActivateFailed",e.ExternalPlaybackCsrfTokenExpired="ExternalPlaybackCsrfTokenExpired",e.Seek="Seek",e.MediaInternalsHistoryOnFatal="MediaInternalsHistoryOnFatal",e.PlayInrollAd="PlayInrollAd",e.FPSControllerRestrictions="FPSControllerRestrictions",e.NativeVideoTypeChange="NativeVideoTypeChange",e.LowLatencyDetected="LowLatencyDetected"}(i||(i={}))},21553:(e,t,r)=>{"use strict";r.d(t,{_:()=>i});const i=.01},63675:(e,t,r)=>{"use strict";let i;r.d(t,{y:()=>i}),function(e){e.Detached="Detached",e.Attaching="Attaching",e.Attached="Attached"}(i||(i={}))},4018:(e,t,r)=>{"use strict";r.d(t,{l:()=>i.l});var i=r(10730)},72942:(e,t,r)=>{"use strict";r.d(t,{E:()=>n,M:()=>i.M});var i=r(38580);let n;!function(e){e.INIT="INIT",e.SET_SOURCE="SET_SOURCE"}(n||(n={}))},85439:(e,t,r)=>{"use strict";let i;r.d(t,{w:()=>i}),function(e){e.ON="ON",e.OFF="OFF"}(i||(i={}))},86419:(e,t,r)=>{"use strict";r.d(t,{$:()=>i.$});var i=r(24635)},20340:(e,t,r)=>{"use strict";r.d(t,{j:()=>i,v:()=>n});const i="modern",n="https://yastatic.net/yandex-video-player-iframe-api-bundles/hlsjs/1.6.14/hls.min.js"},69937:(e,t,r)=>{"use strict";function i(e,t){let{name:r,lang:i}=t;const n=e.find(e=>e.name===r);return n||(i?e.find(e=>e.lang===i):void 0)}r.d(t,{Y:()=>i})},43870:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,{B:()=>h});var n=r(12693),s=r(53159),a=r(64555),o=r.n(a),l=r(17988);const d=e=>{l.f.i18nLang||(l.f.i18nLang="ru");const t=l.f.i18nLang;if(!(0,s.m)(l.f.i18nTranslateEngine)){const e=r(84027)("./"+t+".ts");(0,a.setI18nLang)(t),l.f.i18nTranslateEngine=o()(i({},e))}return l.f.i18nTranslateEngine(e)};var c=r(6134),u=r(90286);const h=(0,n.I)(()=>({name:d("TRACK_AUTO"),value:c.A,bitrate:u.A}))},96568:(e,t,r)=>{"use strict";function i(e){const{hostname:t}=(0,o.en)(e),r=t.split(".");return r.length<=2?t:r.slice(-2).join(".")}function n(e,t,r){void 0===t&&(t=s),void 0===r&&(r=a);const{locationChain:n}=(0,l.T)(window),d=n.map(i),{hostname:c}=(0,o.en)(e),u=i(e);let h=!1;return(t.includes(c)||t.includes(u)||d.some(e=>r.includes(e)))&&(h=!0),h}r.r(t),r.d(t,{getSecondLevelDomain:()=>i,isStreamValid:()=>n});const s=["yandex.ru","yandex.net","yastatic.net","yandex-team.ru","kinopoisk.ru","strm-ott.akamaized.net","playlists-strm-yango.akamaized.net","media-strm-yango.akamaized.net"],a=["yandex.com","yandex.ru","yandex.md","yango.com"].concat([]);var o=r(34118),l=r(92069)},44960:(e,t,r)=>{"use strict";function i(e){return"number"===typeof e&&n.d<=e&&e<=n._}r.d(t,{A:()=>i});var n=r(18972)},17988:(e,t,r)=>{"use strict";function i(e){const t=e;return t.Ya||(t.Ya={}),t.Ya.streamPlayer||(t.Ya.streamPlayer={}),t.Ya.streamPlayer}r.d(t,{I:()=>i,f:()=>n});const n=i("object"===typeof self?self:window)},93920:(e,t,r)=>{"use strict";function i(e,t){void 0===t&&(t={});let r=0;const i=[],d=(t,s)=>{i.push((0,n.O)(e,t,s,l)),clearTimeout(r)},c=()=>(0,s.p)(i),u=new Promise((i,n)=>{const s=t=>{e.paused&&n(t)},l=(0,o.v)(e.play());if(s(a.VideoTagPaused),d("durationchange",()=>s(a.VideoTagPausedAfterDurationChange)),d("error",()=>s(a.VideoTagPausedAfterError)),d("pause",()=>n(a.PauseEvent)),d("playing",()=>{i(a.PlayingEvent)}),l)t.useProgressEvent&&d("progress",()=>{i(a.ProgressEvent)}),l.then(()=>i(a.PromiseResolve)).catch(e=>n(function(e){return e?a.PromiseReject+"["+e.code+"]["+e.name+"]["+e.message+"]":a.PromiseReject}(e)));else{const{timeoutForNonPromisePlay:e}=t;"number"===typeof e&&e>0&&(r=window.setTimeout(()=>{n(a.Timeout)},t.timeoutForNonPromisePlay))}});return u.then(c,c),u}r.d(t,{b:()=>i});var n=r(72391),s=r(70286);let a;!function(e){e.VideoTagPaused="VideoTagPaused",e.VideoTagPausedAfterDurationChange="VideoTagPausedAfterDurationChange",e.VideoTagPausedAfterError="VideoTagPausedAfterError",e.PauseEvent="PauseEvent",e.ProgressEvent="ProgressEvent",e.PromiseResolve="PromiseResolve",e.PromiseReject="PromiseReject",e.PlayingEvent="PlayingEvent",e.Timeout="Timeout"}(a||(a={}));var o=r(36354);const l={once:!0,passive:!0}},51656:(e,t,r)=>{"use strict";function i(e,t){const{paused:r}=e,i=t();return r||(0,n.v)(e.play()),i}r.d(t,{s:()=>i});var n=r(36354)},94637:()=>{!function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(i,n,function(t){return e[t]}.bind(null,n));return i},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){void 0===e&&(e=window),"Ya"in e||(e.Ya={}),"OTT"in e.Ya||(e.Ya.OTT={}),"PlayerLoader"in e.Ya.OTT||(e.Ya.OTT.PlayerLoader={})}},function(e,t,r){"use strict";function i(){}var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},s=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(r(2)),l=a(r(3)),d=(i.prototype.init=function(e){var t=(e.source||{}).context;if(!t)return this.useBasePlayer(e);var r=t.contentTypeId,i=t.licenses,n=(void 0===i?[]:i)[0];if(n&&!("active"in n))return this.usePlaceholder(e);if(20===r||21===r)return this.useWrapper(e);var s="production"===e.envName?"production":"testing",a=window.Ya.OTT.buildTrackings(e.source.context,{env:s});return e.source.trackings=o.default(a,e.source.trackings),this.useBasePlayer(e,!0)},i.prototype.usePlaceholder=function(e){var t=e.source,r=t.context,i=r.container,a=void 0===i?{}:i,o=r.licenses[0],d=s(r,["container","licenses"]),c=t.preview;e.element="string"==typeof e.element?document.getElementById(e.element):e.element;var u=this.getPlaceholderUrl();return(this.placeholderExists(a)?Promise.resolve():l.default(u,document.head)).then((function(){return window.Ya.OTT.Placeholder.main(n(n(n({container:a,thumbnail:c},d),o),{config:e}))})).then((function(t){return t.render(e.element)}))},i.prototype.useBasePlayer=function(e,t){void 0===t&&(t=!1);var r=e.version,i=e.useBetaStatic,n=this.getPlayerBundle(r,i);return(this.baseApiExists()?Promise.resolve():l.default(n,document.head)).then((function(){return window.Ya.playerApi.init(e)})).then((function(e){return{api:e,withWrapper:!1,withTrackings:t}}))},i.prototype.useWrapper=function(e){var t=this.getWrapperUrl();return(this.wrapperExists()?Promise.resolve():l.default(t,document.head)).then((function(){return window.Ya.OTT.Player.init(e)})).then((function(e){return{api:e,withWrapper:!0,withTrackings:!0}}))},i.prototype.baseApiExists=function(){return!!window.Ya&&!!window.Ya.playerApi},i.prototype.wrapperExists=function(){return!(!window.Ya||!window.Ya.OTT||!window.Ya.OTT.Player)},i.prototype.placeholderExists=function(e){return(void 0===e?{}:e).context,!!(window.Ya&&window.Ya.OTT&&window.Ya.OTT.Placeholder)&&!!window.Ya.OTT.Placeholder.main},i.prototype.getWrapperUrl=function(){return"https://yastatic.net/s3/kinopoisk-frontend/ott/player-wrapper/"+i.WRAPPER_VERSION+"/ott-player-wrapper.js"},i.prototype.getPlaceholderUrl=function(){return"https://yastatic.net/s3/kinopoisk-frontend/ott/player-placeholder/"+i.PLACEHOLDER_VERSION+"/ott-player-placeholder.js"},i.prototype.getPlayerBundle=function(e,t){return("http:"===location.protocol?"http://":"https://")+(t?"betastatic.yastatic.net":"yastatic.net")+(e?"/yandex-video-player-iframe-api-bundles/"+e+"/js/player-api-loader.js":"/yandex-video-player-iframe-api/js/player-api-loader.js")},i.WRAPPER_VERSION="4.0.1",i.PLACEHOLDER_VERSION="1.0.1",i);t.default=d},function(e,t,r){"use strict";function i(e){return n.apply(void 0,e.map((function(e){return{trackingEvents:e}}))).trackingEvents}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0]?e[0].trackingEvents:{};Array.isArray(r)&&(r=i(r));for(var n=1;n<e.length;n++)!function(t){var n=e[t]?e[t].trackingEvents:{};Array.isArray(n)&&(n=i(n)),Object.keys(n).forEach((function(e){var t=n[e];Array.isArray(t)&&(e in r?Array.isArray(r[e])&&(r[e]=r[e].concat(t)):r[e]=t)}))}(n);return{trackingEvents:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new Promise((function(r,i){var n=document.createElement("script");n.type="text/javascript",n.src=e,n.crossOrigin="anonymous",n.onload=r,n.onerror=i,t.appendChild(n)}))}},function(e,t,r){"use strict";r.r(t);var i="__VAL__",n=["yandexuid","position","serviceName","reqid","path","sid","uuid","kpId","kpTrailerId","contentTypeId","monetizationModel","subscriptionType","puid","page","domain","vars","testIds","eventId","subProfileId","buildTimestamp","pathId","deviceId","appVersion","platformOs","platformVersion","platformVendor","platformModel","platformVendorDeviceId","platformName","psid","fromBlock","fromBlockPosition","fromBlockItemPosition","fromBlockAction","fromBlockMLSessionId","fromBlockStartPage","fromBlockEndPage","fromBlockExternalLink","isLive"],s=["setSource","init","error","adStart","adEnd","heartbeat","watchedTime","viewed"],a={film:{default:s,kp:s},trailer:{default:s},channel:{default:s},episode:{default:s},"vod-broadcast-episode":{default:s},"music-clip":{default:s},"short-video":{default:s},"ott-trailer":{default:s}},o={1:"channel-family",2:"channel",3:"episode",4:"vod-library",5:"vod-episode",6:"tv-series",7:"tv-season",8:"black-window",9:"out-of-tv-channel",10:"type-folder",11:"zen-namespace",12:"zen-library",13:"zen-episode",14:"yandex-disribution-library",15:"yandex-disribution-episode",16:"emergency-black-window",17:"cv-black-window",18:"yandex-market-library",19:"yandex-market-episode",20:"ott-movie",21:"ott-episode",22:"kd-feed-episode",24:"sport-episode",25:"announce",30:"ntv-vod-library",31:"ntv-vod-movie",32:"ntv-vod-series",33:"ntv-vod-series-season",34:"ntv-vod-series-season-episode",35:"ott-multipart",36:"ott-part",37:"ott-trailer",38:"ott-collection",39:"ott-collection-item",40:"high-light",41:"user-episode",42:"vod-news",43:"vod-broadcast",44:"vod-news-episode",45:"vod-broadcast-episode",46:"snapshot-tv-episode",47:"kp-trailer",48:"ya-news",49:"self-service-bw-window",50:"main-black-window",51:"music-clip",82:"ott_linked_video",83:"ott_music_karaoke",84:"ott_linked_video_parent",85:"ott_music_karaoke_parent",86:"ott-vod-library",87:"ott_linked_trailer",88:"ott_linked_music_clip",122:"ott-video-episode"},l="content_duration_",d=[["1","content_start"],["10000",l+"10"],["20000",l+"20"],["30000",l+"30"],["40000",l+"40"],["50000",l+"50"],["60000",l+"60"],["120000",l+"120"]],c="VIDEO_",u=[["25",c+"25"],["50",c+"50"],["75",c+"75"],["90",c+"90"],["99",c+"END"]];t.default=function(e,t){var r;"contentTypeID"in(r=e)&&(r.contentTypeId=r.contentTypeID),e=function(e){for(var t=0;t<n.length;t++){var r=n[t];void 0===e[r]&&(e[r]="domain"===r?document.location.hostname:"buildTimestamp"===r?Date.now():"-")}return e}(e=r);var s,l,c,h,p,m,v=(l={testing:{counterId:45961911,kpCounterId:48924764,vpCounterId:45151398,spCounterId:51357310},production:{counterId:45913512,kpCounterId:48924740,vpCounterId:31713861,spCounterId:51357310}})[s=t.env]?l[s]:l.testing,f=(h={testing:{ottTrackingsBackend:"https://tracking-testing.ott.yandex.net/v1/",metrikaBackend:"https://mc.yandex.ru/watch/",redirlogBackend:"https://yandex.ru/clck/jclck/"},production:{ottTrackingsBackend:"https://tracking.ott.yandex.net/v1/",metrikaBackend:"https://mc.yandex.ru/watch/",redirlogBackend:"https://yandex.ru/clck/jclck/"}})[c=t.env]?h[c]:h.testing,g={},y=e.serviceName,S=(p=e.contentTypeId)in(m={47:"trailer",20:"film",21:"film",51:"music-clip",87:"channel",88:"channel",122:"short-video",37:"ott-trailer",3:"episode",45:"vod-broadcast-episode"})?m[String(p)]:"film";return(y in a[S]?a[S][y]:a[S].default).forEach((function(e){g[e]=function(e,t,r){var i,n,s,a,o,l,c=[];"trailer"===t?(i="{{metrikaBackend}}{{vpCounterId}}?page-ref=yandex.ru&page-url=goal://{{domain}}/","init"===e?c.push('{{metrikaBackend}}{{vpCounterId}}?page-ref=yandex.ru&site-info={"kp_trailers":{"host":{"{{serviceName}}":{"{{kpId}}":{"{{uuid}}":"{{kpTrailerId}}"}}}}}&page-url=goal://{{domain}}/TRAILER_START'):"adStart"===e?c.push(i+"TRAILER_AD_START"):"adEnd"===e?c.push(i+"TRAILER_AD_END"):"viewed"===e&&c.push([i+"TRAILER_50",{percent:50}],[i+"TRAILER_90",{percent:90}])):(n='{{metrikaBackend}}<<COUNTER_NAME>>?page-ref=yandex.ru&site-info={"{{serviceName}}":{"{{fromBlock}}":{"<<EVENT_NAME>>":{"{{uuid}}":{"{{position}}":"{{monetizationModel}}"}}}}}',"setSource"!==e&&"init"!==e||(o=(a=n.replace("<<EVENT_NAME>>","video_start")).replace("<<COUNTER_NAME>>","{{counterId}}"),c.push(o+"&page-url=goal://{{domain}}/VIDEO_START"),"init"===e&&"kp"===r&&(s=a.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),c.push(s+"&page-url=goal://{{domain}}/VIDEO_START"))),"adStart"!==e&&"adEnd"!==e||(o=(a=n.replace("<<EVENT_NAME>>",h="adStart"===e?"VIDEO_AD_START":"VIDEO_AD_END")).replace("<<COUNTER_NAME>>","{{counterId}}"),c.push(o),"kp"===r&&(l=a.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),c.push(l))),"watchedTime"===e&&d.forEach((function(e){var t={offset:Number(e[0])},i=n.replace("<<EVENT_NAME>>",e[1]),s=i.replace("<<COUNTER_NAME>>","{{counterId}}");c.push([s,t]),"kp"===r&&c.push([i.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),t]),"ya-sport"===r&&"120000"===e[0]&&c.push([i.replace("<<COUNTER_NAME>>","{{spCounterId}}")+"&page-url=goal://"+r+"/VIDEO_STREAM_2MIN",t])})),"viewed"===e&&u.forEach((function(e){var t={percent:Number(e[0])},i=(n+"&page-url=goal://{{domain}}/<<EVENT_NAME>>").replace(/<<EVENT_NAME>>/g,e[1]),s=i.replace("<<COUNTER_NAME>>","{{counterId}}");c.push([s,t]),"kp"===r&&c.push([i.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),t])})));var h,p='{{ottTrackingsBackend}}watch?data={"position":"{{position}}","fromBlock":"{{fromBlock}}","serviceName":"{{serviceName}}","uuid":"{{uuid}}","puid":"{{puid}}","sid":"{{sid}}","vSid":"{{vsid}}","yaUID":"{{yandexuid}}","monetizationModel":"{{monetizationModel}}","contentTypeName":"{{contentTypeName}}","device-type":"{{device-type}}","device-type-tns":"{{device-type-tns}}","subscriptionType":"{{subscriptionType}}","page":"{{page}}","testIds":"{{testIds}}","eventId":"{{eventId}}","subProfileId":"{{subProfileId}}","deviceId":"{{deviceId}}","appVersion":"{{appVersion}}","platformOs":"{{platformOs}}","platformVersion":"{{platformVersion}}","platformVendor":"{{platformVendor}}","platformModel":"{{platformModel}}","platformVendorDeviceId":"{{platformVendorDeviceId}}","platformName":"{{platformName}}","psid":"{{psid}}","buildTimestamp":"{{buildTimestamp}}","pathId":"{{pathId}}","fromBlockPosition":"{{fromBlockPosition}}","fromBlockItemPosition":"{{fromBlockItemPosition}}","fromBlockAction":"{{fromBlockAction}}","fromBlockMLSessionId":"{{fromBlockMLSessionId}}","fromBlockStartPage":"{{fromBlockStartPage}}","fromBlockEndPage":"{{fromBlockEndPage}}","fromBlockExternalLink":"{{fromBlockExternalLink}}","isLive":"{{isLive}}"';if("setSource"!==e&&"init"!==e||c.push(p+',"eventType":"video_start","eventCount":"-","audio-track-lang":"{{audio-track-lang}}","audio-track-name":"{{audio-track-name}}","text-track-lang":"{{text-track-lang}}","text-track-name":"{{text-track-name}}"}'),"error"===e&&c.push(p+',"errorCode":"{{error-code}}","eventType":"player_error","eventCount":"-"}'),"adStart"!==e&&"adEnd"!==e||(h="adStart"===e?"VIDEO_AD_START":"VIDEO_AD_END",c.push(p+',"eventType":"'+h+'","eventCount":"-"}')),"heartbeat"===e){var m=void 0;switch(t){case"channel":case"short-video":case"ott-trailer":case"trailer":m=1e4;break;case"music-clip":m=3e4;break;default:m=6e4}c.push([p+',"timestamp":"{{timestamp}}","vts":"{{vts}}","fts":"{{fts}}","fullscreen":"{{fullscreen}}","eventType":"heartbeat","eventCount":"'+m+'","audio-track-name":"{{audio-track-name}}","audio-track-lang":"{{audio-track-lang}}","text-track-name":"{{text-track-name}}","text-track-lang":"{{text-track-lang}}","mute":"{{muted}}"}',{delay:m,offset:m}])}return"watchedTime"===e&&d.forEach((function(e){var t={offset:Number(e[0])};c.push([p+',"eventType":"'+e[1]+'","eventCount":"'+e[0]+'","audio-track-lang":"{{audio-track-lang}}","audio-track-name":"{{audio-track-name}}","text-track-lang":"{{text-track-lang}}","text-track-name":"{{text-track-name}}"}',t])})),"viewed"===e&&u.forEach((function(e){var t={percent:Number(e[0])};c.push([p+',"eventType":"'+e[1]+'","eventCount":"'+("99"==e[0]?"100":e[0])+'"}',t])})),c}(e,S,y)})),e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e[0],i=1;i<e.length;i++){var n=e[i];if("object"==typeof n)for(var s in n)r[s]=n[s]}return r}(e,v,f,{contentTypeName:o[e.contentTypeId]||"unknown"}),{trackingEvents:JSON.parse(function(e,t,r){void 0===t&&(t={});var n={}.macros,s=void 0===n?"{{"+i+"}}":n,a={};Object.keys(t).forEach((function(e){var r=s.replace(i,e);a[r]=t[e]}));var o=new RegExp("("+Object.keys(a).join("|")+")","ig");return("string"==typeof e?e:JSON.stringify(e)).replace(o,(function(e){return e in a?encodeURI(a[e]):e}))}(g,e))}}},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(4)),s=i(r(0)),a=i(r(1));s.default(),window.Ya.OTT.buildTrackings=n.default,window.Ya.OTT.PlayerLoader={init:function(e){return(new a.default).init(e)}}}])},4760:(e,t)=>{"use strict";t.Z=function(e,t,r){for(var i=e.length+t.length,n=new Array(i),s=0,a=0,o=0;o<i;){var l=s>=e.length,d=a>=t.length;!l&&(d||r(e[s],t[a])<0)?(n[o]=e[s],s++):(n[o]=t[a],a++),o++}return n}},64555:function(e,t,r){"use strict";function i(e){return-1===["tr","id","fi","lt","pl","et","lv"].indexOf(e)?"ru":"en"}function n(e,t){for(var r=[],i=e.length,n=0;n<i;){var s=e.indexOf("{",n);if(-1===s)return r.push(e.substring(n)),r;var a=e.indexOf("}",s);if(-1===a)return r.push(e.substring(n)),r;r.push(e.substring(n,s),t[e.substring(s+1,a)]),n=a+1}return r}function s(e,t,r){void 0===r&&(r={});var s=function(e,t){var r,i,n;try{for(var s=a(D),o=s.next();!o.done;o=s.next()){if((n=e[o.value])&&t in n)return n[t]}}catch(l){r={error:l}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return t}(e,t);return"string"===typeof s?n(s,r):function(e,t){var r=D.find((function(e){return Boolean(R[e])}))||i(D[0]);return n((0,R[r])(t.count,e),t)}(s,r)}var a=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveI18nLang=t.getI18nLang=t.setI18nLang=t.i18nRaw=void 0;var l=o(r(8858)),d=o(r(77008)),c=o(r(30127)),u=o(r(35674)),h=o(r(66859)),p=o(r(85658)),m=o(r(81252)),v=o(r(1285)),f=o(r(41740)),g=o(r(85273)),y=o(r(2396)),S=o(r(8167)),A=o(r(4378)),b=o(r(33729)),E=o(r(2627)),w=o(r(61467)),k=o(r(17502)),C=o(r(64674)),P=o(r(6810)),T=o(r(92655)),I=o(r(35610)),_=o(r(54134)),O=o(r(53876)),R={be:l.default,en:d.default,id:c.default,kk:u.default,ru:h.default,tr:p.default,tt:m.default,uk:v.default,uz:f.default,de:g.default,es:y.default,hy:S.default,ka:A.default,ky:b.default,sr:E.default,fr:w.default,lv:k.default,lt:C.default,ro:P.default,fi:T.default,az:I.default,zh:_.default,he:O.default},D=["ru"];t.default=function(e){return function(t,r){return void 0===r&&(r={}),s(e,t,r).join("")}},t.i18nRaw=function(e){return function(t,r){return void 0===r&&(r={}),s(e,t,r)}},t.setI18nLang=function(e){D="string"===typeof e?[e,i(e),"ru"]:e},t.getI18nLang=function(){return D[0]},t.resolveI18nLang=function(e,t,r){var i=t;if(-1===e.indexOf(i))switch(r){case"com":i="en";break;case"com.tr":i="tr";break;default:i="ru"}return i}},35610:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(77008));t.default=n.default},8858:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(66859));t.default=n.default},85273:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(77008));t.default=n.default},77008:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e?1===e?t.one:t.some:t.none||""}},2396:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(77008));t.default=n.default},92655:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(77008));t.default=n.default},61467:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(66859));t.default=n.default},53876:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(77008));t.default=n.default},8167:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(77008));t.default=n.default},30127:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e?t.some:t.none||""}},4378:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(77008));t.default=n.default},35674:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e%10,i=e%100;return e?1===r&&11!==i?t.one:r>1&&r<5&&(i<10||i>20)?t.some:t.many||"":t.none||""}},33729:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(66859));t.default=n.default},64674:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(66859));t.default=n.default},17502:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(66859));t.default=n.default},6810:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(66859));t.default=n.default},66859:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e%10,i=e%100;return e?1===r&&11!==i?t.one:r>=2&&r<=4&&12!==i&&13!==i&&14!==i?t.some:t.many||"":t.none||""}},2627:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(66859));t.default=n.default},85658:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e%10,i=e%100;return e?1===r&&11!==i?t.one:r>1&&r<5&&(i<10||i>20)?t.some:t.many||"":t.none||""}},81252:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e%10,i=e%100;return e?1===r&&11!==i?t.one:r>1&&r<5&&(i<10||i>20)?t.some:t.many||"":t.none||""}},1285:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(66859));t.default=n.default},41740:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e%10,i=e%100;return e?1===r&&11!==i?t.one:r>1&&r<5&&(i<10||i>20)?t.some:t.many||"":t.none||""}},54134:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(77008));t.default=n.default},72887:e=>{function t(e,t){var r,i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"===typeof btoa){var s=(r=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),a=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[i].concat(a).concat([s]).join("\n")}return[i].join("\n")}e.exports=function(e){var r=[];return r.toString=function(){return this.map((function(r){var i=t(r,e);return r[2]?"@media "+r[2]+"{"+i+"}":i})).join("")},r.i=function(e,t){"string"===typeof e&&(e=[[null,e,""]]);for(var i={},n=0;n<this.length;n++){var s=this[n][0];"number"===typeof s&&(i[s]=!0)}for(n=0;n<e.length;n++){var a=e[n];"number"===typeof a[0]&&i[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),r.push(a))}},r}},17422:e=>{e.exports=function(e){e||(e=window);var t=e.navigator.userAgent,r=t.indexOf("MSIE ");if(r>0)return parseInt(t.substring(r+5,t.indexOf(".",r)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}},70627:e=>{"use strict";var t=Array.isArray,r=Object.keys,i=Object.prototype.hasOwnProperty;e.exports=function e(n,s){if(n===s)return!0;if(n&&s&&"object"==typeof n&&"object"==typeof s){var a,o,l,d=t(n),c=t(s);if(d&&c){if((o=n.length)!=s.length)return!1;for(a=o;0!==a--;)if(!e(n[a],s[a]))return!1;return!0}if(d!=c)return!1;var u=n instanceof Date,h=s instanceof Date;if(u!=h)return!1;if(u&&h)return n.getTime()==s.getTime();var p=n instanceof RegExp,m=s instanceof RegExp;if(p!=m)return!1;if(p&&m)return n.toString()==s.toString();var v=r(n);if((o=v.length)!==r(s).length)return!1;for(a=o;0!==a--;)if(!i.call(s,v[a]))return!1;for(a=o;0!==a--;)if(!e(n[l=v[a]],s[l]))return!1;return!0}return n!==n&&s!==s}},40070:e=>{function t(){var e,t,r,i,n=document.createElement("canvas");try{e=n.getContext("webgl")||n.getContext("experimental-webgl")}catch(s){}return e&&(t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t.UNMASKED_VENDOR_WEBGL),i=e.getParameter(t.UNMASKED_RENDERER_WEBGL)),{debugInfo:t,vendor:r,renderer:i}}e.exports=t,e.exports.getGpu=t},40497:e=>{"use strict";e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r]);return e})},47228:e=>{e.exports=Object[["has","Own"].join("")]||Object.call.bind(Object.hasOwnProperty)},34761:(e,t,r)=>{(t=e.exports=r(72887)(!1)).push([e.id,"@keyframes _1f86Je8{0%{transform:rotate(0deg)}to{transform:rotate(360deg)}}._3dwjosp{position:absolute;top:50%;left:50%;pointer-events:none}._2iJDT4A{position:absolute;top:-19px;left:-19px;width:38px;height:38px;animation-name:_1f86Je8;animation-duration:1s;animation-iteration-count:infinite;animation-timing-function:linear}",""]),t.locals={spinner:"_3dwjosp",spinner__svg:"_2iJDT4A",spinner_animation:"_1f86Je8"}},4450:(e,t,r)=>{(e.exports=r(72887)(!1)).push([e.id,"yaplayertag,yaplayertag:before,yaplayertag:after,yaplayertag *,yaplayertag :before,yaplayertag :after{hyphens:manual;font-size:inherit;color:inherit;background:0 0;border:0;border-radius:0;border-spacing:0;border-collapse:collapse;box-sizing:content-box;clear:none;float:none;font-variant:normal;font-weight:inherit;letter-spacing:normal;line-height:normal;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;outline:0;padding:0;position:static;text-align:left;text-decoration:none;text-indent:0;text-transform:none;vertical-align:baseline;visibility:inherit;word-spacing:normal}",""])},48847:(e,t,r)=>{(t=e.exports=r(72887)(!1)).push([e.id,"._1gZJUfw{user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;position:relative;background:#000;background-position:center;background-size:contain;background-repeat:no-repeat;width:100%;height:100%;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;overflow:hidden;text-align:left;outline:0}._2jlIyxK{width:100%;height:100%;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;overflow:hidden;user-select:none;text-align:left;outline:0;position:absolute;top:0;left:0;pointer-events:none;background:0 0}._1gZJUfw ._17DR8Wz{display:none!important}._1gZJUfw>.KNlHF8r{position:absolute;width:100%;height:100%;border:0}._1gZJUfw .xDBHr4L{position:absolute;width:100%;height:100%;pointer-events:none}._1gZJUfw video{width:100%;height:100%}._1gZJUfw video::-webkit-media-controls-start-playback-button{z-index:2147483647!important}._1gZJUfw video._33stY3F::-webkit-media-controls-start-playback-button{display:none!important}._1CaeSWZ{object-fit:cover!important}",""]),t.locals={StreamPlayer:"_1gZJUfw",StreamPlayer_ui:"_2jlIyxK",hidden:"_17DR8Wz",container:"KNlHF8r",adSkin:"xDBHr4L","hide-native-play-button":"_33stY3F",StreamPlayer_iosLandscapeWorkaround:"_1CaeSWZ"}},40381:(e,t,r)=>{var i=r(93379),n=r(35071);"string"===typeof(n=n.__esModule?n.default:n)&&(n=[[e.id,n,""]]);var s={injectType:"singletonStyleTag",attributes:{"data-ya-player-style":"data-ya-player-style"},insert:"head",singleton:!0};i(n,s);e.exports=n.locals||{}},93379:(e,t,r)=>{"use strict";function i(e){for(var t=-1,r=0;r<p.length;r++)if(p[r].identifier===e){t=r;break}return t}function n(e,t){for(var r={},n=[],s=0;s<e.length;s++){var a=e[s],o=t.base?a[0]+t.base:a[0],d=r[o]||0,c="".concat(o," ").concat(d);r[o]=d+1;var u=i(c),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(p[u].references++,p[u].updater(h)):p.push({identifier:c,updater:l(h,t),references:1}),n.push(c)}return n}function s(e){var t=document.createElement("style"),i=e.attributes||{};if("undefined"===typeof i.nonce){var n=r.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"===typeof e.insert)e.insert(t);else{var s=h(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}function a(e,t,r,i){var n=r?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=m(t,n);else{var s=document.createTextNode(n),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function o(e,t,r){var i=r.css,n=r.media,s=r.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),s&&"undefined"!==typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function l(e,t){var r,i,n;if(t.singleton){var l=f++;r=v||(v=s(t)),i=a.bind(null,r,l,!1),n=a.bind(null,r,l,!0)}else r=s(t),i=o.bind(null,r,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}var d,c,u=function(){return"undefined"===typeof d&&(d=Boolean(window&&document&&document.all&&!window.atob)),d},h=function(){var e={};return function(t){if("undefined"===typeof e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(i){r=null}e[t]=r}return e[t]}}(),p=[],m=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")}),v=null,f=0;e.exports=function(e,t){(t=t||{}).singleton||"boolean"===typeof t.singleton||(t.singleton=u());var r=n(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<r.length;s++){var a=i(r[s]);p[a].references--}for(var o=n(e,t),l=0;l<r.length;l++){var d=i(r[l]);0===p[d].references&&(p[d].updater(),p.splice(d,1))}r=o}}}},43978:e=>{e.exports='<svg viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 1.5a13 13 0 1 0 12.898 14.63" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path></svg>'},81217:e=>{e.exports='<svg viewBox="0 0 18 18"><path d="M14.684 3.292Q17.053 5.661 17.053 9q0 3.34-2.369 5.708Q12.34 17.053 9 17.053V18q3.742 0 6.371-2.629Q18 12.742 18 9q0-3.718-2.629-6.371Q12.742 0 9 0v.947q3.34 0 5.684 2.345z"></path></svg>'},21135:(e,t,r)=>{(t=e.exports=r(72887)(!1)).push([e.id,"._1Gx9Olr{position:absolute;width:100%;height:100%;top:0;left:0}",""]),t.locals={poisitionAbsoluteFullSize:"_1Gx9Olr"}},35071:(e,t,r)=>{(t=e.exports=r(72887)(!1)).i(r(21135),void 0),t.push([e.id,"._3G2hT5S{overflow:hidden;display:flex;justify-content:center;align-items:center;flex-direction:column;pointer-events:none}._3iNNEC0{background-size:cover;background-position:center center;background-repeat:no-repeat}.JKPkLb0{object-fit:cover}",""]),t.locals={Poster__container:"_3G2hT5S "+r(21135).locals.poisitionAbsoluteFullSize,posterContainer:"_3G2hT5S "+r(21135).locals.poisitionAbsoluteFullSize,Poster__contentWrapper:"_3iNNEC0 "+r(21135).locals.poisitionAbsoluteFullSize,posterContentWrapper:"_3iNNEC0 "+r(21135).locals.poisitionAbsoluteFullSize,Poster__contentWrapper__image:"JKPkLb0 "+r(21135).locals.poisitionAbsoluteFullSize,posterContentWrapperImage:"JKPkLb0 "+r(21135).locals.poisitionAbsoluteFullSize}},84027:(e,t,r)=>{function i(e){var t=n(e);return r(t)}function n(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}var s={"./be.ts":13854,"./en.ts":24277,"./id.ts":37969,"./kk.ts":45448,"./ru.ts":65097,"./tr.ts":76935,"./tt.ts":20667,"./uk.ts":35144,"./uz.ts":67109};i.keys=function(){return Object.keys(s)},i.resolve=n,e.exports=i,i.id=84027},9057:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i={};try{var n=(new EventTarget).constructor;class e extends n{}new e,i.EventTarget=(new EventTarget).constructor}catch(EventTarget){!function(e,t){function r(){t.set(this,a(null))}function n(e,t,r){o(e,t,{configurable:!0,writable:!0,value:r})}function s(e){var t=e.options;return t&&t.once&&e.target.removeEventListener(this.type,e.listener),"function"===typeof e.listener?e.listener.call(e.target,this):e.listener.handleEvent(this),this._stopImmediatePropagationFlag}var a=e.create,o=e.defineProperty,l=r.prototype;n(l,"addEventListener",(function(e,r,i){for(var n=t.get(this),s=n[e]||(n[e]=[]),a=0,o=s.length;a<o;a++)if(s[a].listener===r)return;s.push({target:this,listener:r,options:i})})),n(l,"dispatchEvent",(function(e){var r=t.get(this)[e.type];return r&&(n(e,"target",this),n(e,"currentTarget",this),r.slice(0).some(s,e),delete e.currentTarget,delete e.target),!0})),n(l,"removeEventListener",(function(e,r){for(var i=t.get(this),n=i[e]||(i[e]=[]),s=0,a=n.length;s<a;s++)if(n[s].listener===r)return void n.splice(s,1)})),i.EventTarget=r}(Object,new WeakMap)}const s=i.EventTarget},60059:(e,t,r)=>{"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function n(e){var t,r,i,n,s,a;return{lang:null!=(t=null==e?void 0:e.lang)?t:null==(r=z)?void 0:r.lang,message:null==e?void 0:e.message,abortEarly:null!=(i=null==e?void 0:e.abortEarly)?i:null==(n=z)?void 0:n.abortEarly,abortPipeEarly:null!=(s=null==e?void 0:e.abortPipeEarly)?s:null==(a=z)?void 0:a.abortPipeEarly}}function s(e){const t=typeof e;return"string"===t?'"'+e+'"':"number"===t||"bigint"===t||"boolean"===t?""+e:"object"===t||"function"===t?null!=(r=e&&(null==(i=Object.getPrototypeOf(e))||null==(n=i.constructor)?void 0:n.name))?r:"null":t;var r,i,n}function a(e,t,r,i,n){var a,o,l,d,c,u,h,p;const m=n&&"input"in n?n.input:r.value,v=null!=(a=null!=(o=null==n?void 0:n.expected)?o:e.expects)?a:null,f=null!=(l=null==n?void 0:n.received)?l:s(m),g={kind:e.kind,type:e.type,input:m,expected:v,received:f,message:"Invalid "+t+": "+(v?"Expected "+v+" but r":"R")+"eceived "+f,requirement:e.requirement,path:null==n?void 0:n.path,issues:null==n?void 0:n.issues,lang:i.lang,abortEarly:i.abortEarly,abortPipeEarly:i.abortPipeEarly},y="schema"===e.kind,S=null!=(d=null!=(c=null!=(u=null!=(h=null!=(p=null==n?void 0:n.message)?p:e.message)?h:(A=e.reference,b=g.lang,null==(E=Z)||null==(w=E.get(A))?void 0:w.get(b)))?u:y?function(e){var t;return null==(t=Q)?void 0:t.get(e)}(g.lang):null)?c:i.message)?d:function(e){var t;return null==(t=K)?void 0:t.get(e)}(g.lang);var A,b,E,w;void 0!==S&&(g.message="function"===typeof S?S(g):S),y&&(r.typed=!1),r.issues?r.issues.push(g):r.issues=[g]}function o(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},n())}}function l(e,t){return J(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function d(e,t){var r;const i=[...new Set(e)];return i.length>1?"("+i.join(" "+t+" ")+")":null!=(r=i[0])?r:"never"}function c(e){return e instanceof X}function u(e){return{kind:"transformation",type:"args",reference:u,async:!1,schema:e,"~run"(e,t){var r=this;const i=e.value;return e.value=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];const a=r.schema["~run"]({value:n},t);if(a.issues)throw new X(a.issues);return i(...a.value)},e}}}function h(e,t){return{kind:"validation",type:"check",reference:h,async:!1,expects:null,requirement:e,message:t,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&a(this,"input",e,t),e}}}function p(e,t){return{kind:"validation",type:"max_length",reference:p,async:!1,expects:"<="+e,requirement:e,message:t,"~run"(e,t){return e.typed&&e.value.length>this.requirement&&a(this,"length",e,t,{received:""+e.value.length}),e}}}function m(e,t){return{kind:"validation",type:"max_value",reference:m,async:!1,expects:"<="+(e instanceof Date?e.toJSON():s(e)),requirement:e,message:t,"~run"(e,t){return!e.typed||e.value<=this.requirement||a(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():s(e.value)}),e}}}function v(e,t){return{kind:"validation",type:"min_value",reference:v,async:!1,expects:">="+(e instanceof Date?e.toJSON():s(e)),requirement:e,message:t,"~run"(e,t){return!e.typed||e.value>=this.requirement||a(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():s(e.value)}),e}}}function f(e){return{kind:"validation",type:"non_empty",reference:f,async:!1,expects:"!0",message:e,"~run"(e,t){return e.typed&&0===e.value.length&&a(this,"length",e,t,{received:"0"}),e}}}function g(e){return{kind:"transformation",type:"returns",reference:g,async:!1,schema:e,"~run"(e,t){var r=this;const i=e.value;return e.value=function(){const e=r.schema["~run"]({value:i(...arguments)},t);if(e.issues)throw new X(e.issues);return e.value},e}}}function y(e){return{kind:"transformation",type:"transform",reference:y,async:!1,operation:e,"~run"(e){return e.value=this.operation(e.value),e}}}function S(e){return{kind:"validation",type:"url",reference:S,async:!1,expects:null,requirement(e){try{return new URL(e),!0}catch(t){return!1}},message:e,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&a(this,"URL",e,t),e}}}function A(e,t){return{kind:"validation",type:"values",reference:A,async:!1,expects:""+d(e.map(e=>e instanceof Date?e.toJSON():s(e)),"|"),requirement:e,message:t,"~run"(e,t){return e.typed&&!this.requirement.some(t=>t<=e.value&&t>=e.value)&&a(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():s(e.value)}),e}}}function b(e,t,r){return"function"===typeof e.fallback?e.fallback(t,r):e.fallback}function E(e,t){return i({},e,{fallback:t,get"~standard"(){return o(this)},"~run"(t,r){const i=e["~run"](t,r);return i.issues?{typed:!0,value:b(this,i,r)}:i}})}function w(e,t,r){return"function"===typeof e.default?e.default(t,r):e.default}function k(){return{kind:"schema",type:"any",reference:k,expects:"any",async:!1,get"~standard"(){return o(this)},"~run":e=>(e.typed=!0,e)}}function C(e,t){return{kind:"schema",type:"array",reference:C,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return o(this)},"~run"(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<r.length;n++){const s=r[n],a=this.item["~run"]({value:s},t);if(a.issues){const o={type:"array",origin:"value",input:r,key:n,value:s};for(const t of a.issues){var i;t.path?t.path.unshift(o):t.path=[o],null==(i=e.issues)||i.push(t)}if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value.push(a.value)}}else a(this,"type",e,t);return e}}}function P(e){return{kind:"schema",type:"boolean",reference:P,expects:"boolean",async:!1,message:e,get"~standard"(){return o(this)},"~run"(e,t){return"boolean"===typeof e.value?e.typed=!0:a(this,"type",e,t),e}}}function T(e,t){const r=[];for(const i in e)""+ +i===i&&"string"===typeof e[i]&&Object.is(e[e[i]],+i)||r.push(e[i]);return{kind:"schema",type:"enum",reference:T,expects:d(r.map(s),"|"),async:!1,enum:e,options:r,message:t,get"~standard"(){return o(this)},"~run"(e,t){return this.options.includes(e.value)?e.typed=!0:a(this,"type",e,t),e}}}function I(e){return{kind:"schema",type:"function",reference:I,expects:"Function",async:!1,message:e,get"~standard"(){return o(this)},"~run"(e,t){return"function"===typeof e.value?e.typed=!0:a(this,"type",e,t),e}}}function _(e,t){if(typeof e===typeof t){if(e===t||e instanceof Date&&t instanceof Date&&+e===+t)return{value:e};if(e&&t&&e.constructor===Object&&t.constructor===Object){for(const r in t)if(r in e){const i=_(e[r],t[r]);if(i.issue)return i;e[r]=i.value}else e[r]=t[r];return{value:e}}if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length){for(let r=0;r<e.length;r++){const i=_(e[r],t[r]);if(i.issue)return i;e[r]=i.value}return{value:e}}}return{issue:!0}}function O(e,t){return{kind:"schema",type:"intersect",reference:O,expects:d(e.map(e=>e.expects),"&"),async:!1,options:e,message:t,get"~standard"(){return o(this)},"~run"(e,t){if(this.options.length){const r=e.value;let i;e.typed=!0;for(const n of this.options){const s=n["~run"]({value:r},t);if(s.issues&&(e.issues?e.issues.push(...s.issues):e.issues=s.issues,t.abortEarly)){e.typed=!1;break}s.typed||(e.typed=!1),e.typed&&(i?i.push(s.value):i=[s.value])}if(e.typed){e.value=i[0];for(let r=1;r<i.length;r++){const n=_(e.value,i[r]);if(n.issue){a(this,"type",e,t,{received:"unknown"});break}e.value=n.value}}}else a(this,"type",e,t);return e}}}function R(e,t){return{kind:"schema",type:"literal",reference:R,expects:s(e),async:!1,literal:e,message:t,get"~standard"(){return o(this)},"~run"(e,t){return e.value===this.literal?e.typed=!0:a(this,"type",e,t),e}}}function D(e,t){return{kind:"schema",type:"loose_object",reference:D,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return o(this)},"~run"(e,t){const r=e.value;if(r&&"object"===typeof r){e.typed=!0,e.value={};for(const n in this.entries){const s=this.entries[n];if(n in r||("exact_optional"===s.type||"optional"===s.type||"nullish"===s.type)&&void 0!==s.default){const a=n in r?r[n]:w(s),o=s["~run"]({value:a},t);if(o.issues){const s={type:"object",origin:"value",input:r,key:n,value:a};for(const t of o.issues){var i;t.path?t.path.unshift(s):t.path=[s],null==(i=e.issues)||i.push(t)}if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[n]=o.value}else if(void 0!==s.fallback)e.value[n]=b(s);else if("exact_optional"!==s.type&&"optional"!==s.type&&"nullish"!==s.type&&(a(this,"key",e,t,{input:void 0,expected:'"'+n+'"',path:[{type:"object",origin:"key",input:r,key:n,value:r[n]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(const t in r)l(r,t)&&!(t in this.entries)&&(e.value[t]=r[t])}else a(this,"type",e,t);return e}}}function x(e,t){return{kind:"schema",type:"nullable",reference:x,expects:"("+e.expects+" | null)",async:!1,wrapped:e,default:t,get"~standard"(){return o(this)},"~run"(e,t){return null===e.value&&(void 0!==this.default&&(e.value=w(this,e,t)),null===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function N(e){return{kind:"schema",type:"number",reference:N,expects:"number",async:!1,message:e,get"~standard"(){return o(this)},"~run"(e,t){return"number"!==typeof e.value||isNaN(e.value)?a(this,"type",e,t):e.typed=!0,e}}}function V(e,t){return{kind:"schema",type:"object",reference:V,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return o(this)},"~run"(e,t){const r=e.value;if(r&&"object"===typeof r){e.typed=!0,e.value={};for(const n in this.entries){const s=this.entries[n];if(n in r||("exact_optional"===s.type||"optional"===s.type||"nullish"===s.type)&&void 0!==s.default){const a=n in r?r[n]:w(s),o=s["~run"]({value:a},t);if(o.issues){const s={type:"object",origin:"value",input:r,key:n,value:a};for(const t of o.issues){var i;t.path?t.path.unshift(s):t.path=[s],null==(i=e.issues)||i.push(t)}if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[n]=o.value}else if(void 0!==s.fallback)e.value[n]=b(s);else if("exact_optional"!==s.type&&"optional"!==s.type&&"nullish"!==s.type&&(a(this,"key",e,t,{input:void 0,expected:'"'+n+'"',path:[{type:"object",origin:"key",input:r,key:n,value:r[n]}]}),t.abortEarly))break}}else a(this,"type",e,t);return e}}}function L(e,t,r){return{kind:"schema",type:"object_with_rest",reference:L,expects:"Object",async:!1,entries:e,rest:t,message:r,get"~standard"(){return o(this)},"~run"(e,t){const r=e.value;if(r&&"object"===typeof r){e.typed=!0,e.value={};for(const n in this.entries){const s=this.entries[n];if(n in r||("exact_optional"===s.type||"optional"===s.type||"nullish"===s.type)&&void 0!==s.default){const a=n in r?r[n]:w(s),o=s["~run"]({value:a},t);if(o.issues){const s={type:"object",origin:"value",input:r,key:n,value:a};for(const t of o.issues){var i;t.path?t.path.unshift(s):t.path=[s],null==(i=e.issues)||i.push(t)}if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[n]=o.value}else if(void 0!==s.fallback)e.value[n]=b(s);else if("exact_optional"!==s.type&&"optional"!==s.type&&"nullish"!==s.type&&(a(this,"key",e,t,{input:void 0,expected:'"'+n+'"',path:[{type:"object",origin:"key",input:r,key:n,value:r[n]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(const i in r)if(l(r,i)&&!(i in this.entries)){const s=this.rest["~run"]({value:r[i]},t);if(s.issues){const a={type:"object",origin:"value",input:r,key:i,value:r[i]};for(const t of s.issues){var n;t.path?t.path.unshift(a):t.path=[a],null==(n=e.issues)||n.push(t)}if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value[i]=s.value}}else a(this,"type",e,t);return e}}}function F(e,t){return{kind:"schema",type:"optional",reference:F,expects:"("+e.expects+" | undefined)",async:!1,wrapped:e,default:t,get"~standard"(){return o(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=w(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function M(e,t){return{kind:"schema",type:"strict_object",reference:M,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return o(this)},"~run"(e,t){const r=e.value;if(r&&"object"===typeof r){e.typed=!0,e.value={};for(const n in this.entries){const s=this.entries[n];if(n in r||("exact_optional"===s.type||"optional"===s.type||"nullish"===s.type)&&void 0!==s.default){const a=n in r?r[n]:w(s),o=s["~run"]({value:a},t);if(o.issues){const s={type:"object",origin:"value",input:r,key:n,value:a};for(const t of o.issues){var i;t.path?t.path.unshift(s):t.path=[s],null==(i=e.issues)||i.push(t)}if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[n]=o.value}else if(void 0!==s.fallback)e.value[n]=b(s);else if("exact_optional"!==s.type&&"optional"!==s.type&&"nullish"!==s.type&&(a(this,"key",e,t,{input:void 0,expected:'"'+n+'"',path:[{type:"object",origin:"key",input:r,key:n,value:r[n]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(const i in r)if(!(i in this.entries)){a(this,"key",e,t,{input:i,expected:"never",path:[{type:"object",origin:"key",input:r,key:i,value:r[i]}]});break}}else a(this,"type",e,t);return e}}}function j(e){return{kind:"schema",type:"string",reference:j,expects:"string",async:!1,message:e,get"~standard"(){return o(this)},"~run"(e,t){return"string"===typeof e.value?e.typed=!0:a(this,"type",e,t),e}}}function B(e,t){return{kind:"schema",type:"tuple",reference:B,expects:"Array",async:!1,items:e,message:t,get"~standard"(){return o(this)},"~run"(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<this.items.length;n++){const s=r[n],a=this.items[n]["~run"]({value:s},t);if(a.issues){const o={type:"array",origin:"value",input:r,key:n,value:s};for(const t of a.issues){var i;t.path?t.path.unshift(o):t.path=[o],null==(i=e.issues)||i.push(t)}if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value.push(a.value)}}else a(this,"type",e,t);return e}}}function U(e){return{kind:"schema",type:"undefined",reference:U,expects:"undefined",async:!1,message:e,get"~standard"(){return o(this)},"~run"(e,t){return void 0===e.value?e.typed=!0:a(this,"type",e,t),e}}}function Y(e){let t;if(e)for(const r of e)t?t.push(...r.issues):t=r.issues;return t}function H(e,t){return{kind:"schema",type:"union",reference:H,expects:d(e.map(e=>e.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return o(this)},"~run"(e,t){var r;let i,n,s;for(const a of this.options){const r=a["~run"]({value:e.value},t);if(r.typed){if(!r.issues){i=r;break}n?n.push(r):n=[r]}else s?s.push(r):s=[r]}if(i)return i;if(n){if(1===n.length)return n[0];a(this,"type",e,t,{issues:Y(n)}),e.typed=!0}else{if(1===(null==(r=s)?void 0:r.length))return s[0];a(this,"type",e,t,{issues:Y(s)})}return e}}}function W(){return{kind:"schema",type:"unknown",reference:W,expects:"unknown",async:!1,get"~standard"(){return o(this)},"~run":e=>(e.typed=!0,e)}}function q(e,t,r){const i=e["~run"]({value:t},n(r));if(i.issues)throw new X(i.issues);return i.value}function G(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i({},t[0],{pipe:t,get"~standard"(){return o(this)},"~run"(e,r){for(const i of t)if("metadata"!==i.kind){if(e.issues&&("schema"===i.kind||"transformation"===i.kind)){e.typed=!1;break}e.issues&&(r.abortEarly||r.abortPipeEarly)||(e=i["~run"](e,r))}return e}})}r.d(t,{AG3:()=>x,BF5:()=>h,BSk:()=>p,G0j:()=>H,HQ2:()=>S,IXX:()=>C,KmV:()=>T,L_X:()=>g,O72:()=>P,PWS:()=>m,Qc3:()=>q,Rxh:()=>N,Ryn:()=>V,S1Z:()=>U,VO0:()=>A,WCY:()=>u,YjB:()=>k,ZIn:()=>I,Z_8:()=>j,_4T:()=>W,bcc:()=>B,cfj:()=>M,d7q:()=>D,i0J:()=>R,jtO:()=>F,siq:()=>L,tvc:()=>E,uvs:()=>v,v2J:()=>f,vs:()=>y,wfr:()=>O,yhs:()=>c,zGw:()=>G});var z,K,Q,Z,J=r(47228),X=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}}}},d={};e.m=l,e.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,e.t=function(i,n){if(1&n&&(i=this(i)),8&n)return i;if("object"===typeof i&&i){if(4&n&&i.__esModule)return i;if(16&n&&"function"===typeof i.then)return i}var s=Object.create(null);e.r(s);var a={};t=t||[null,r({}),r([]),r(r)];for(var o=2&n&&i;"object"==typeof o&&!~t.indexOf(o);o=r(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>i[e]);return a.default=()=>i,e.d(s,a),s},e.d=(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},e.f={},e.e=t=>Promise.all(Object.keys(e.f).reduce((r,i)=>(e.f[i](t,r),r),[])),e.u=e=>276===e?"js/chunk.df2f8fb9b885789fc022.modern.js":930===e?"js/chunk.d625fbe30b0bc093e190.modern.js":703===e?"js/chunk.hlsjs-controller.modern.js":40===e?"js/chunk.mp4-controller.modern.js":241===e?"js/chunk.yasp-controller.modern.js":498===e?"js/chunk.native-controller.modern.js":599===e?"js/chunk.yasp-inline.modern.js":326===e?"js/chunk.610fb99c4813daf3b67d.modern.js":565===e?"js/chunk.dompurify.modern.js":787===e?"js/chunk.yasp_text_engine.modern.js":869===e?"js/chunk.AesCbc.modern.js":568===e?"js/chunk.yasp-worker.modern.js":void 0,e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},e.l=(t,r,n,s)=>{if(i[t])i[t].push(r);else{var a,o;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var c=l[d];if(c.getAttribute("src")==t||c.getAttribute("data-webpack")=="wpk_player_modern_1__0___13565_jsonp:"+n){a=c;break}}a||(o=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,e.nc&&a.setAttribute("nonce",e.nc),a.setAttribute("data-webpack","wpk_player_modern_1__0___13565_jsonp:"+n),a.src=t),i[t]=[r];var u=(e,r)=>{a.onerror=a.onload=null,clearTimeout(h);var n=i[t];if(delete i[t],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach(e=>e(r)),e)return e(r)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),o&&document.head.appendChild(a)}},e.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.j=209,e.p="https://yastatic.net/yandex-video-player-iframe-api-bundles/1.0-13565/",n=e.u,s=e.e,a={},o={},e.u=function(e){return n(e)+(a.hasOwnProperty(e)?"?"+a[e]:"")},e.e=function(t){return s(t).catch((function(r){var i=o.hasOwnProperty(t)?o[t]:3;if(i<1){var s=n(t);throw r.message="Loading chunk "+t+" failed after 3 retries.\n("+s+")",r.request=s,r}return new Promise((function(r){var n=3-i+1;setTimeout((function(){var s,l,d,c=(s=n,l=1e9,d=Math.floor(Math.random()*l)%l,isFinite(d)||(d=0),d+=Date.now()%l,String(s)+d.toString(36));a[t]=c,o[t]=i-1,r(e.e(t))}),0)}))}))},(()=>{e.b=document.baseURI||self.location.href;var t={209:0};e.f.j=(r,i)=>{var n=e.o(t,r)?t[r]:void 0;if(0!==n)if(n)i.push(n[2]);else{var s=new Promise((e,i)=>n=t[r]=[e,i]);i.push(n[2]=s);var a=e.p+e.u(r),o=new Error;e.l(a,i=>{if(e.o(t,r)&&(0!==(n=t[r])&&(t[r]=void 0),n)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+r+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,n[1](o)}},"chunk-"+r,r)}};var r=(r,i)=>{var n,s,[a,o,l]=i,d=0;if(a.some(e=>0!==t[e])){for(n in o)e.o(o,n)&&(e.m[n]=o[n]);if(l)l(e)}for(r&&r(i);d<a.length;d++)s=a[d],e.o(t,s)&&t[s]&&t[s][0](),t[s]=0},i=self.webpackChunkwpk_player_modern_1_0_13565_jsonp=self.webpackChunkwpk_player_modern_1_0_13565_jsonp||[];i.forEach(r.bind(null,0)),i.push=r.bind(null,i.push.bind(i))})(),e.nc=void 0,(()=>{"use strict";function t(e,t,r,i){return(i?"https://yastatic.net/yandex-video-player-iframe-api-bundles-stable":"https://yastatic.net/yandex-video-player-iframe-api-bundles")+"/"+function(e,t){return""+t+e}(t,r)+"/js/"+e}function r(e){let{modern:r,lang:i}=e;return t(function(e){let{modern:t,lang:r}=e;return"skin_"+r+(t?".modern":"")+".js"}({modern:r,lang:i}),13565,"1.0-",!1)}function i(e){const t=window;let i=!1;return e.player.once(mi.E.Destroy,()=>i=!0),(0,yi.Y)({src:r({modern:e.modern,lang:gi.f.i18nLang?gi.f.i18nLang:"ru"}),checkLoad:()=>(0,fi.K)(t.Ya)&&(0,fi.K)(t.Ya.playerSkin)&&(0,vi.m)(t.Ya.playerSkin.create)}).then(()=>{if(!i)return t.Ya.playerSkin.create(e)})}function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function s(e,t){Si.s.timeAPIInit=(0,ui.no)();const r=t(e),s=(0,pi.K)(r.getDebugConfig().logCalls),{setReadyInstance:a,setInstance:o}=s,l=function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(s,Ei);o(r),r.once(mi.E.Ready,a),r.once(mi.E.SkinReady,()=>l.skin=r.skin);const{loadSkin:d=i}=e,c=d===i;r.on(mi.E.RequestFullscreenStateChange,async e=>{c&&!r.skin&&r.once(mi.E.SkinReady,()=>{r.emit(mi.E.RequestFullscreenStateChange,e)})});const u=(0,li.I)(async()=>{if(!1===d)return;if(r.getReadyState()===Ai.k.destroyed)return;const t=e.skinParams||{};try{if(c){const e=(0,di.u)();r.once(mi.E.SkinReady,t=>{let{error:i}=t;r.logSkinDelta(i?"skin.error":"skin.load",e(),{initSubpage:!0})})}r.skin=await d(n({},t,{container:r.getContainer(),player:l,modern:"modern"===hi.j},c?{flags:e.flags}:{})),r.emit(mi.E.SkinReady,{})}catch(i){r.logError(new bi.p({code:"LOAD_SKIN_ERROR",isFatal:!1,details:i})),r.setNativeControlsVisibility(!0),r.setNativeAdControlsVisibility(!0),r.emit(mi.E.SkinReady,{error:i})}}),h=e=>{let{error:t}=e;t&&t.isFatal&&u()};r.once(mi.E.ErrorChange,h);return Promise.all([new Promise(e=>r.once(mi.E.Ready,e)),Promise.race([new Promise(e=>setTimeout(e,1e4)),new Promise(e=>r.once(mi.E.ResourcesIdle,e))])]).then(()=>{r.off(mi.E.ErrorChange,h),u()}),l}function a(e,t){const r=e.style;for(const i in t)if(t.hasOwnProperty(i)){r[Oi(i)]=t[i]}}function o(e){const{ownerDocument:t}=e;if(!t)return;const{defaultView:r}=t;return r||void 0}function l(e,t){void 0===t&&(t=window);return("function"===typeof t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle)||{}}function d(e){const t=e.getRootNode;if((0,vi.m)(t))return t.call(e);let r=e;for(;r.parentNode;)r=r.parentNode;return r}function c(e){return Boolean(e)&&"ShadowRoot"===(0,Di.M)(e)}function u(e){const t=e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;let r=e;for(;r;){if(r&&t.document.body.contains(r))return!0;const e=d(r);if(!c(e)||!Vi(e.host))return!1;r=e.host}return!1}function h(e,t){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function p(e){if(!e)return;const{parentElement:t}=e;t&&t.removeChild(e)}function m(){const e=Hi.map(e=>e.ownerDocument),{length:t}=e,r=(t?e[t-1]:document).defaultView;return!!r&&r.self!==r.parent}function v(e){return!e.supported&&void 0!==e.noSupportReason}function f(e){return(t=e.supportInfo).supported&&void 0!==t.engine;var t}function g(e){return v(e.supportInfo)}function y(e){return void 0===e?[]:(e.testIds||"").split(",").map(e=>parseInt(e,10)).filter(rn.z)}function S(e){return void 0===e?void 0:Boolean(e)}function A(e){return!e.includes(wn.th.PLAY)&&!e.includes(wn.th.START_SCREEN)&&!e.includes(wn.th.START_SCREEN_PLAY)}function b(e){var t;return function(e){if(0===e.length)return[];e=(()=>{const t=function(e,t){for(let r=e.length-1;r>=0;--r)if(e[r]===t)return r;return-1}(e,wn.th.ALL);return-1!==t?[...Ln,...e.splice(t+1)]:e})();const t=new Map;return e.reverse().forEach(e=>{const r="!"===e[0],i=r?e.slice(1):e;t.has(i)||t.set(i,r)}),[...t.entries()].filter(e=>{let[t,r]=e;return!r}).map(e=>{let[t]=e;return t}).reverse()}(void 0===(t=e)?[]:Array.isArray(t)?t.filter(Mn):String(t).split(",").map(e=>e.trim()).filter(Mn))}function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function w(e,t){var r,i;if(!e.servers)return e;const n={},{vsid:s,sourceIndex:a}=t,o=e=>(0,zn.Sr)(e,{vsid:s,[Gn.g]:String(a)},{override:!0,saveOriginalPath:!0});(0,Hn.J)(e.servers).forEach(e=>{let[t,r]=e;n[t]=o(r)});const l=E({},e);l.servers=n;const d=l;return null!=(r=d.advanced)&&null!=(i=r[qn.ly])&&i.serverCertificateUrl&&(d.advanced=E({},d.advanced,{[qn.ly]:E({},d.advanced[qn.ly],{serverCertificateUrl:o(d.advanced[qn.ly].serverCertificateUrl)})})),function(e){if(!(0,fi.K)(e))return!1;if(!(0,fi.K)(e.servers)||!(Wn.N in e.servers))return!1;if(!(0,fi.K)(e.advanced)||!(Wn.N in e.advanced))return!1;const t=e.advanced[Wn.N];if(!(0,fi.K)(t))return!1;const{processSPCPath:r}=t;return(0,wi.H)(r)}(l)&&(l.advanced=E({},l.advanced,{[qn.h9]:E({},l.advanced[qn.h9],{processSPCPath:o(l.advanced[qn.h9].processSPCPath)})})),l}function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function C(e){const t=e.filter(rn.z).sort().join(",");return t.length>0?t:void 0}function P(e){return C(e.map(e=>parseInt(e,10)))}function T(e){try{return JSON.stringify(e),!0}catch(t){return!1}}function I(e,t){void 0===e&&(e={});const r={};return function(e,t){for(const r in t)(0,ms.n)(t,r)&&(e[r]=t[r])}(r,e),vs.forEach(e=>{"undefined"===typeof r[e]&&"undefined"!==typeof t[e]&&(r[e]=t[e])}),r}function _(e){let t=function(e){let{PI:t,min:r,max:i,cos:n,round:s}=Math,a=e[0]|e[1]<<8|e[2]<<16,o=e[3]|e[4]<<8,l=(63&a)/63,d=(a>>6&63)/31.5-1,c=(a>>12&63)/31.5-1,u=(a>>18&31)/31,h=a>>23,p=(o>>3&63)/63,m=(o>>9&63)/63,v=o>>15,f=i(3,v?h?5:7:7&o),g=i(3,v?7&o:h?5:7),y=h?(15&e[5])/15:1,S=(e[5]>>4)/15,A=h?6:5,b=0,E=(t,r,i)=>{let n=[];for(let s=0;s<r;s++)for(let a=s?0:1;a*r<t*(r-s);a++)n.push(((e[A+(b>>1)]>>((1&b++)<<2)&15)/7.5-1)*i);return n},w=E(f,g,u),k=E(3,3,1.25*p),C=E(3,3,1.25*m),P=h&&E(5,5,S),T=function(e){let t=e[3],r=128&e[2],i=128&e[4];return(i?r?5:7:7&t)/(i?7&t:r?5:7)}(e),I=s(T>1?32:32*T),_=s(T>1?32/T:32),O=new Uint8Array(I*_*4),R=[],D=[];for(let x=0,N=0;x<_;x++)for(let e=0;e<I;e++,N+=4){let s=l,a=d,o=c,u=y;for(let r=0,l=i(f,h?5:3);r<l;r++)R[r]=n(t/I*(e+.5)*r);for(let e=0,r=i(g,h?5:3);e<r;e++)D[e]=n(t/_*(x+.5)*e);for(let e=0,t=0;e<g;e++)for(let r=e?0:1,i=2*D[e];r*g<f*(g-e);r++,t++)s+=w[t]*R[r]*i;for(let e=0,t=0;e<3;e++)for(let r=e?0:1,i=2*D[e];r<3-e;r++,t++){let e=R[r]*i;a+=k[t]*e,o+=C[t]*e}if(h)for(let e=0,t=0;e<5;e++)for(let r=e?0:1,i=2*D[e];r<5-e;r++,t++)u+=P[t]*R[r]*i;let p=s-2/3*a,m=(3*s-p+o)/2,v=m-o;O[N]=i(0,255*r(1,m)),O[N+1]=i(0,255*r(1,v)),O[N+2]=i(0,255*r(1,p)),O[N+3]=i(0,255*r(1,u))}return{w:I,h:_,rgba:O}}(e);return function(e,t,r){let i=4*e+1,n=6+t*(5+i),s=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,e>>8,255&e,0,0,t>>8,255&t,8,6,0,0,0,0,0,0,0,n>>>24,n>>16&255,n>>8&255,255&n,73,68,65,84,120,1],a=[0,498536548,997073096,651767980,1994146192,1802195444,1303535960,1342533948,-306674912,-267414716,-690576408,-882789492,-1687895376,-2032938284,-1609899400,-1111625188],o=1,l=0;for(let d=0,c=0,u=i-1;d<t;d++,u+=i-1)for(s.push(d+1<t?0:1,255&i,i>>8,255&~i,i>>8^255,0),l=(l+o)%65521;c<u;c++){let e=255&r[c];s.push(e),o=(o+e)%65521,l=(l+o)%65521}s.push(l>>8,255&l,o>>8,255&o,0,0,0,0,0,0,0,0,73,69,78,68,174,66,96,130);for(let[d,c]of[[12,29],[37,41+n]]){let e=-1;for(let t=d;t<c;t++)e^=s[t],e=e>>>4^a[15&e],e=e>>>4^a[15&e];e=~e,s[c++]=e>>>24,s[c++]=e>>16&255,s[c++]=e>>8&255,s[c++]=255&e}return"data:image/png;base64,"+btoa(String.fromCharCode(...s))}(t.w,t.h,t.rgba)}function O(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return _(r)}function R(){return(R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function D(){return(D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function x(e,t,r){var i,n,s;const a=D({},mn.Qc3(fs,e),{sourceIndex:r}),{vsid:o,vpuid:l}=t;a.params.additionalParams.vsid=o,a.params.additionalParams=D({},Yn,a.params.additionalParams,{vsid:o});const d=(0,hn.rg)(),{testIds:c,slots:u}=function(e){const{testIds:t,slots:r}=mn.Qc3($n,{testIds:null==e?void 0:e.testids,slots:null==e?void 0:e.slots});return{testIds:t,slots:r}}({slots:d.slots,testids:d.testids}),h=(0,gs.S)(a.params.additionalParams.slots,u),p=function(){const e={};for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];r.filter(Boolean).join(",").split(",").forEach(t=>{if(!/^\d+$/.test(t))return;const r=parseInt(t,10);e[r]=null});const n=Object.keys(e);return 0<n.length?n.join(","):void 0}(a.params.additionalParams.testIds,c);a.params.additionalParams=D({},a.params.additionalParams,h?{slots:h}:{},p?{testIds:p}:{}),a.params.posterStyle=D({objectFit:t.objectFit},a.params.posterStyle);const{adConfig:m}=a.params;return void 0!==m&&void 0===m.skinType&&(m.skinType=function(e){return void 0===e.loadSkin?"defaultInstream":void 0}(t)),a.params.feed=null==(i=t.streamPlayerParams)?void 0:i.feed,a.params.stickyEnd=null==(n=t.streamPlayerParams)?void 0:n.stickyEnd,a.params.shouldEmitFrameRendered=null==(s=t.streamPlayerParams)?void 0:s.shouldEmitFrameRendered,a.streams=a.streams.map(e=>D({},e,{drmConfig:e.drmConfig?w(e.drmConfig,{vsid:o,sourceIndex:r}):void 0,url:(0,zn.Sr)(e.url,{vsid:o,vpuid:l,[Gn.g]:String(r)},{override:!0,saveOriginalPath:!0})})),a}function N(e){if(!(0,fi.K)(e))return!1;const{utcStart:t,utcEnd:r}=e;return(void 0===t||(0,rn.z)(t))&&(void 0===r||(0,rn.z)(r))}function V(e){return Array.isArray(e)?e.filter(e=>"string"===typeof e):[]}function L(e){if(!(0,fi.K)(e))return(0,ys.c)();const{init:t,start:r,end:i,setSource:n,adRequest:s,adError:a,adStart:o,adEnd:l,adPodStart:d,adPodClick:c,adPodEnd:u,adPodSkip:h,sourceStart:p,play:m,pause:v,seek:f,firstQuartile:g,midpoint:y,thirdQuartile:S,viewed:A,heartbeat:b,watchedTime:E,error:w}=e;return{init:V(t),start:V(r),end:V(i),setSource:V(n),adRequest:V(s),adError:V(a),adStart:V(o),adEnd:V(l),adPodStart:V(d),adPodClick:V(c),adPodEnd:V(u),adPodSkip:V(h),sourceStart:V(p),play:V(m),pause:V(v),seek:V(f),firstQuartile:V(g),midpoint:V(y),thirdQuartile:V(S),heartbeat:(P=b,Array.isArray(P)?P.filter(e=>{if(!Array.isArray(e)||2!==e.length)return!1;const[t,r]=e;if("string"!==typeof t||!N(r))return!1;const{offset:i,delay:n,callsCount:s}=r;return"number"===typeof n&&(void 0===i||(0,rn.z)(i))&&(void 0===s||"number"===typeof s&&s>0)}):[]),viewed:(C=A,Array.isArray(C)?C.filter(e=>{if(Array.isArray(e)&&2===e.length){const[t,r]=e;if("string"!==typeof t)return!1;if(!(0,fi.K)(r))return!1;{const{percent:e}=r;if("number"!==typeof e)return!1}return!0}return!1}):[]),watchedTime:(k=E,Array.isArray(k)?k.filter(e=>{if(!Array.isArray(e)||2!==e.length)return!1;const[t,r]=e;if("string"!==typeof t||!(0,fi.K)(r))return!1;const{offset:i}=r;return N(r)&&"number"===typeof i}):[]),error:V(w)};var k,C,P}function F(e){if(void 0===e||!(0,fi.K)(e))return Ss;const{trackingEvents:t}=e;return{trackingEvents:(Array.isArray(t)?t:[t]).map(L)}}function M(){return(M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function j(e,t,r){return M({},function(e){return(0,fi.K)(e)?mn.Qc3(ws,e):mn.Qc3(ws,{})}(e),{source:x(e,t,r)})}function B(e){if(void 0===e)return;const t=e&&e.match&&e.match(Cs);if(t&&t[1])return parseInt(t[1],10);const r=e.split(".");if(3===r.length)return parseInt(r[2],10);throw new Error("paramsObject.version must be a string like [1.0-0], [1.1.1111] or undefined")}function U(e,t){var r;return void 0===t&&(t=window),(0,An.O)("playerapi-version",e=>e&&parseInt(e,10),t)||B(e||(null==(r=(0,hn.rg)().flags)?void 0:r["videoplayer-version"]))}function Y(e,t){return t?ks.PLAYER_API_MOCK:Ts&&(e=>{0;try{const t=(0,wi.H)(e)?B(e):e;return"number"===typeof t&&t>=1410}catch(t){return!1}})(e||_s)?ks.PLAYER_API_MODERN:ks.PLAYER_API}function H(e){const{location:t,referrer:r}=e;return{location:(0,Rs.b)(window),topLocation:t,referrer:window.document.referrer,topReferrer:r}}function W(e,t){return function(e,t){if(e.status===t.status)return 0;if(e.status===Ki.OFFLINE)return 1;return-1}(e,t)||function(e,t){return String.prototype.localeCompare.call(e.name,t.name)}(e,t)}function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function G(e){let t=0;var r;return(0,Ls.W)(q({},e,{checkStatus:e=>(t=e,304===t||t>=200&&t<300),url:(r=e.url,r.replace(/<tld>/g,Vs))})).then(e=>e.responseText).catch(e=>{throw e.status=t,e})}function z(e){return{name:e.name,bitrate:e.bitrate,lang:e.lang}}function K(e){return"undefined"===typeof e?null:{name:e.name,lang:e.lang}}function Q(e){return{auto:e.auto,name:e.name,bitrate:e.bitrate,width:e.width,height:e.height}}function Z(e){return 0===String(e.code).indexOf("VH_")}function J(){return(J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function X(e,t,r){return aa.some(i=>{if(!e[i.element])return!1;let n=t;for(;n;){if(e[i.element]===n)return!0;if((0,hn.RW)("web_new_fullscreen_logic")&&r&&n===r)return!1;n=n.parentElement}return!1})}function $(e){if(e&&(0,oa.A)(e))return(0,zn.Sr)(e,{json_preview:"1",preview_version:"4"})}function ee(){return(ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function te(){this.returnValue=!1}function re(){this.cancelBubble=!0}function ie(e){return function(t){const r=function(e){return e.stopPropagation||(e.stopPropagation=re),e.preventDefault||(e.preventDefault=te),e.target||(e.target=e.srcElement),e}(t);e.call(this,r)}}function ne(e){e&&e.un()}function se(e,t,r){return Math.max(Math.min(t,r)-Math.max(e,0),0)}function ae(e){const t=(0,Ta.L)(e),r=t.width,i=t.height;let n=0;if(r>0&&i>0){const e={width:window.innerWidth,height:window.innerHeight};n=se(t.left,t.right,e.width)*se(t.top,t.bottom,e.height)/(r*i)}return n}function oe(){return(oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function le(){return(le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function de(e){let{playingState:t}=e;return t===qi.X.BUFFERING||t===qi.X.PLAY}function ce(e){let{playingState:t}=e;return t===qi.X.PLAY}function ue(){return(ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function he(e,t){void 0===t&&(t=window);const r=(0,za.i)(t),i=new RegExp("\\b"+e+"/((?:\\d+)(?:\\.\\d+)*)\\b","i"),n=r.match(i);if(n)return n[1].split(".").map(e=>parseInt(e,10))}function pe(){const e=(0,Wa.d)()<5;return Ha(Ka,e=>{let[t,r]=e;const i=he(t);if(void 0===i)return!1;const[n]=i;return n<r})||e}function me(){return Ga()||(0,Ba.C)()&&pe()}function ve(e){void 0===e&&(e=window);const{document:t={}}=e;return aa.filter(e=>{let{enabled:r}=e;return r in t})}function fe(){return me()||(window,!1)}function ge(){return!fe()&&(((0,Ba.C)()||(0,Ua.P)()||Ya)&&!me())}function ye(){return(ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function Se(e){const t=[...e],r=t.pop();if(!r||0===t.length)throw new Error("memoizeSingle need at least 2 functions as arg");return{preparers:t,resolver:r}}function Ae(e){return(0,wi.H)(e.className)?e.className:e.namespaceURI===lo&&e.getAttribute("class")||""}function be(e,t){(0,wi.H)(e.className)?e.className=t:e.namespaceURI===lo&&e.setAttributeNS("","class",t)}function Ee(e,t){void 0===t&&(t=""),0!==e.className.length?uo(e)?vo(e,t):function(e,t){let r=Ae(e).split(" ").concat(t.split(" "));r=function(e){const t={};for(let r=0;r<e.length;r++)t[e[r]]=r;return(0,da.Z)(t)}((0,no.h)(r,(function(e){return""!==e}))),be(e,r.join(" "))}(e,t):e.className=t}function we(e,t){const r=document.createElement("style");r.textContent+=e,t?t.appendChild(r):(0,yo.c)(window).appendChild(r)}function ke(e){const t=e.createElement("div");return a(t,ko),t}function Ce(){const e=document.createElement("div");a(e,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"});const t=document.createElement("div");return e.appendChild(t),a(t,{color:"#fff",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:"16px",lineHeight:"19px",textShadow:"0 0 3px #000",textAlign:"center",margin:"0 10px 20px 10px"}),{wrapper:e,setText:e=>{t.textContent=e}}}function Pe(e){let{document:t,poster:r,firstFrameHash:i,firstFrameUrl:n,style:s,onReady:o,hiddenControls:l=[],primaryColor:d=ja,backgroundColor:c}=e;const u=t.createElement("div");a(u,{width:"100%",height:"100%",display:"block",position:"relative",pointerEvents:"none",backgroundColor:c});const h=new io({container:u,onReady:o,src:r,firstFrameUrl:n,firstFrameHash:i,style:s,thumbnails:void 0}),m=ke(t);let v;-1===l.indexOf(wn.th.ALL)&&-1===l.indexOf(wn.th.PRELOADER)&&(v=function(e){let{document:t,primaryColor:r,isMobileSkin:i=!1}=e;wo();const n=t.createElement("div");Ee(n,Ao().locals.spinner),n.innerHTML=i?Eo:bo;const s=n.getElementsByTagName("svg")[0];return Ee(s,Ao().locals.spinner__svg),i||s.setAttributeNS("","fill",r||ja),n.appendChild(s),n}({document:t,primaryColor:d,isMobileSkin:ge()}),m.appendChild(v)),u.appendChild(m);const f=Ce();return u.appendChild(f.wrapper),{element:u,setPoster:(e,t,r,i)=>h.setPoster(e,t,r,i),setStyle:e=>h.setStyle(e),setSpinnerVisibility:e=>{v&&a(v,{display:e?"block":"none"})},setVisibility:e=>{a(u,{display:e?"block":"none"})},setAnnotationText:e=>{f.setText(e)},destroy:()=>{h.destroy(),p(u)}}}function Te(){return(Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function Ie(e){const t=()=>Io.forEach(e=>window.removeEventListener(e,r)),r=r=>{"pagehide"===r.type&&r.persisted||(e(r),t())};return Io.forEach(e=>window.addEventListener(e,r)),t}function _e(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}function Oe(e){return"function"===typeof e}function Re(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}function De(e){return!!(0,fi.K)(e)&&(!!(0,fi.K)(e.videoInfo)&&Boolean(e.enableRemoteProgressSaving&&e.videoInfo.videoContentId))}function xe(){return(Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function Ne(e){return void 0===e&&(e="/log"),"https://log.strm.yandex.ru"+e}function Ve(){return Ne("/"+(0,Yo.a)((e=Ho,t=Wo,Math.floor(Math.floor(Math.random()*(t-e+1))+e))));var e,t}function Le(e){return{reqid:null==e?void 0:e.reqid,from_block:null==e?void 0:e.from_block,frontend_vh_reqid:null==e?void 0:e.frontend_vh_reqid,recommender_reqid:null==e?void 0:e.recommender_reqid,stream_block:null==e?void 0:e.stream_block,subscription_type:null==e?void 0:e.subscription_type}}function Fe(e){setTimeout(()=>{throw e},0)}function Me(){if(void 0!==document.featurePolicy)try{return document.featurePolicy.allowedFeatures()}catch(e){return}}function je(e){return"ya-video-player-"+e}function Be(e){let{source:t}=e;return!!t&&(!!t.adConfig&&(!(!t.adConfig.partnerId&&!t.adConfig.adBreaks)&&!1!==t.adConfig.hasPreroll))}function Ue(e){return"string"===typeof e}function Ye(e){return Ue(e)&&e.length>0}function He(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=tl(t,Boolean);if(0!==i.length)return i.join(";")}function We(e){if(void 0!==e){if(!Ue(e))throw new Error("testIdsString is not a string or undefined ["+e+"]");if(0!==e.length){for(const t of e.split(";")){const r=t.split(",");if(3!==r.length)throw new Error("testIdParts length error ["+e+"]");const[i,,n]=r;if(0===i.trim().length)throw new Error("testId length error ["+e+"]");if(0===n.trim().length)throw new Error("testId bucket length error ["+e+"]")}return e}}}function qe(e){if(!Boolean(null===e||void 0===e?void 0:e.toString))return!1;try{const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}catch(t){return!1}}function Ge(e){return JSON.stringify(e,function(){const e=[],t=function(){const e="undefined"===typeof WeakMap?void 0:new WeakMap,t=[];return{set:(r,i)=>{if(void 0!==e)try{e.set(r,i)}catch(n){t.push({path:i,value:r})}else t.push({path:i,value:r})},get:r=>{const i=ol(t,e=>e.value===r);return void 0!==e&&void 0===i?e.get(r):i?i.path:void 0}}}();return(r,i)=>{if(Oe(i))return Ue(i.name)?i.name:"[Function]";if(sl(i))return{name:(n=i).name,message:n.message,stack:n.stack};var n;if(!Re(i))return i;if((e=>{try{return"display"in(t=e,void 0===r&&(r=window),("function"===typeof r.getComputedStyle?r.getComputedStyle(t,null):t.currentStyle)||{})}catch(i){return!1}var t,r})(i))return function(e){if(e.id)return e.id;if(e.className)return e.className;return"HTML Element"}(i);const s=t.get(i);if(Ye(s))return"[Circular "+s+"]";for(;e.length>0&&e[e.length-1].value[r]!==i;)e.pop();const a=(e.length>0?e[e.length-1].path:"")+(r?"/"+r:"~");return e.push({path:a,value:i}),t.set(i,a),i}}())}function ze(){}function Ke(e){let t=function(){let r;return t=()=>r,r=e.apply(this,arguments),r};return function(){return t.apply(this,arguments)}}function Qe(e,t){try{return e()}catch(r){"function"===typeof t&&t(r)}}function Ze(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){const t=e.navigator||{},{msMaxTouchPoints:r,maxTouchPoints:i}=t;return r||i||0}(e)>0&&!function(e){void 0===e&&(e=window);return function(e){void 0===e&&(e=window);const t=yl(e);return"boolean"===typeof t?-1:t}(e)>11}(e)}function Je(e){return"function"===typeof e||"Function"===nl(e)}function Xe(e,t){if(!Je(e.matchMedia))return!1;const r=e.matchMedia(t);return function(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}(r)&&Boolean(r.matches)}function $e(e){return void 0===e&&(e=window),Ze(e)||function(e){return Xe(e,bl)}(e)||function(e){return Xe(e,El)}(e)||function(e){const{DocumentTouch:t}=e;return Boolean(t)&&e.document instanceof t}(e)||function(e){return"ontouchstart"in e}(e)}function et(e){void 0===e&&(e=window);const t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!function(e){void 0===e&&(e=window);return e.navigator.userAgent.indexOf("UCBrowser")>-1}(e)}function tt(e){const t=function(e,t){if(void 0===t&&(t=!0),wl&&t)return[];{const t=[];let i=e;for(;;)try{if(i=i.ownerDocument.defaultView.frameElement,!i)return t;t.push(i)}catch(r){return t}}}(e.documentElement).map(e=>e.ownerDocument);return t.unshift(e),t.map(e=>({location:_e(e.defaultView),referrer:e.referrer}))}function rt(e){let t="",r="";if(e){tt(e).reverse().forEach(e=>{let{location:i,referrer:n}=e;t=t||i,r=r||n})}return{location:t,referrer:r}}function it(e){let t=function(){let r;return t=()=>r,r=e.apply(this,arguments),r};return function(){return t.apply(this,arguments)}}function nt(){}function st(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function at(){return(at=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function ot(e){const{method:t,url:r,async:i=!0,data:n,responseType:s="text",onBeforeSend:a=nt,onRetry:o=nt,checkStatus:l=(e=>kl===e),headers:d={},xhrConstructor:c=XMLHttpRequest,retries:u=0,timeout:h=0,withCredentials:p,onAbort:m,onSetup:v}=e;if(!c)return;const f=e.onSuccess?it(e.onSuccess):nt,g=e.onError?it(e.onError):nt;let y,S=!1,A=0,b=e=>{S=!0,b=nt,y=e,E(new Error("Abort request")),"function"===typeof m&&m(e)};const E=t=>{w.onerror=null,w.onreadystatechange=null,A&&clearTimeout(A);if(A&&4!==w.readyState||S)try{w.abort()}catch(t){}if(!S)if(u>0){const r=o(t,w);if("boolean"!==typeof r||Boolean(r)||b(),S)return;ot(at({},e,{onSetup:e=>{let{abort:t}=e;b=e=>t(e),S&&t(y)},retries:u-1}))}else b=nt,g(t,w)},w=new c;try{w.open(t,r,i)}catch(k){return void E(k)}if(w.responseType=s,w.withCredentials=Boolean(p),function(e,t,r){for(const i in e)st(e,i)&&t.call(r,e[i],i,e)}(d,(e,t)=>{try{w.setRequestHeader(t,e)}catch(k){}}),h>0&&isFinite(h)&&(A=window.setTimeout(()=>{E(new Error("Request timeout, "+r))},h)),w.onerror=E,w.onreadystatechange=()=>{if(4===w.readyState){const{status:e}=w;l(e)?(b=nt,clearTimeout(A),f(w)):E(new Error("Invalid request status "+e+", "+r))}},("function"!==typeof v||(v({abort:e=>b(e)}),!S))&&(a(w,e),!S))try{w.send(n)}catch(k){E(k)}}function lt(e){if(!e||!e.toString)return!1;const t=Function.prototype.toString.call(e);return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}function dt(e,t){var r,i,n;return null!==(n=null!==(i=null!==(r=Il(e,t))&&void 0!==r?r:function(e,t){const r=function(e){var t,r;const i=[e.document];let n=e.document;for(;n;)n=null===(r=null===(t=n.defaultView)||void 0===t?void 0:t.frameElement)||void 0===r?void 0:r.ownerDocument,n&&i.push(n);return i}(e);for(let i=0;i<r.length;i++){const e=new URLSearchParams(r[i].location.search).get(t);if(null!==e)return e}return}(e,t))&&void 0!==i?i:((e,t)=>{var r,i;for(const n of _o(e)){const e=null===(i=null===(r=n.Ya)||void 0===r?void 0:r.hardcodedParams)||void 0===i?void 0:i[t];if(e)return String(e)}return})(e,t))&&void 0!==n?n:void 0}function ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ut(){return(ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function ht(e,t){var r,i,n;return null===(n=null===(i=null===(r=t.ya)||void 0===r?void 0:r.videoAd)||void 0===i?void 0:i.loadedModules)||void 0===n?void 0:n[e]}function pt(){return(pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function mt(e){return Zl||function(e){return""+Xl+e+"/"}(e)}function vt(e){return function(e){const{src:t,win:r,onBeforeLoad:i=ze}=e,n=new ml(new Error,{});let s=ze;return{promise:new Promise((e,a)=>{const o=r.document.createElement("script");let l=!1;s=()=>{l=!0,function(e){if(!e)return;const{parentElement:t}=e;t&&t.removeChild(e)}(o)};o.type="text/javascript",o.async=!0,o.onload=()=>{l||e()},o.onerror=e=>{l||(a(new ml(n,{message:"Failed to load script ["+t+"]",details:{src:t,isSelfWindow:r===window,event:e}})),s())},o.src=t,o.charset="utf-8",i(o),function(e){const t=e.document;let r=t.getElementsByTagName("head")[0];return r||(r=t.createElement("head"),t.documentElement.appendChild(r)),r}(r).appendChild(o)}),teardown:s}}(e)}function ft(e){let t="";for(let r=0;r<e;r++)t+=(16*Bl()|0).toString(16);return t}function gt(e,t,r){void 0===r&&(r=" ");const i=t-e.length;if(i>0){let t=r;for(;t.length<i;)t+=t;return(t.length>i?t.substr(0,i):t)+e}return e}function yt(){return(yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function St(e){const t=(0,od.bk)();return ld.subpageIndex!==t?(ld.subpageIndex=t,ld.deltas={},!1):Boolean(ld.deltas[e])}function At(e){St(e)||(0,ad.iW)(e)}function bt(e,t){var r;(void 0===t&&(t={}),St(e))||((0,ad.vG)(e,t),r=e,ld.deltas[r]=!0)}function Et(){return(Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}async function wt(e,t,r,i){var n;void 0===e&&(e=window);const s=e===window;s&&At("adsdk.multiroll.full");const a=(e=>{var t;0;const{win:r,config:{vasUaasConfig:i,activeTestIds:n,additionalCustomRootFields:s,vh_sid:a,withCredentials:o},moduleName:l,serviceName:d,serviceVersion:c,productTheme:u,pageId:h,impId:p}=e,m=null!==(t=null===s||void 0===s?void 0:s.vsid)&&void 0!==t?t:nd,v=(e=>{let{serviceName:t,serviceVersion:r,vsid:i}=e;const n=new Tl({rnd:Ul,vsid:i,defaultProbability:Rl,serviceName:t,serviceVersion:r});return{event:e=>n.log(e),error:e=>n.error(e)}})({serviceName:d,serviceVersion:c,vsid:m}),f=yt({},s),g=Ye(a)?a:void 0;!Ye(f.vh_sid)&&g&&(f.vh_sid=g);const y=Qe(()=>We(null===f||void 0===f?void 0:f.testIds),e=>{v.error({error:new ml({code:"LOAD_VAS_MODULE_INVALID_TEST_IDS",details:{message:e.message}})})});return(e=>{const t=new gl;return{promise:new Promise((r,i)=>{e({resolve:r,reject:i,subscribeForTeardown:e=>{t.subscribe(e)}})}),teardown:()=>t.dispatch(void 0)}})(e=>{let{resolve:t,reject:s,subscribeForTeardown:a}=e,d=!1;a(()=>{d=!0,s(new Error("Teardown called"))}),(e=>{let{externalUaasConfig:t,loaderFunctionsStatsWrapper:r,withCredentials:i}=e;return new Promise((e,n)=>{var s,a;const o=Gl(t);t?o.parseUaasConfigError?r.error({error:new ml({code:"LOAD_VAS_MODULE_PARSE_EXTERNAL_UAAS_CONFIG_ERROR",details:{message:o.parseUaasConfigError.message,vasUaasConfig:t}})}):void 0===(null===(a=null===(s=o.parsedUaasConfig)||void 0===s?void 0:s.flags)||void 0===a?void 0:a.VAS_STABLE_VERSION)&&r.error({error:new ml({code:"LOAD_VAS_MODULE_NO_VAS_STABLE_VERSION_IN_EXTERNAL_AB_FLAGS",details:{vasUaasConfig:t}})}):r.event({name:"LoadVasModule_NoUAAS",data:{}}),o.version?e({uaasConfig:o.parsedUaasConfig,rawUaasConfig:t,version:o.version}):ed(i).then(t=>{var i,n,s;const a=Gl(t);a.parseUaasConfigError?r.error({error:new ml({code:"LOAD_VAS_MODULE_PARSE_LOADED_UAAS_CONFIG_ERROR",details:{message:a.parseUaasConfigError.message,vasUaasConfig:t}})}):void 0===(null===(n=null===(i=a.parsedUaasConfig)||void 0===i?void 0:i.flags)||void 0===n?void 0:n.VAS_STABLE_VERSION)&&r.error({error:new ml({code:"LOAD_VAS_MODULE_NO_VAS_STABLE_VERSION_IN_LOADED_AB_FLAGS",details:{vasUaasConfig:t}})}),e({uaasConfig:a.parsedUaasConfig,rawUaasConfig:t,version:null!==(s=a.version)&&void 0!==s?s:String(t.stableVersion),stableVersion:t.stableVersion})}).catch(n)})})({externalUaasConfig:i,loaderFunctionsStatsWrapper:v,withCredentials:o}).then(e=>{let{uaasConfig:i,rawUaasConfig:o,version:c,stableVersion:g}=e;var S,A;if(d)return;if((e=>{if((e=>{const t=e.document;return"documentMode"in t&&"undefined"!==typeof t.documentMode})(e)||(e=>{const t=e.navigator.userAgent;if(t.indexOf("MSIE ")>0)return!0;if(t.indexOf("Trident/")>0)return!0;if(t.indexOf("Edge/")>0)return!0;return!1})(e))return!0;return!1})(r))return v.event({name:"LoadVasModule_brokeInIE11",probability:Rl,data:{bundleName:l}}),t(void 0);const b={AB_FLAGS_STORE:void 0,AB_FLAGS:null!==(S=null===i||void 0===i?void 0:i.flags)&&void 0!==S?S:{},ICOOKIE:null===i||void 0===i?void 0:i.iCookie,TEST_IDS:He(y,null===i||void 0===i?void 0:i.testIds),VAS_UAAS_CONFIG:i,ActiveTestIds:n,AdditionalStatsRootFields:f,VSID:m,VAS_USER_SESSION_RANDOM:Ul,STATS_ROOT_PARAMS:{},loaderLoadedFromAnYandexRu:void 0,loaderLoadedFromYaRu:void 0,grWasSent:void 0,productTheme:u,pageId:h,impId:p},E=e=>{const{promise:t,teardown:i}=(e=>{let{moduleName:t,version:r,win:i,scriptSessionParams:n}=e;var s;const a=ht(t,i);if(a)return{promise:Promise.resolve(a),teardown:ze};const o=$l({version:r,bundleName:t,win:i,ecmaVersion:null!==(s=Ol.adsdkecmaver)&&void 0!==s?s:zl}),{promise:l,teardown:d}=vt({src:o,win:i,onBeforeLoad:e=>{(e=>{e.crossOrigin="anonymous"})(e),((e,t)=>{e.__AD_SDK_SCRIPT_SESSION_PARAMETERS__=t})(e,n)}});return{promise:l.then(()=>ht(t,i)),teardown:d}})({moduleName:l,scriptSessionParams:b,version:e,win:r});return a(i),t},w=e=>{v.event({name:"LoadVasModule_ModuleLoaded",probability:Rl,data:{bundleName:l}}),t(e)},k=null!==(A=Ol.adsdkver)&&void 0!==A?A:c;E(k).then(w).catch(e=>{if(k===String(g))throw e;return v.error({error:new ml({code:"LOAD_VAS_MODULE_CANNOT_LOAD_MODULE_WITH_UAAS_VERSION",details:{vasUaasConfig:o}})}),g?E(String(g)).then(w):ed().then(e=>String(e.stableVersion)).then(E).then(w)}).catch(s)}).catch(s)})})({serviceName:"player",serviceVersion:"1.0-13565",config:Et({},t,{withCredentials:!i,additionalCustomRootFields:{vsid:r,contentPlayerVersion:"1.0-13565",testIds:null==(n=t.additionalParams)?void 0:n.slots}}),win:e,moduleName:"Multiroll"}).promise;return a.then(()=>{s&&bt("adsdk.multiroll.full")}).catch(As.Z),a}function kt(e){return e.split("\n").reduce((e,t)=>{const r=t.match(cd);if(!r){const r=e[e.length-1];return r&&(r.bullets=r.bullets||[],r.bullets.push(t)),e}const i=r[0],n=t.replace(i,"").trim();return e.push({start:Ct(i),title:n}),e},[])}function Ct(e){const[t,r,i]=e.split(":").map(Number).reverse();return i?t+60*r+3600*i:t+60*r}function Pt(e,t){return void 0===e&&(e=window),void 0===t&&(t=e.HTMLVideoElement&&e.HTMLVideoElement.prototype||{}),aa.filter(e=>{let{enabled:r}=e;return r in t})}function Tt(e,t){const r=ve(e);if(r.length>0)return r[0];const i=Pt(e,t);return i.length>0?i[0]:void 0}function It(e,t){const r=Tt(e,t);if(!r)return null;let i=e.document[r.element];return t&&t[r.element]&&(i=t),i||null}function _t(e,t){return e.map(e=>({adViewer:e,additionalData:{},adType:t}))}function Ot(e){return e.reduce((e,t)=>e+t.getAdDuration(),0)}function Rt(){return(Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function Dt(e){return Boolean(e&&e.adType===Cd.inroll)}function xt(e,t){const{ad:{originalBroadcastAdCues:r}}=e,i=r[t];if(i){const{start:e}=i;if(void 0===e)return;const{end:t=e+Rd}=i;return{start:e,end:t}}}function Nt(e){const{ad:{originalBroadcastAdCues:t,adInfo:r}}=e;return Dt(r)?r.params.cueId:(0,da.Z)(t).find(t=>function(e,t){const{controller:{currentTime:r,programDateTime:i}}=e;if(void 0===i)return!1;const n=i/1e3+r,s=xt(e,t);if(!s)return!1;const{start:a,end:o}=s;return a<=n&&n<=o}(e,t))}function Vt(e){const{controller:{currentTime:t,programDateTime:r}}=e;return void 0===r?r:r+1e3*t}function Lt(e,t){return Math.max(e+1e4,t+5e3)}function Ft(e){let{cue_id:t,pts:r,offset:i,cutoff:n}=e;const s=r+i;return{start:s,isEndReceived:void 0!==n,cueId:t,end:void 0!==n?r+n:Lt(r,s),isValid:!0,invalidateReason:void 0}}function Mt(){return(Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function jt(){return(jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function Bt(e){void 0===e&&(e=window);try{return e.ya.videoAd.getBundleVersion()}catch(t){return"none"}}function Ut(e){void 0===e&&(e=window);try{return e.ya.videoAd.getModuleVersion()}catch(t){return"none"}}function Yt(e){const{audioTrackValue:t,audioTracks:r}=e.controller;return r.find(e=>{let{value:r}=e;return r===t})}function Ht(e){const{textTrackValue:t,textTracks:r}=e.controller;return r.find(e=>{let{value:r}=e;return r===t})}function Wt(){return(Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function qt(e){const{videoTrackValue:t,videoTracks:r,isAbrEnabled:i}=e.controller,n=r.find(e=>{let{value:r}=e;return r===t});if(n)return Wt({},n,{auto:i})}function Gt(e){let{videoType:t,currentTime:r,dvrStartTime:i,dvrDuration:n,engine:s}=e;const a=s===ic.$.NATIVE,o=a?tc:on,l=a?rc:$d;if(void 0===t||t===Jd.D.VOD)return o;const d=i+n-Xd.W;if(n===1/0||r>d)return ec;if(t!==Jd.D.LIVE)return o;return i+(0===r?0:10)>r?l:o}function zt(){return(zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function Kt(e,t){if(!e||!e.height||!e.width||!t)return"unknown";const r=t.getMaxCapAllowedVideoTrack();return r&&r.height&&r.width?r.width===e.width&&r.height===e.height?"same":r.width>e.width||r.height>e.height?"smaller":r.width<e.width||r.height<e.height?"larger":"unknown":"unknown"}function Qt(){return(Qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function Zt(e){const t=function(e){return e.filter(g).map(e=>{let{supportInfo:t}=e;return t.noSupportReason})}(e),r={details:{streams:e},isFatal:!0};if(Ha(t,e=>e===gc.INVALID_STREAM_URL))return new Bd.x(Qt({},r,{code:"INVALID_STREAM_URL"}));if(Ha(t,e=>e===gc.NO_SUPPORTED_DRM))return new Js.s(Qt({},r,{code:"NO_DRM"}));if(Ha(t,e=>e===gc.NO_CODECS))return new Sc.E(Qt({},r,{code:"NO_CODECS"}));return Ha(t,e=>e===gc.NO_MSE)?fc.x?new yc.c(Qt({},r,{code:"NO_PLAYABLE_STREAMS"})):new Zs.a(Qt({},r,{code:"NO_MSE"})):new yc.c(Qt({},r,{code:"NO_PLAYABLE_STREAMS"}))}function Jt(e){void 0===e&&(e=window);const t=(0,za.i)(e).toLowerCase();return/yandexstation.*yandexio/.test(t)||/station.*crosswalk/.test(t)}function Xt(e){const t=(0,bc.n)(e.stream.drmConfig);if((0,hn.RW)("web_force_hls_js")&&Ic.e&&!t&&!e.preferNative&&!Jt())return ic.$.HLS;return e.preferNative||Jt()||(0,Tc.z)()||t?ic.$.NATIVE:ic.$.HLS}function $t(){const e={};return Oc.forEach(t=>{Rc.forEach(r=>{var i;e["video/"+t+"/"+r]=(0,_c.N)("video/"+t+'; codecs="'+r+'"'),e["mse-video/"+t+"/"+r]=null!=(i=null==Ec?void 0:Ec.isTypeSupported("video/"+t+'; codecs="'+r+'"'))&&i})}),Dc.forEach(t=>{xc.forEach(r=>{var i;e["audio/"+t+"/"+r]=(0,_c.N)("audio/"+t+'; codecs="'+r+'"'),e["mse-audio/"+t+"/"+r]=null!=(i=null==Ec?void 0:Ec.isTypeSupported("audio/"+t+'; codecs="'+r+'"'))&&i})}),e["audio/plain/flac"]=(0,_c.N)("audio/flac"),e}function er(){return(er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function tr(){return(tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function rr(e){if(!wc(e))return!1;const t=(0,Ua.P)(e);if(t&&function(e){void 0===e&&(e=window);return/YandexSearch|YaSearchBrowser|YaApp_iOS|YaApp_Android/i.test((0,za.i)(e))}(e))return!1;const r=function(e){return he("YaBrowser",e)}(e);if(void 0===r)return!1;const[i,n,s,a]=r;if(i<18)return!0;if(18===i){if(n>4)return!1;if(t&&s<3)return!0;if((0,Ba.C)(e)&&(s<1||!a||a<=526))return!0}return!1}async function ir(){const e=[];return await Promise.all(Yc.map(async t=>{try{await window.navigator.requestMediaKeySystemAccess(t,Wc._),e.push(t)}catch(r){}})),e}function nr(){const e=[];return Yc.forEach(t=>{window.MSMediaKeys.isTypeSupported(t)&&e.push(t)}),e}function sr(e){let{video:t}=e;const r=[];return Yc.forEach(e=>{t.canPlayType("video/mp4",e)&&r.push(e)}),r}async function ar(e){return(0,jc.A)()&&!((0,Mc.g)()||function(e){void 0===e&&(e=window);return md(e)&&/Google Inc/.test(e.navigator.vendor)&&!wc(e)}()||wc())?{supportedDrmSystems:[],detectionMethod:qc.YandexBrowserLinux}:rr()?{supportedDrmSystems:[],detectionMethod:qc.OldYandexBrowser}:"function"===typeof window.navigator.requestMediaKeySystemAccess?{supportedDrmSystems:await ir(),detectionMethod:qc.requestMediaKeySystemAccess}:"function"===typeof window.MSMediaKeys?{supportedDrmSystems:nr(),detectionMethod:qc.MSMediaKeys}:e.video.webkitGenerateKeyRequest?{supportedDrmSystems:sr(e),detectionMethod:qc.GenerateKeyRequest}:{supportedDrmSystems:[],detectionMethod:qc.NotAvailable}}async function or(e,t){const{servers:r={}}=e,i=(0,da.Z)(r);if(0===i.length)return!1;const n=await Qc({video:t});return Ha(i,e=>-1!==so(n,e))}function lr(){const e=Zc.canPlayType('video/mp4;codecs="avc1.4D481F"');return e?{supported:!0,engine:ic.$.MP4}:{supported:!1,debugInfo:{checkedCodec:'video/mp4;codecs="avc1.4D481F"',isCodecSupported:e,codecs:$t()},noSupportReason:gc.NO_CODECS}}function dr(e){var t;const r=void 0!==e.stream.drmConfig,i=(null==(t=e.stream.drmConfig)?void 0:t.servers)||{},n=Xc.some(e=>e in i);return!(r&&!n)&&(0,Ac.DZ)(e.stream.url)}function cr(){return(cr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}async function ur(t){const{stream:r,video:i,preferNative:n}=t,{drmConfig:s,url:a}=r;if(!(t=>{{const{isStreamValid:r}=e(96568);return(0,zn.sD)(t)&&r(t)}})(a))return{supported:!1,debugInfo:{cloud:!1},noSupportReason:gc.INVALID_STREAM_URL};const o=(0,Ac.DZ)(a),l=(0,Ac.dA)(a);if((0,Ac.OI)(a))return lr();if(!o&&!l)return{supported:!1,debugInfo:{},noSupportReason:gc.NO_SUPPORTED_FORMAT};const d=o?$c||($c=await Pc().then(()=>Jc).catch(e=>({supported:!1,debugInfo:(0,Nc.V)(e)?{message:e.message,stack:e.stack}:{message:"Unknown error while get support info",errorString:String(e)},noSupportReason:gc.NO_MSE}))):await async function(e){try{0,void 0===Fc&&(Fc=await Pc());const t=Fc.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');return t?fc.x?{supported:!0,engine:Xt(e)}:(0,bc.n)(e.stream.drmConfig)?{supported:!1,debugInfo:{IS_HLS_NATIVE_SUPPORTED:fc.x},noSupportReason:gc.NO_SUPPORTED_DRM}:Lc:fc.x?Vc:{supported:!1,debugInfo:{checkedCodec:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"',isCodecSupported:t,hasMse:!0,codecs:$t(),IS_HLS_NATIVE_SUPPORTED:fc.x},noSupportReason:gc.NO_CODECS}}catch(t){return fc.x?Vc:{supported:!1,debugInfo:er({},(0,Nc.V)(t)?{message:t.message,stack:t.stack}:{message:"Unknown error while get support info",errorString:String(t)},{codecs:$t()}),noSupportReason:gc.NO_MSE}}}({stream:r,preferNative:n});if(!d.supported)return d;if(void 0===s||!(0,fi.K)(s))return dr({stream:r})?cr({},d,{engine:ic.$.YASP}):d;const c=await or(s,i);return c?dr({stream:r})?cr({},d,{engine:ic.$.YASP}):d:{supported:!1,debugInfo:{isStreamDRMSupported:c,previousSupportInfo:d},noSupportReason:gc.NO_SUPPORTED_DRM}}function hr(e){const t=tn(e);if(0===t.length)return;const r=t.find(e=>{let{supportInfo:t}=e;return t.engine===ic.$.NATIVE}),i=function(e){var t;const r=e.filter(e=>e.supportInfo.engine===ic.$.YASP);if(0===r.length)return null;const i=r[0],n=null==(t=i.stream.drmConfig)?void 0:t.servers;if(!n||ru.some(e=>e in n))return i;if(qn.xE in n){return r.find(e=>ru.some(t=>{var r,i;return null==(r=e.stream.drmConfig)||null==(i=r.servers)?void 0:i[t]}))||i}return i}(t),n=(0,eu.R)().major>=15,s=(0,tu.o)().major>17||17===(0,tu.o)().major&&(0,tu.o)().minor>=1;if((0,Tc.z)()&&!n&&!s&&r)return r;if(i)return i;const a=t.find(e=>{let{supportInfo:t}=e;return t.engine!==ic.$.MP4});return a||t[0]}async function pr(e,t){if(0===e.streams.length)return{status:"error",error:new Bd.x({code:"NO_STREAMS",details:{},isFatal:!0}),streamsWithSupportInfo:[]};const r=await function(e){let{streams:t,video:r,preferNative:i}=e;return Promise.all(t.map(async e=>({stream:e,supportInfo:await ur({stream:e,video:r,preferNative:i})})))}(e),i=hr(r);if(!i)return{status:"error",error:Zt(r),streamsWithSupportInfo:r};return r.find(e=>{var t;return v(e.supportInfo)&&"MSE didn't emit sourceopen event in 1 second"===(null==(t=e.supportInfo.debugInfo)?void 0:t.message)})&&t({event:Ji.u.SourceOpenEventTimeout,params:{}}),{status:"success",supportedStream:i,streamsWithSupportInfo:r}}async function mr(e,t){const r=function(e){if(!(0,nu.o)(e))return;const{protocol:t,host:r}=(0,zn.en)(e);return t+"//"+r+"/ping"}(e);return async function(e,t){try{return await(0,Ls.W)({url:e,withCredentials:t,method:"GET",checkStatus:e=>0!==e,retries:3}),!1}catch(r){return!0}}(r||(0,zn.Ou)((0,iu.c)(e),"abd","1"),!(0,wi.H)(r)&&t)}function vr(){return(vr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function fr(e){const{additionalParams:t=Yn}=e;if(!(0,fi.K)(e.adConfig))return;const{partnerId:r,adBreaks:i}=e.adConfig;return r||i?vr({},e.adConfig,{additionalParams:t}):void 0}function gr(e){if(void 0===e||isNaN(e))return"unknown";for(let t=0;t<au.length;t++)if(e<au[t].end)return au[t].name;return"unknown"}function yr(e,t){return t&&"boolean"===typeof t.withCredentials?t.withCredentials:!!(0,nu.o)(e.url)||lc.withCredentials}function Sr(e){if(void 0===e||isNaN(e))return"unknown";for(let t=0;t<ou.length;t++)if(e<ou[t].end)return ou[t].name;return"unknown"}function Ar(e){return e[0]}function br(e){return Array.isArray(e)}function Er(e){const t=Dn.KK.getItem("playerapi-numbers-session-storage-key"),r=(0,Fi.Y)(()=>JSON.parse(t||""));return function(e,t){const r=e.find(e=>!!br(e)&&Ar(e)===t);return void 0===r?void 0:r[1]}(Array.isArray(r)?r:[],e)}function wr(e,t){const r=Dn.KK.getItem("playerapi-numbers-session-storage-key"),i=(0,Fi.Y)(()=>JSON.parse(r||"")),n=Array.isArray(i)?i:[];Dn.KK.setItem("playerapi-numbers-session-storage-key",JSON.stringify(function(e,t,r){const i=function(e,t){return[e,t]}(t,r),n=e.findIndex(e=>!!br(e)&&Ar(e)===t);for(0===n?e[0]=i:(n>0&&e.splice(n,1),e.splice(0,0,i));10<e.length;)e.pop();return e}(n,e,t)))}function kr(e,t){try{e.details||(e.details={}),e.details.stage=t}catch(r){}}function Cr(e,t,r){uu.forEach(e=>{t?r.removeAttribute(e):r.setAttribute(e,function(e){switch(e){case"pip":return"false";case"disablePictureInPicture":case"x-yandex-pip":default:return"true"}}(e))})}function Pr(e,t){return e.responseStart-t.responseStart}function Tr(e){return e.responseStart-e.requestStart}function Ir(){if("undefined"===typeof window.performance)return NaN;const e=pu.B.reduce((e,t)=>(0,hu.Z)(e,function(e){try{return e.performance.getEntriesByType("resource").filter(e=>{let{name:t,transferSize:r,responseStart:i,requestStart:n}=e;return"string"===typeof t&&r>0&&i>0&&n>0})}catch(t){return[]}}(t),Pr),[]).filter(e=>{let{name:t}=e;return mu.j.test(t)});return 0===e.length?NaN:e.reduce((e,t)=>(1.3*e+.7*Tr(t))/2,Tr(e[0]))}function _r(e){if(e in fu)return fu[e];const t=document.createElement("link");return t.rel="preload",t.as="script",fu[e]=new Promise((r,i)=>{t.onload=r,t.onerror=i,t.href=e,t.crossOrigin="anonymous",vu.appendChild(t)}).then(()=>{fu[e]=Promise.resolve()}).catch(()=>{delete fu[e],vu.removeChild(t)}),fu[e]}function Or(){return(Or=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function Rr(t,r){t.supportInfo.engine===ic.$.HLS?(e.e(703).then(e.bind(e,33759)),_r(hi.v)):t.supportInfo.engine===ic.$.YASP?(e.e(241).then(e.bind(e,60377)),gu.e.setWorkerConfig(Or({},yu.l,r)),gu.e.warmUp()):t.supportInfo.engine===ic.$.NATIVE?e.e(498).then(e.bind(e,60479)):t.supportInfo.engine===ic.$.MP4&&e.e(40).then(e.bind(e,61196))}function Dr(e){return e&&o(e)||window}function xr(e){void 0===e&&(e=window);const t=(0,za.i)(e).match(/YaBrowser\/([\d]+)\.([\d]+)/);if(!t)return{major:-1,minor:-1};const[,r,i]=t;return{major:parseInt(r,10),minor:parseInt(i,10)}}function Nr(){return wc(window)&&!(0,Ua.P)(window)&&!Ya}function Vr(e,t){return function(e,t){if(!e)return;let r=e.parentElement;for(let i=t;i>0;i--)r=r&&r.parentElement;return r||void 0}(t.getElementById(je(e)),2)}function Lr(e,t){return void 0===e?void 0===t:"auto"in e&&!0===e.auto?t===Ou.A:e.value===t}function Fr(e,t,r){void 0===r&&(r=zi());let i=t;return function(){var t;if(0===arguments.length)return;const n=(t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t],s=r(n,i)||Number.isNaN(n)&&Number.isNaN(i);return s?void 0:(i=n,e(...arguments))}}function Mr(e,t){const{controller:{textTrackValue:r,textTracks:i,userTextTrackName:n,userTextTrackLang:s}}=e.getState();if(r)return void t.setTextTrack(r);const a=(0,Ru.Y)(i,{name:n,lang:s})||function(e){if(0===e.length)return;const t=function(e,t){if("string"!==typeof t)return;const r=t.split("-")[0].toLowerCase();for(let i=0;i<e.length;i++){const t=e[i];if(t.name.toLowerCase()===r)return t}}(e,navigator.language);return void 0!==t?t:e[0]}(i);void 0===a?Td.Y.error("No text tracks to enable"):t.setTextTrack(a.value)}function jr(e,t){const r=e.getState(),{skin:{nativeControlsVisibility:i},controller:{textTrackEnabled:n,nativeTextTrackVisible:s,isPip:a}}=r,o=void 0===s||s||a||Boolean(i&&n);t.toggleNativeSubtitles(o)}function Br(e,t){const{skin:{hiddenControls:r}}=e.getState();t.setHiddenControls(r)}function Ur(e,t){const r=e.getState(),{controller:{videoType:i,playbackRate:n,encoderState:s}}=r;i!==Jd.D.VOD&&s===Kd.y.Attached&&((0,nc.I)(r)||(n>1+Nu._y?function(e){const{controller:{currentTime:t,bufferingRanges:r,engine:i},skin:{skinDVRStartTime:n,skinDVRDuration:s}}=e;if(0===r.length)return!1;const a=i===ic.$.NATIVE?5:0;return s===1/0||t>n+s-a}(r)&&t.setPlaybackRate(an.mw):!function(e){const{controller:{currentTime:t,dvrStartTime:r,dvrDuration:i}}=e;return t<r||t>r+i}(r)&&function(e){const{controller:{videoType:t}}=e;if(t!==Jd.D.LIVE)return!1;const{controller:{currentTime:r},skin:{skinDVRStartTime:i}}=e;return i+(0===r?0:Xd.W)>r}(r)&&t.setPlaybackRate(an.mw)))}function Yr(e){return"number"!==typeof(t=Math.floor(2*e)/2)||isNaN(t)||!isFinite(t)?0:t;var t}async function Hr(e,t){const{controller:{autoplay:r,encoderState:i}}=e.getState();r&&i===Kd.y.Attached&&await t.play().catch(As.Z)}function Wr(e){const t=function(e){return(0,nu.o)(e)&&(0,zn.en)(e).pathname.slice(1).split("/")[1]||""}(e);return{channel:t,metaInfoUrl:"https://strm.yandex.net/kal/"+t+"/break/last?start_ts={{video-timestamp}}"}}function qr(e,t){const r=e.height||0;return(t.height||0)-r}function Gr(e){if((0,Tc.z)())return null;try{const{windowChain:t}=(0,_a.T)(e.ownerDocument.defaultView);if(t.some(e=>{const{hasBeenActive:t}=(0,Fi.Y)(()=>function(e){const t=e.navigator;if(!t)return;const{userActivation:r}=t;if(!(0,fi.K)(r))return;const{isActive:i,hasBeenActive:n}=r;return{isActive:i,hasBeenActive:n}}(e))||{hasBeenActive:!1};return t}))return{muted:!1,allowed:!0,detectionMethod:"NavigationActive"}}catch(t){}return null}async function zr(e,t,r){return r.stopped?null:((0,zu.s)(e,()=>{e.load()}),(0,Tc.z)()&&(await(0,Lu._)(0),r.stopped)?null:(e.src=Ju,e.muted=t,e.volume=t?0:1,new Promise(i=>{(0,Ku.b)(e,{useProgressEvent:!0,timeoutForNonPromisePlay:500}).then(e=>{if(r.stopped)return i(null);i({muted:t,allowed:!0,detectionMethod:"RealPlayPolicy|"+e})}).catch(()=>{if(r.stopped)return i(null);const n=(0,Qu.Q)(e);n&&n.code===Zu.y.MEDIA_ERR_DECODE?setTimeout(()=>{if(r.stopped)return i(null);i({muted:t,allowed:!0,detectionMethod:"RealPlayPolicy|OldBrowser"})},0):i(null)})})))}function Kr(e,t){let{content:r,size:i}=void 0===t?{}:t;const n=e.ownerDocument.createElement("iframe");n.scrolling="no",n.setAttribute("allowfullscreen",""),n.style.display="block",i&&(n.height=i.height,n.width=i.width),e.appendChild(n);const s=n.contentDocument;s.open(),r&&s.write(r),s.close();try{s.body.style.margin="0"}catch(a){}return n.style.borderWidth="0",n}function Qr(e,t){if(void 0===t&&(t=window),!t||!t[e]||!t[e].prototype)return;const{play:r}=t[e].prototype;return r&&(0,Mi.t)(r)?r:void 0}function Zr(e,t){var r,i,n,s;let{initialMuted:a,checkMuted:o,checkUnmuted:l,process:d}=t;if(!o&&!l)return{muted:a,allowed:!1,detectionMethod:"NoCheck"};const{muted:c,paused:u,volume:h}=e,m=e.getAttribute("src"),v=()=>{null===m?e.removeAttribute("src"):e.setAttribute("src",m),e.load(),e.muted=c,e.volume=h,u?e.pause():e.paused&&(0,Ui.v)(function(e){if(!Xu.Y)return Promise.reject(new Error("No html5 video support"));const t=(r=e.play).__yaMuffleVideoPlayPromiseOriginalPlay||r;var r;if((0,Mi.t)(t))return t.call(e);const i=Qr("HTMLVideoElement")||Qr("HTMLMediaElement");if(i)return i.call(e);const n=document.createElement("div");n.style.display="none",document.body.appendChild(n);const s=Qr("HTMLMediaElement",Kr(n).contentWindow);if(s){const t=s.call(e);return p(n),t}return e.play()}(e))},f=null!=(r=null!=(i=null!=(n=null!=(s=null!=null?null:Gr(e))?s:function(e,t){let{checkMuted:r,checkUnmuted:i}=t;try{if("boolean"===typeof e.allowedToPlay){const t=e;if(i&&(t.muted=!1,t.volume=1,t.allowedToPlay))return{muted:!1,allowed:!0,detectionMethod:"YandexBrowser"};if(r)return t.muted=!0,t.volume=0,{muted:!0,allowed:t.allowedToPlay,detectionMethod:"YandexBrowser"}}}catch(n){}return null}(e,{checkMuted:o,checkUnmuted:l}))?n:function(e){try{switch(navigator.getAutoplayPolicy(e)){case"allowed":return{muted:!1,allowed:!0,detectionMethod:"NavigatorAutoplayPolicy"};case"allowed-muted":return{muted:!0,allowed:!0,detectionMethod:"NavigatorAutoplayPolicy"};case"disallowed":return{muted:!1,allowed:!1,detectionMethod:"NavigatorAutoplayPolicy"};default:return null}}catch(t){return null}}(e))?i:(0,Gu.N)()>-1&&(0,Gu.N)()<=16?{muted:!1,allowed:!0,detectionMethod:"IEPolicy"}:null)?r:(0,Ua.P)()&&(0,tu.o)().major<=9?{muted:!1,allowed:!1,detectionMethod:"IosTill9Policy"}:null;if(null===f){if(l)return zr(e,!1,d).then(t=>null!=t?t:o?zr(e,!0,d):null).then(e=>null!=e?e:{muted:a,allowed:!1,detectionMethod:"RestUnmuted"}).then(e=>(v(),e));if(o)return zr(e,!0,d).then(e=>null!=e?e:{muted:a,allowed:!1,detectionMethod:"RestMuted"}).then(e=>(v(),e))}return v(),null!=f?f:{muted:a,allowed:!1,detectionMethod:"Default"}}function Jr(){return(Jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function Xr(e,t){const r="cover"===t.objectFit?{transform:"translate(-1px, -1px)",height:"calc(100% + 2px)",width:"calc(100% + 2px)"}:{transform:"",height:"",width:""};a(e,Jr({},"objectFit"in t?r:{},t))}function $r(){return($r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function ei(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}function ti(){return(ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function ri(e){void 0===e&&(e=document);const t=e.getElementById("ya-video-playerapi-mock-frame");if(t)return t;const r=function(e){const t=Kr(e);return t.width="0",t.height="0",t.style.position="absolute",t}(e.body);return r.id="ya-video-playerapi-mock-frame",r}function ii(e){void 0===e&&(e={});const r=U(e.version)||_s,i=[t(Ts?Eh.PLAYER_API_MODERN:Eh.PLAYER_API,r,"1.0-",e.useAbdBundle||!1)];if(Be(e)){var n;const t=(null==(n=e.source)?void 0:n.adConfig)||{};(e=>{var t;const{win:r,config:{vasUaasConfig:i},moduleName:n}=e,{version:s}=Gl(i);if(void 0===s)return[];return[{src:$l({version:s,bundleName:n,win:r,ecmaVersion:null!==(t=Ol.adsdkecmaver)&&void 0!==t?t:zl}),type:"script"}]})({win:window,config:t,moduleName:"Multiroll"}).forEach(e=>{let{src:t}=e;i.push(t)})}return Promise.all(i.map(_r)).then(()=>i)}function ni(e,r){void 0===r&&(r=window),ii(e);try{const i=function(e,r){let{version:i,useAbdBundle:n,usePlayerApiMock:s}=e;const a=U(i,r),o=Y(a,s);return t(o,a||_s,"1.0-",Boolean(n))}(e,window);return void 0===wh&&(wh=(0,bh.T)({win:r,src:i,retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{e.crossOrigin="anonymous"},checkLoad:()=>{try{var e,t;return(0,vi.m)(null==(e=r.Ya)||null==(t=e.playerApi)?void 0:t.create)}catch(i){return!1}}})),{promise:wh,bundleUrl:i}}catch(i){return{promise:Promise.reject(i),bundleUrl:""}}}function si(){return(si=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function ai(e){const t=si({},e,{element:"string"===typeof e.element?document.getElementById(e.element):e.element}),r=ri(document).contentWindow,i=(0,pi.K)(),{setReadyInstance:n,setInstance:s}=i,a=function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(i,kh);return ni(t,r).promise.then(()=>{const e=r.Ya.playerApi.create(t);n(e),s(e)}),a}var oi=e(43546),li=e(12693),di=e(35276),ci=e(91761),ui=e(46869),hi=e(20340),pi=e(90957),mi=e(88114),vi=e(53159),fi=e(76101),gi=e(17988),yi=e(42466),Si=e(2646),Ai=e(58528),bi=e(58884);const Ei=["setReadyInstance","setInstance"];var wi=e(16187);let ki;const Ci=(void 0===(Pi=window)&&(Pi=window),ki||(ki=Pi.document.createElement("div")),ki);var Pi;const Ti=(e,t)=>{const r="undefined"!==typeof Ci.style[e];if(r&&t&&(0,wi.H)(t))try{Ci.style.cssText=e+": "+t+";";const r=Boolean(Ci.style.cssText);return Ci.style.cssText="",r}catch(i){return!1}return r},Ii=["","webkit","moz","o","ms"],_i={},Oi=function(e){return void 0===e&&(e=""),_i[e]||function(e){const t=""+e[0].toUpperCase()+e.slice(1);for(let r=0;r<Ii.length;r++){const i=Ii[r],n=i?""+i+t:e;if(Ti(n))return _i[e]=n}return _i[e]=e}(e)};var Ri=e(29003),Di=e(60375),xi=e(66061);const Ni=function e(t,r){void 0===r&&(r={preserveConstructors:!0});let i=t;if((0,Ri.k)(t)){return t.map(t=>e(t,r))}return(n=t)instanceof Date||"Date"===(0,Di.M)(n)?new Date(t.getTime()):(!(0,vi.m)(t)&&(0,fi.K)(t)&&(i=r.preserveConstructors?Object.create(t):{},(0,xi.M)(t,(t,n)=>{i[n]=e(t,r)})),i);var n},Vi=e=>{try{return"display"in l(e)}catch(t){return!1}};var Li=e(70286),Fi=e(86673),Mi=e(53878);const ji=e=>function(e){return e instanceof Promise||"Promise"===(0,Di.M)(e)&&Boolean((0,Fi.Y)(()=>(0,Mi.t)(e.constructor)))}(e)||(e=>Boolean((0,Fi.Y)(()=>(0,vi.m)(e.then)&&(0,vi.m)(e.catch))))(e);var Bi=e(66169),Ui=e(36354),Yi=e(82486);const Hi=(0,e(68996).A)(document.documentElement);var Wi=e(17338),qi=e(90015),Gi=e(70627),zi=e.n(Gi);let Ki;!function(e){e.OFFLINE="offline",e.IDLE="idle",e.ATTEMPT="attempt",e.PLAYING="playing",e.ERROR="error"}(Ki||(Ki={}));var Qi=e(54932),Zi=e(9610),Ji=e(73175),Xi=e(4018),$i=e(72942);let en;!function(e){e.SetMuted="SetMuted",e.SetVolume="SetVolume",e.RequestAutoplaySettings="RequestAutoplaySettings",e.VolumeChangeEvent="VolumeChangeEvent",e.RestoreSavedMuted="RestoreSavedMuted"}(en||(en={}));const tn=e=>e.filter(f);var rn=e(93966),nn=e(5929);let sn;!function(e){e.PublicApiCall="PublicApiCall",e.Unload="Unload",e.PlayerContainerNotFound="PlayerContainerNotFound"}(sn||(sn={}));var an=e(93247);const on={min:0,max:1/0},ln="0000000000000000000000000000000000000000000000000000000000000000",dn={state:$i.M.NOT_PLAYING,type:void 0,adParams:{}},cn={source:void 0,stream:void 0,drmSystem:void 0,startStage:Qi.o.init,playingState:qi.X.PAUSE,playingStateReason:Xi.l.Unknown,videoType:void 0,utcStartTime:void 0,currentTime:NaN,watchedTime:0,dvrStartTime:NaN,dvrDuration:NaN,duration:NaN,volume:NaN,muted:!1,volumeChangeReason:void 0,isFullscreen:!1,pictureInPictureAllowed:!1,isPictureInPicture:!1,isVisible:!1,videoSize:void 0,videoTracks:[],videoTrack:void 0,audioTracks:[],audioTrack:void 0,textTracks:[],textTrack:void 0,subtitles:[],vsid:ln,error:void 0,playbackRateRange:on,playbackRate:an.mw,version:"1.0-13565",adState:dn,adSkippableState:!1,adVolumeAvailabilityState:!1,adPodCloseState:void 0,adPodCurrentTime:NaN,adPodTimeToSkip:NaN,adPodDuration:NaN,nextAdRemainingTime:void 0,bufferedRanges:[],tileMetaInfo:void 0,tileMetaInfoUrl:void 0,liveLatency:void 0,connectionQuality:void 0,ugcLiveStatus:void 0};let un;!function(e){e[e.LOADING=0]="LOADING",e[e.READY=1]="READY",e[e.ERROR=2]="ERROR"}(un||(un={}));var hn=e(65705),pn=e(91434),mn=e(60059);const vn=["be","en","id","kk","ru","tr","tt","uk","uz"],fn=mn.zGw(mn.jtO(mn.Z_8(),"ru"),mn.VO0(vn),mn.vs(e=>e)),gn=mn.zGw(mn.jtO(mn.Z_8(),"ru"),mn.tvc(mn.zGw(mn.YjB(),mn.VO0(vn)),"ru"),mn.vs(e=>e)),yn=e=>void 0!==function(e){let t;try{t=JSON.stringify(e)}catch(r){}return t}(e),Sn=mn.jtO(mn.G0j([mn.zGw(mn.O72(),mn.vs(e=>({autoplay:e,allowMuted:!0}))),mn.zGw(mn.Ryn({allowMuted:mn.O72()}),mn.vs(e=>{let{allowMuted:t}=e;return{autoplay:!0,allowMuted:t}}))]),!1);var An=e(11208);const bn=mn.zGw(mn.jtO(mn.G0j([mn.zGw(mn.O72(),mn.vs(e=>({logCalls:e,logEvents:e,logInternals:e,showDebugPanel:e}))),mn.Ryn({logCalls:mn.jtO(mn.O72(),!1),logEvents:mn.jtO(mn.O72(),!1),logInternals:mn.jtO(mn.O72(),!1),showDebugPanel:mn.jtO(mn.O72(),!1)})]),!1),mn.vs(e=>{let{logCalls:t,logEvents:r,logInternals:i,showDebugPanel:n}=e;return{logCalls:(0,hn.RW)("web_debug_log_calls")||(0,An.O)("playerapi-debug-logcalls",S)||t,logEvents:(0,hn.RW)("web_debug_log_events")||(0,An.O)("playerapi-debug-logevents",S)||r,logInternals:(0,hn.RW)("web_debug_log_internals")||(0,An.O)("playerapi-debug-loginternals",S)||i,showDebugPanel:(0,hn.RW)("web_debug_panel")||(0,An.O)("playerapi-debug-panel",S)||n}})),En=mn.jtO(mn.d7q({}));var wn=e(24795);const kn=mn.zGw(mn.Z_8(),mn.vs(e=>{if("!*"===e)throw new Error("!* is forbidden value");for(const t of wn.uM)if(e===t||e==="!"+t)return e;return""})),Cn=mn.zGw(mn.IXX(kn),mn.vs(e=>e.filter(Boolean))),Pn=mn.jtO(mn.zGw(mn.G0j([mn.IXX(kn),mn.zGw(mn.Z_8(),mn.vs(e=>e.split(",").map(e=>e.trim()).filter(e=>""!==e)))]),mn.vs(e=>mn.Qc3(Cn,e))),"");var Tn=e(8580);const In=mn.zGw(mn.jtO(mn._4T(),()=>{}),mn.G0j([mn.zGw(mn.O72(),mn.vs(e=>{if(e)return{onlyMuted:!1,forceAutoplay:!0,threshold:.5}})),mn.zGw(mn.S1Z(),mn.vs(()=>({onlyMuted:!0,forceAutoplay:!1,threshold:Tn.I}))),mn.zGw(mn.cfj({onlyMuted:mn.O72()}),mn.vs(e=>{let{onlyMuted:t}=e;return{threshold:.5,onlyMuted:t,forceAutoplay:!0}})),mn.zGw(mn.Ryn({threshold:mn.zGw(mn.Rxh(),mn.uvs(0),mn.PWS(1)),onlyMuted:mn.jtO(mn.O72(),!1)}),mn.vs(e=>{let{threshold:t,onlyMuted:r}=e;return{threshold:t,onlyMuted:r,forceAutoplay:!0}}))]));const _n=e(18972)._;var On=e(44960);let Rn;!function(e){e.VOLUME="JSPlayerApiSavedUserVolume",e.MUTED="JSPlayerApiSavedUserMuted"}(Rn||(Rn={}));var Dn=e(35634);class xn{static setSavedVolume(e){Dn.tO.setItem(Rn.VOLUME,String(e))}static getSavedVolume(){const e=this.parseVolume(Dn.tO.getItem(Rn.VOLUME));return void 0===e?_n:e}static setSavedMuted(e){Dn.tO.setItem(Rn.MUTED,String(e))}static getSavedMuted(){return"true"===Dn.tO.getItem(Rn.MUTED)}static parseVolume(e){if(!(0,wi.H)(e))return;const t=parseFloat(e);return isNaN(t)?void 0:t>=0&&t<=1?t:t>=0&&t<=100?t/100:void 0}}const Nn=mn.zGw(mn.jtO(mn._4T(),()=>{}),mn.G0j([mn.zGw(mn.Rxh(),mn.BF5(e=>(0,On.A)(e),"must be a number 0..1")),mn.S1Z()]),mn.vs(e=>void 0===e?xn.getSavedVolume():e),mn.vs(e=>(0,On.A)(e)?e:_n)),Vn=mn.Ryn({debug:bn,autoplay:Sn,slowConnection:mn.jtO(mn.O72(),!1),volume:Nn,muted:mn.jtO(mn.O72()),preload:mn.jtO(mn.O72(),!0),autoQuality:mn.jtO(mn.O72(),!0),defaultQuality:mn.jtO(mn.AG3(mn.Rxh()),720),feed:mn.jtO(mn.O72(),!1),stickyEnd:mn.jtO(mn.O72(),!1),shouldEmitFrameRendered:mn.jtO(mn.O72(),!1),useAbdBundle:mn.jtO(mn.O72(),!1),lang:gn,env:En,maxBufferLength:mn.jtO(mn.zGw(mn.Rxh(),mn.BF5(rn.z),mn.vs(ci.my))),enableRemoteProgressSaving:mn.jtO(mn.O72(),!1),preferNative:mn.jtO(mn.O72(),!1),togglePlaybackOnVisibilityChange:In,restoreTabSessionPlaybackProgress:mn.jtO(mn.O72(),!1),useFallbackStream:mn.jtO(mn.O72(),!1),loadSkin:mn.jtO(mn.G0j([mn.ZIn(),mn.i0J(!1)])),perfLogUrl:mn.jtO(mn.Z_8()),allowPip:mn.jtO(mn.O72(),!0),skinParams:mn.jtO(mn.zGw(mn.Ryn({skinConfig:mn.jtO(mn.d7q({hiddenControls:Pn,primaryColor:mn.jtO(mn.Z_8(),"#FFCC00"),secondaryColor:mn.jtO(mn.Z_8(),"#EEEEEE"),timelineThumbColor:mn.jtO(mn.Z_8(),"#FFCC00")}),{})}),mn.BF5(yn))),device:mn.jtO(mn.zGw(mn._4T(),mn.BF5(yn),mn.vs(e=>e)),{}),backgroundColor:mn.jtO(mn.zGw(mn.Z_8(),mn.vs(e=>e||void 0)),"#000"),objectFit:mn.jtO(mn.zGw(mn.Z_8(),mn.vs(e=>e||void 0))),isVisibilitySupported:mn.jtO(mn.O72()),initialVisibility:mn.jtO(mn.O72())}),Ln=wn.uM.filter(e=>e!==wn.th.ALL),Fn=new Set([wn.th.ALL,...Ln,...Ln.map(e=>"!"+e)]),Mn=e=>Fn.has(e);var jn=e(66634);const Bn=mn.zGw(Vn,mn.vs(e=>{var t,r,i,n,s,a;const o=b(null==(t=e.skinParams)||null==(r=t.skinConfig)?void 0:r.hiddenControls),l=0===e.volume||(void 0===e.muted?xn.getSavedMuted():e.muted),d=e.togglePlaybackOnVisibilityChange&&e.togglePlaybackOnVisibilityChange.forceAutoplay||e.autoplay.autoplay,c=null===e.defaultQuality?e.defaultQuality:Math.floor(e.defaultQuality/9*16),u=(0,jn.z)();return{streamPlayerParams:{debug:e.debug.logInternals,hidden:!1===e.loadSkin?o:wn.uM,allowPip:e.allowPip,autoplay:!u&&d,allowMuted:e.autoplay.allowMuted,lang:e.lang,autoQuality:e.autoQuality,defaultQuality:c,feed:e.feed,stickyEnd:e.stickyEnd,shouldEmitFrameRendered:e.shouldEmitFrameRendered,preload:!u&&e.preload,togglePlaybackOnVisibilityChange:e.togglePlaybackOnVisibilityChange,restoreTabSessionPlaybackProgress:e.restoreTabSessionPlaybackProgress,maxBufferLength:e.maxBufferLength,preferNative:e.preferNative,skinConfig:null==(i=e.skinParams)?void 0:i.skinConfig,backgroundColor:e.backgroundColor,shouldPlayOnFirstClick:void 0===e.loadSkin&&A(o),device:e.device,volume:e.volume,muted:l,slowConnection:e.slowConnection,showUnmuteButtonForAll:!1,perfLogUrl:null!=(n=e.perfLogUrl)?n:"https://log.strm.yandex.ru/perf",isVisibilitySupported:e.isVisibilitySupported,initialVisibility:e.initialVisibility},useAbdBundle:e.useAbdBundle,useFallbackStream:e.useFallbackStream,debugConfig:e.debug,loadSkin:e.loadSkin,originalHiddenControls:o,primaryColor:null==(s=e.skinParams)||null==(a=s.skinConfig)?void 0:a.primaryColor,objectFit:e.objectFit,savedMutedRestored:void 0===e.muted&&0!==e.volume}})),Un="other",Yn={from:Un,reqid:void 0,hash:void 0,vsid:ln};var Hn=e(11874),Wn=e(16899),qn=e(80188),Gn=e(14690),zn=e(34118);const Kn=0,Qn=["partnerId","partner_id","category","impId","imp_id","hasPreroll","videoContentId","video_content_id","videoContentName","video_content_name","videoPublisherId","video_publisher_id","videoPublisherName","video_publisher_name","videoGenreId","video_genre_id","videoGenreName","video_genre_name","distrId","distr_id","adBreaks"],Zn=mn.jtO(mn.zGw(mn.d7q({}),mn.vs((function(e){const{partnerId:t,partner_id:r=t,category:i=Kn,impId:n,imp_id:s=n,hasPreroll:a,videoContentId:o,video_content_id:l=o,videoContentName:d,video_content_name:c=d,videoPublisherId:u,video_publisher_id:h=u,videoPublisherName:p,video_publisher_name:m=p,videoGenreId:v,video_genre_id:f=v,videoGenreName:g,video_genre_name:y=g,distrId:S,distr_id:A=S,adBreaks:b}=e;return k({},function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,Qn),{partnerId:Number(r),category:Number(i),impId:void 0!==s?parseInt(String(s),10)||0:void 0,hasPreroll:"boolean"===typeof a?a:void 0,videoContentId:l,videoContentName:c,videoPublisherId:h,videoPublisherName:m,videoGenreId:f,videoGenreName:y,distrId:A,adBreaks:b})}))),{}),Jn=/^\w(\-|_|:|\s|\.|\w){0,70}$/,Xn=mn.Ryn({from:mn.jtO(mn.zGw(mn.Z_8(),mn.vs(e=>function(e){if(!e)return Yn.from;const t=String(e);return Jn.test(t)?t:"_$invalid_label_value$_"}(e)))),slots:mn.jtO(mn.zGw(mn.G0j([mn.zGw(mn.Z_8(),mn.vs(e=>{return"string"===typeof(t=e)?t.split(";"):[];var t})),mn.IXX(mn.Z_8()),mn.zGw(mn._4T(),mn.vs(()=>{}))]),mn.vs(e=>function(e){if(!Array.isArray(e))return;const t=e.filter(e=>"string"===typeof e&&/^\d+,\d+,-?\d+$/.test(e)).sort().join(";");return t.length>0?t:void 0}(e)))),testIds:mn.jtO(mn.G0j([mn.zGw(mn.Z_8(),mn.vs((function(e){return P(e.split(","))}))),mn.zGw(mn.IXX(mn.Z_8()),mn.vs(P)),mn.zGw(mn.IXX(mn.Rxh()),mn.vs(C)),mn.zGw(mn._4T(),mn.vs(()=>{}))]))}),$n=mn.zGw(mn.siq(Xn.entries,mn.zGw(mn.YjB(),mn.vs(e=>{if(void 0!==e)return String(e)}))),mn.vs((function(e){return void 0!==e.slots&&(e.testIds=P(e.slots.split(";"))),e}))),es=mn.zGw(mn.d7q({}),mn.BF5(T,"must be serializable")),ts=mn.zGw(mn.Ryn({preferredAudioLangs:mn.jtO(mn.zGw(mn.IXX(mn.Z_8()),mn.BSk(1)),[]),preferredTextLangs:mn.jtO(mn.zGw(mn.IXX(mn.Z_8()),mn.BSk(1)),[])}),mn.vs(e=>e)),rs=mn.zGw(mn.jtO(mn._4T(),()=>{}),mn.G0j([mn.zGw(mn.Rxh(),mn.BF5(e=>e>=0&&(0,rn.z)(e)),mn.vs(ci.my)),mn.S1Z()]),mn.vs(e=>({videoTime:e}))),is=mn.Ryn({url:mn.zGw(mn.Z_8(),mn.HQ2()),drmConfig:mn.jtO(es),metaInfoUrl:mn.jtO(mn.Z_8())}),ns=mn.jtO(mn.Ryn({objectFit:mn.jtO(mn.Z_8())})),ss=mn.Ryn({videoContentId:mn.jtO(mn.Z_8()),videoContentName:mn.jtO(mn.Z_8()),videoContentDescription:mn.jtO(mn.Z_8()),videoPublisherId:mn.jtO(mn.Z_8()),videoPublisherName:mn.jtO(mn.Z_8()),videoGenreId:mn.jtO(mn.Z_8()),videoGenreName:mn.jtO(mn.Z_8())});var as;!function(e){e.intro="intro",e.recap="recap",e.credits="credits"}(as||(as={}));const os=mn.Ryn({endTime:mn.Rxh(),startTime:mn.Rxh(),type:mn.KmV(as)}),ls=mn.Ryn({url:mn.zGw(mn.Z_8(),mn.HQ2()),max_width:mn.Rxh(),max_height:mn.Rxh(),image_format:mn.Z_8()}),ds=mn.Ryn({loop:mn.jtO(mn.O72(),!1),startPosition:rs,adConfig:mn.jtO(Zn,{}),withCredentials:mn.jtO(mn.O72()),passportRetpath:mn.jtO(mn.zGw(mn.Z_8(),mn.HQ2())),preview:mn.jtO(mn.Z_8()),firstFrameHash:mn.jtO(mn.Z_8()),firstFrameUrl:mn.jtO(mn.Z_8()),posterStyle:ns,additionalParams:mn.jtO($n,{}),externalPlayerConfig:mn.jtO(mn.d7q({})),id:mn.jtO(mn.Z_8(),""),videoInfo:mn.jtO(ss,{}),enableRemoteProgressSaving:mn.jtO(mn.O72(),!1),preferredTracks:mn.jtO(ts,{preferredAudioLangs:[],preferredTextLangs:[]}),skippableFragments:mn.jtO(mn.IXX(os)),initialStalledDuration:mn.jtO(mn.Rxh(),0),externalStalledDuration:mn.jtO(mn.Rxh()),summaryUrl:mn.jtO(mn.zGw(mn.Z_8())),description:mn.jtO(mn.Z_8()),thumbnails:mn.jtO(mn.IXX(ls))}),cs=mn.Ryn({streamUrl:mn.zGw(mn.Z_8(),mn.HQ2()),drmConfig:mn.jtO(es),contentId:mn.jtO(mn.S1Z())}),us=mn.Ryn({streams:mn.zGw(mn.IXX(is),mn.v2J()),drmConfig:mn.jtO(mn.S1Z()),contentId:mn.jtO(mn.S1Z())}),hs=mn.Ryn({contentId:mn.Z_8(),streamUrl:mn.jtO(mn.S1Z()),streams:mn.jtO(mn.S1Z())}),ps=mn.wfr([mn.zGw(mn.G0j([hs,us,cs]),mn.vs(e=>{if("contentId"in e)return{contentId:e.contentId,streams:[]};if("streams"in e)return{streams:e.streams,contentId:void 0};if("streamUrl"in e)return{streams:[{url:e.streamUrl,drmConfig:e.drmConfig}],contentId:void 0};throw new Error("SourceSchema Exception")})),ds]);var ms=e(28203);const vs=["videoContentName","videoContentId","videoPublisherId","videoPublisherName","videoGenreId","videoGenreName"],fs=mn.zGw(ps,mn.vs(e=>({contentId:e.contentId,id:e.id,streams:e.streams,params:{startPosition:e.startPosition,adConfig:R({},e.adConfig,I(e.videoInfo,e.adConfig)),withCredentials:e.withCredentials,loop:e.loop,preview:e.preview,firstFrameHash:O(e.firstFrameHash||""),firstFrameUrl:e.firstFrameUrl,posterStyle:e.posterStyle,additionalParams:e.additionalParams,externalPlayerConfig:(0,fi.K)(e.externalPlayerConfig)?R({},e.externalPlayerConfig,{passportRetpath:(0,wi.H)(e.passportRetpath)?e.passportRetpath:void 0}):e.externalPlayerConfig,thumbnails:e.thumbnails,videoInfo:I(e.videoInfo,e.adConfig),preferredTracks:e.preferredTracks,skippableFragments:e.skippableFragments,summaryUrl:e.summaryUrl,description:e.description},initialStalledDuration:e.initialStalledDuration,externalStalledDuration:void 0!==e.externalStalledDuration?e.externalStalledDuration:void 0})));var gs=e(75114),ys=e(7553);const Ss={trackingEvents:[(0,ys.c)()]};var As=e(88261);const bs=mn.zGw(mn.ZIn(),mn.WCY(mn.bcc([])),mn.L_X(mn.YjB())),Es=mn.zGw(mn._4T(),mn.vs(F)),ws=mn.Ryn({trackings:mn.jtO(Es,Ss),update:mn.jtO(bs,()=>As.Z),enableRemoteProgressSaving:mn.jtO(mn.G0j([mn.O72(),mn.zGw(mn.YjB(),mn.vs(()=>!1))]),!1),videoInfo:mn.jtO(ss,{})});let ks;!function(e){e.PLAYER_API="player-api.js",e.PLAYER_API_MODERN="player-api.modern.js",e.PLAYER_API_MOCK="player-api-mock.js"}(ks||(ks={}));const Cs=/1\.0-(\d+)/,Ps=e=>(e=>(e=>{try{if("noModule"in e.HTMLScriptElement.prototype)return!0}catch(t){}return!1})(e))(e),Ts=Ps(window);var Is=e(72177);const _s=function(e){const t=100*(0,Is.M)();let r=0;for(let i=0;i<e.length;i++)if(r+=e[i].percent,t<r)return e[i].id;return e[0].id}([{id:13565,percent:100,prefix:"1.0-"}]);var Os=e(60435),Rs=e(29487),Ds=e(16323),xs=e(49635),Ns=e(46321);const Vs=(0,zn.en)(window.location.href).hostname.split(".").reverse()[0];var Ls=e(74800);const Fs=()=>G({method:"GET",url:"https://frontend.vh.yandex.ru/csrf_token",retries:3,withCredentials:!0}).then(e=>{try{return{token:e}}catch(t){return{token:""}}}),Ms=()=>G({method:"GET",url:"https://quasar.yandex.<tld>/devices_online_stats",retries:3,withCredentials:!0}).then(e=>{try{const{items:t}=JSON.parse(e);return t&&t.length?t:[]}catch(t){return[]}}),js=(e,t)=>{const r={msg:q({},e.config,{start_position:e.startPosition}),device:e.externalPlayerId};return G({method:"POST",url:"https://yandex.ru/video/station",headers:{"X-CSRF-TOKEN":t},data:JSON.stringify(r),retries:3,withCredentials:!0}).then(e=>{const t=JSON.parse(e);if("play"!==t.status)throw new Error("ExternalPlaybackError: "+t.msg)})};let Bs;!function(e){e.OK="OK",e.SLOW="SLOW",e.UNKNOWN="UNKNOWN"}(Bs||(Bs={}));var Us=e(39720),Ys=e(54926),Hs=e(47134),Ws=e(54588),qs=e(58290),Gs=e(62720);const zs={no_licenses:{message:"ACCESS_ERROR_NO_LICENSE",code:151},invalid_region:{message:"ACCESS_ERROR_INVALID_REGION",code:153},old_browser:{message:"ACCESS_ERROR_OLD_BROWSER",code:5},future_vod_release:{message:"ACCESS_ERROR_FUTURE_VOD_RELEASE",code:100},access_denied:{message:"ACCESS_DENIED",code:100},unexpected:{message:"ACCESS_ERROR_UNEXPECTED",code:100},unsupported_browser:{message:"ACCESS_ERROR_UNSUPPORTED_BROWSER",code:412},not_found:{message:"ACCESS_ERROR_NOT_FOUND",code:404},video_processing:{message:"VIDEO_PROCESSING",code:100},video_processing_failed:{message:"VIDEO_PROCESSING_FAILED",code:100}};(0,Gs.z)(zs).map(e=>{let{code:t}=e;return String(t)});var Ks=e(16116),Qs=e(52257),Zs=e(42419),Js=e(3816),Xs=e(93499),$s=e(58710),ea=e(3569);class ta extends Ws.M{constructor(e){super(),this.params=e,this.destroyed=!1,this.requestSourceConfigTimeout=void 0,this.currentPoster=void 0,this.currentUgcLiveStatus=void 0,this.releaseDate=void 0,this.releaseDate=(()=>{var t,r,i;const n=parseInt(String(null==(t=this.params.queryParams)?void 0:t.release_timeout),10);if(n)return Date.now()/1e3+n;const s=parseInt((null==(r=e.vhParams)||null==(i=r.content)?void 0:i.release_date)||"",10)||void 0;return void 0!==s&&Date.now()/1e3<s?s:void 0})(),this.once("Destroy",()=>{this.destroyed=!0,window.clearTimeout(this.requestSourceConfigTimeout),void 0!==this.currentUgcLiveStatus&&(this.currentUgcLiveStatus=void 0,this.emit("UgcLiveStatusChange",void 0))}),Promise.resolve().then(()=>{this.start()})}async start(){if(this.params.vhParams){var e;const t=new Ks.y(this.params.queryParams,()=>this.params.playerApi);await(0,ea._)(0);const r=await t.getPlayerConfig(this.params.vhParams);this.handleVhAnswer({vhParams:this.params.vhParams,sourceConfig:r.source,skinConfig:(null==(e=r.skinParams)?void 0:e.skinConfig)||{},autoplay:r.autoplay})}else await this.run()}async run(e){void 0===e&&(e=0);try{await this.requestSourceConfig()}catch(t){return 3<=e?void this.emit("Error",new Xs.j({code:"REQUEST_SOURCE_ERROR",details:{error:t},isFatal:!0})):(e++,this.run(e))}}async requestSourceConfig(){const e=this.getContentId(),t=this.getConfigUrl();if(this.destroyed||!e)return;const{sourceConfig:r,vhParams:i,skinConfig:n,playerConfig:s}=await(0,qs.s6)(e,this.params.queryParams,t);if(this.destroyed)return;const{autoplay:a}=s;this.handleVhAnswer({vhParams:i,sourceConfig:r,skinConfig:n,autoplay:a})}handleVhAnswer(e){var t,r,i;let{sourceConfig:n,skinConfig:s,vhParams:a,autoplay:o}=e;const l=function(e){if(void 0!==e)return e.error?zs[e.error]||zs.unexpected:void 0===e.content?zs.not_found:void 0}(a);if(l){var d,c;this.requestSetPoster(null==n?void 0:n.preview);const e=null!=(d=s.hiddenControls)&&d.includes(wn.th.CONTENT_STATUS_TEXT)?void 0:l.message;this.emit("ShowAnnotation",e);const t={code:"VH_"+String(l.message),isFatal:!0,details:{reqId:null==(c=a.user_data)?void 0:c.req_id}},r=(()=>{switch(t.code){case"VH_ACCESS_ERROR_OLD_BROWSER":case"VH_ACCESS_ERROR_UNSUPPORTED_BROWSER":return new Zs.a(t);case"VH_ACCESS_DENIED":return new $s.j(t);case"VH_ACCESS_ERROR_INVALID_REGION":return new Qs.M(t);case"VH_ACCESS_ERROR_NO_LICENSE":return new Js.s(t);case"VH_ACCESS_ERROR_FUTURE_VOD_RELEASE":case"VH_ACCESS_ERROR_NOT_FOUND":case"VH_VIDEO_PROCESSING":case"VH_VIDEO_PROCESSING_FAILED":case"VH_ACCESS_ERROR_UNEXPECTED":default:return new pn.b(t)}})();this.emit("Error",r)}else this.releaseDate&&Date.now()/1e3<this.releaseDate?this.handleVhAnswerForReleaseDate({sourceConfig:n,releaseDate:this.releaseDate}):null!=(t=a.content)&&t.ugc_live?this.handleVhAnswerForUgc({sourceConfig:n,skinConfig:s,autoplay:o,vhParamsContent:a.content}):this.requestSetSource({sourceConfig:n,skinConfig:s,autoplay:o,externalPlayerConfig:null==(r=a.content)?void 0:r.yastation_cast_cfg,maxVideoSize:null==(i=a.content)?void 0:i.max_video_size})}handleVhAnswerForUgc(e){var t;let{sourceConfig:r,skinConfig:i,vhParamsContent:n,autoplay:s}=e;const{ugc_live_status:a,reload_on_ready:o}=n;if(this.currentUgcLiveStatus!==a&&(this.currentUgcLiveStatus=a,this.emit("UgcLiveStatusChange",this.currentUgcLiveStatus)),"onair"===a||"finished"===a||"ready"===a&&o)return void this.requestSetSource({sourceConfig:r,skinConfig:i,autoplay:s,externalPlayerConfig:n.yastation_cast_cfg,maxVideoSize:n.max_video_size});let l;this.requestSetPoster(r.preview),null!=(t=i.hiddenControls)&&t.includes(wn.th.CONTENT_STATUS_TEXT)?l=void 0:"cancelled"===a?l="UGC_LIVE_CANCELLED":("offline"===a||"ready"===a&&!o)&&(l="UGC_LIVE_OFFLINE"),this.emit("ShowAnnotation",l),window.clearTimeout(this.requestSourceConfigTimeout);const d=Math.max(n.auto_reload_ms||6e4,5e3);this.requestSourceConfigTimeout=window.setTimeout(()=>this.run(),d)}handleVhAnswerForReleaseDate(e){let{releaseDate:t,sourceConfig:r}=e;this.requestSetPoster(r.preview),this.emit("ShowAnnotation","UGC_LIVE_OFFLINE"),window.clearTimeout(this.requestSourceConfigTimeout);const i=1e3*Math.max(t-Date.now()/1e3,0);this.requestSourceConfigTimeout=window.setTimeout(()=>this.run(),i)}requestSetSource(e){this.emit("SetSource",e)}requestSetPoster(e){this.currentPoster!==e&&(this.currentPoster=e,this.emit("SetPoster",e))}getConfigUrl(){var e,t;return null==(e=this.params.vhParams)||null==(t=e.content)?void 0:t.config_url}getContentId(){var e,t;return this.params.contentId||(null==(e=this.params.vhParams)||null==(t=e.content)?void 0:t.content_id)}}const ra=[Hs.q.NO_CODECS,Hs.q.UNSUPPORTED_ENV,Hs.q.CONFIG,Hs.q.NETWORK_PLAYER,Hs.q.REGIONAL],ia=["REGIONAL_RESTRICTION","BANNED"],na=J({},{onReady:!1,onResourcesIdle:!1,onInit:!1,onInitError:!1,onVolumeChange:!1,onFullScreenChange:!1,onVisualStateChange:!1,onStartStageChange:!1,onNextAdRemainingTimeChange:!1,onStreamsWithSupportInfoChange:!1,onLogEvent:!1,onPreloadSourceResolve:!1,onPreloadSourceReject:!1,onBandwidthEstimateChange:!1,onRequestFullscreenChange:!1,onPlaybackQualityUpdate:!1,onExpectedStalledChange:!1,onCapSizeChange:!1},{onChangeStream:!0,onDrmSystemChange:!0,onStateChange:!0,onAdStateChange:!0,onAdLoaded:!0,onAdError:!0,onBeforeAdPodStart:!0,onAdPodStart:!0,onAdPodClick:!0,onAdPodSkip:!0,onAdPodEnd:!0,onAdSkippableStateChange:!0,onAdVolumeAvailabilityStateChange:!0,onAdPodCloseStateChange:!0,onAdPodDurationChange:!0,onAdPodCurrentTimeChange:!0,onAdPodTimeToSkipChange:!0,onAdInteraction:!0,onPositionChange:!0,onTimelineInfoChange:!0,onError:!0,onRecover:!0,onVideoTrackChange:!0,onVideoTracksChange:!0,onAudioTrackChange:!0,onAudioTracksChange:!0,onTextTrackChange:!0,onTextTracksChange:!0,onSubtitlesChange:!0,onThumbnailTileGeneralMetaInfoChange:!0,onVideoTypeChange:!0,onVideoSizeChange:!0,onOriginalBroadcastAdStateChange:!0,onContentImpression:!0,onBufferingRangesChange:!0,onPlaybackRateChange:!0,onPlaybackRateRangeChange:!0,onEngineChange:!0,onInrollFrame:!0,onFrameRendered:!0,onTargetLatencyChange:!0});var sa=e(72391);const aa=[{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}},{enabled:"webkitSupportsFullscreen",element:"webkitDisplayingFullscreen",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}}];var oa=e(53276),la=e(99279);var da=e(44706);const ca=["from_block","stream_block"];let ua;!function(e){e.PLAY="PLAY",e.PAUSE="PAUSE",e.PREVENT_ACTIONS="PREVENT_ACTIONS",e.CALL_NEXT="CALL_NEXT"}(ua||(ua={}));const ha=()=>e=>{let{next:t}=e;t({actionType:ua.PREVENT_ACTIONS})},pa=e=>{let{settings:t}=e;return void 0===t?ha():e=>{let{next:t,getState:r}=e;const{visualState:i}=r();return i.isFullScreen?t({actionType:i.isDocumentVisible?ua.PLAY:ua.PAUSE}):t({actionType:ua.CALL_NEXT})}},ma=e=>{let{settings:t}=e;return void 0===t?ha():e=>{let{next:t,getState:r}=e;const{visualState:i}=r();return t({actionType:(i.isVisibilitySupported?i.isElementVisible:i.isDocumentVisible)?ua.PLAY:ua.PAUSE})}},va=e=>{let{settings:t}=e;return void 0===t?ha():e=>{let{next:r,getState:i}=e;return t.onlyMuted&&!i().muted?r({actionType:ua.PREVENT_ACTIONS}):r({actionType:ua.CALL_NEXT})}},fa=e=>{let{settings:t}=e;return void 0===t?ha():e=>{let{next:t,getState:r}=e;return r().visualState.isPip?t({actionType:ua.PREVENT_ACTIONS}):t({actionType:ua.CALL_NEXT})}};var ga=e(78041);const ya=(e,t,r,i)=>function(){try{return t.apply(r||this,arguments)}catch(n){if((0,vi.m)(i)&&i(n),!0===n.preventProtect)throw n;ya.log(n,e)}};ya.log=function(e,t){console.log("LOG:"+t+":"+e)},ya.setTimeout=(e,t,r,i)=>window.setTimeout(ya("timeout",e,r,i),t);const Sa=function(e,t){return void 0===t&&(t={}),(r,i)=>{let n;const s={portion:void 0!==t.portion?t.portion:0,interval:void 0!==t.interval?t.interval:300,overlappedPoints:void 0!==t.overlappedPoints?t.overlappedPoints:[[0,0]]},a=e({portion:Math.max(Number.MIN_VALUE,s.portion),interval:s.interval,overlappedPoints:s.overlappedPoints,element:r,callback:ya("visibilityObserver",e=>{n!==e&&(n=e,i(e))})});if(!a)throw new Error("visibilityObserver: no strategy");return a.start(),(0,li.I)(()=>a.stop())}};class Aa{static from(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{const r=[];for(const i of t){let t=()=>null;const n=i(ee({},e,{callback:e=>t(e)}));if(!n)return null;r.push(e=>(t=e,n))}return new Aa({callback:e.callback,strategyFactories:r})}}constructor(e){this.args=e,this.strategies=void 0,this.runningCount=0,this.callback=(e,t)=>{const r=e+1;t?r===this.strategies.length?this.args.callback(t):r===this.runningCount&&this.startNext():(this.stopUntil(r),this.args.callback(t))},this.strategies=((e,t,r)=>{const i=new Array(e.length);for(let n=0;n<e.length;n++)i[n]=t.call(r,e[n],n,e);return i})(e.strategyFactories,(e,t)=>e(e=>this.callback(t,e)))}start(){!this.runningCount&&this.strategies.length&&this.startNext()}stop(){this.stopUntil(0)}get isDetermined(){for(const e of this.strategies)if(!e.isDetermined)return!1;return!0}getIsVisible(){for(let e=0;e<this.strategies.length;e++)if(!this.strategies[e].getIsVisible())return!1;return!0}startNext(){this.strategies[this.runningCount++].start()}stopUntil(e){for(;this.runningCount>e;)this.strategies[--this.runningCount].stop()}}var ba=e(58653),Ea=e(70322);let wa="hidden",ka="visibilitychange";if(!(wa in document)){const e=["webkit","moz","ms","o"];for(const t of e){const e=t+"Hidden";if(e in document){wa=e,ka=t+"visibilitychange";break}}}const Ca=new class{constructor(e){void 0===e&&(e=window),this.windowObj=e,this.yaBroApiInstance=void 0,this.initYaBrowserApi()}canUseYaBroApi(){return Boolean(this.yaBroApiInstance&&this.yaBroApiInstance.isInCustoPage)}isPageHiddenYaBroApi(){return!(this.yaBroApiInstance&&this.yaBroApiInstance.pageVisible)}initYaBrowserApi(){this.windowObj.browser&&this.windowObj.browser.BrowserEmbeddedApi&&this.windowObj.browser.BrowserEmbeddedApi.getInstance().then(e=>{this.yaBroApiInstance=e})}};class Pa{static factory(e){return new Pa(e)}constructor(e){this.args=e,this.isDetermined=!0,this.subscription=void 0,this.timer=void 0,this.onVisibilityChangeCallback=()=>{this.args.callback(this.getIsVisible())}}start(){this.timer=window.setTimeout(()=>{this.onVisibilityChangeCallback(),this.subscription=function(e,t,r,i,n){if(!e||!r)return null;let s=ie(ya("handler:"+t,r,i));const a={un(){(0,ba.f)(e,t,s)}};var o;return n&&n.once&&!Ea.vE&&(o=s,s=function(e){o.call(this,e),ne(a)}),Ea.wI?(0,ba.h)(e,t,s,n):(0,ba.h)(e,t,s,n&&n.capture),a}(document,ka,this.onVisibilityChangeCallback)})}stop(){window.clearTimeout(this.timer),ne(this.subscription)}getIsVisible(){return!(Ca.canUseYaBroApi()?Ca.isPageHiddenYaBroApi():Boolean(document[wa]))}}var Ta=e(4238);class Ia{static factory(e){return"undefined"===typeof IntersectionObserver?null:"thresholds"in IntersectionObserver.prototype&&e.element?new Ia(e):null}constructor(e){this.args=e,this.isDetermined=!0,this.observer=void 0,this.threshold=void 0,this.callback=e=>{const t=e[e.length-1].intersectionRatio>=this.observer.thresholds[0];this.args.callback(t)},this.threshold=Math.max(2**-149,this.args.portion),this.observer=new IntersectionObserver(this.callback,{threshold:this.threshold})}start(){this.observer.observe(this.args.element)}stop(){this.observer.disconnect()}getIsVisible(){return e=this.args.element,t=this.threshold,ae(e)>=(t||Number.MIN_VALUE);var e,t}}var _a=e(92069);class Oa extends class{constructor(e){this.args=e,this.isDetermined=!0,this.timer=void 0}start(){this.timer=window.setInterval(ya("visibilityObserver",()=>{this.args.callback(this.isVisible())}),this.args.interval)}stop(){window.clearInterval(this.timer)}getIsVisible(){return this.isVisible()}}{static factory(e){return e.element?new Oa(e):null}constructor(e){super(e),this.args=e,this.isDetermined=void 0,this.windowChain=(0,_a.T)(window).windowChain.reverse();try{this.isDetermined=Boolean((window.top||window).location.hostname)}catch(t){this.isDetermined=!1}}isVisible(){const e=(0,Ta.L)(this.args.element),t=e.width*e.height;if(t<=0)return!1;const r=function(e,t,r){let i=0;for(arguments.length<3&&(i=1,r=e[0]);i<e.length;i++)r=t(r,e[i],i,e);return r}(this.windowChain,(e,t)=>this.getFrameVisiblePart(t,e),void 0),i=Math.max(e.left,r.left),n=Math.max(e.top,r.top);return(Math.min(e.right,r.right)-i)*(Math.min(e.bottom,r.bottom)-n)>=Math.floor(t*this.args.portion)}getFrameVisiblePart(e,t){if(!t||!e.frameElement)return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight};const r=(0,Ta.L)(e.frameElement);return{left:Math.max(t.left-r.left,0),right:e.innerWidth-Math.max(r.right-t.right,0),top:Math.max(t.top-r.top,0),bottom:e.innerHeight-Math.max(r.bottom-t.bottom,0)}}}var Ra=e(46667);let Da=null;try{"undefined"!==typeof IntersectionObserver&&(Da=Aa.from(class{static from(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(const r of t){const t=r(e);if(t)return t}return null}}}.from(Ia.factory,Oa.factory),Pa.factory))}catch(Ph){}class xa extends Ra.v{constructor(e,t){super(),this.visibilityThreshold=-1,this.state={isPip:!1,isFullScreen:!1,isDocumentVisible:(0,ga.s)(document),isElementVisible:!0,isVisibilitySupported:null!==Da},this.element=void 0,this.observe=e=>(this.on("Change",e),()=>this.off("Change",e)),this.notifyDocumentVisibility=e=>{this.state.isDocumentVisible!==e&&(this.state=oe({},this.state,{isDocumentVisible:e}),this.handleChange())},this.notifyElementVisibility=e=>{this.state.isElementVisible!==e&&(this.state=oe({},this.state,{isElementVisible:e}),this.handleChange())},this.element=e,this.state.isDocumentVisible=(0,ga.s)(e.ownerDocument),t&&(this.visibilityThreshold=Math.min(t.threshold,.99)),this.observeVisibility()}notifyFullScreen(e){this.state.isFullScreen!==e&&(this.state=oe({},this.state,{isFullScreen:e}),this.handleChange())}notifyPip(e){this.state.isPip!==e&&(this.state=oe({},this.state,{isPip:e}),this.handleChange())}destroy(){this.emit("Destroy"),this.off("Change")}getState(){return this.state}observeVisibility(){if(this.state.isVisibilitySupported)try{const e=Sa(Da,{portion:this.visibilityThreshold})(this.element,this.notifyElementVisibility);this.once("Destroy",e),this.once("Restart",e),this.once("Restart",()=>this.off("Destroy",e))}catch(e){this.state.isVisibilitySupported=!1,this.state.isElementVisible=!0}try{const e=Sa(Aa.from(Pa.factory))(this.element,this.notifyDocumentVisibility);this.once("Destroy",e),this.once("Restart",e),this.once("Restart",()=>this.off("Destroy",e))}catch(e){}}restart(){this.emit("Restart"),this.observeVisibility()}handleChange(){this.emit("Change",this.state)}}class Na{constructor(e){let{element:t,togglePlaybackVisibilitySetting:r,playerStateAdaptor:i,playPauseController:n}=e;this.visibilityObserver=void 0,this.playerStateAdaptor=void 0,this.playPauseController=void 0,this.middlewareInitParams=void 0,this.middlewareList=void 0,this.destroyCallbacks=void 0,this.lastChainId=0,this.done=e=>{switch(e.actionType){case ua.PLAY:return this.playPauseController.play();case ua.PAUSE:return this.playPauseController.pause();case ua.PREVENT_ACTIONS:case ua.CALL_NEXT:return}},this.destroyCallbacks=[],this.visibilityObserver=new xa(t,r),this.playPauseController=n;const s=this.visibilityObserver.observe(()=>{this.emitChange()}),a=i.onChange(()=>{this.emitChange()});this.playerStateAdaptor=i,this.destroyCallbacks.push(s,a,()=>this.visibilityObserver.destroy()),this.middlewareInitParams={settings:r},this.middlewareList=r?[ma(this.middlewareInitParams),pa(this.middlewareInitParams),fa(this.middlewareInitParams),va(this.middlewareInitParams)]:[]}appendMiddleware(e){this.middlewareList.unshift(e(this.middlewareInitParams))}prependMiddleware(e){this.middlewareList.push(e(this.middlewareInitParams))}observeVisualState(e){return this.visibilityObserver.observe(e)}restartVisibilityObserver(){return this.visibilityObserver.restart()}getVisualState(){return this.visibilityObserver.getState()}notifyFullScreen(e){this.visibilityObserver.notifyFullScreen(e)}notifyPip(e){this.visibilityObserver.notifyPip(e)}destroy(){this.destroyCallbacks.forEach(e=>e())}emitChange(){const e=++this.lastChainId,t=le({},this.playerStateAdaptor.getState(),{visualState:this.visibilityObserver.getState()}),r=()=>t;this.middlewareList.reduce((t,i)=>()=>{i({getState:r,next:(0,li.I)(r=>{if(e===this.lastChainId)return r.actionType===ua.CALL_NEXT?t():this.done(r)})})},As.Z)()}}var Va=e(38580);class La{actualizeAutoplay(e){this.expectedAutoplay=e}constructor(e){let{play:t,pause:r,togglePlaybackVisibilitySetting:i,autoplay:n,playerStateAdaptor:s,logEvent:a}=e;this.play=void 0,this.pause=void 0,this.destroy=void 0,this.paused=!1,this.wasEverPlaying=!1,this.pausedViaController=!1,this.expectedAutoplay=!1,this.expectedAutoplay=n,this.paused=!de(s.getState()),this.play=()=>{(function(e){let{playingState:t,togglePlaybackVisibilitySetting:r,autoplay:i,wasEverPlaying:n}=e;return!!r&&(n?!de({playingState:t}):(r.forceAutoplay||i)&&!ce({playingState:t}))})(ue({},s.getState(),{togglePlaybackVisibilitySetting:i,autoplay:this.expectedAutoplay,wasEverPlaying:this.wasEverPlaying}))&&(!this.pausedViaController&&this.wasEverPlaying||(this.pausedViaController=!1,t(),a("PlayVideoOnVisibilityChange")))},this.pause=()=>{this.paused||(this.pausedViaController=!0,this.paused=!0,r(),a("PauseVideoOnVisibilityChange"))},this.destroy=s.onChange(()=>{const e=s.getState(),t=de(e);this.wasEverPlaying=ce(e)&&(e.hasWatchedTime||e.adState.state===Va.M.PLAYING)||this.wasEverPlaying,this.paused=!t})}}class Fa{constructor(e){this.playerApi=void 0,this.handlers=void 0,this.previousWatchedTime=0,this.emitChange=()=>{this.handlers.forEach(e=>e())},this.emitWatchedTimeChange=e=>{let{watchedTime:t}=e;(this.previousWatchedTime>0&&0===t||0===this.previousWatchedTime&&t>0)&&this.emitChange(),this.previousWatchedTime=t},this.playerApi=e;if(!e.getState())throw new Error("PlayerStateAdaptorV2 should use only inited PlayerApi");this.handlers=[],this.playerApi.on(mi.E.WatchedTimeChange,this.emitWatchedTimeChange),this.playerApi.on(mi.E.PlayingStateChange,this.emitChange),this.playerApi.on(mi.E.MutedChange,this.emitChange),this.playerApi.on(mi.E.AdStateChange,this.emitChange)}getState(){const e=this.playerApi.getState();return{hasWatchedTime:e.watchedTime>0,muted:e.muted,playingState:e.playingState,playingStateReason:e.playingStateReason,adState:e.adState}}onChange(e){return this.handlers.push(e),()=>{this.handlers=this.handlers.filter(t=>t!==e)}}destroy(){this.playerApi.off(mi.E.WatchedTimeChange,this.emitWatchedTimeChange),this.playerApi.off(mi.E.PlayingStateChange,this.emitChange),this.playerApi.off(mi.E.MutedChange,this.emitChange),this.playerApi.off(mi.E.AdStateChange,this.emitChange),this.handlers=[]}}var Ma=e(61693);const ja="#FFCC00";var Ba=e(54330),Ua=e(20931);const Ya=navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,Ha=(e,t)=>{for(let r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1};var Wa=e(81819);var qa=e(82520);const Ga=function(e){void 0===e&&(e=window);const{platform:t=""}=e.navigator||{};return function(e){void 0===e&&(e=window);const{vendor:t=""}=e.navigator||{};return 0===t.indexOf("Google")}(e)&&!(0,Ba.C)(e)&&0===t.indexOf("Linux ")&&(0,qa.H)(e)};var za=e(2428);const Ka=[["XiaoMi/MiuiBrowser",11],["UCBrowser",12],["HuaweiBrowser",9]];var Qa=e(22905),Za=e(28634),Ja=e(40381),Xa=e.n(Ja);const $a={WEBP:0,JPEG:1},eo={position:"absolute",width:"100%",height:"100%",top:"0",left:"0"},to=ye({},eo,{overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",pointerEvents:"none"}),ro=ye({},eo,{backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"});class io extends Za.V{constructor(e){let{container:t,onReady:r=As.Z,src:i,firstFrameHash:n,firstFrameUrl:s,style:o,thumbnails:l}=e;super(),this.container=void 0,this.background=void 0,this.src=void 0,this.style=void 0,this.onReady=void 0,this.src=i,this.style=o,this.onReady=(0,li.I)(r),this.container=document.createElement("div"),this.src?this.setPoster(this.src,n,s,l):a(this.container,{opacity:"0"}),this.addDestroyHandler(()=>{p(this.container),this.onReady=As.Z}),t.appendChild(this.container)}setPoster(e,t,r,i){if(this.isDestroyed)return;if(!e&&(!t||!r)&&!i)return void this.onReady();a(this.container,ye({},to,{opacity:"1"}));let n="";if(i)return void this.initPictureBackground(i);this.src=t&&r?r:e,n="url("+this.src+")";const s={backgroundImage:n,transition:!i&&t&&r?"background-image 1s":""};this.initBackground(s,Boolean(t&&r))}setStyle(e){this.isDestroyed||(this.style=e,this.background&&e&&a(this.background,ye({},e.objectFit?{backgroundSize:e.objectFit}:{})))}async initPictureBackground(e){var t;null==(t=this.background)||t.remove();const{sources:r}=function(e){if(0===e.length)return{sources:[]};const t=(t,r)=>{if(t>=e.length)return null;for(let i=t;i<e.length;i++)if(e[i].image_format===r)return e[i];return null},r={};for(let s=0;s<e.length;s++){const t=e[s].max_width+"x"+e[s].max_height;if(r[t])continue;const i=0===s?[0,0]:[e[s-1].max_width,e[s-1].max_height];r[t]=i}const i=[];for(let s=0;s<e.length;s++){const a=e[s],o=t(s+1,a.image_format),[l,d]=r[a.max_width+"x"+a.max_height],c={srcset:"",type:"image/"+a.image_format.toLowerCase(),media:""};(n=a).max_height!==e[e.length-1].max_height||n.max_width!==e[e.length-1].max_width?c.media="(min-width: "+l+"px) and (max-width: "+a.max_width+"px), (min-height: "+d+"px) and (max-height: "+a.max_height+"px)":c.media="(min-width: "+l+"px), (min-height: "+d+"px)";let u=a.url;o&&(u+=" 1x, "+o.url+" 2x"),c.srcset=u,i.push(c)}var n;return{sources:i}}(function(e){return[...e].sort((e,t)=>{if(e.max_width!==t.max_width)return e.max_width-t.max_width;if(e.max_height!==t.max_height)return e.max_height-t.max_height;const r=$a[e.image_format];if(void 0===r)return 1;const i=$a[t.image_format];return void 0===i?-1:r-i})}(e)),i=document.createElement("picture");r.forEach(e=>{const t=document.createElement("source");t.srcset=e.srcset,t.type=e.type,t.media=e.media,i.appendChild(t)});const n=document.createElement("img");a(n,ye({},this.style)),n.className=Xa().Poster__contentWrapper__image,n.onload=()=>{this.onReady()},i.appendChild(n),this.background=i,this.container.appendChild(i)}async initBackground(e,t){var r;null==(r=this.background)||r.remove();const i=this.background=document.createElement("div");a(i,ro),this.setStyle(this.style);const n=(0,la.W)(this.src);(0,Qa.E)()&&await n,a(i,e),this.container.appendChild(i),n.then(()=>{t&&a(this.background,{backgroundImage:'url("'+this.src+'")'}),this.onReady()}).catch(As.Z)}}var no=e(96541);const so=function(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i=ao);for(let n=r;n<e.length;n++)if(i(e[n],t))return n;return-1},ao=(e,t)=>e===t,oo=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const{resolver:i,preparers:n}=Se(t);let s,a=null,o=null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(a&&a.every((e,r)=>t[r]===e))return s;const l=n.map(e=>e(...t));if(o&&o.every((e,t)=>l[t]===e))return a=t,s;const d=i(...l);return a=t,o=l,s=d,d}},lo="http://www.w3.org/2000/svg",co="classList"in document.documentElement,uo=oo(e=>e.classList&&e.classList.add,Mi.t),ho=oo(e=>e.classList&&e.classList.remove,Mi.t),po=(()=>{const e=document.createElement("p");return!!co&&(e.classList.add("c1","c2"),!!e.classList.contains("c2")&&(e.classList.toggle("c3",!1),!e.classList.contains("c3")))})(),mo=e=>e.split(" ").filter(e=>Boolean(e)),vo=po?(e,t)=>{const r=mo(t);e.classList.add(...r)}:(e,t)=>{const r=mo(t);for(let i=0;i<r.length;i++)e.classList.add(r[i])},fo=function(e,t){return void 0===t&&(t=""),ho(e)?go(e,t):function(e,t){const r=Ae(e).split(" "),i=t.split(" "),n=[];for(let s=0;s<r.length;s++)r[s]&&-1===so(i,r[s])&&n.push(r[s]);be(e,n.join(" "))}(e,t)},go=po?(e,t)=>{const r=mo(t);e.classList.remove(...r)}:(e,t)=>{const r=mo(t);for(let i=0;i<r.length;i++)e.classList.remove(r[i])};var yo=e(47779),So=e(34761),Ao=e.n(So);const bo=e(81217),Eo=e(43978),wo=(0,li.I)(()=>we(Ao().toString())),ko={display:"flex",position:"absolute",top:"0",left:"0",bottom:"0",right:"0",padding:"20px",color:"#fff",fontSize:"24px",textAlign:"center",justifyContent:"center",alignItems:"center"};var Co=e(18566);const Po=[mi.E.SourceChange,mi.E.DrmSystemChange,mi.E.StreamChange,mi.E.StartStageChange,mi.E.PlayingStateChange,mi.E.VideoTypeChange,mi.E.UtcStartTimeChange,mi.E.CurrentTimeChange,mi.E.WatchedTimeChange,mi.E.LiveLatencyChange,mi.E.DurationChange,mi.E.DVRStartTimeChange,mi.E.DVRDurationChange,mi.E.VolumeChange,mi.E.MutedChange,mi.E.VolumeChangeReasonChange,mi.E.FullscreenStateChange,mi.E.PictureInPictureStateChange,mi.E.VisibleStateChange,mi.E.VideoSizeChange,mi.E.VideoTracksChange,mi.E.VideoTrackChange,mi.E.AudioTracksChange,mi.E.AudioTrackChange,mi.E.TextTracksChange,mi.E.TextTrackChange,mi.E.SubtitlesChange,mi.E.ErrorChange,mi.E.PlaybackRateRangeChange,mi.E.PlaybackRateChange,mi.E.AdStateChange,mi.E.NextAdRemainingTimeChange,mi.E.BufferedRangesChange,mi.E.TileMetaInfoChange,mi.E.TileMetaInfoUrlChange,mi.E.ConnectionQualityChange,mi.E.AdPodDurationChange,mi.E.AdPodCurrentTimeChange,mi.E.AdPodTimeToSkipChange,mi.E.AdSkippableStateChange,mi.E.AdPodCloseStateChange,mi.E.AdVolumeAvailabilityStateChange,mi.E.UgcLiveStatusChange];class To{constructor(e,t){this.state=void 0,this.state=Te({},e);const r=e=>{Te(this.state,e)};Po.forEach(e=>{t(e,r)})}getState(){return this.state}}const Io=["object"===typeof document&&document&&"onfreeze"in document?"pagehide":"beforeunload"],_o=e=>{const t=[];for(;e;)try{if(_e(e),t.push(e),e.parent===e)break;e=e.parent}catch(r){break}return t},Oo=(e,t)=>{for(const r of t.split(".")){if(!Re(e)){e=void 0;break}e=e[r]}return e},Ro="__ADB_CONFIG__",Do=(e,t,r)=>{for(let i=0;i<e.length;i++)t.call(r,e[i],i,e)},xo=Re(Ro)&&Re(Ro.fn)?Ro.fn:void 0,No=["encodeUrl","decodeUrl","encodeCSS","isEncodedUrl"],Vo=e=>(e=>{if(xo)return xo;const t={},r=_o(e);for(;r.length;){const e=r.pop();e&&Do(No,r=>{if(Oe(t[r]))return;const i=Oo(e,"ya.videoAd."+r);Oe(i)&&(t[r]=i)})}return t})(e).encodeUrl;var Lo=e(24672);var Fo=e(8053);const Mo=As.Z,jo=As.Z,Bo=As.Z,Uo=((e=>{let{win:t,propertyName:r}=e})({propertyName:"YANDEX_STATS_GLOBAL_CALLBACK_PROPERTY_NAME",win:window}),Ne());var Yo=e(20348);const Ho=Math.floor(5),Wo=Math.floor(20);var qo=e(42848);const Go=(()=>{const e=Me();return void 0===e||e.includes("encrypted-media")})();var zo=e(38939),Ko=e(7312);const Qo=(0,e(40813).I)(),Zo=()=>Qo.navigator.wakeLock;class Jo{constructor(e){if(this.params=e,this.visibilityObserver=void 0,this.lockPromise=void 0,this.lockerObj=void 0,this.destroyed=!1,this.handler=async()=>{if(!this.destroyed)if(this.lockPromise)this.lockPromise=this.lockPromise.then(this.handler);else if(this.shouldLock()){if(this.lockerObj)return;this.lockPromise=Zo().request("screen").then(e=>{this.lockPromise=void 0,this.lockerObj=e}).catch(e=>{this.destroy(),this.params.onError(e)})}else this.lockerObj&&(this.lockPromise=this.lockerObj.release().then(()=>{this.lockPromise=void 0}),this.lockerObj=void 0)},!Zo())return void(this.destroyed=!0);const{playerContainer:t,playerApi:r}=e;r.on(mi.E.PlayingStateChange,this.handler),r.on(mi.E.MutedChange,this.handler),this.visibilityObserver=new xa(t,{threshold:.75}),this.visibilityObserver.observe(this.handler)}restartVisibilityObserver(){var e;this.destroyed||null==(e=this.visibilityObserver)||e.restart()}destroy(){var e;this.destroyed=!0,this.params.playerApi.off(mi.E.PlayingStateChange,this.handler),this.params.playerApi.off(mi.E.MutedChange,this.handler),null==(e=this.visibilityObserver)||e.destroy()}shouldLock(){const e=this.params.playerApi.getState();if(!e)return!1;const{playingState:t,muted:r}=e;return t!==qi.X.PAUSE&&t!==qi.X.END&&(!!this.visibilityObserver&&(this.visibilityObserver.getState().isElementVisible||!r))}}var Xo=e(4450),$o=e.n(Xo);const el=(0,li.I)(()=>we($o().toString())),tl=(e,t,r)=>{const i=[];for(let n=0;n<e.length;n++){const s=e[n];t.call(r,s,n,e)&&i.push(s)}return i},rl={}.toString,il=/\[object (\w+)\]/,nl=e=>{const t=rl.call(e);if(!t)return null;const r=t.match(il);if(!r)return null;const i=r[1];return i||null},sl=e=>e instanceof Error||"Error"===nl(e),al=[].find,ol=qe(al)?(e,t)=>al.call(e,t):(e,t)=>{for(let r=0;r<e.length;r++){const i=e[r];if(t(i,r,e))return i}};var ll=e(40497),dl=e.n(ll);const cl="DEFAULT_ERROR_MESSAGE",ul="0",hl="",pl="?:?:?";class ml extends Error{constructor(){const e=2===arguments.length?arguments.length<=0?void 0:arguments[0]:void 0,t=2===arguments.length?arguments.length<=1?void 0:arguments[1]:arguments.length<=0?void 0:arguments[0],r=Re(i=e)&&Ue(i.name)&&Ue(i.message)||"object"===typeof e&&e&&"code"in e&&"details"in e?e:{message:String(e||cl)};var i;super(),Object.defineProperty(this,"originalError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"toString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"toJSON",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.originalError="object"===typeof e&&e?e:{unknown:e,unknownStr:String(e)},dl()(this,ml.prototype);const n=t.code||r.code||r.id||ul,s=t.message||r.message||cl;this.message="VAS Error ["+n+"]"+(s?"["+s+"]":""),this.code=n,this.details=t.details||r.details||hl;const a=r.stack||function(e){const{url:t,line:r,col:i,fileName:n,columnNumber:s,lineNumber:a}=e;return(t||n||"?")+":"+(r||a||"?")+":"+(i||s||"?")}(r);let o=a===pl?this.stack:a;if(o&&o!==pl)this.stack=o;else if(!this.stack)try{throw new Error(this.message)}catch(l){this.stack=o=l.stack||pl}this.toString=()=>Ge(this.toJSON()),this.toJSON=()=>({originalError:this.originalError,message:this.message,code:this.code,details:this.details,stack:o})}}const vl=function(e,t){let r=e[t];if(!qe(r)){const n=r;try{delete e[t];const i=e[t];"function"===typeof i&&(r=i),e[t]=n}catch(i){}}return r}(Array,"isArray"),fl=Boolean(vl)?e=>vl.call(Array,e):e=>"Array"===nl(e);class gl{constructor(e){Object.defineProperty(this,"dispatch",{enumerable:!0,configurable:!0,writable:!0,value:Ke(e=>{this.value=e,this._isDispatched=!0,function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];fl(e)&&Do(e,e=>{"function"===typeof e&&e(...r)})}(this.callbacks,e),this.callbacks.length=0})}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_isDispatched",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Oe(e)&&this.callbacks.push(e)}subscribe(e){return this._isDispatched?(e(this.value),ze):(this.callbacks.push(e),()=>{this.callbacks=tl(this.callbacks,t=>t!==e)})}getDispatched(){return this._isDispatched}getValue(){return this.value}wait(){return new Promise(e=>{this.subscribe(e)})}}const yl=e(17422),Sl=(e,t,r)=>{const i=new Array(e.length);for(let n=0;n<e.length;n++)i[n]=t.call(r,e[n],n,e);return i},Al=["","-webkit-","-ms-","-moz-","-o-"],bl=Sl(Al,e=>"("+e+"any-pointer:coarse)").join(","),El=Sl(Al,e=>"("+e+"touch-enabled)").join(","),wl=function(e){return void 0===e&&(e=window),function(e){void 0===e&&(e=window);const t=function(e){void 0===e&&(e=window);try{return(e.navigator||{}).userAgent||""}catch(t){return""}}(e).toLowerCase();if(t.indexOf("android")>-1)return!1;const r=t.replace(/\(.+?\)/gi,"").split(" ").map(e=>e.trim().split("/")[0]).filter(e=>e&&"mobile"!==e);return 4===r.length&&"mozilla"===r[0]&&"applewebkit"===r[1]&&"version"===r[2]&&"safari"===r[3]}(e)||et(e)||function(e){return void 0===e&&(e=window),/Apple/.test(e.navigator.vendor)&&$e(e)}(e)}(),kl=200,Cl=e=>lt(e.navigator.sendBeacon),Pl=Cl(window);class Tl{constructor(e){let{defaultProbability:t,rnd:r,vsid:i,serviceName:n,serviceVersion:s}=e;Object.defineProperty(this,"rnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vsid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultProbability",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serviceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serviceVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:e=>{let{error:t}=e;this.push({eventName:String(t.code),eventType:"error",eventData:t,probability:1})}}),this.rnd=r,this.vsid=i,this.defaultProbability=t,this.serviceName=n,this.serviceVersion=s}log(e){let{name:t,probability:r,data:i}=e;this.push({eventType:"event",eventName:t,probability:r,eventData:i})}push(e){let{eventType:t,eventName:r,probability:i=this.defaultProbability,eventData:n}=e;if(this.rnd<i){const e="https://log.strm.yandex.ru/log?"+t+"="+r,i=JSON.stringify({service:"VAS",eventType:t,eventName:r,rnd:this.rnd,vsid:this.vsid,data:n,topLocation:rt(document).location,version:"loadVasModule_"+(this.serviceName||"unknown")+"_"+(this.serviceVersion||"unknown"),timestamp:Date.now()});0;if(function(e,t){return!!Pl&&window.navigator.sendBeacon(e,t)}(e,i))return;ot({url:e,data:i,method:"POST"})}}}const Il=(e,t)=>{try{return e.localStorage.getItem(t)}catch(r){return null}},_l=(e,t)=>{const r=dt(e,t);return"false"!==r&&Boolean(r)},Ol=function(e){let t,r,i=!1,n=!1,s=!1;return Qe(()=>{t=function(e){const t=dt(e,"adsdkecmaver");if("ES2017"===t||"ES5"===t)return t;return}(e)}),Qe(()=>{s=Boolean(dt(e,"adsdkdebug"))}),Qe(()=>{r=dt(e,"adsdkver")}),Qe(()=>{i=Boolean(dt(e,"vasnetworklogs"))}),Qe(()=>{n=_l(e,"vasfulldebug")}),s&&(console.warn("adsdkdebug is deprecated, use vasfulldebug instead"),n=!0),n&&(i=!0),{adsdkecmaver:t,vasfulldebug:n,vasnetworklogs:i,adsdkver:r,adsdkdebug:s}}(window),Rl=Ol.vasnetworklogs?1:.05,Dl=!lt(Math.random)||Math.random()===Math.random(),xl=Date&&Je(Date.now)?()=>Date.now():()=>(new Date).getTime(),Nl="undefined"===typeof window?void 0:window.performance,Vl=Nl&&Je(Nl.now),Ll=Nl&&Nl.timing&&Nl.timing.navigationStart?Nl.timing.navigationStart:xl();let Fl=0;const Ml=Vl?()=>Nl.now():()=>(()=>{const e=xl()-Ll;return Fl=Math.max(e,Fl),Fl})();let jl=Date.now()*Ml()%2147483647;const Bl=Dl?function(){return jl=16807*jl%2147483647,(jl-1)/2147483646}:function(){return Math.random()},Ul=Bl();var Yl=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};const Hl=e=>{const{expFlags:t}=e,r=Yl(e,["expFlags"]),i={},n={};return Do(e.expFlags,e=>{Do(e,e=>{let{CONTEXT:{FLAGS:t},TESTID:r}=e;Re(t)&&Do(function(e){if("function"===typeof Object.keys)return Object.keys(e);const t=[];for(const r in e)ct(e,r)&&t.push(r);return t}(t),e=>{var s;const a=t[e];i[e]=a,n[e]=null!==(s=n[e])&&void 0!==s?s:[],n[e].push({value:a,testId:r[0]})})})}),ut({flags:i,flagsMap:n},r)},Wl={testIds:"",flags:{}};Ke(()=>{try{return __UAAS_CFG__}catch(e){return e}});const ql=e=>{if(sl(e))return{error:e,config:Wl};try{const t=Re(e)?e:JSON.parse(""+(e||"")),r=(e=>!!Re(e)&&!(!("expFlags"in e)||!fl(e.expFlags)))(t)?Hl(t):t;if(!((e,t)=>{if(!Re(t))throw new Error("Parsed replaced macro is not an object: "+e);if(We(t.testIds),!("flags"in t)||!Re(t.flags))throw new Error("Parsed replaced macro has no flags field: "+e);return!0})(String(e),r))throw new Error("UAAS config is not valid: "+e);return{error:void 0,config:r}}catch(t){return{error:t,config:Wl}}},Gl=e=>{var t;const{error:r,config:i}=ql(e);if(!r){const e=i.flags,r=null!==(t=e.ADSDKVER)&&void 0!==t?t:e.VAS_STABLE_VERSION,n=Ye(r)?r:void 0;if(Ye(n))return{version:n,parsedUaasConfig:i,parseUaasConfigError:void 0}}return{version:void 0,parsedUaasConfig:void 0,parseUaasConfigError:r}},zl=(e=>(e=>{try{if("noModule"in e.HTMLScriptElement.prototype)return!0}catch(t){}return!1})(e)&&Cl(e))(window)?"ES2017":"ES5",Kl={ES5:"bundles",ES2017:"bundles-es2017"},Ql=pt(pt({},{InPage:"inpage",AdLoader:"loader",VideoBannerAd:"videobannerad",Multiroll:"multiroll",YaMusicAPI:"ya-music-api",VpaidPlayer:"vpaid_player",Rum:"rum"}),{MotionTailor:"motion_ad_creative",Survey:"survey"}),Zl="undefined"===typeof BUNDLES_PATH?"":BUNDLES_PATH,Jl=("undefined"===typeof BUNDLE_NAME||BUNDLE_NAME,"undefined"===typeof BUILD_TIME||BUILD_TIME,["a","n.ya","nd","ex.ru"].join(""),["y","a","nde","x.ru"].join(""),["y","a",".r","u"].join(""),["ya","sta","tic.net"].join("")),Xl=(["ver","ify.y","a","nde","x.ru"].join(""),"https://"+Jl+"/vas-bundles/"),$l=e=>{let{bundleName:t,win:r,ecmaVersion:i,version:n}=e;const s=Kl[i],a=Vo(r),o=Ql[t]+".bundle.js";const l=""+mt(n)+s+"/"+o;return Oe(a)?a(l):l},ed=e=>new Promise((t,r)=>{ot({method:"GET",url:"https://yandex.ru/ads/system/video-ads-sdk/vas_uaas",responseType:"json",retries:2,withCredentials:Boolean(e),onSuccess:e=>{t(e.response)},onError:()=>{r(new Error("Cannot load uaas"))}})});let td;try{td=BUILD_VERSION}catch(Th){td="INVALID_BUILD_VERSION"}const rd="VAS",id=e=>gt(e.substr(-4),4,"0"),nd=(void 0===(sd="1")&&(sd=td),[ft(44),rd,id(sd),gt(Date.now().toString().slice(0,10),10,"0")].join("x"));var sd;var ad=e(8037),od=e(68161);const ld={subpageIndex:(0,od.bk)(),deltas:{}};var dd=e(2705);const cd=/^(\d+:)?[0-5]\d:[0-5]\d\s+/;class ud{constructor(e){this.player=e,this.currentPromise=Promise.resolve([]),this.currentUrl=null,this.abortController=null,this.onTimeCodesReady=void 0,this.onTimeCodesReady=e=>{this.player.publicEmit("TimeCodes/Ready",e)}}async parseAndLoadTimecodes(e){let{description:t="",summaryUrl:r=""}=e;const i=kt(t);if(r)try{const e=await this.load(r);this.onTimeCodesReady({ugcTimecodes:i,aiTimecodes:e})}catch(Th){console.error(Th),this.onTimeCodesReady({ugcTimecodes:i})}else this.onTimeCodesReady({ugcTimecodes:i})}load(e){var t;return void 0===e&&(e=""),e?(e===this.currentUrl||(null==(t=this.abortController)||t.abort(),this.currentUrl=e,this.abortController=new AbortController,this.currentPromise=fetch(e,{signal:this.abortController.signal}).then(e=>e.text()).then(e=>kt(e))),this.currentPromise):(this.currentPromise=Promise.resolve([]),this.currentUrl=e,this.currentPromise)}}var hd=e(48703),pd=e(85084);const md=function(e){return void 0===e&&(e=window),/Chrome/.test(e.navigator.userAgent)};var vd=e(48265);const fd=function(e){return void 0===e&&(e=window),(0,za.i)(e).indexOf("SamsungBrowser")>-1};var gd=e(56920),yd=e(65435),Sd=e(53405),Ad=e(39383),bd=e(20817),Ed=e(23980),wd=e(25630),kd=e(84729);let Cd,Pd;!function(e){e.preroll="preroll",e.midroll="midroll",e.postPauseroll="postPauseroll",e.postroll="postroll",e.inroll="inroll"}(Cd||(Cd={})),function(e){e.AdCompleted="AdCompleted",e.LoadSource="LoadSource",e.PlayerDestroy="PlayerDestroy",e.CutOff="CutOff",e.PlayerError="PlayerError",e.AdTypeChange="AdTypeChange",e.InsertIntoCalled="InsertIntoCalled",e.AdSkipped="AdSkipped"}(Pd||(Pd={}));var Td=e(39789),Id=e(97622);const _d={play:qi.X.PLAY,pause:qi.X.PAUSE,end:qi.X.END,idle:qi.X.PAUSE};class Od extends Za.V{constructor(e){super(),this.params=e,this.destroyPromise=new Promise(e=>{this.addDestroyHandler(()=>{e()})}),this.currentAdPlaybackController=void 0,this.playbackQueue=[],this.logAdStart=(0,li.I)(()=>{const e=this.getAdTypeForLogs(),t=this.playbackQueue.length,{logEvent:r}=this.params;r({event:Ji.u.AdStart,params:{adPodsCount:t,adType:e}}),e===Cd.inroll&&r({event:Ji.u.InrollAdStart,params:{adPodsCount:t}})}),this.logAdEnd=(0,li.I)(()=>{const e=this.getAdTypeForLogs(),t=this.playbackQueue.length,{logEvent:r}=this.params;e===Cd.inroll&&r({event:Ji.u.InrollAdEnd,params:{adPodsCount:t}}),r({event:Ji.u.AdEnd,params:{stopAdReason:this.destroyReason||Pd.AdCompleted,adPodsCount:t,adType:e}})}),this.adPodIndex=0,this.startPlayingAd=(0,li.I)(async()=>{for(this.logAdStart();this.adPodIndex<this.playbackQueue.length&&!this.isDestroyed;)await this.playAdPod(this.playbackQueue[this.adPodIndex]),this.adPodIndex++;this.logAdEnd();const e=this.playbackQueue[this.playbackQueue.length-1];this.isDestroyed||void 0===e||(0,Fi.Y)(()=>{this.params.onLastAdPodStopped({adType:e.adViewer.getAdBreakType()})}),this.destroy(Pd.AdCompleted)}),this.dispatchOnFirstAdPodStarted=(0,li.I)(()=>{this.params.onFirstAdPodStarted()}),this.updateAdPodCloseState=e=>{this.params.onAdPodCloseStateChange(e.getAdPodCloseState())},this.updateAdVolumeAvailabilityStateChange=e=>{this.params.onAdVolumeAvailabilityStateChange(e.getAdVolumeAvailabilityState())},this.updateAdPodTimeToSkip=e=>{const t=e.getAdPodTimeToSkip();this.params.onAdPodTimeToSkipChange((0,rn.z)(t)?Math.ceil(t):void 0)},this.playAdPod=async e=>{let{adType:t,adViewer:r,additionalData:i,adDisplayConfig:n,posterUrl:s,adElement:a}=e;if(0===r.getAdPodsCount())return void Td.Y.log("AdViewer is empty");const{logEvent:o}=this.params;if(o({event:Ji.u.AdPodLoading,params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:i}}),t===Cd.inroll){const{cueId:e}=i;o({event:Ji.u.InrollAdPodStart,params:{adPodsCount:this.playbackQueue.length,cueId:e}}),r.setStatsRootFields({cueid:e})}const l=Rt({videoSlotCanAutoPlay:!0,controlsSettings:this.params.getControlsSettings(),visibilitySlot:this.params.playerContainer,lang:this.params.lang,contentAfterAd:this.getContentAfterAd(t,s),adSequence:{index:this.adPodIndex,count:this.playbackQueue.length},requestFullscreenStateChange:this.params.onRequestFullscreenStateChange},n),d=r.createPlaybackController(this.params.video,a,l);this.currentAdPlaybackController=d,this.updateAdPodDuration(d),this.params.onAdPodCurrentTimeChange(0),this.params.onAdSkippableStateChange(d.getAdSkippableState()),this.updateAdPodCloseState(d),this.updateAdVolumeAvailabilityStateChange(d),d.subscribe("AdPlayingStateChange",()=>{this.updateAdPodPlayingStateChange()}),d.subscribe("AdMediaStateChange",()=>{this.updateAdPodPlayingStateChange()}),d.subscribe("AdRemainingTimeChange",()=>{const e=d.getAdPodRemainingTime(),t=this.updateAdPodDuration(d);this.params.onAdPodCurrentTimeChange(t-e),this.updateAdPodTimeToSkip(d),this.updateAdPodPlayingStateChange()}),d.subscribe("AdPodError",e=>{const t=Rt({},e,{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:i});o({event:"AdPodError",params:t}),this.params.onAdPodError(t)}),d.subscribe("AdInteraction",()=>{this.params.onAdInteraction()}),d.subscribe("AdSkippableStateChange",e=>{this.updateAdPodTimeToSkip(d),this.params.onAdSkippableStateChange(e.skippableState)}),d.subscribe("AdStartRejected",e=>{this.params.onAdStartRejected(new Error("AdStartRejected"))}),d.subscribe("AdPodDurationChange",()=>{this.updateAdPodDuration(d)}),d.subscribe("AdPodStartRequest",()=>{this.params.onBeforeAdPodStart({adPlaybackController:d})}),d.subscribe("AdPodStarted",()=>{o({event:Ji.u.AdPodStart,params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:i}}),this.dispatchOnFirstAdPodStarted(),this.params.onAdPodStarted(),this.updateAdPodPlayingStateChange(),this.updateAdPodDuration(d)});const c=()=>{this.params.onAdPodDurationChange(void 0),this.params.onAdPodCurrentTimeChange(void 0),this.params.onAdSkippableStateChange(!1),this.params.onAdPodTimeToSkipChange(void 0),this.params.onAdPodCloseStateChange(void 0)};d.subscribe("AdPodStopped",()=>{c(),this.params.onAdPodStopped()}),d.subscribe("AdPodSkipped",()=>{c(),this.params.onAdPodSkipped()}),d.subscribe("AdContentSizeChange",()=>{const e=d.getAdContentSize();if(void 0===e)return;const{width:t,height:r}=e;this.params.onAdSizeChange({width:(0,rn.z)(t)?t:NaN,height:(0,rn.z)(r)?r:NaN})}),d.subscribe("AdPodImpression",()=>{o({event:Ji.u.AdPodImpression,params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:i}})}),d.subscribe("AdClickThru",()=>{this.params.onAdClickThru(),o({event:"AdClickThru",params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:i}})}),this.shouldSkipAllAdPods()&&d.subscribe("AdPodSkipped",()=>{this.destroy(Pd.AdSkipped)}),d.subscribe("AdPodCloseStateChange",()=>{this.updateAdPodCloseState(d)}),d.subscribe("AdVolumeAvailabilityStateChange",()=>{this.updateAdVolumeAvailabilityStateChange(d)}),await new Promise(e=>{d.subscribe("AdStopped",e),d.playAd(),this.params.onAdPodPlayingStateChange({adType:t,playingState:qi.X.BUFFERING,expectedStalledReason:0===this.adPodIndex?Fo.k.AdStart:Fo.k.AdBetween})}),this.currentAdPlaybackController=void 0,o({event:Ji.u.AdPodEnd,params:{adPodsCount:this.playbackQueue.length,adType:this.playbackQueue[this.adPodIndex].adPodType,additionalData:i}}),t===Cd.inroll&&(o({event:Ji.u.InrollAdPodEnd,params:{adPodsCount:this.playbackQueue.length,cueId:i.cueId}}),r.setStatsRootFields({cueid:void 0}))},this.addDestroyHandler(()=>{this.currentAdPlaybackController&&(this.currentAdPlaybackController.stopAd(),this.currentAdPlaybackController=void 0)})}getUtcPositionBeforeAd(){return this.params.utcPositionBeforeAd}getCurrentAdPodRemainingTime(){var e;return null==(e=this.currentAdPlaybackController)?void 0:e.getAdRemainingTime()}getQueueDuration(){return Ot(this.playbackQueue.map(e=>{let{adViewer:t}=e;return t}))}getIsLastAdPod(){return this.adPodIndex===this.playbackQueue.length-1}playAdViewers(e){this.isDestroyed||(this.playbackQueue.push(e),this.addDestroyHandler(()=>{e.adViewer.destroy()}),Promise.resolve().then(()=>this.startPlayingAd()))}resumeAd(){this.currentAdPlaybackController&&(this.currentAdPlaybackController.resumeAd(),this.updateAdPodPlayingStateChange())}pauseAd(){this.currentAdPlaybackController&&(this.currentAdPlaybackController.pauseAd(),this.updateAdPodPlayingStateChange())}skipAdPod(){this.currentAdPlaybackController&&this.currentAdPlaybackController.skipAd()}setVolume(e){this.currentAdPlaybackController&&this.currentAdPlaybackController.setAdVolume(e)}getDestroyPromise(){return this.destroyPromise}getAdTypeForLogs(){const[e]=this.playbackQueue;return e?e.adType:(this.params.onError(new Id.o({code:"AD_TYPE_IS_NOT_RECOGNIZED",isFatal:!1})),"unrecognized")}updateAdPodPlayingStateChange(){if(!this.currentAdPlaybackController)return;const e=this.currentAdPlaybackController.getAdMediaState(),t=this.currentAdPlaybackController.getAdPlayingState(),r=this.playbackQueue[this.adPodIndex].adPodType,i=this.params.video.src,n="stalled"===(null==e?void 0:e.name)&&i?{adType:r,playingState:qi.X.BUFFERING,expectedStalledReason:Fo.k.AdOther}:{adType:r,playingState:_d[t],expectedStalledReason:void 0};this.params.onAdPodPlayingStateChange(n)}updateAdPodDuration(e){const t=e.getAdPodDuration();return this.params.onAdPodDurationChange(t),t}shouldSkipAllAdPods(){var e;return Boolean(null==(e=this.params.adConfig)?void 0:e.skipAllAdPods)||!1}getContentAfterAd(e,t){const r=this.getIsLastAdPod(),i=this.shouldSkipAllAdPods(),n=t?[{url:t}]:[];switch(e){case Cd.preroll:return r||i?{type:"startVideo",poster:n}:{type:"nextAd",poster:[]};case Cd.postroll:return{poster:[]};case Cd.midroll:case Cd.postPauseroll:case Cd.inroll:return r||i?{type:"continueVideo",poster:n}:{type:"nextAd",poster:[]};default:return{poster:[]}}}}const Rd=900;let Dd;!function(e){e.original="original"}(Dd||(Dd={}));class xd{constructor(e,t){this.parent=e,this.element=document.createElement("div");const{style:r}=this.element;r.backgroundColor=function(e){switch(e){case Dd.original:return"rgba(0, 255, 0, 0.5)";default:throw new Error("Unexpected BroadcastAdType ["+e+"]")}}(t),r.width="10px",r.height="10px",r.cssFloat="left",r.marginRight="1px"}setVisibility(e){e?this.show():this.hide()}show(){this.parent.appendChild(this.element)}hide(){p(this.element)}}class Nd{constructor(e){this.element=document.createElement("div"),e.appendChild(this.element);const{style:t}=this.element;t.position="absolute",t.bottom="1px",t.left="1px"}createIndicator(e){return new xd(this.element,e)}}var Vd=e(98538);let Ld;!function(e){e.INVALID_INROLL_FRAME="INVALID_INROLL_FRAME",e.INVALID_START="INVALID_START",e.CROSSED_BY_INVALID="CROSSED_BY_INVALID",e.MAX_DURATION="MAX_DURATION"}(Ld||(Ld={}));class Fd extends Ra.v{constructor(){super(...arguments),this.adIntervals=[]}handleInrollFrame(e){if(!function(e){if(e.offset<-6e5||e.offset>63e4)return!1;if(void 0===e.cutoff)return!0;if(e.cutoff<-6e5||e.cutoff>63e4)return!1;const t=e.cutoff-e.offset;return t>=5e3&&t<=6e5}(e))return Td.Y.warn("invalid inroll frame:",e),void this.handleInvalidInrollFrame(e,Ld.INVALID_INROLL_FRAME);const t=this.adIntervals.find(t=>{let{cueId:r}=t;return r===e.cue_id});if(!t)return this.addAdIntervalByFastFrame(e);this.updateAdIntervalByInrollFrame(t,e)}validateAdIntervalsByTimestamp(e){for(let t=0;t<this.adIntervals.length;t++){const r=this.adIntervals[t];if(r.start>e)return;if(!r.isValid||r.isEndReceived)continue;if(e-r.start>6e5){this.invalidateAdInterval(r,Ld.MAX_DURATION);continue}const i=this.adIntervals[t+1];if(!i)return;i.start<=e&&this.invalidateAdInterval(r,Ld.CROSSED_BY_INVALID)}}handleInvalidInrollFrame(e,t){const r=this.adIntervals.find(t=>{let{cueId:r}=t;return r===e.cue_id});if(r)return this.invalidateAdInterval(r,t),void this.updateAdIntervalByInrollFrame(r,e);const i=Ft(e);this.invalidateAdInterval(i,t),this.pushAdInterval(i)}addAdIntervalByFastFrame(e){const t=Ft(e);return this.pushAdInterval(t),t.isValid?t:void 0}updateAdIntervalByInrollFrame(e,t){const r=t.pts+t.offset;if(Math.abs(e.start-r)>Vd.W)return void this.invalidateAdInterval(e,Ld.INVALID_START);if(e.isEndReceived)return;const i=void 0!==t.cutoff,n=i?t.pts+t.cutoff:Lt(t.pts,e.start);e.isEndReceived=i,e.end=n,this.handleUpdatedAdInterval(e)}findCrossedAdIntervals(e){return this.adIntervals.filter(t=>e!==t&&(e.start<t.start?e.end>t.start:t.end>e.start))}pushAdInterval(e){const t=this.findCrossedAdIntervals(e);t.length&&this.invalidateAdInterval(e,Ld.CROSSED_BY_INVALID),this.adIntervals.push(e),this.adIntervals.sort((e,t)=>{let{start:r}=e,{start:i}=t;return r-i}),this.invalidate(t,Ld.CROSSED_BY_INVALID),e.isValid&&this.emit("AdIntervalUpdated",e)}handleUpdatedAdInterval(e){const t=this.findCrossedAdIntervals(e);if(t.length)return t.push(e),void this.invalidate(t,Ld.CROSSED_BY_INVALID);e.isValid&&this.emit("AdIntervalUpdated",e)}invalidate(e,t){e.forEach(e=>{this.invalidateAdInterval(e,t)})}invalidateAdInterval(e,t){e.isValid&&(e.isValid=!1,e.invalidateReason=t,this.emit("InvalidAdInterval",{reason:t,cueId:e.cueId}))}}var Md=e(71424);class jd{constructor(){this.ads=[],this.postAdsIds=[]}add(e){if(this.postAdsIds.indexOf(e.cueId)>-1)return;const t=this.findById(e.cueId);t?t.startTime=e.startTime:this.ads.push(Mt({},e,{adViewers:e.adViewers.reduce((e,t)=>e.concat(t.separateAdPods()),[])}))}getAdViewers(e,t){const[r,i]=(0,Md.x)(this.ads,r=>{let{startTime:i,endTime:n,cueId:s,adViewers:a}=r;if(s!==t)return!1;if(e<i)return!1;if(n-15e3<e)return!1;for(const t of a){if(e+1e3*t.getAdDuration()<n)return!0}return!1});if(0===r.length)return[];this.postAdsIds.push(...r.map(e=>{let{cueId:t}=e;return t})),this.ads=i,r.sort((e,t)=>e.startTime-t.startTime);let n=0;const s=[];for(const{adViewers:a,endTime:o,cueId:l}of r)for(const t of a){const r=e+1e3*n;if(o-15e3<r)break;o<r+1e3*t.getAdDuration()||(s.push({adViewer:t,additionalData:{cueId:l},adType:Cd.inroll}),n+=t.getAdDuration())}return s}findById(e){return this.ads.find(t=>{let{cueId:r}=t;return r===e})}}var Bd=e(81261);class Ud extends Ws.M{constructor(e){let t,{video:r,slot:i,playerApi:n,playerStore:s,stateController:a,onError:o}=e;super(),this.adIntervalStorage=new Fd,this.isEnabled=!0,this.adIndicators=void 0,this.inrolls=new jd,this.playerApi=void 0,this.playerStore=void 0,this.stateController=void 0,this.onError=void 0,this.adIndicators=new Nd(i),this.playerApi=n,this.playerStore=s,this.stateController=a,this.onError=o;const l=this.adIndicators.createIndicator(Dd.original);r.addEventListener("timeupdate",()=>{const e=this.playerStore.getState(),i=Nt(e);if(t!==i){const e=void 0!==i;l.setVisibility(e),t=i}const n=Vt(e);n&&(this.adIntervalStorage.validateAdIntervalsByTimestamp(n),this.isEnabled&&!r.paused&&(this.stateController.updateOriginalAdState(),this.handleInrolls()))}),this.adIntervalStorage.on("AdIntervalUpdated",e=>{this.emit("AdIntervalUpdated",{cueId:e.cueId,start:e.start,end:e.end})}),this.adIntervalStorage.on("InvalidAdInterval",e=>{let{cueId:t,reason:r}=e;Td.Y.warn("invalid ad interval: [cueId="+t+"] [reason="+r+"]"),this.onError(new Bd.x({code:"INVALID_METADATA",details:{cueId:t,reason:r},isFatal:!1})),this.emit("AdIntervalRemoved",t)})}handleInrollFrame(e){const t=this.adIntervalStorage.handleInrollFrame(e);if(!t)return Promise.resolve();const{cueId:r,start:i,end:n,isEndReceived:s}=t,a=s?n+15e3:i+6e5;return this.addInroll(r,i,a,{inrollFrame:e})}setEnabled(e){this.isEnabled=e}async addInroll(e,t,r,i){let{inrollFrame:n}=i;this.playerApi.callbacks.logEvent({event:Ji.u.BroadcastAdReceived,params:{cueId:e,podStart:t,adType:Cd.inroll}});const s=this.playerApi.getMultiroll(),a=await s.inroll.loadViewers(jt({},n));if(0===a.length)return;const o=Ot(a);this.playerApi.callbacks.logEvent({event:Ji.u.BroadcastAdInit,params:{cueId:e,podStart:t,duration:o,adPodsCount:a.length,adType:Cd.inroll}}),this.inrolls.add({adViewers:a,cueId:e,startTime:t,endTime:r})}handleInrolls(){const e=this.playerStore.getState(),t=Vt(e);if(!t)return;const r=Nt(e);if(!r)return;const i=this.inrolls.getAdViewers(t,r);i.length&&this.emit("InrollAdPlayRequest",i)}}class Yd{constructor(){this.stopReasonInternal=void 0,this.stopDeferred=new Ns.B}stop(e){this.stopReasonInternal=e,this.stopDeferred.resolve(e)}get stopReason(){return this.stopReasonInternal}get stopPromise(){return this.stopDeferred.promise}}const Hd="https://strm.yandex.net/int/enc/srvr.xml",Wd=-1===Hd.indexOf("int/enc/srvr.xml"),qd={inStreamPlayingState:void 0,adConfig:void 0,adInfo:void 0,originalBroadcastAdCueId:void 0,originalBroadcastAdCues:{},adblockDetected:!1,hasPreroll:!1,adSyncInit:!1,nextAdInfo:void 0,nativeAdControlsVisibility:!0},Gd=Math.max(0,0);var zd=e(84189),Kd=e(63675);const Qd={autoplay:!1,initialAutoplay:!1,allowMuted:!0,autoplayImpossible:!1,startStage:Qi.o.init,preload:!0,from:void 0,encoderState:Kd.y.Detached,vsid:ln,streams:[],stream:void 0,sourceParams:void 0,sourceId:0,volume:1,muted:!1,userVolume:NaN,duration:NaN,currentTime:Gd,currentTimeLowGranularity:Gd,watchedTime:0,startPosition:{},programDateTime:void 0,fragmentDuration:zd.D,dvrStartTime:0,dvrDuration:NaN,videoType:void 0,playingState:qi.X.PAUSE,bufferingRanges:[],preview:void 0,isFullscreen:!1,isPip:!1,isVisible:void 0,togglePlaybackOnVisibilityChangeSetting:void 0,errorInfo:{},lastRecoverPosition:void 0,isDocumentVisible:!0,lastKnownBandwidthEstimate:{value:NaN,source:"default"},isAbrSupported:!1,isAbrEnabled:!1,defaultQuality:720,feed:!1,shouldEmitFrameRendered:!1,videoTrackValue:void 0,videoTracks:[],userVideoTrackName:void 0,userVideoTrackHeight:void 0,audioTrackValue:void 0,audioTracks:[],userAudioTrackName:void 0,userAudioTrackLang:void 0,textTrackEnabled:!1,nativeTextTrackVisible:void 0,textTrackValue:void 0,textTracks:[],userTextTrackEnabled:void 0,userTextTrackLang:void 0,userTextTrackName:void 0,playbackRate:an.mw,expectedStalled:{reason:Fo.k.Init,details:{}},videoWidth:0,videoHeight:0,playerConfig:void 0},Zd={hiddenControls:[],useNativeSubtitles:!1,nativeControlsVisibility:!0,skinDVRStartTime:0,skinDVRDuration:0};var Jd=e(31969),Xd=e(73933);const $d={min:an.mw,max:1/0},ec={min:0,max:an.mw},tc={min:0,max:2},rc={min:an.mw,max:2};var ic=e(86419);var nc=e(59470),sc=e(68109),ac=e(84727);let oc;!function(e){e.ApiPlay="ApiPlay",e.VolumeChange="VolumeChange",e.MuteChange="MuteChange"}(oc||(oc={}));const lc={startPosition:{},additionalParams:Yn,adConfig:void 0,withCredentials:!1,loop:!1,preview:"",videoInfo:{}};var dc=e(43870);let cc;!function(e){e.VideoIsNotPausedOnInit="VideoIsNotPausedOnInit",e.DetectByInterval="DetectByInterval",e.VideoPlayEvent="VideoPlayEvent",e.PlayCallback="PlayCallback"}(cc||(cc={}));var uc=e(41595),hc=e(46528),pc=e(21553),mc=e(85439);let vc;!function(e){e.setSource="setSource",e.destroy="destroy",e.end="end"}(vc||(vc={}));var fc=e(10521);let gc;!function(e){e.NO_MSE="NO_MSE",e.NO_CODECS="NO_CODECS",e.NO_SUPPORTED_DRM="NO_SUPPORTED_DRM",e.NO_SUPPORTED_FORMAT="NO_SUPPORTED_FORMAT",e.INVALID_STREAM_URL="INVALID_STREAM_URL"}(gc||(gc={}));var yc=e(44676),Sc=e(4699);var Ac=e(99501),bc=e(82554);const Ec=(0,e(22956).Q)(),wc=function(e){return void 0===e&&(e=window),/YaBrowser/.test((0,za.i)(e))},kc="MSE is not supported",Cc="detect.probe_mse_support.success",Pc=(0,li.I)(()=>{if(void 0===Ec)return Promise.reject(new Error(kc));if(function(){if(!wc())return!1;try{return void 0!==window.top.WEB_NTP_VERSION}catch(Ph){return!1}}())return Promise.resolve(Ec);(0,ad.iW)(Cc),(0,ad.iW)("detect.probe_mse_support.fail");if(function(){try{const e=Dn.tO.getItem("videoplayer-supported-mse");if(null===e)return;const{value:t,time:r,version:i}=JSON.parse(e);if(Date.now()-r>2592e5)return void Dn.tO.removeItem("videoplayer-supported-mse");if("1"!==i)return;return t||void 0}catch(e){return}}())return(0,ad.vG)(Cc),Promise.resolve(Ec);const e=document.createElement("video"),t=new Ec,r=URL.createObjectURL(t);let i,n;const s=new Promise((s,a)=>{i=()=>{s(Ec);try{Dn.tO.setItem("videoplayer-supported-mse",JSON.stringify({value:!0,time:Date.now(),version:"1"}))}catch(Ph){}},n=e=>a(new Error(e)),t.addEventListener("sourceopen",i),e.addEventListener("error",()=>n(kc)),e.addEventListener("durationchange",()=>n(kc)),e.setAttribute("x-webkit-airplay","deny"),(0,Ua.P)()&&setTimeout(()=>n("MSE didn't emit sourceopen event in 1 second"),1e3),e.src=r});return s.then(()=>(0,ad.vG)(Cc)).catch(()=>(0,ad.vG)("detect.probe_mse_support.fail")).then(()=>{URL.revokeObjectURL(r),t.removeEventListener("sourceopen",i),e.removeEventListener("error",()=>n(kc)),e.removeEventListener("durationchange",()=>n(kc))}),s});(0,Ui.v)(Pc());var Tc=e(63416),Ic=e(28040),_c=e(86348);const Oc=["mp4","webm"],Rc=["vp09.00.50.08.00.02.02.02.00","vp09.00.31.08.00.02.02.02.00","hev1.1.6.L150.90","hev1.1.6.L93.90","avc1.640028","avc1.64001F"],Dc=["mp4","ogg","webm"],xc=["mp4a.40.2","vorbis","opus","flac"];var Nc=e(68992);const Vc={supported:!0,engine:ic.$.NATIVE},Lc={supported:!0,engine:ic.$.HLS};let Fc;var Mc=e(10949),jc=e(86751),Bc=e(81323);const Uc={[Bc.W.fairplay]:[qn.D,qn.h9,qn.oo],[Bc.W.widevine]:[qn.ly],[Bc.W.playready]:[qn.xE],[Bc.W.clearkey]:[qn.dn],[Bc.W.none]:[]},Yc=(Hc=(0,Gs.z)(Uc),[].concat.apply([],Hc));var Hc,Wc=e(39962);let qc,Gc;!function(e){e.YandexBrowserLinux="YandexBrowserLinux",e.OldYandexBrowser="OldYandexBrowser",e.WebKitMediaKeys="WebKitMediaKeys",e.requestMediaKeySystemAccess="requestMediaKeySystemAccess",e.MSMediaKeys="MSMediaKeys",e.GenerateKeyRequest="GenerateKeyRequest",e.Constant="Constant",e.NotAvailable="NotAvailable",e.LiteMode="LiteMode"}(qc||(qc={}));const zc=[];let Kc;const Qc=(0,li.I)(async e=>{let{video:t}=e;const r=function(){try{const e=Dn.tO.getItem("videoplayer-supported-drm-systems");if(null===e)return;const{value:t,time:r,version:i}=JSON.parse(e);if(Date.now()-r>2592e5)return void Dn.tO.removeItem("videoplayer-supported-drm-systems");if("d41d8cd98f00b204e9800998ecf8427e"!==i)return void Dn.tO.removeItem("videoplayer-supported-drm-systems");if(0===t.supportedDrmSystems.length)return;return t}catch(e){return}}();(0,ad.iW)("detect.drm");const i=r||await async function(e){void 0===Gc&&(Gc=ar(e));const t=await Gc;return tr({},t,{supportedDrmSystems:[...t.supportedDrmSystems]})}({video:t});return zc.forEach(e=>e(i)),zc.length=0,Kc=i,void 0===r&&function(e){if(0!==e.supportedDrmSystems.length)try{Dn.tO.setItem("videoplayer-supported-drm-systems",JSON.stringify({value:e,time:Date.now(),version:"d41d8cd98f00b204e9800998ecf8427e"}))}catch(Ph){}}(i),(0,ad.vG)("detect.drm"),i.supportedDrmSystems}),Zc=document.createElement("video"),Jc={supported:!0,engine:ic.$.YASP},Xc=[qn.ly,qn.xE,qn.dn];let $c;var eu=e(5360),tu=e(59611);const ru=[qn.ly];var iu=e(54030),nu=e(42326);const su={destroy:As.Z,setStatsRootFields:As.Z,dispatchEvent:As.Z,getNextAdInfo:()=>{},preroll:{loadViewers:()=>Promise.resolve([])},midroll:{loadViewers:()=>Promise.resolve([])},inroll:{loadViewers:()=>Promise.resolve([]),schedule:As.Z},postroll:{loadViewers:()=>Promise.resolve([])},postPauseroll:{loadViewers:()=>Promise.resolve([])}},au=[{end:0,name:"invalid"},{end:750,name:"750)"},{end:1250,name:"[750-1250)"},{end:2e3,name:"[1250-2000)"},{end:3500,name:"[2000-3500)"},{end:5500,name:"[3500-5500)"},{end:9e3,name:"[5500-9000)"},{end:1e6,name:"[9000"},{end:1/0,name:"infinity"}],ou=[{end:0,name:"invalid"},{end:100,name:"100"},{end:250,name:"250"},{end:500,name:"500"},{end:750,name:"750"},{end:1e3,name:"1000"},{end:1500,name:"1500"},{end:2500,name:"2500"},{end:5e3,name:"5000"},{end:1/0,name:"infinity"}];var lu=e(16594),du=e(86566);class cu{constructor(){this.videoContentId=void 0,this.lastProgress=void 0}setVideoContentId(e){this.lastProgress=void 0,this.videoContentId=e}clearVideoContentId(){this.lastProgress=void 0,this.videoContentId=void 0}getProgress(){if(!this.videoContentId)return;const e=Er(this.videoContentId);return(0,rn.z)(e)?e:void 0}saveProgress(e){this.videoContentId&&("number"===typeof this.lastProgress&&Math.abs(this.lastProgress-e)<1||(this.lastProgress=e,wr(this.videoContentId,e)))}}const uu=["disablePictureInPicture","pip","x-yandex-pip"];var hu=e(4760),pu=e(76520),mu=e(62058);const vu=(0,yo.c)(window),fu={};var gu=e(11021),yu=e(51057),Su=e(50755),Au=e(48847),bu=e.n(Au),Eu=e(88370),wu=e(65220);class ku{constructor(e,t){void 0===e&&(e=window),this.handlers=[],this.names=void 0,this.namesOnVideo=void 0,this.onDestroy=new wu.M,this.win=void 0,this.video=void 0,this.fullscreenElement=null,this.setFullScreenElementFromAPI=()=>{const e=It(this.win,this.video);this.setFullscreenElement(e)},this.win=e,this.video=t,t&&(0,Ua.P)()&&(this.onDestroy.addOne((0,sa.O)(t,"webkitbeginfullscreen",()=>{this.setFullscreenElement(t)})),this.onDestroy.addOne((0,sa.O)(t,"webkitendfullscreen",()=>{this.setFullscreenElement(null)}))),this.names=Tt(e,t),this.namesOnVideo=Pt(e,t)[0],this.names&&(this.onDestroy.addOne((0,sa.O)(this.win.document,this.names.events.change,this.setFullScreenElementFromAPI)),this.setFullScreenElementFromAPI())}requestFullscreenForElement(e,t){if(void 0===this.names)throw new this.win.Error("Fullscreen is not supported");{const{request:r}=this.names;if(!(r in e))throw new this.win.Error("Fullscreen is not supported");e[r](t)}}isFullscreen(){return null!==this.fullscreenElement}exit(){if(void 0===this.names)throw new Error("Fullscreen is not supported");{let e,t=this.names;this.video&&this.fullscreenElement===this.video?(e=this.video,t=this.namesOnVideo||t):e=this.win.document;try{(0,Ui.v)(e[t.exit]().catch(e=>{Td.Y.error("Exit fullscreen for element:",e)}))}catch(Th){Td.Y.error("Exit fullscreen for element:",Th)}}}getFullscreenElement(){return this.fullscreenElement}addHandler(e){if("function"!==typeof e)throw new this.win.Error("Fullscreen handler must be a function");this.handlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e)}destroy(){this.handlers.length=0,this.onDestroy.dispatch(void 0)}setFullscreenElement(e){this.fullscreenElement=e,this.handlers.forEach(t=>t(e))}}let Cu;!function(e){e.PiP="PiP",e.YaBroEarly="YaBroEarly",e.YaBroAttrLegacy="YaBroAttrLegacy",e.YaBroAttrCurrent="YaBroAttrCurrent",e.OperaPopOut="OperaPopOut",e.SafariPresentationMode="SafariPresentationMode"}(Cu||(Cu={}));const Pu={[Cu.PiP]:{isSupported:e=>{if("pictureInPictureEnabled"in e.document){if(Nr()){const t=xr(e);return 20===t.major&&t.minor>4||t.major>20}return!0}return!1},getCurrent:e=>e.document.pictureInPictureElement||null,observe:(e,t,r)=>t?(t.addEventListener("enterpictureinpicture",r),t.addEventListener("leavepictureinpicture",r),()=>{t.removeEventListener("enterpictureinpicture",r),t.removeEventListener("leavepictureinpicture",r)}):As.Z,getPipWindow:e=>e.pictureInPictureWindow||null},[Cu.YaBroEarly]:{isSupported:(e,t)=>"broughtOut"in t,getCurrent:(e,t)=>t&&"broughtOut"in t&&t.broughtOut?t:null,observe:(e,t,r)=>t?(t.addEventListener("oowvideobringin",r),t.addEventListener("oowvideobringout",r),()=>{t.removeEventListener("oowvideobringin",r),t.removeEventListener("oowvideobringout",r)}):As.Z},[Cu.YaBroAttrCurrent]:{isSupported:e=>{if(Nr()){const t=xr(e);return 18===t.major&&t.minor>=6||t.major>18}return!1}},[Cu.YaBroAttrLegacy]:{isSupported:e=>Nr()&&xr(e).major<18},[Cu.SafariPresentationMode]:{isSupported:(e,t)=>"webkitPresentationMode"in t,getCurrent:(e,t)=>t&&"picture-in-picture"===t.webkitPresentationMode?t:null,observe:(e,t,r)=>t?(t.addEventListener("webkitpresentationmodechanged",r),()=>t.removeEventListener("webkitpresentationmodechanged",r)):As.Z},[Cu.OperaPopOut]:{isSupported:(e,t)=>"onoperadetachedviewcontrol"in t&&"onoperadetachedviewchange"in t}},Tu=[Cu.PiP,Cu.YaBroEarly,Cu.YaBroAttrCurrent,Cu.YaBroAttrLegacy,Cu.SafariPresentationMode,Cu.OperaPopOut];class Iu extends Ra.v{constructor(e,t){void 0===e&&(e=window),super(),this.api=null,this.apiName=null,this.window=void 0,this.pipWindow=null,this.currentElement=null,this.unsubscribeFromApi=As.Z,this.handlePipEvent=e=>{var t;const r=e.target;this.digestCurrentElement(r);const i=Boolean(this.getCurrentElement());this.pipWindow=(null==(t=this.api)||null==t.getPipWindow?void 0:t.getPipWindow(e))||null,this.emit("Change",i)},this.window=e;const r=t||window.HTMLVideoElement.prototype;for(let i=0;i<Tu.length;i++){const e=Tu[i],t=Pu[e];try{if(t.isSupported(this.window,r)){this.api=t,this.apiName=e;break}}catch(Th){}}this.digestCurrentElement(t),this.api&&this.api.observe&&(this.unsubscribeFromApi=this.api.observe(this.window,t,this.handlePipEvent))}getSupportedApiName(){return this.apiName}getCurrentElement(){return this.currentElement}addHandler(e){return this.api&&this.api.observe?(this.on("Change",e),()=>this.off("Change",e)):null}getPipWindowSize(){if(!this.pipWindow)return null;const{width:e,height:t}=this.pipWindow;return e&&t?{width:e,height:t}:null}destroy(){this.currentElement=null;const e=this.window.document;null!=e&&e.pictureInPictureElement&&(null==e.exitPictureInPicture||e.exitPictureInPicture()),this.off("Change"),this.unsubscribeFromApi()}digestCurrentElement(e){this.api&&this.api.getCurrent&&(this.currentElement=this.api.getCurrent(this.window,e))}}class _u extends Ra.v{constructor(e,t){super(),this.isSupportedPipMode=!0,this.isYandexPipMode=!1,this.isVisibilitySupported=void 0,this.window=void 0,this.element=void 0,this.fullscreenApi=void 0,this.pipApi=void 0,this.video=void 0,this.state={isPip:!1,isFullScreen:!1,isVisible:!0},this.observe=e=>(this.on("Change",e),()=>this.off("Change")),this.fireVisualStateHandlers=()=>{const{isPip:e,isVisible:t,isFullScreen:r}=this.state,i={isPip:e,isVisible:t,isFullScreen:r,isSupportedPipMode:this.isSupportedPipMode,isVisibilitySupported:this.isVisibilitySupported,isYandexPipMode:this.isYandexPipMode};this.emit("Change",i)},this.handleVisibilityChange=e=>{this.state.isVisible!==e&&(this.state.isVisible=e,this.fireVisualStateHandlers())},this.handlePipChange=e=>{this.state.isPip!==e&&(this.state.isPip=e,this.state.isFullScreen=this.getFullscreenStateProperty(this.fullscreenApi.getFullscreenElement()),this.fireVisualStateHandlers())},this.getFullscreenStateProperty=e=>{if(!(0,hn.RW)("web_new_fullscreen_logic"))return X(this.video.ownerDocument,this.video)||this.video===e;const{parentElement:t}=this.element;return!!t&&(X(this.video.ownerDocument,this.video,t)||this.video===e)},this.handleFullscreenChange=e=>{const t=this.getFullscreenStateProperty(e);this.state.isFullScreen!==t&&(this.state.isFullScreen=t,this.fireVisualStateHandlers())},this.element=e,this.window=Dr(this.element),this.isVisibilitySupported=t}setVideoElement(e){void 0===this.video&&(this.video=e,this.observeFullscreen(),this.observePip())}setExternalVisibility(e){this.handleVisibilityChange(e)}setExternalFullscreen(e){this.state.isFullScreen!==e&&(this.state.isFullScreen=e,this.fireVisualStateHandlers())}changeFullscreenState(e){e.isFullScreen!==this.state.isFullScreen&&(e.isFullScreen?this.fullscreenApi.requestFullscreenForElement(this.video,{navigationUI:"hide"}):this.fullscreenApi.exit())}changePipState(e){e.isPip!==this.state.isPip&&(e.isPip||this.pipApi.destroy())}destroy(){this.emit("Destroy"),this.off("Destroy")}getState(){const{isPip:e,isVisible:t,isFullScreen:r}=this.state;return{isPip:e,isVisible:t,isFullScreen:r,isSupportedPipMode:this.isSupportedPipMode,isVisibilitySupported:this.isVisibilitySupported,isYandexPipMode:this.isYandexPipMode}}getPipWindowSize(){return this.pipApi.getPipWindowSize()}observePip(){this.pipApi=new Iu(Dr(this.video),this.video),this.pipApi.addHandler(this.handlePipChange),this.once("Destroy",()=>{this.pipApi.destroy()});const e=this.pipApi.getSupportedApiName();this.isSupportedPipMode=e!==Cu.OperaPopOut,this.isYandexPipMode=e===Cu.YaBroAttrCurrent||e===Cu.YaBroAttrLegacy}observeFullscreen(){this.fullscreenApi=new ku(this.window,this.video),this.fullscreenApi.addHandler(this.handleFullscreenChange),this.once("Destroy",()=>{this.fullscreenApi.destroy()})}}var Ou=e(6134);var Ru=e(69937);const Du=[Cd.midroll,Cd.postroll,Cd.preroll],xu=()=>Fr((e,t,r)=>{const i=function(e){const{ad:{nextAdInfo:t},controller:{videoType:r}}=e;if(void 0!==t&&("postroll"!==t.adBreakType||r===Jd.D.VOD))return t.remainingTime}(e.getState());t.callbacks.onNextAdRemainingTimeChange(i)});var Nu=e(46153);const Vu=["ewma","hlsjs"];var Lu=e(79814);const Fu=()=>{let e=0;return(t,r)=>{const i=t.getState(),{ad:{adInfo:n,originalBroadcastAdCueId:s},controller:{watchedTime:a}}=i,o=Nt(i);if(o&&Dt(n)){const e=xt(i,o);if(e){const{startProgramDateTime:i,startVideoTime:s,startTimestamp:a}=n.params,o=e.end+15,l=Date.now()/1e3-a,d=i+s;if(o<l+d){const e={utc:d+l,videoTime:(0,rn.z)(s)?s+l:void 0};return t.setControllerStateField(ac.jY.startPosition,e),void r.stopAd({stopAdReason:Pd.CutOff})}}}if(o===s)return;t.setAdStateField(ac.Dt.originalBroadcastAdCueId,o);let l;void 0!==o?e=a:l=a-e,r.callbacks.onOriginalBroadcastAdStateChange({cueId:o,originalBroadcastAdDuration:l})}};var Mu=e(40070);const ju=(0,li.I)(e=>{var t,r;const i=(0,Fi.Y)(()=>(0,Mu.getGpu)()),n=$t();e.callbacks.logEvent({event:Ji.u.ClientInfo,params:{gpu:i?{renderer:i.renderer,vendor:i.vendor}:null,codecs:n,bundles:{supported:Ps(window)?"modern":"legacy",loaded:"modern"},display:{width:(null==(t=window.screen)?void 0:t.width)*window.devicePixelRatio,height:(null==(r=window.screen)?void 0:r.height)*window.devicePixelRatio,dpr:window.devicePixelRatio}}})});var Bu=e(643);var Uu=e(63440),Yu=e(38333);class Hu{constructor(e){let{playerApi:t,store:r}=e;this.playerApi=void 0,this.store=void 0,this.destroyed=!1,this.lastSourceId=void 0,this.prevVolumeInfoPayload=void 0,this.prevIsAbrEnabled=void 0,this.prevVideoTrackValue=void 0,this.waitingForVideoTracks=!1,this.currentPostPauserollInterval=void 0,this.watchedTimeCounter=void 0,this.effects={putAdblockDetected:Fr((e,t)=>{e.callbacks.onAdblockDetected(t)}),putVideoSize:Fr((e,t)=>{e.callbacks.onVideoSizeChange(t)}),putAudioTrackValue:Fr((e,t,r)=>{const i=e.getState();t.callbacks.onAudioTrackChange(Yt(i))}),putAudioTracks:Fr((e,t)=>{e.callbacks.onAudioTracksChange(t)}),putBufferingRanges:Fr((e,t)=>{e.callbacks.onBufferingRangesChange(t)}),putIsFullscreen:Fr((e,t,r)=>{t.callbacks.onFullScreenChange(r),Br(e,t),jr(e,t)}),putTextTracks:Fr((e,t)=>{e.callbacks.onTextTracksChange(t)}),putStream:Fr((e,t)=>{e.callbacks.onChangeStream(t)}),putStreamsWithSupportInfo:Fr((e,t)=>{e.callbacks.onStreamsWithSupportInfoChange(t)}),putVideoType:Fr((e,t)=>{e.callbacks.onVideoTypeChange(t)}),putAdInfo:Fr((e,t)=>{t||e.updateVideoControllerNativeControlsVisibility()}),putNextAdInfo:xu(),putStartStage:Fr((e,t,r)=>{t.callbacks.onStartStageChange(r)}),putLastKnownBandwidthEstimate:Fr((e,t,r)=>{Vu.includes(r.source)&&t.callbacks.onBandwidthEstimateChange(r)}),updateOriginalAdState:Fu(),putResourcesIdle:Fr(async(e,t)=>{t&&(e.callbacks.onResourcesIdle(),e.callbacks.logEvent({event:Ji.u.ResourcesIdle,params:{}}),await(0,Lu._)(5e3),ju(e))})},this.putVolumeInfo=e=>{var t,r;(this.store.setVolumeInfo(e),t=this.prevVolumeInfoPayload,r=e,t.volume!==r.volume||t.muted!==r.muted)&&(this.prevVolumeInfoPayload=e,function(e,t){let{volume:r,muted:i,changeReason:n}=t;e.callbacks.onVolumeChange({volume:r,muted:i,changeReason:n})}(this.playerApi,e),Br(this.store,this.playerApi))},this.updateAdInfo=Fr(e=>{const{ad:{adInfo:t}}=this.store.getState();this.putAdInfo(e),function(e,t,r){r&&t&&r.adType!==t.adType?(e.callbacks.onAdStateChange({state:$i.M.NOT_PLAYING,type:r.adType,adParams:{}}),e.callbacks.onAdStateChange({state:$i.M.PLAYING,type:t.adType,adParams:{}})):r&&!t?e.callbacks.onAdStateChange({state:$i.M.NOT_PLAYING,type:r.adType,adParams:{}}):!r&&t&&e.callbacks.onAdStateChange({state:$i.M.PLAYING,type:t.adType,adParams:{}})}(this.playerApi,e,t),void 0!==e&&Dt(e)&&this.requestMetaInfo(e,Ls.W)}),this.putInStreamPlayingState=Fr(e=>{this.store.setAdStateField(ac.Dt.inStreamPlayingState,e),this.handlePlayingStateChange()},qd.inStreamPlayingState),this.putPlayingState=Fr(e=>{this.store.setControllerStateField(ac.jY.playingState,e),this.handlePlayingStateChange(),this.handleMidroll(),Br(this.store,this.playerApi),this.handlePostPauseroll()},Qd.playingState),this.putCurrentTime=Fr(e=>{this.store.setControllerStateField(ac.jY.currentTime,e),this.updateWatchedTime(),Ur(this.store,this.playerApi),this.playerApi.callbacks.onCurrentTimeChange(e),this.store.setControllerStateField(ac.jY.currentTimeLowGranularity,Yr(e))}),this.handleMidroll=function(e){let t=!1;return async function(){if(!t){t=!0;try{await e(...arguments)}finally{t=!1}}}}(async()=>{const e=this.store.getState(),{controller:{currentTimeLowGranularity:t,duration:r,videoType:i,watchedTime:n}}=e;if(isNaN(r))return;const s=this.playerApi.getMultiroll(),a={watchedTime:n,sourceWatchedTime:n,currentTime:t,duration:r,videoType:i||Jd.D.VOD},o=await s.midroll.loadViewers(a);if(this.destroyed)return;const l=s.getNextAdInfo(a);this.putNextAdInfo(l),o.length<=0||await this.playerApi.playAdViewers(Cd.midroll,_t(o,Cd.midroll),{})}),this.handlePostPauseroll=function(e){let t;const r=e=>{t=e};return function(){t&&(t(),t=void 0);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e(r,...n)}}(e=>{const{controller:{duration:t,playingState:r,watchedTime:i}}=this.store.getState();if(isNaN(t)||0===i||r!==qi.X.PAUSE)return;if((0,nc.I)(this.store.getState()))return;const n=(0,di.u)();let s;const a=async()=>{const e=n()/1e3,t=await this.playerApi.getMultiroll().postPauseroll.loadViewers({pausedTime:e});this.destroyed||this.currentPostPauserollInterval===s&&(0===t.length||this.playerApi.planAdViewers(_t(t,Cd.postPauseroll)))};a(),s=window.setInterval(()=>{a()},15e3),e(()=>{clearInterval(s),this.currentPostPauserollInterval=void 0}),this.currentPostPauserollInterval=s}),this.putResourcesIdle=e=>{this.effects.putResourcesIdle(this.playerApi,e)},this.playerApi=t,this.store=r;const{controller:{volume:i,muted:n,isAbrEnabled:s,videoTrackValue:a}}=this.store.getState();this.prevVideoTrackValue={isAbrEnabled:s,videoTrackValue:a},this.prevIsAbrEnabled=s,this.prevVolumeInfoPayload={volume:i,muted:n,changeReason:void 0},this.watchedTimeCounter=new Uu.p}refreshCue(e){let{cueId:t,start:r,end:i}=e;const{ad:{originalBroadcastAdCues:n}}=this.store.getState(),s=Ni(n),a=s[t]||{start:r,end:i};void 0!==r&&(a.start=r),void 0!==i&&(a.end=i),s[t]=a,this.putOriginalBroadcastAdCues(s)}putOriginalBroadcastAdCues(e){this.store.setAdStateField(ac.Dt.originalBroadcastAdCues,e),this.updateOriginalAdState()}putIsAbrEnabled(e){if(this.prevIsAbrEnabled===e)return;this.prevIsAbrEnabled=e,this.store.setIsAbrEnabled(e);const{controller:{videoTrackValue:t}}=this.store.getState();this.putVideoTrackParams({videoTrackValue:t,isAbrEnabled:e})}putVideoTracks(e){const t=[...e].sort(qr);this.store.setControllerStateField(ac.jY.videoTracks,t),this.waitingForVideoTracks&&this.handleVideoTrackChange(),this.playerApi.callbacks.onVideoTracksChange(t)}putVideoTrackParams(e){let{isAbrEnabled:t,videoTrackValue:r}=e;const i={isAbrEnabled:t,videoTrackValue:r};if(zi()(i,this.prevVideoTrackValue))return;this.store.setVideoTrackParams({videoTrackValue:r,isAbrEnabled:t}),this.prevVideoTrackValue=i;const{controller:{videoTracks:n}}=this.store.getState();0!==n.length||void 0===i.videoTrackValue?this.handleVideoTrackChange():this.waitingForVideoTracks=!0}async handleVideoTrackChange(){this.waitingForVideoTracks=!1,await(0,Lu._)(0),this.playerApi.callbacks.onVideoTrackChange(qt(this.store.getState()))}handlePlayingStateChange(){const{controller:{playingState:e},ad:{inStreamPlayingState:t}}=this.store.getState();this.updateWatchedTime(),void 0===t||t===qi.X.END?this.playerApi.callbacks.onStateChange(e):this.playerApi.callbacks.onStateChange(t)}async requestMetaInfo(e,t){if(await(0,Lu._)(5e3),this.destroyed)return;const r=this.store.getState(),{ad:{adInfo:i},controller:{stream:n}}=r,s=function(e){const{controller:{stream:t}}=e;if(t)return void 0!==t.metaInfoUrl?t.metaInfoUrl:(0,nu.o)(t.url)?Wr(t.url).metaInfoUrl:void 0}(r);if(!i||!Dt(i)||i.params.startTimestamp!==e.params.startTimestamp||!n||!s)return;const{startProgramDateTime:a,startVideoTime:o,startTimestamp:l}=i.params,d=a+o,c=d+300,u=Math.round(1e3*(d+(Date.now()/1e3-l))),h=(0,Bu.H)(s,"video-timestamp",String(u));let p;try{if(p=await t({method:"GET",url:h}),this.destroyed)return}catch(y){return this.playerApi.callbacks.onError(new Yu.T({code:"META_INFO_REQUEST_FAILED",details:{url:h},isFatal:!1})),void this.refreshCue({end:c,cueId:i.params.cueId})}const m=function(e){try{return(0,wi.H)(e)?JSON.parse(e):void 0}catch(Th){return}}(p.responseText);if(!(0,fi.K)(m))return;const{cutoff:v,cue_id:f}=m;if(f!==i.params.cueId)return;const g=(0,rn.z)(v)?(u+v)/1e3:c;this.refreshCue({end:g,cueId:f}),this.requestMetaInfo(e,t)}updateWatchedTime(){const{controller:{currentTime:e,playingState:t,playbackRate:r,sourceId:i}}=this.store.getState();this.lastSourceId!==i&&(this.watchedTimeCounter.restoreLastUpdate(),this.lastSourceId=i);const n=function(e){let{ad:{adInfo:t}}=e;return void 0!==t&&Du.includes(t.adType)}(this.store.getState());this.watchedTimeCounter.calc(e,r,t===qi.X.PLAY&&!n),this.putWatchedTime(this.watchedTimeCounter.get())}async handlePostroll(){const e=this.playerApi.getMultiroll(),t=await e.postroll.loadViewers({});this.destroyed||(t.length>0&&await this.playerApi.playAdViewers(Cd.postroll,_t(t,Cd.postroll),{}),this.playerApi.stop(),this.putPlayingState(qi.X.END))}handleVideoTagPlayingStateChange(e){const{controller:{playingState:t,watchedTime:r}}=this.store.getState();if(t===e||t===qi.X.END&&e===qi.X.PAUSE)return;if(e===qi.X.BUFFERING)return void this.putPlayingState(qi.X.BUFFERING);if(t===qi.X.BUFFERING&&e===qi.X.PAUSE&&0===r||this.putStartStage(Qi.o.started),e!==qi.X.END)return void this.putPlayingState(e);const i=this.store.getState(),{ad:{adInfo:n}}=i;(0,nc.I)(i)?Td.Y.log("putPlayingState("+qi.X.END+") has not been dispatched because ad("+(n&&n.adType)+") is playing"):this.handlePostroll()}putAdblockDetected(e){this.store.setAdStateField(ac.Dt.adblockDetected,e),this.effects.putAdblockDetected(this.playerApi,e)}putVideoSize(e){this.store.setVideoSize(e),this.effects.putVideoSize(this.playerApi,e)}putPlaybackRate(e,t){this.store.setControllerStateField(ac.jY.playbackRate,e),t!==ac.Cb.PlaybackRateCatchupSelection&&function(e,t){e.callbacks.onPlaybackRateChange(t)}(this.playerApi,e)}enableTextTrack(){Mr(this.store,this.playerApi)}putAudioTrackValue(e){this.store.setControllerStateField(ac.jY.audioTrackValue,e),this.effects.putAudioTrackValue(this.store,this.playerApi,e)}putAudioTracks(e){this.store.setControllerStateField(ac.jY.audioTracks,e),this.effects.putAudioTracks(this.playerApi,e)}putBufferingRanges(e){this.store.setControllerStateField(ac.jY.bufferingRanges,e),this.effects.putBufferingRanges(this.playerApi,e)}putErrorInfo(e){this.store.setControllerStateField(ac.jY.errorInfo,e),function(e,t){let{error:r}=t;if(void 0===r)return;const{code:i,isFatal:n,details:s}=r;n?(Td.Y.error(i,s),e.setFullscreen(!1)):Td.Y.warn(i,s),e.callbacks.onError(r)}(this.playerApi,e)}putIsFullscreen(e){this.store.setControllerStateField(ac.jY.isFullscreen,e),this.effects.putIsFullscreen(this.store,this.playerApi,e)}putIsPip(e){this.store.setControllerStateField(ac.jY.isPip,e),jr(this.store,this.playerApi)}putTextTrackEnabled(e){this.store.setControllerStateField(ac.jY.textTrackEnabled,e),jr(this.store,this.playerApi)}putNativeTextTrackVisibility(e){this.store.setControllerStateField(ac.jY.nativeTextTrackVisible,e),jr(this.store,this.playerApi)}putTextTracks(e){this.store.setControllerStateField(ac.jY.textTracks,e),this.effects.putTextTracks(this.playerApi,e)}putStream(e){this.store.setControllerStateField(ac.jY.stream,e),this.effects.putStream(this.playerApi,e)}putLastKnownBandwidthEstimate(e){this.store.setControllerStateField(ac.jY.lastKnownBandwidthEstimate,e),this.effects.putLastKnownBandwidthEstimate(this.store,this.playerApi,e)}putStreamsWithSupportInfo(e){this.store.setControllerStateField(ac.jY.streamsWithSupportInfo,e),this.effects.putStreamsWithSupportInfo(this.playerApi,e)}putVideoType(e){this.store.setControllerStateField(ac.jY.videoType,e),this.effects.putVideoType(this.playerApi,e)}putAdInfo(e){this.store.setAdStateField(ac.Dt.adInfo,e),this.effects.putAdInfo(this.playerApi,e)}putNextAdInfo(e){this.store.setAdStateField(ac.Dt.nextAdInfo,e),this.effects.putNextAdInfo(this.store,this.playerApi,e)}putWatchedTime(e){this.store.setControllerStateField(ac.jY.watchedTime,e),this.handleMidroll()}putStartStage(e){this.store.setControllerStateField(ac.jY.startStage,e),this.effects.putStartStage(this,this.playerApi,e)}putEncoderState(e){this.store.setControllerStateField(ac.jY.encoderState,e),function(e,t){const{controller:{encoderState:r}}=e.getState();r===Kd.y.Attached&&Hr(e,t)}(this.store,this.playerApi)}putAutoplay(e){this.store.setControllerStateField(ac.jY.autoplay,e),Hr(this.store,this.playerApi)}updateOriginalAdState(){this.effects.updateOriginalAdState(this.store,this.playerApi)}destroy(){this.destroyed=!0,clearInterval(this.currentPostPauserollInterval)}}let Wu;!function(e){e.ExternalApi="ExternalApi",e.InternalApi="InternalApi"}(Wu||(Wu={}));class qu{constructor(e){let{initialState:t}=e;this.state=void 0,this.state=t}getState(){return this.state}removeCue(e){const{ad:t}=this.state,r=Ni(t.originalBroadcastAdCues);delete r[e],t.originalBroadcastAdCues=r}updateSourceId(){const{controller:e}=this.state;e.sourceId=e.sourceId+1}setVolumeInfo(e){let{volume:t,muted:r}=e;const{controller:i}=this.state;i.volume=t,i.muted=r}setVideoSize(e){let{videoWidth:t,videoHeight:r}=e;const{controller:i}=this.state;i.videoWidth=t,i.videoHeight=r}setIsAbrEnabled(e){const{controller:t}=this.state;t.isAbrEnabled=t.isAbrSupported&&e}setIsAbrSupported(e){const{controller:t}=this.state;t.isAbrSupported=e,t.isAbrEnabled=t.isAbrEnabled&&e}setVideoTrackParams(e){let{isAbrEnabled:t,videoTrackValue:r}=e;const{controller:i}=this.state;i.videoTrackValue=r,i.isAbrEnabled=t&&i.isAbrSupported}setUserAudioTrackParams(e){let{name:t,lang:r}=e;const{controller:i}=this.state;i.userAudioTrackName=t,i.userAudioTrackLang=r}setUserTextTrackParams(e){let{enabled:t,name:r,lang:i}=e;const{controller:n}=this.state;n.userTextTrackEnabled=t,n.userTextTrackName=r,n.userTextTrackLang=i}setUserVideoTrackParams(e){let{name:t,height:r}=e;const{controller:i}=this.state;i.userVideoTrackName=t,i.userVideoTrackHeight=r}setErrorInfo(e){const{controller:t}=this.state;var r;(!e||(r=e,!(0,da.Z)(r).length)||e.error&&e.error.isFatal)&&(t.errorInfo=e)}setSkinStateField(e,t){this.state.skin[e]=t}setAdStateField(e,t){this.state.ad[e]=t}setControllerStateField(e,t){const{controller:r}=this.state;r[e]=t}}var Gu=e(70083),zu=e(51656),Ku=e(93920),Qu=e(51254),Zu=e(19554);const Ju=!(0,Tc.z)()&&(0,_c.N)("video/webm")?"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAByhFNm3RAHU27i1OrhBVJqWZTrIHlTbuMU6uEFlSua1OsggEj7AEAAAAAAAC5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAADIq17GDD0JATYCNTGF2ZjU3Ljc2LjEwMFdBjUxhdmY1Ny43Ni4xMDBEiYhASwAAAAAAABZUrmsBAAAAAAAAYq4BAAAAAAAAWdeBAXPFgQGcgQAitZyDdW5khoZBX09QVVNWqoNjLqBWu4QExLQAg4EC4QEAAAAAAAARn4ECtYhA53AAAAAAAGJkgSBjopNPcHVzSGVhZAECOAGAuwAAAAAAH0O2dQEAAAAAAAAt54EAo4eBAACA/P/+o4eBABWA/P/+oAEAAAAAAAAPoYeBACkA/P/+daKDa3KD":"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAMm1kYXTeBABMYXZjNTcuMTA3LjEwMABCIAjBGDghEARgjBwhEARgjBwhEARgjBwAAAMbbW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAAAEsAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAkV0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAAEsAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAA1AAAEAAABAAAAAAG9bWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAADgZVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAABaG1pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABLHN0YmwAAABqc3RzZAAAAAAAAAABAAAAWm1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAANmVzZHMAAAAAA4CAgCUAAQAEgICAF0AVAAAAAAH0AAAAEYwFgICABRGQVuUABoCAgAECAAAAMHN0dHMAAAAAAAAABAAAAAEAAAQAAAAAAQAABBgAAAABAAAEAAAAAAEAAAHuAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAAEAAAAAQAAACRzdHN6AAAAAAAAAAAAAAAEAAAAGAAAAAYAAAAGAAAABgAAABRzdGNvAAAAAAAAAAEAAAAsAAAAGnNncGQBAAAAcm9sbAAAAAIAAAAB//8AAAAcc2JncAAAAAByb2xsAAAAAQAAAAQAAAABAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ny44My4xMDA=";var Xu=e(73304);const $u=function(e){const t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||(t=>e.setTimeout(t,1e3/60)),r=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame||(t=>e.clearTimeout(t));return{requestAnimationFrame:t.bind(e),cancelAnimationFrame:r.bind(e)}}(window),eh=$u.requestAnimationFrame,th=$u.cancelAnimationFrame;class rh{constructor(e){this.props=e,this.destroyed=!1,this.framesCount=1}destroy(){this.destroyed=!0}setFramesCount(e){this.framesCount=e}static isSupported(e){return!0}static create(e){return new([sh,nh,ih].find(t=>t.isSupported(e)))(e)}}class ih extends rh{constructor(e){super(e),this.handle=void 0;let t=e.video.currentTime;const r=()=>{this.destroyed||(e.video.currentTime!==t&&(t=e.video.currentTime,e.onTimeUpdate(e.video.currentTime)),this.handle=eh(r))};this.handle=eh(r)}async seekToDirection(e){const t=this.props.getFPS(),{video:r}=this.props,i=Math.floor(r.currentTime*t),n=Math.max(0,i+e),s=new Promise(e=>r.addEventListener("seeked",e,{once:!0}));return r.currentTime=n/t+.001,await s,this.props.onTimeUpdate(r.currentTime),r.currentTime}async seekToNextFrame(){return this.seekToDirection(this.framesCount)}async seekToPreviousFrame(){return this.seekToDirection(-this.framesCount)}destroy(){super.destroy(),th(this.handle)}static isSupported(e){return!0}}class nh extends ih{async seekToNextFrame(){const{video:e,onTimeUpdate:t}=this.props;return await e.seekToNextFrame(),t(e.currentTime),e.currentTime}static isSupported(e){return"function"===typeof e.video.seekToNextFrame}}class sh extends rh{constructor(){super(...arguments),this.frameRequestId=null}static isSupported(e){return"function"===typeof e.video.requestVideoFrameCallback&&!(0,vd.B)()}async seekToNextFrame(){const{video:e,getFPS:t}=this.props,r=t(),i=this.framesCount/r;return this.seekToTime(e.currentTime+i)}async seekToPreviousFrame(){const{video:e,getFPS:t}=this.props,r=t(),i=this.framesCount/r;return this.seekToTime(e.currentTime-i)}seekToTime(e){const{video:t,onTimeUpdate:r}=this.props;return new Promise(i=>{const n=()=>{this.destroyed||(r(t.currentTime),i(t.currentTime))};t.requestVideoFrameCallback(()=>n()),t.currentTime=e})}destroy(){super.destroy(),null!==this.frameRequestId&&(window.cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)}}var ah=e(89001);const oh="3036",lh="2923";var dh=e(2742),ch=e(70022),uh=e(33139),hh=e(10869),ph=e(790);const mh=document.createElement("video"),vh=Vo(window);class fh extends Ra.v{get state(){return this.playerStore.getState()}constructor(e){var t;super(),t=this,this.plannedAdViewers=[],this.callbacks=void 0,this.videoController=void 0,this.multiroll=su,this.accurateSeekingLock=!1,this.defineAutoplaySettingsDeferred=new Ns.B,this.abortRequestAutoplaySettings=As.Z,this.playbackProgressStorage=new cu,this.visualState=void 0,this.container=void 0,this.video=void 0,this.videoSizeSensor=void 0,this.div=void 0,this.adDiv=void 0,this.playbackQualityController=void 0,this.playerStore=void 0,this.stateController=void 0,this.broadcastAd=void 0,this.playCallbacks=[],this.config=void 0,this.mediaInternalsHistory=void 0,this.currentAdPlaybackQueue=void 0,this.stopLoadSource=As.Z,this.onReady=void 0,this.playDeferred=void 0,this.becameStarting=!1,this.canMuteForPlay=!0,this.destroyed=!1,this.handleAdEnd=void 0,this.frameSeeker=void 0,this.vsid=void 0,this.vpuid=void 0,this.playingStateReason=Xi.l.Unknown,this.isAdblockDetected=Wd,this.currentVideoPlayingState=qi.X.PAUSE,this.adState=dn,this.abortPreloadStorage={},this.stopAd=()=>Promise.resolve(),this.setHiddenControls=e=>{e.indexOf(wn.th.ALL)>-1?this.playerStore.setSkinStateField(ac.rE.hiddenControls,wn.uM):this.playerStore.setSkinStateField(ac.rE.hiddenControls,e),this.videoController&&!this.playerStore.getState().ad.adInfo&&this.videoController.updateNativeControlsVisibility()},this.setPlaybackRate=e=>{var t;const{max:r,min:i}=function(e){let{controller:{videoType:t,currentTime:r,engine:i},skin:{skinDVRStartTime:n,skinDVRDuration:s}}=e;return Gt({videoType:t,currentTime:r,dvrStartTime:n,dvrDuration:s,engine:i})}(this.state);null==(t=this.videoController)||t.setPlaybackRate((0,pd.u)(e,i,r),ac.Cb.Other)},this.seek=function(e,r){void 0===r&&(r=!1);const i="number"===typeof e?{videoTime:t.denormalizeTime(e)}:e,{videoTime:n,utc:s}=i;if("number"===typeof s){const e=s-t.videoController.getUtcStartTime();t.seekToVideoPosition(e,r)}else"number"===typeof n&&t.seekToVideoPosition(n,r)},this.setVolume=e=>{if(void 0===this.videoController)return this.stateController.putVolumeInfo({muted:this.state.controller.muted,volume:e,changeReason:en.SetVolume}),void this.abortRequestAutoplaySettings(oc.VolumeChange);const{muted:t,volume:r}=this.state.controller;let i=e,n=t;if(0===e){const{userVolume:e}=this.state.controller;i=e||r||_n,n=!0}this.stateController.putVolumeInfo({volume:i,muted:n,changeReason:en.SetVolume}),this.currentAdPlaybackQueue&&(0,nc.I)(this.state)?this.currentAdPlaybackQueue.setVolume(e):this.videoController&&(this.videoController.setVolume(i),this.videoController.setMuted(n))},this.setMuted=e=>{const t={volume:this.state.controller.volume,muted:e,changeReason:en.SetMuted};if(!this.videoController)return this.stateController.putVolumeInfo(t),void this.abortRequestAutoplaySettings(oc.MuteChange);this.stateController.putVolumeInfo(t),this.currentAdPlaybackQueue&&(0,nc.I)(this.state)?this.currentAdPlaybackQueue.setVolume(e?0:this.state.controller.volume):this.videoController&&this.videoController.setMuted(e)},this.playInrollAd=e=>{this.multiroll.inroll.schedule($r({},e,{timeOffset:(null==e?void 0:e.timeOffset)||0}))},this.playAdViewers=async(e,t,r,i)=>{At("player.adsdk.empty."+e),At("player.adsdk.start."+e),At("player.adsdk.fail."+e);try{await this.initAdPlaybackQueue(e),await this.playAdViewersInternal(e,t,r,i)}catch(Th){At("player.adsdk.fail."+e),(0,hc.Kp)({reason:"PLAY_AD_VIEWERS_ERROR",adSdkVersion:Ut(),adSdkLoaderVersion:Bt(),adblockDetected:this.state.ad.adblockDetected,adType:e,bandwidth:gr(void 0)});const n=new Id.o((0,hh.K)(Th)).overridingClone({code:"PLAY_AD_VIEWERS_ERROR",isFatal:!1,details:{adType:e,adViewersWithData:t,adDisplayConfig:r}});this.onError(n)}},this.defineAutoplaySettingsAndLoadSource=()=>{const e=this.config.source,r=this.playerStore.getState(),{initialAutoplay:i,allowMuted:n,muted:s,volume:a,togglePlaybackOnVisibilityChangeSetting:o}=r.controller;this.defineAutoplaySettings(this.video,{autoplay:i,muted:s||0===a,allowMuted:!(!o||!o.forceAutoplay)||n}),this.loadSource(e,{shouldSaveProgress:!1}).catch(e=>{Td.Y.error("load source error",e),kr(e,$i.E.INIT),this.onError(e)}).then(()=>{this.onReady(),this.state.controller.autoplay||this.stateController.putResourcesIdle(!0)}).then(()=>{void 0!==e.params.adConfig&&(Wd?(0,Ls.W)({method:"GET",url:Hd,retries:2,checkStatus:e=>e>=200&&e<400}).then(e=>{if(-1===e.responseText.trim().indexOf('<VAST version="3.0">'))throw new Error("Invalid XML in response from ["+Hd+"]")}):Promise.resolve()).catch((function(e){let{message:r}=void 0===e?{}:e;t.stateController.putAdblockDetected(!0),t.onError(new Yu.T({code:"STRM_ABD_INVALID_RESPONSE",isFatal:!0,details:{reason:r}}))}))})},this.subscribeHandlers=()=>{this.on("VideoTypeChange",e=>{this.stateController.putVideoType(e)}),this.on("DurationChange",e=>{this.playerStore.setControllerStateField(ac.jY.duration,e),this.videoController.updateDVRParams(),this.updateVideoInfo()}),this.on("DvrChange",()=>{this.updateVideoInfo()}),this.on("ProgramDateTimeChange",e=>{this.playerStore.setControllerStateField(ac.jY.programDateTime,e)}),this.on("CurrentTimeChange",this.handleVideoControllerCurrentTimeChange),this.on("BufferingRangesChange",e=>{this.stateController.putBufferingRanges(e)}),this.on("VideoTrackValueChange",e=>{this.stateController.putVideoTrackParams({videoTrackValue:e,isAbrEnabled:this.state.controller.isAbrEnabled})}),this.on("VideoTracksChange",e=>{this.stateController.putVideoTracks(e)}),this.on("AudioTrackValueChange",e=>{this.stateController.putAudioTrackValue(e)}),this.on("AudioTracksChange",e=>{this.stateController.putAudioTracks(e)}),this.on("TextTrackValueChange",e=>{const{controller:{textTrackEnabled:t,textTrackValue:r}}=this.state,i=void 0!==e,n=void 0===e?r:e;this.stateController.putTextTrackEnabled(i),this.playerStore.setControllerStateField(ac.jY.textTrackValue,n);if((t?r:void 0)===(i?e:void 0))return;const s=i?Ht(this.state):void 0;this.callbacks.onTextTrackChange(s)}),this.on("TextTracksChange",e=>{this.stateController.putTextTracks(e)}),this.on("VideoPlayingStateChange",e=>{this.stateController.handleVideoTagPlayingStateChange(e)});const e=this.logCanPlay($i.E.INIT);this.once("CanPlay",e),this.once("SetSource",()=>this.off("CanPlay",e));const t=this.logLoadStartHavingCurrentData($i.E.INIT);this.once("LoadedData",t),this.once("SetSource",()=>this.off("LoadedData",t)),this.once("Destroy",()=>{this.off("ContentImpression")});const r=(0,gd.Y)(this.getContainerDocument(),e=>{this.playerStore.setControllerStateField(ac.jY.isDocumentVisible,e)});var i;this.once("Destroy",r),this.once("Destroy",(i=e=>{this.callbacks.logEvent({event:Ji.u.DrmSystemsSupportDetected,params:e})},void 0===Kc?(zc.push(i),()=>{const e=zc.indexOf(i);-1!==e&&zc.splice(e,1)}):(i(Kc),As.Z)))},this.setBackgroundImage=e=>{this.div.style.backgroundImage=e?"url('"+e+"')":""},this.setBackgroundVisibility=e=>{this.div.style.backgroundSize=e?"contain":"0  0"},this.lastMuted=void 0,this.playAdViewersInternal=async(e,t,r,i)=>{if(!this.currentAdPlaybackQueue)return;const n=this.currentAdPlaybackQueue,{ad:{adInfo:s}}=this.state,a=this.getAdViewersWithData(t),o=a.map(e=>{let{adViewer:t}=e;return t}),l=function(e){return e.reduce((e,t)=>e+Math.max(Math.floor(t.getAdPodsCount())),Math.max(Math.floor(0)))}(o);if(0===l)return bt("player.adsdk.empty."+e),(0,hc.Kp)({reason:"NO_AD_PODS_TO_PLAY_AD",adSdkVersion:Ut(),adSdkLoaderVersion:Bt(),adblockDetected:this.state.ad.adblockDetected,adType:e,bandwidth:gr(void 0)}),void this.callbacks.logEvent({event:"NoAdPodsToPlayAd",params:void 0});s&&!i&&this.onError(new Id.o({code:"AD_IS_ALREADY_PLAYING",isFatal:!1,details:{currentAdType:s.adType,adType:e}})),this.prepareBeforeOrAfterAd(!1,e),this.callbacks.logEvent({event:"PlayAdViewers",params:{adType:e,adPodsCount:l}});const d=e===Cd.inroll?{cueId:this.getAdViewersCueId(e,t),startProgramDateTime:this.state.controller.programDateTime/1e3,startVideoTime:this.videoController?this.videoController.getCurrentTime():this.state.controller.currentTime,startTimestamp:Date.now()/1e3}:{};var c;(0,vd.B)()&&(this.lastMuted=null==(c=this.videoController)?void 0:c.getMuted());let u=!1;const h=(0,li.I)(async t=>{let{stopAdReason:r}=t;const i=this.state.ad.inStreamPlayingState;u=!0,this.currentAdPlaybackQueue&&(this.currentAdPlaybackQueue.destroy(r),this.currentAdPlaybackQueue=void 0),this.stateController.updateAdInfo(void 0),this.callbacks.onExpectedStalledChange({reason:Fo.k.AdEnd,details:{adType:e}}),this.prepareBeforeOrAfterAd(!0,e);const n=async()=>{At("encoder.attach");try{await this.attachEncoder()}catch(Th){Td.Y.error(Th)}finally{bt("encoder.attach",{additional:{engine:this.state.controller.engine}})}};r!==Pd.LoadSource&&r!==Pd.PlayerDestroy&&await n(),e!==Cd.postroll&&(Td.Y.log("videoController.play()"),i!==qi.X.PAUSE&&(0,Ui.v)(this.videoController.play()))});this.stopAd=h;const p=Ot(o)+n.getQueueDuration(),m=this.currentAdPlaybackQueue.getUtcPositionBeforeAd(),v=this.getSeekPositionAfterAd({adType:e,adViewersDuration:p,utcPosition:m});this.playerStore.setControllerStateField(ac.jY.startPosition,v),this.prepareBeforeAd(e),(()=>{this.stateController.updateAdInfo({adType:e,params:d})})(),u||(a.forEach(t=>{let{adViewer:i,additionalData:s,adType:a}=t;n.playAdViewers({adType:e,adPodType:a,adViewer:i,additionalData:s,adDisplayConfig:r,adElement:this.adDiv,posterUrl:this.getPosterUrlForAd()})}),this.plannedAdViewers=[],await n.getDestroyPromise(),this.handleAdEnd&&await this.handleAdEnd(),u||await this.stopAd({stopAdReason:Pd.AdCompleted}))},this.handleVideoControllerCurrentTimeChange=e=>{if(this.state.controller.encoderState!==Kd.y.Attached)return;!(e<.5&&this.state.controller.engine===ic.$.NATIVE&&this.state.controller.videoType===Jd.D.LIVE)&&(this.stateController.putCurrentTime(e),this.playerStore.getState().ad.adInfo||this.playbackProgressStorage.saveProgress(e)),this.videoController.updateDVRParams(),this.updateVideoInfo()},this.handleVisualStateChange=e=>{let{isPip:t,isFullScreen:r,isVisible:i}=e;this.stateController.putIsFullscreen(r);const{isSupportedPipMode:n,isYandexPipMode:s,isVisibilitySupported:a}=this.visualState;this.emit("VisualStateChange",$r({isPip:t,isVisible:i,isFullScreen:r,isSupportedPipMode:n,isYandexPipMode:s,isVisibilitySupported:a},this.videoSizeSensor.getSize())),n&&!s&&(this.stateController.putIsPip(t),a&&this.playerStore.setControllerStateField(ac.jY.isVisible,i))},this.onRecover=e=>{this.callbacks.onRecover($r({},e,this.getSyncDebugInfo()))},this.logLoadStartHavingCurrentData=e=>()=>{if(!fd()){if(this.video.readyState<this.video.HAVE_CURRENT_DATA){const t=this.logLoadStartHavingCurrentData(e);return this.once("LoadedData",t),void this.once("SetSource",()=>this.off("LoadedData",t))}this.isCanPlayAndStartHavingCurrentDataLog()&&this.emit("ContentImpression")}},this.logCanPlay=e=>()=>{fd()||this.isCanPlayAndStartHavingCurrentDataLog()&&(this.callbacks.logEvent({event:Ji.u.CanPlay,params:{stage:e}}),this.emit("ContentImpression"))},this.isCanPlayAndStartHavingCurrentDataLog=()=>!this.state.ad.hasPreroll&&this.state.controller.preload,this.startStream=()=>this.state.controller.encoderState===Kd.y.Attached?Promise.resolve():this.attachEncoder().catch(Td.Y.error),this.handleFirstContentImpression=()=>{this.resetPosterFitStyle();const{controller:e}=this.playerStore.getState(),t=e.videoTracks.find(t=>{let{value:r}=t;return r===e.videoTrackValue});(0,uc.I8)({browserRtt:Sr((0,kd.n)()),calcRtt:Sr(Ir())}),(0,hc.G1)(this.videoController.engine,{videoType:e.videoType,bandwidth:gr(t&&t.bitrate),startWithCapping:Kt(t,this.videoController)},this.state.ad.adSyncInit),this.callbacks.logEvent({event:Ji.u.ContentImpression,params:{}}),this.callbacks.onContentImpression({hasPreroll:this.state.ad.adSyncInit,engine:this.state.controller.engine}),this.stateController.putResourcesIdle(!0),this.hidePoster()},this.emitEvent=(e,t,r)=>{const i={data:t,sourceId:null!=r?r:this.getSourceId()};this.emit(e,i)},this.logEvent=e=>this.emitEvent("onLogEvent",e,-1);const{vsid:r,vpuid:i,getExternalVisualState:n,onEventEmitterInit:s,config:a,container:l,originalContainer:d}=e;null==s||s(this),this.vsid=r,this.vpuid=i,function(e){return void 0===e&&(e=window),(0,Bi.w)(e.document.querySelectorAll("style[data-ya-player-style]"))}().forEach(e=>function(e,t){o(e)!==o(t)&&t.appendChild(e)}(e,l));const c=(0,hn.RW)("web_new_fullscreen_logic")?d:l;this.visualState=new _u(c,a.isVisibilitySupported||!1),this.setMaxListeners(50),this.container=l,this.config=a,this.onReady=(0,li.I)(()=>this.emitEvent("onReady",void 0,NaN));const u=a.source,{params:h}=u,{additionalParams:p}=h,m=a.volume,{togglePlaybackOnVisibilityChange:v}=a;this.callbacks=this.createStreamPlayerCallbacks();const{autoplay:f}=a,g=a.hidden;a.debug&&Td.Y.enableConsole(),this.div=document.createElement("div"),this.div.className=bu().locals.StreamPlayer,(0,wi.H)(a.backgroundColor)&&(this.div.style.backgroundColor=a.backgroundColor),this.adDiv=document.createElement("div"),this.adDiv.className=bu().locals.StreamPlayer_ui,this.div.tabIndex=-1,this.container.appendChild(this.div),this.container.appendChild(this.adDiv);const y=Boolean(a.allowMuted),S=$r({},a);delete S.callbacks;const A={controller:$r({},Qd,{autoplay:f,initialAutoplay:f,allowMuted:y,preload:a.preload,from:p.from,vsid:p.vsid,volume:a.volume,muted:a.muted,userVolume:void 0===a.volume?NaN:m,isFullscreen:!1,togglePlaybackOnVisibilityChangeSetting:v,isDocumentVisible:(0,ga.s)(this.getContainerDocument()),isAbrEnabled:a.autoQuality,defaultQuality:a.defaultQuality,feed:a.feed,shouldEmitFrameRendered:a.shouldEmitFrameRendered,preview:h.preview,posterStyle:h.posterStyle,playerConfig:S}),ad:$r({},qd,{adblockDetected:Wd}),skin:$r({},Zd,{hiddenControls:g,useNativeSubtitles:!0,nativeControlsVisibility:!(0,Ed.p)(g)})},b=new qu({initialState:A}),E=new Hu({store:b,playerApi:this});this.playerStore=b,this.stateController=E,this.once("Destroy",()=>this.stateController.destroy()),this.updateRumInfo();const w=document.createElement("video");this.video=this.handleVideoNode(w);this.frameSeeker=rh.create({video:this.video,getFPS:()=>{const e=this.getState().controller,{videoTracks:t,videoTrackValue:r}=e,i=t.find(e=>e.value===r);return(null==i?void 0:i.frameRate)||30},onTimeUpdate:As.Z}),this.once("Destroy",()=>{var e;null==(e=this.frameSeeker)||e.destroy(),this.frameSeeker=void 0}),w.poster||(w.poster=wd.O),this.playbackQualityController=new Eu.Q(w),gu.e.isYaspElement(w)||(this.mediaInternalsHistory=new du.h(w));const k=(0,nn.n)(w);this.div.appendChild(w),k();const C=this.getContainerDocument().getElementsByTagName("head")[0];we(bu().toString(),C),Ee(w,bu().locals.player__video),this.videoSizeSensor=new yd.b(w),(0,Fi.Y)(()=>(As.Z||window.Ya.Rum.sendHeroElement)()),w.setAttribute("playsinline","playsinline"),w.setAttribute("webkit-playsinline","webkit-playsinline"),this.visualState.setVideoElement(w),this.on("VisualStateChange",e=>{e&&this.callbacks.onVisualStateChange(e)});const P=(0,Ad.P)(e=>{let{width:t,height:r}=e;this.emit("VisualStateChange",$r({},this.visualState.getState(),{width:t,height:r}))},500);if(this.videoSizeSensor.onResize.add(e=>{let{width:t,height:r}=e;return P({width:t,height:r})}),P(this.videoSizeSensor.getSize()),this.once("Destroy",()=>this.videoSizeSensor.destroy()),(!a.allowPip||v&&this.visualState.isYandexPipMode)&&Cr(window,!1,this.video),this.visualState.observe(this.handleVisualStateChange),this.handleVisualStateChange(this.visualState.getState()),this.defineAutoplaySettingsAndLoadSource(),this.initTelemetryTracking(),this.iosLandscapeScreenOrientationWorkaround(),Promise.resolve().then(()=>{this.initEventSubscribes(a,w)}),(0,ah.s)(oh),(0,ad.iW)("detect.visibility"),"boolean"===typeof a.initialVisibility)this.visualState.setExternalVisibility(a.initialVisibility),(0,ad.vG)("detect.visibility");else{const{isVisible:e}=n();this.visualState.setExternalVisibility(e),(0,ad.vG)("detect.visibility")}}handleVideoNode(e){const{logEvent:t}=this.callbacks;return function(e,t,r,i,n){if(!gu.e.isSupported())return e;if(gu.e.isYaspElement(e))return e;const s=e=>{r(e)},a=e=>{let{name:r,data:i}=e;return t({event:r,params:i})};return gu.e.messenger.on("yasp-event",a),gu.e.messenger.on("yasp-error",s),i(async()=>{gu.e.isYaspElement(e)&&await e.detach(),gu.e.messenger.off("yasp-event",a),gu.e.messenger.off("yasp-error",s),gu.e.hasActiveInstance()||await gu.e.destroy()}),gu.e.attach(e,n)}(e,t,e=>this.onError(e),e=>{this.once("Destroy",e)},$r({},yu.l,{perfLogUrl:this.config.perfLogUrl,enableSourceBufferTimeline:(0,hn.RW)("web_yasp_enable_source_buffer_timeline"),bufferingController:(0,ph.O)()}))}initTelemetryTracking(){this.callbacks.onCapSizeChange(this.getMaxCapAllowedVideoTrack());const e=()=>{const e=this.getMaxCapAllowedVideoTrack();this.callbacks.onCapSizeChange(e)},t=()=>{const e=this.getBandwidthEstimate();e&&this.callbacks.onBandwidthEstimateChange(e)},r=e=>{this.callbacks.onPlaybackQualityUpdate(e)};this.once("Destroy",()=>{this.off("CanPlay",t),this.off("CanPlay",e),this.off("VideoTracksChange",e),this.off("VisualStateChange",e),this.off("VideoTrackValueChange",e),this.off("PlaybackQualityUpdate",r)}),this.on("PlaybackQualityUpdate",r),this.on("CanPlay",t),this.on("CanPlay",e),this.on("VideoTracksChange",e),this.on("VisualStateChange",e),this.on("VideoTrackValueChange",e)}recoverStream(){return this.videoController?this.videoController.recoverStream():Promise.resolve()}getRecoverHelper(){var e;if(this.videoController)return null==(e=this.videoController)?void 0:e.recoverHelper}toggleNativeSubtitles(e){var t;null==(t=this.videoController)||t.toggleNativeSubtitles(e)}updateVideoControllerNativeControlsVisibility(){var e;null==(e=this.videoController)||e.updateNativeControlsVisibility()}getMultiroll(){return this.multiroll}setPictureInPictureEnabled(e){Cr(window,e,this.video)}setPictureInPicture(e){this.visualState.changePipState({isPip:e})}getRemainingBufferedTime(){var e,t;return null!=(e=null==(t=this.videoController)?void 0:t.getRemainingBufferedTime())?e:{total:0}}getVideoPlaybackQuality(){return this.playbackQualityController.getPlaybackQuality()}getCapSizes(){var e;return null==(e=this.videoController)?void 0:e.getCapSizes()}getMaxCapAllowedVideoTrack(){if(this.videoController)return this.videoController.getMaxCapAllowedVideoTrack()}getContainerSize(){var e;const t=null!=(e=this.visualState.getPipWindowSize())?e:this.videoSizeSensor.getSize();return{width:t.width*devicePixelRatio,height:t.height*devicePixelRatio}}getVideoTrack(){return qt(this.state)}getAudioTrack(){return Yt(this.state)}getTextTrack(){return function(e){const{textTrackEnabled:t}=e.controller;if(t)return Ht(e)}(this.state)}setNativeTextTrackVisibility(e){this.stateController.putNativeTextTrackVisibility(e)}setNativeAdControlsVisibility(e){this.playerStore.setAdStateField(ac.Dt.nativeAdControlsVisibility,e)}getLiveLatency(){var e;return null==(e=this.videoController)?void 0:e.getLiveLatency()}getVideoType(){return this.state.controller.videoType}getTimelineInfo(){const{controller:{duration:e,currentTime:t},skin:{skinDVRStartTime:r,skinDVRDuration:i}}=this.state;return{currentTime:t,duration:e,utcStartTime:this.getUtcStartTime(),dvrStartTime:r,dvrDuration:i}}getBandwidthEstimate(){var e,t;return null!=(e=null==(t=this.videoController)?void 0:t.getBandwidthEstimate())?e:this.state.controller.lastKnownBandwidthEstimate}setVideoStyle(e){this.playerStore.setControllerStateField(ac.jY.videoElementStyle,e),Xr(this.video,e)}releaseSource(e,t){const{streams:r}=e,i=r.find(e=>{let{url:t}=e;return(0,Ac.DZ)(t)});if(i){var n;const e=null==(n=this.videoController)?void 0:n.getStreamUrl(),r=(0,dh.A)(i.url);if(t&&(0,ch.g)(e,r))throw new Error("Cannot release currently playing stream in safe mode");gu.e.releaseSrc(r)}}setSource(e,t){let{shouldSaveProgress:r=!1}=void 0===t?{}:t;this.loadSource(e,{shouldSaveProgress:r}).catch(e=>{kr(e,$i.E.SET_SOURCE),this.onError(e)}),this.emit("SetSource",e);const i=this.logCanPlay($i.E.SET_SOURCE);this.once("CanPlay",i),this.once("SetSource",()=>this.off("CanPlay",i));const n=this.logLoadStartHavingCurrentData($i.E.SET_SOURCE);this.once("LoadedData",n),this.once("SetSource",()=>this.off("LoadedData",n))}getSourceId(){return this.playerStore.getState().controller.sourceId}async seekToNextFrame(){!this.accurateSeekingLock&&this.frameSeeker&&(this.accurateSeekingLock=!0,await this.frameSeeker.seekToNextFrame(),this.accurateSeekingLock=!1)}async seekToPreviousFrame(){!this.accurateSeekingLock&&this.frameSeeker&&(this.accurateSeekingLock=!0,await this.frameSeeker.seekToPreviousFrame(),this.accurateSeekingLock=!1)}getUtcPosition(){var e,t;return null!=(e=null==(t=this.videoController)?void 0:t.getUtcPosition())?e:Su.d}planAdViewers(e){this.plannedAdViewers=e}play(e){var t,r;if(void 0===e&&(e=Xi.l.Unknown),this.playingStateReason=e,this.performPlayCallbacks(),(0,Ui.v)(this.video.play()),this.state.controller.startStage!==Qi.o.started&&this.stateController.putStartStage(this.becameStarting?Qi.o.starting:Qi.o.init),this.currentAdPlaybackQueue&&(0,nc.I)(this.state))return this.currentAdPlaybackQueue.resumeAd(),null==(t=this.playDeferred)||t.resolve(),Promise.resolve();if(this.plannedAdViewers.length>0)return this.playAdViewers(Cd.postPauseroll,this.plannedAdViewers,{}),null==(r=this.playDeferred)||r.resolve(),Promise.resolve();if(this.state.controller.autoplay||(this.stateController.putAutoplay(!0),this.abortRequestAutoplaySettings(oc.ApiPlay)),!this.videoController||this.state.controller.encoderState!==Kd.y.Attached)return this.playDeferred||(this.playDeferred=new Ns.B,this.playDeferred.promise.catch(As.Z).then(()=>this.playDeferred=void 0)),this.playDeferred.promise;const i=this.videoController.getCurrentTime(),n=this.videoController.getDuration();let s;return n>0&&i>=n&&this.seek({videoTime:0}),Td.Y.log("StreamPlayer.play() -> videoController.play()"),this.state.controller.startStage===Qi.o.starting||this.state.controller.startStage===Qi.o.started?((0,vd.B)()&&void 0!==this.lastMuted&&(this.videoController.setMuted(this.lastMuted),this.lastMuted=void 0),s=this.videoController.play()):s=this.tryToPlay(this.videoController),s.then(()=>{var e;return null==(e=this.playDeferred)?void 0:e.resolve()},e=>{var t;null==(t=this.playDeferred)||t.reject(e),this.state.controller.startStage===Qi.o.init&&this.stateController.putStartStage(Qi.o.waitForUserPlay)}),s}pause(e){var t;void 0===e&&(e=Xi.l.Unknown),this.playingStateReason=e,(0,hc.cA)(),this.stateController.putResourcesIdle(!0),this.emit("PauseCalled"),this.video.pause(),this.state.controller.startStage!==Qi.o.started&&(this.stateController.putAutoplay(!1),this.stateController.putStartStage(Qi.o.waitForUserPlay)),null==(t=this.playDeferred)||t.reject(new Error("playing rejected cause of #pause()")),this.currentAdPlaybackQueue&&(0,nc.I)(this.state)?this.currentAdPlaybackQueue.pauseAd():(this.stateController.putAutoplay(!1),this.videoController&&this.state.controller.encoderState===Kd.y.Attached&&this.videoController.pause())}setVideoTrack(e){const t=this.getVideoTrack();if(Lr(t,e))return;this.stateController.putIsAbrEnabled(e===(0,dc.B)().value);const r=e===(0,dc.B)().value&&this.state.controller.isAbrSupported?(0,dc.B)():this.state.controller.videoTracks.find(t=>t.value===String(e));if(r===(0,dc.B)()&&Dn.tO.removeItem("videoplayer-user-quality-choice"),r&&r!==(0,dc.B)()&&r.height&&r.width){const e={height:Math.min(r.height,r.width),width:Math.max(r.height,r.width)};e.timestamp=Date.now(),Dn.tO.setItem("videoplayer-user-quality-choice",JSON.stringify(e))}this.playerStore.setUserVideoTrackParams({name:r&&r.value!==(0,dc.B)().value&&r.name||void 0,height:r&&r.height?r.height:void 0}),r&&(this.videoController.setVideoTrack(r),this.callbacks.onExpectedStalledChange({reason:Fo.k.VideoTrackChange,details:{newTrack:r,oldTrack:t}}),Td.Y.log("SELECTED VIDEO TRACK: ",r))}setAudioTrack(e){const t=this.getAudioTrack();if(Lr(t,e))return;const r=this.state.controller.audioTracks.find(t=>t.value===String(e));r&&(this.playerStore.setUserAudioTrackParams({name:r.name||void 0,lang:r.lang||void 0}),this.videoController.setAudioTrack(r),this.callbacks.onExpectedStalledChange({reason:Fo.k.AudioTrackChange,details:{newTrack:r,oldTrack:t}}),Td.Y.log("SELECTED AUDIO TRACK: ",r))}getSyncDebugInfo(){var e,t;return{recoverHelperState:null!=(e=null==(t=this.videoController)?void 0:t.getRecoverHelperState())?e:mc.w.OFF,state:this.state,remainingBufferedTime:(0,sc.r)(this.state),mediaInternalsHistory:this.mediaInternalsHistory?this.mediaInternalsHistory.getHistory():null,adState:this.adState,playingState:this.currentVideoPlayingState,vsid:this.vsid,vpuid:this.vpuid,version:"1.0-13565",utcPosition:this.getUtcPosition(),currentTime:this.getState().controller.currentTime,system:(0,Us.S)(),clientTimestamp:Date.now(),internalInitialConfig:this.config}}async requestDebugInfo(){return $r({},this.getSyncDebugInfo(),{videoController:this.videoController?await this.videoController.requestDebugInfo():{noController:!0}})}getState(){return this.state}setTextTrack(e){const{textTracks:t,userTextTrackLang:r,userTextTrackName:i,textTrackEnabled:n,textTrackValue:s}=this.state.controller;if(n&&s===e)return;if(e===Ou.A)return void this.stateController.enableTextTrack();const a=void 0===e?void 0:t.find(t=>t.value===e),o={enabled:Boolean(a),lang:a?a.lang||void 0:r,name:a?a.name||void 0:i};this.playerStore.setUserTextTrackParams(o),a?(this.videoController.setTextTrack(a),Td.Y.log("SELECTED TEXT TRACK: ",a)):(this.videoController.disableTextTrack(),Td.Y.log("DISABLE TEXT TRACK"))}setFullscreen(e){if(e)try{this.visualState.changeFullscreenState({isFullScreen:!0})}catch(Th){Td.Y.error("Request fullscreen for element:",Th)}else try{this.visualState.changeFullscreenState({isFullScreen:!1})}catch(Th){Td.Y.error("Exit fullscreen for element:",Th)}}async destroy(){var e;this.visualState.destroy(),this.stopAd({stopAdReason:Pd.PlayerDestroy}),this.stopLoadSource(vc.destroy),this.multiroll.destroy(),this.currentAdPlaybackQueue&&this.currentAdPlaybackQueue.destroy(Pd.PlayerDestroy),this.visualState.destroy(),null==(e=this.mediaInternalsHistory)||e.destroy(),this.playbackQualityController.destroy(),this.destroyed=!0,await this.destroyVideoController(),this.emit("Destroy"),function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(this.container)}skipAdPod(){var e;null==(e=this.currentAdPlaybackQueue)||e.skipAdPod()}stop(){this.config.stickyEnd||this.seek({videoTime:0}),this.pause(),this.videoController.engine===ic.$.NATIVE&&0===this.video.buffered.length&&this.video.load()}async preloadSource(e,t,r){void 0===r&&(r={}),this.callbacks.logEvent({event:Ji.u.PreloadSource,params:{source:e,reason:Wu.ExternalApi,message:JSON.stringify(r)},sourceIndex:e.sourceIndex});let i=As.Z,n=As.Z,s=!1;this.abortPreloadStorage[t]=()=>{s||(s=!0,i())};try{await this.preloadSourceImpl(e,()=>s,e=>i=e,e=>n=e,r)}finally{(0,Fi.Y)(()=>{s||(s=!0,n())}),delete this.abortPreloadStorage[t]}}abortPreload(e){const{[e]:t=As.Z}=this.abortPreloadStorage;t(),delete this.abortPreloadStorage[e]}initEventSubscribes(e,t){this.waitForPlayOccurred().then(()=>{const{startStage:e}=this.state.controller;[Qi.o.started,Qi.o.broken,Qi.o.destroyed].includes(e)||(this.stateController.putStartStage(Qi.o.starting),this.becameStarting=!0)}).catch(As.Z),(0,Qa.E)()&&this.once("Destroy",Ie(()=>this.destroy())),this.once("Destroy",(0,sa.O)(this.div,"selectstart",e=>{e.preventDefault(),e.stopPropagation()})),this.once("Destroy",(0,bd.X)(()=>{this.stateController.updateOriginalAdState()})),this.once("Destroy",(0,sa.O)(this.getMainContainer(),"click",t=>{this.state.controller.watchedTime>0||void 0===this.state.ad.inStreamPlayingState&&e.shouldPlayOnFirstClick&&this.play()},{once:!0})),(0,Qa.E)()&&this.once("Destroy",Ie(()=>this.destroy())),this.once("Destroy",()=>this.off("VisualStateChange")),this.once("Destroy",(0,sa.O)(this.video,"volumechange",()=>{(this.videoController||this.currentAdPlaybackQueue)&&this.updateVolumeInfo()})),this.subscribeHandlers()}updateRumInfo(){const{controller:e}=this.state;(0,uc.I8)({apiVersion:2,bundle:"modern",slowConnection:this.config.slowConnection,vsid:e.vsid,from:e.from,saveData:(0,lu.R)()})}requestAutoplaySettings(e,t){const r={stopped:!1},i=()=>{r.stopped=!0},n=Zr(e,{initialMuted:t.muted,checkUnmuted:t.autoplay&&!t.muted,checkMuted:t.autoplay&&(t.muted||t.allowMuted),process:r});return ji(n)?{promise:n.then(e=>({autoplay:e.allowed,muted:e.muted||t.muted,detectionMethod:e.detectionMethod})),abort:i}:{promise:{autoplay:n.allowed,muted:n.muted||t.muted,detectionMethod:n.detectionMethod},abort:i}}defineAutoplaySettings(e,t){if(this.state.controller.autoplay&&!this.state.controller.isDocumentVisible)return this.stateController.putStartStage(Qi.o.waitForDocumentVisibility),this.stateController.putAutoplay(!1),void this.defineAutoplaySettingsDeferred.resolve();let r;(0,ad.iW)("detect.autoplay");const{promise:i,abort:n}=this.requestAutoplaySettings(e,t);ji(i)?i.then(()=>{(0,ad.vG)("detect.autoplay")}):(0,ad.vG)("detect.autoplay");const{promise:s,clear:a}=(0,Sd.n)(500);s.then(()=>{this.state.controller.startStage===Qi.o.init&&this.stateController.putStartStage(Qi.o.waitForUserPlay)});const o=(0,di.u)();this.abortRequestAutoplaySettings=e=>{void 0===r&&this.callbacks.logEvent({event:"PlayWithoutRAAResults",params:{delay:o(),reason:e}}),a(),n()};const l=e=>{r=e,this.callbacks.logEvent({event:e.autoplay?"AutoplayAllowed":"AutoplayDisabled",params:{message:JSON.stringify(null!=e?e:t),autoplaySettingsRequestResult:e,initialAutoplayParams:t}}),a();const{isVisible:i}=this.state.controller;Td.Y.log("Autoplay settings defined",r);const{muted:n,autoplay:s,autoplayImpossible:o,requireAllowMutedToAutoplay:l}=(()=>{const i=e.muted&&(t.muted||t.allowMuted),n=e.autoplay&&(e.muted?i:t.autoplay);return $r({},r,{muted:i,autoplay:n})})();this.stateController.putVolumeInfo({muted:n,volume:this.state.controller.volume,changeReason:en.RequestAutoplaySettings});const d=function(e){const{controller:{togglePlaybackOnVisibilityChangeSetting:t,muted:r}}=e;return!!t&&!(t.onlyMuted&&!r)}(this.state)&&!1===i;d&&this.callbacks.logEvent({event:"HiddenAutoplayPrevented",params:{autoplaySettingsRequestResult:r}});const c=s&&!d&&this.state.controller.autoplay;var u;(Td.Y.log("autoplay status:",s),Td.Y.log("isVisible",i),Td.Y.log("preventHiddenAutoplay",d),c||this.stateController.putStartStage(Qi.o.waitForUserPlay),c)?this.playerStore.setControllerStateField(ac.jY.preload,!0):((0,hc.cA)(),null==(u=this.playDeferred)||u.reject(new Error("playing rejected cause of autoplay-false")));if(this.playerStore.setControllerStateField(ac.jY.autoplay,c),o){this.playerStore.setControllerStateField(ac.jY.autoplayImpossible,!0),this.callbacks.logEvent({event:"AutoplayImpossible",params:{message:JSON.stringify(r),autoplaySettingsRequestResult:r}});try{console.warn("Cannot autoplay video"+(l?" with sound":"")+" in this environment."+(l?" Use autoplay={allowMuted: true} if you prefer mute video and enable autoplay.":""))}catch(Ph){}}};if(this.chromiumNativeSkinWorkaround(),ji(i))i.then(l).catch(As.Z).then(()=>{this.defineAutoplaySettingsDeferred.resolve()});else try{l(i)}finally{this.defineAutoplaySettingsDeferred.resolve()}}createVideoController(t,r){let{stream:i,supportInfo:n}=t;const s={playerStore:this.playerStore,stateController:this.stateController,video:this.video,videoSizeSensor:this.videoSizeSensor,stream:i,sourceParams:r,debug:this.config.debug,slowConnection:this.config.slowConnection,maxBufferLength:this.config.maxBufferLength,defaultQuality:this.state.controller.defaultQuality,skippableFragments:r.skippableFragments,feed:r.feed,shouldEmitFrameRendered:r.shouldEmitFrameRendered,perfLogUrl:this.config.perfLogUrl,setPlayerBackgroundImage:this.setBackgroundImage,setPlayerBackgroundVisibility:this.setBackgroundVisibility,onError:e=>this.onError(e),onRecover:this.onRecover,logEvent:this.callbacks.logEvent,onSubtitlesChange:this.callbacks.onSubtitlesChange,onThumbnailTileGeneralMetaInfoChange:this.callbacks.onThumbnailTileGeneralMetaInfoChange,onExpectedStalledChange:this.callbacks.onExpectedStalledChange,getPipWindowSize:()=>this.visualState.getPipWindowSize()},a=(o=n.engine,l=s,o===ic.$.HLS?e.e(703).then(e.bind(e,33759)).then(e=>{let{HlsJsController:t}=e;return new t(l)}):o===ic.$.MP4?e.e(40).then(e.bind(e,61196)).then(e=>{let{Mp4VideoController:t}=e;return new t(l)}):o===ic.$.YASP?e.e(241).then(e.bind(e,60377)).then(e=>{let{YaspController:t}=e;return new t(l)}):e.e(498).then(e.bind(e,60479)).then(e=>{let{NativeController:t}=e;return new t(l)}));var o,l;const d=e=>{this.videoController=e,this.playerStore.setControllerStateField(ac.jY.engine,n.engine),this.callbacks.onEngineChange(n.engine,this.playerStore.getState().controller.sourceId),(0,uc.Z$)("engine",n.engine),e.on("VideoPlayingStateChange",e=>this.emit("VideoPlayingStateChange",e)),e.on("MetadataChange",e=>this.emit("MetadataChange",e)),e.on("CurrentTimeChange",e=>this.emit("CurrentTimeChange",e)),e.on("FrameRendered",e=>{this.callbacks.onFrameRendered(e)}),e.on("TargetLatencyChanged",e=>{this.callbacks.onTargetLatencyChange(e)}),e.on("DurationChange",e=>this.emit("DurationChange",e)),e.on("DvrChange",()=>this.emit("DvrChange")),e.on("DVRDurationChange",e=>this.callbacks.onDVRDurationChange(e)),e.on("DVRStartTimeChange",e=>this.callbacks.onDVRStartTimeChange(e)),e.on("ProgramDateTimeChange",e=>this.emit("ProgramDateTimeChange",e)),e.on("BufferingRangesChange",e=>this.emit("BufferingRangesChange",e)),e.on("CanPlay",()=>this.emit("CanPlay")),e.on("ContentImpression",()=>this.emit("ContentImpression")),e.on("DrmSystemChange",this.callbacks.onDrmSystemChange),e.on("LoadedData",()=>this.emit("LoadedData")),e.on("VideoTypeChange",e=>this.emit("VideoTypeChange",e)),e.on("VideoTrackValueChange",e=>{this.emit("VideoTrackValueChange",e)}),e.on("AudioTrackValueChange",e=>this.emit("AudioTrackValueChange",e)),e.on("TextTrackValueChange",e=>this.emit("TextTrackValueChange",e)),e.on("VideoTracksChange",e=>this.emit("VideoTracksChange",e)),e.on("AudioTracksChange",e=>this.emit("AudioTracksChange",e)),e.on("TextTracksChange",e=>this.emit("TextTracksChange",e))};return ji(a)?Promise.resolve().then(async()=>d(await a)):d(a)}getPreparedSourceParams(e,t,r){return $r({},lc,t,{startPosition:this.getInitialStartPosition(t,r),withCredentials:yr(e,t)})}getInitialStartPosition(e,t){const r=e&&e.startPosition||lc.startPosition;if(r){if((0,da.Z)(r).some(e=>(0,rn.z)(r[e])))return r}const i=null==t?void 0:t.getProgress();return void 0===i?r:{videoTime:i}}chromiumNativeSkinWorkaround(){const{skin:{nativeControlsVisibility:e},controller:{preload:t}}=this.playerStore.getState();if(e&&!t&&md()){this.playerStore.setControllerStateField(ac.jY.preload,!0),this.callbacks.logEvent({event:"ForcePreloadCauseNativeSkin",params:void 0});try{console.warn("In Chromium-based browsers, the native skin is disabled if there is no src in the video tag, so preloading is forced into true")}catch(r){}}}async loadSource(e,t){let{shouldSaveProgress:r}=t;Td.Y.log("loadSource start",e),this.callbacks.onEngineChange(void 0,this.playerStore.getState().controller.sourceId),this.callbacks.onDrmSystemChange(void 0);const i=r?"LoadSourceWithSaveProgress":"LoadSource";this.callbacks.logEvent({event:i,params:{source:e}}),(0,hc.Cf)(),this.stopAd({stopAdReason:Pd.LoadSource}),this.plannedAdViewers=[],this.stopLoadSource(vc.setSource),this.playbackProgressStorage.clearVideoContentId(),this.stateController.putStreamsWithSupportInfo(void 0),this.stateController.putStream(void 0),this.playerStore.setControllerStateField(ac.jY.sourceParams,void 0),this.playerStore.setControllerStateField(ac.jY.streams,e.streams),this.stateController.putResourcesIdle(!1);const{preferredAudioLangs:n,preferredTextLangs:s}=e.params.preferredTracks;n.length>0&&this.playerStore.setUserAudioTrackParams({lang:n[0],name:void 0}),s.length>0&&this.playerStore.setUserTextTrackParams({lang:s[0],name:void 0,enabled:!0});const a=new Yd;this.stopLoadSource=e=>a.stop(e);try{this.multiroll.destroy()}catch(A){!function(e,t){(0,Fi.Y)(()=>(As.Z||window.Ya.Rum.logError)(zt({},e,{additional:(0,uc.B6)()}),(0,fi.K)(t)?t:new Error("NOT_AN_OBJECT_ERROR")))}({message:"Can not destroy multiroll instance",method:"loadSource",source:"multiroll",sourceMethod:"destroy",type:"logic"},A)}this.multiroll=su;const o=!this.videoController,{streams:l}=e,d=pr({streams:l,video:this.video,preferNative:this.config.preferNative},this.callbacks.logEvent),c=fr(e.params),u=function(e){return(0,fi.K)(e)&&!1===e.hasPreroll}(c);this.playerStore.setAdStateField(ac.Dt.adSyncInit,(0,fi.K)(c)&&(!u||!1!==c.hasPreroll));let h=u?null:this.initMultirollModule(c,a);(0,uc.Z$)("hasPreroll",!u);const p=this.destroyVideoController(),m=await d;if(this.stateController.putStreamsWithSupportInfo(m.streamsWithSupportInfo),a.stopReason)return void this.callbacks.logEvent({event:Ji.u.StreamStopWhileChoosingStream,params:void 0});if("error"===m.status)throw m.error;const{supportedStream:v}=m;Rr(v,{perfLogUrl:this.config.perfLogUrl,enableSourceBufferTimeline:(0,hn.RW)("web_yasp_enable_source_buffer_timeline"),bufferingController:(0,ph.O)()});const{stream:f}=v;this.playbackProgressStorage.setVideoContentId(this.config.restoreTabSessionPlaybackProgress?e.params.videoInfo.videoContentId:void 0);const g=this.getPreparedSourceParams(f,e.params,this.playbackProgressStorage);if(await p,a.stopReason)return void this.callbacks.logEvent({event:Ji.u.StreamStopWhileDestroyVideoController,params:void 0});if(this.resetPlayerStore(f,g,{shouldSaveProgress:r,isFirstLoad:o}),await Promise.race([this.defineAutoplaySettingsDeferred.promise,a.stopPromise]),a.stopReason)return void this.callbacks.logEvent({event:Ji.u.StreamStopDuringDefineAutoplaySettings,params:void 0});const y=this.createVideoController(v,g);if(ji(y)&&(await Promise.race([y,a.stopPromise]),a.stopReason))return;(0,uc.Z$)("bandwidthEstimate",gr(this.videoController.getBandwidthEstimate().value/1e3)),(0,uc.Z$)("drm","none"),o?(Promise.resolve().then(()=>{this.initBroadcastAd()}),mr(f.url,Boolean(g.withCredentials)).then(e=>{this.stateController.putAdblockDetected(e||Wd)}),this.setMuted(this.state.controller.muted),this.setVolume(this.state.controller.volume)):this.prepareNextSource(f,g),this.playerStore.getState().skin.nativeControlsVisibility&&this.setPosterFitStyle(),this.once("ContentImpression",this.handleFirstContentImpression),this.once("SetSource",()=>this.off("ContentImpression",this.handleFirstContentImpression));const S=async()=>{h||(h=this.initMultirollModule(c,a));const e=await h;if(a.stopReason)return this.callbacks.logEvent({event:Ji.u.StreamStopWhileLoadingMultiroll,params:{streamStopReason:a.stopReason}}),void e.destroy();this.multiroll=e};if(u){const{adInitOffset:e=0}=c||{};new Promise(t=>{let r=!1;const i=()=>{this.off("CurrentTimeChange",n),this.off("ContentImpression",s)},n=()=>{if(!r)return;this.state.controller.watchedTime<=e||(i(),t())},s=()=>r=!0;this.on("ContentImpression",s),this.on("CurrentTimeChange",n),this.once("SetSource",i)}).then(()=>{a.stopReason||S()})}else await S();a.stopReason||this.startPrerollAndContent(a,o)}async preloadSourceImpl(t,r,i,n,s){const{streams:a}=t,o=pr({streams:a,video:mh,preferNative:this.config.preferNative},this.callbacks.logEvent),l=await o;if(r())throw new Error("abort preloadSource");if("error"===l.status)throw l.error;const{supportedStream:d}=l,{stream:c,supportInfo:u}=d;if(u.engine!==ic.$.YASP)throw new Error("can not create preloader");const h=new cu;h.setVideoContentId(this.config.restoreTabSessionPlaybackProgress?t.params.videoInfo.videoContentId:void 0);const p=this.getPreparedSourceParams(c,t.params,h);Rr(d,{perfLogUrl:this.config.perfLogUrl,enableSourceBufferTimeline:(0,hn.RW)("web_yasp_enable_source_buffer_timeline"),bufferingController:(0,ph.O)()});const{createPreloader:m}=await e.e(930).then(e.bind(e,21930)),v=m({engine:u.engine,source:{stream:c,sourceParams:p},getState:()=>this.playerStore.getState(),getCapSizes:()=>{var e;return null==(e=this.videoController)?void 0:e.getCapSizes()},getVideoElementSizes:()=>{var e;return null==(e=this.videoController)?void 0:e.getVideoElementSizes()},defaultQuality:this.config.defaultQuality,options:s});if(!v)throw new Error("can not create preloader");return i(()=>v.destroy()),n(()=>v.destroy()),v.preload()}async initMultirollModule(e,t){let r=su;if(!e)return r;(0,hc.Fw)("AD",!0);try{const i=wt(window,e,this.state.controller.vsid,Wd),n=await Promise.race([i,t.stopPromise.then(()=>{})]);if(void 0===n)return r;const{loadMultiroll:s}=n,a=s($r({},e,{secureMode:"Safe"}),{preroll:{shouldPreload:()=>{const{preload:e,startStage:t}=this.state.controller;return e&&(t===Qi.o.waitForUserPlay||t===Qi.o.waitForDocumentVisibility)}},midroll:{preloadOffset:20,preloadMinTime:5},postroll:{preloadOffset:20,preloadMinTime:5},getPreloadParams:()=>{const e={videoSlot:this.video},t=this.getBandwidthEstimate();return null!=t&&t.value?$r({},e,{desiredBitrate:t.value/1e3}):e},adLoaded:e=>{let{adBreakType:t}=e;const r=(()=>{switch(t){case Cd.preroll:return Cd.preroll;case Cd.midroll:return Cd.midroll;case Cd.postroll:return Cd.postroll;case Cd.inroll:return Cd.inroll;case Cd.postPauseroll:return Cd.postPauseroll}})();void 0!==r&&this.callbacks.onAdLoaded({adType:r})}});(0,Ui.v)(t.stopPromise.then(()=>a).then(e=>e.destroy()));const o=await Promise.race([a,t.stopPromise.then(()=>{})]);if(void 0===o)return r;r=o}catch(i){(0,hc.Kp)({reason:"MULTIROLL_INIT_ERROR",adSdkVersion:Ut(),adSdkLoaderVersion:Bt(),adblockDetected:this.state.ad.adblockDetected,bandwidth:gr(void 0)});const t=new Id.o({isFatal:(0,vi.m)(vh)&&(!(0,fi.K)(i)||"0"===String(i.code)||!i.code),code:"MULTIROLL_INIT_ERROR",details:{error:i,adConfig:e}});this.callbacks.onAdError($r({},t,{code:String(t.code)})),this.onError(t)}return r}async startPrerollAndContent(e,t){Td.Y.log("startPrerollAndContent");let r=[];const i=(0,li.I)(()=>this.startStream()),n=(0,li.I)(async()=>{this.multiroll!==su&&At("adsdk.loadviewers.preroll");const t=this.multiroll.preroll.loadViewers({}),i=await Promise.race([t,e.stopPromise.then(()=>{})]);if(void 0===i)return;r=i,this.multiroll!==su&&bt("adsdk.loadviewers.preroll");const n=r.length>0;this.playerStore.setAdStateField(ac.Dt.hasPreroll,n),n&&this.callbacks.logEvent({event:Ji.u.PrerollInit,params:{}})}),{startStage:s,preload:a}=this.state.controller;if(s===Qi.o.waitForUserPlay||s===Qi.o.waitForDocumentVisibility){if(Td.Y.log("Waiting for "+(s===Qi.o.waitForUserPlay?"user gesture":"document visibility")),this.callbacks.logEvent({event:s===Qi.o.waitForUserPlay?Ji.u.WaitForUserGesture:Ji.u.WaitForDocumentVisibility,params:{preload:a}}),a){if(Td.Y.log("Preload preroll in player"),await Promise.race([n(),e.stopPromise]),e.stopReason)return void this.callbacks.logEvent({event:Ji.u.StreamStopWhilePreloadingPreroll,params:{streamStopReason:e.stopReason}});this.state.ad.hasPreroll||(Td.Y.log("No preroll, preload content"),i())}if(s===Qi.o.waitForDocumentVisibility&&await function(e,t){return(0,ga.s)(e)===t?Promise.resolve():new Promise(r=>{(0,gd.Y)(e,e=>{e===t&&r()})})}(this.getContainerDocument(),!0),this.state.controller.startStage===Qi.o.waitForUserPlay&&await this.waitForPlay(),e.stopReason)return void this.callbacks.logEvent({event:s===Qi.o.waitForUserPlay?Ji.u.StreamStopWhileWaitingForPlay:Ji.u.StreamStopWhileWaitingForDocumentVisibility,params:{streamStopReason:e.stopReason}})}if(Td.Y.log("Start playing"),t&&this.stateController.putAutoplay(!0),await Promise.race([n(),e.stopPromise]),e.stopReason)this.callbacks.logEvent({event:Ji.u.StreamStopWhileLoadingPreroll,params:{streamStopReason:e.stopReason}});else{if(!this.state.ad.hasPreroll)return await i(),void this.logPlayAfterWaitingForDocumentVisibility();this.playerStore.setControllerStateField(ac.jY.preload,!0),Td.Y.log("Start preroll"),this.playAdViewers(Cd.preroll,_t(r,Cd.preroll),{videoSlotCanAutoPlay:s!==Qi.o.waitForDocumentVisibility||void 0})}}waitForPlay(){const e=(0,di.u)();return new Promise(t=>{this.waitForPlayOccurred().then(r=>{this.callbacks.logEvent({event:Ji.u.WaitForPlayCompleted,params:{reason:r,timeout:e()}}),t()}).catch(As.Z),this.playCallbacks.push(t)})}async waitForPlayOccurred(){return new Promise((e,t)=>{let r=As.Z,i=As.Z,n=0;const s=()=>{r(),i(),clearInterval(n)},a=t=>{void 0!==this.videoController&&(s(),e(t))};this.video.paused?(r=(0,sa.O)(this.video,"play",()=>{a(cc.VideoPlayEvent)}),i=(0,sa.O)(this.video,"timeupdate",()=>{this.video.paused||a(cc.DetectByInterval)}),n=window.setInterval(()=>{this.video.paused||a(cc.DetectByInterval)},100),this.once("Destroy",()=>{s(),t(new Error("StreamPlayer destroy called"))})):a(cc.VideoIsNotPausedOnInit)})}initBroadcastAd(){const{video:e}=this;if(this.broadcastAd=new Ud({video:e,slot:e.parentElement,playerApi:this,stateController:this.stateController,onError:e=>this.onError(e),playerStore:this.playerStore}),this.videoController&&this.videoController.engine===ic.$.NATIVE){let t=0;e.addEventListener("timeupdate",()=>{const{currentTime:r}=e;this.state.controller.videoType===Jd.D.LIVE&&r<t&&this.broadcastAd&&this.stateController.putOriginalBroadcastAdCues({}),t=r})}this.on("MetadataChange",e=>{const{fragmentMetadataArray:t,fragmentStart:r}=e;if(Td.Y.log("receive metadata: ",t),!this.broadcastAd)return;const{programDateTime:i}=this.state.controller;if(void 0===i)return;const n=i+1e3*r;let s;Math.random()<pc._&&this.callbacks.logEvent({event:Ji.u.StreamPlayerReceivedMetadata,params:e}),t.forEach(e=>{try{const t=JSON.parse(e);if(!function(e){return(0,fi.K)(e)&&(0,wi.H)(e.cue_id)&&(0,rn.z)(e.offset)}(t))return;s=$r({},t,{pts:n})}catch(Th){Td.Y.log("metadata is not valid ["+e+"]")}}),s&&(this.callbacks.onInrollFrame(s),this.state.ad.adConfig&&this.broadcastAd.handleInrollFrame(s).catch(e=>{Td.Y.error(e),this.onError(new Id.o(e).overridingClone({code:"BROADCAST_AD_BLOCK_INIT_ERROR",isFatal:!1,details:{code:e.code,message:e.message,id:e.id,details:e.details,stack:e.stack,metadata:{cueId:s.cue_id,podStart:n+s.offset}}}))}))}),this.broadcastAd.on("AdIntervalRemoved",e=>{this.playerStore.removeCue(e)}),this.broadcastAd.on("AdIntervalUpdated",e=>{let{cueId:t,start:r,end:i}=e;this.stateController.refreshCue({cueId:t,start:r/1e3,end:i/1e3})}),this.broadcastAd.on("InrollAdPlayRequest",e=>{this.playAdViewers(Cd.inroll,e,{})})}getPosterUrlForAd(){var e;const t=null==(e=this.state.controller.sourceParams)?void 0:e.preview;return t&&t!==wd.O?t:null}prepareBeforeOrAfterAd(e,t){this.broadcastAd&&t!==Cd.inroll&&this.broadcastAd.setEnabled(e)}getSeekPositionAfterAd(e){let{adType:t,adViewersDuration:r,utcPosition:i}=e;if(t===Cd.inroll){return{utc:i?i+r:void 0,videoTime:this.state.controller.currentTime+r}}return t===Cd.preroll?this.state.controller.startPosition:t===Cd.midroll||t===Cd.postPauseroll?{utc:i||void 0,videoTime:this.state.controller.currentTime}:t===Cd.postroll?{videoTime:0}:{}}getAdViewersWithData(e){const{controller:{isFullscreen:t,isPip:r}}=this.state,i=t&&It(this.getContainerDocument().defaultView,this.video)===this.video;return i||r?e.filter(e=>{const{adViewer:t}=e;return t.filterAdPodsIndependentOnHtmlControls("StreamPlayer can't play CPC ads: ["+(r?"PiP":i?"FullScreen":"unknown")+"] mode"),t.getAdPodsCount()>0}):e}getAdViewersCueId(e,t){var r;if(e!==Cd.inroll)return this.state.ad.originalBroadcastAdCueId;const i=t.find(e=>e.additionalData.cueId);return null!=(r=null==i?void 0:i.additionalData.cueId)?r:this.state.ad.originalBroadcastAdCueId}prepareBeforeAd(e){const{ad:{adInfo:t}}=this.state;t||(this.handleAdEnd=(0,li.I)(async()=>{At("adsdk.player.start."+e),this.once("ContentImpression",()=>{bt("adsdk.player.start."+e),this.handleAdEnd=void 0})}))}async initAdPlaybackQueue(e){if(this.currentAdPlaybackQueue)return;const{ad:{adSyncInit:t}}=this.state,r=[(0,sa.O)(this.video,"firstframedecoded",()=>{(0,hc.CN)("AD",{},t)},{once:!0}),(0,sa.O)(this.video,"firstframeshown",()=>{(0,hc.qB)("AD",{},t)},{once:!0})],i=this.getUtcPosition();e!==Cd.preroll&&At("encoder.detach"),await this.detachEncoder(),e!==Cd.preroll&&bt("encoder.detach",{additional:{engine:this.state.controller.engine}});const n=(0,li.I)(()=>this.preloadVideoControllerSource({whileAd:!0}));let s=!1;const a=new Od({video:this.handleVideoNode(this.video),utcPositionBeforeAd:i,onAdStartRejected:e=>{var t;null==(t=this.playDeferred)||t.reject(e)},onAdSkippableStateChange:e=>{this.callbacks.onAdSkippableStateChange(e)},onAdPodCloseStateChange:e=>{this.callbacks.onAdPodCloseStateChange(e)},onAdVolumeAvailabilityStateChange:e=>{this.callbacks.onAdVolumeAvailabilityStateChange(e)},onAdPodError:e=>{this.callbacks.onAdError(e)},onAdPodDurationChange:e=>{this.callbacks.onAdPodDurationChange(e)},onAdPodCurrentTimeChange:t=>{var r,i;this.callbacks.onAdPodCurrentTimeChange(t);const s=null==(r=this.currentAdPlaybackQueue)?void 0:r.getCurrentAdPodRemainingTime();null!=(i=this.currentAdPlaybackQueue)&&i.getIsLastAdPod()&&e!==Cd.postroll&&s&&s<=5&&n()},onAdPodTimeToSkipChange:e=>{this.callbacks.onAdPodTimeToSkipChange(e)},onAdInteraction:()=>{this.callbacks.onAdInteraction()},onFirstAdPodStarted:()=>{var t;(0,hc.G1)("AD",{adblockDetected:this.state.ad.adblockDetected,adType:e,bandwidth:gr(void 0)},this.state.ad.adSyncInit),bt("player.adsdk.start."+e),this.hidePoster(),null==(t=this.playDeferred)||t.resolve()},onLastAdPodStopped:e=>{this.multiroll.dispatchEvent({event:"AdBreakEnd",data:e})},onBeforeAdPodStart:e=>{this.callbacks.onBeforeAdPodStart(e)},onAdPodStarted:()=>{this.stateController.putResourcesIdle(!0),this.callbacks.onAdPodStart(),s&&bt("adsdk.creative.switch."+e)},onAdPodSkipped:()=>{this.callbacks.onAdPodSkip()},onAdPodStopped:()=>{(0,Li.p)(r),s=!0,At("adsdk.creative.switch."+e),this.stateController.putInStreamPlayingState(void 0),this.callbacks.onAdPodEnd()},onAdPodPlayingStateChange:e=>{let{playingState:t,expectedStalledReason:r,adType:i}=e;t===qi.X.BUFFERING&&this.callbacks.onExpectedStalledChange({reason:r,details:{adType:i}}),this.stateController.putInStreamPlayingState(t)},onAdClickThru:()=>{this.callbacks.onAdPodClick()},onAdSizeChange:e=>{this.stateController.putVideoSize({videoWidth:void 0===e.width?NaN:e.width,videoHeight:void 0===e.height?NaN:e.height})},onRequestFullscreenStateChange:e=>{this.callbacks.onRequestFullscreenChange(e)},getControlsSettings:()=>function(e){const{ad:{nativeAdControlsVisibility:t}}=e;return{controlsVisibility:t?{}:{mute:!1,timeline:!1,play:!1,loader:!1}}}(this.playerStore.getState()),logEvent:this.callbacks.logEvent,onError:e=>{this.onError(e)},adConfig:this.state.ad.adConfig,playerContainer:Vr(this.state.controller.vsid,document),lang:this.config.lang});this.currentAdPlaybackQueue=a}updateVideoInfo(){(0,nc.I)(this.state)?this.playbackQualityController.persist():(this.playbackQualityController.update(),this.emit("PlaybackQualityUpdate",this.playbackQualityController.getPlaybackQuality()))}resetPlayerStore(e,t,r){let{shouldSaveProgress:i,isFirstLoad:n}=r;this.playerStore.updateSourceId(),this.stateController.putStream(e),this.playerStore.setControllerStateField(ac.jY.sourceParams,t);const s=this.getStartPositionForLoadSource(t,{shouldSaveProgress:i});if(this.playerStore.setControllerStateField(ac.jY.startPosition,s),this.playerStore.getState().controller.autoplay||this.playerStore.setControllerStateField(ac.jY.autoplay,de(this.playerStore.getState().controller)),i||(this.playerStore.setControllerStateField(ac.jY.duration,Qd.duration),this.playerStore.setControllerStateField(ac.jY.dvrDuration,Qd.dvrDuration),this.playerStore.setSkinStateField(ac.rE.skinDVRDuration,Zd.skinDVRDuration),this.stateController.watchedTimeCounter=new Uu.p,this.stateController.putWatchedTime(Qd.watchedTime)),this.stateController.putCurrentTime(Math.max(0,s.videoTime||Qd.currentTime)),!n){const{additionalParams:e=Yn}=t,{from:r=Un}=e;this.playerStore.setControllerStateField(ac.jY.from,r),this.playerStore.setControllerStateField(ac.jY.preview,t.preview||lc.preview),this.stateController.putBufferingRanges(Qd.bufferingRanges),this.stateController.putVideoType(void 0),this.playerStore.setControllerStateField(ac.jY.programDateTime,void 0),this.playerStore.setControllerStateField(ac.jY.dvrStartTime,Qd.dvrStartTime),this.playerStore.setSkinStateField(ac.rE.skinDVRStartTime,Zd.skinDVRStartTime),this.stateController.putVideoTracks(Qd.videoTracks),this.stateController.putAudioTrackValue(Qd.audioTrackValue),this.stateController.putAudioTracks(Qd.audioTracks),this.stateController.putTextTrackEnabled(Qd.textTrackEnabled),this.playerStore.setControllerStateField(ac.jY.textTrackValue,Qd.textTrackValue),this.stateController.putTextTracks(Qd.textTracks),this.callbacks.onSubtitlesChange([]),this.callbacks.onThumbnailTileGeneralMetaInfoChange(void 0),this.stateController.putOriginalBroadcastAdCues({}),this.state.controller.playingState===qi.X.END&&(this.stateController.putPlayingState(qi.X.PAUSE),this.stateController.putAutoplay(!0)),this.stateController.putInStreamPlayingState(void 0),this.playerStore.setAdStateField(ac.Dt.hasPreroll,!1),this.stateController.putNextAdInfo(void 0),this.playerStore.setControllerStateField(ac.jY.preload,!0)}this.playerStore.setAdStateField(ac.Dt.adConfig,fr(t))}prepareNextSource(e,t){this.stateController.putErrorInfo({}),this.emit("DurationChange",NaN),this.playerStore.setControllerStateField(ac.jY.preload,!0),this.playbackQualityController.reset(),this.playCallbacks=[],this.stateController.putVideoTrackParams({videoTrackValue:Qd.videoTrackValue,isAbrEnabled:this.state.controller.isAbrEnabled}),this.broadcastAd&&this.stateController.putOriginalBroadcastAdCues({})}performPlayCallbacks(){this.playCallbacks.length>0&&((0,Li.p)(this.playCallbacks),this.playCallbacks=[])}seekToVideoPosition(e,t){Number.isNaN(e)||((0,nc.I)(this.state)&&!t?this.playerStore.setControllerStateField(ac.jY.startPosition,{videoTime:e}):this.videoController.seek(e))}getStartPositionForLoadSource(e,t){let{shouldSaveProgress:r}=t;const{controller:{currentTime:i,watchedTime:n}}=this.state,s=this.getUtcStartTime(),a=void 0===s?void 0:s+i,o=(0,fi.K)(e.startPosition)?e.startPosition:{};return r&&n>0?{videoTime:i,utc:a}:o}getUtcStartTime(){const{controller:{programDateTime:e}}=this.state;return void 0===e?void 0:e/1e3}onError(e){const t=(0,uh.h)(e)?e:new pn.b($r({},e));if(this.stateController.putErrorInfo({error:t}),t.isFatal){var r;if(!gu.e.isYaspElement(this.video))this.callbacks.logEvent({event:"MediaInternalsHistoryOnFatal",params:{history:null==(r=this.mediaInternalsHistory)?void 0:r.getHistory()}});!(0,nc.I)(this.state)&&this.currentAdPlaybackQueue&&this.currentAdPlaybackQueue.destroy(Pd.PlayerError),this.stateController.handleVideoTagPlayingStateChange(qi.X.PAUSE),this.destroyVideoController()}}async detachEncoder(){this.videoController&&(await this.videoController.detachEncoder(),this.stateController.putEncoderState(Kd.y.Detached))}async attachEncoder(){this.stateController.putEncoderState(Kd.y.Attaching);try{await this.videoController.attachEncoder()}catch(r){throw this.stateController.putEncoderState(Kd.y.Detached),r}this.stateController.putEncoderState(Kd.y.Attached),this.updateVolumeInfo();const e=this.state.controller.playingState,t=this.videoController.getPlayingState();t&&e!==t&&this.emit("VideoPlayingStateChange",t)}async destroyVideoController(){this.videoController&&(await this.videoController.destroy(),this.stateController.putEncoderState(Kd.y.Detached))}async tryToPlay(e){var t;let r=!1;this.once("PauseCalled",()=>r=!0);try{return void await e.play()}catch(i){}if(this.destroyed)return Promise.reject(new Error("StreamPlayer destroyed"));if(r)return Promise.reject(new Error("Pause called"));if(null!=(t=this.state.controller.errorInfo.error)&&t.isFatal)return Promise.reject(new Error("Fatal error occurred"));if(this.video.muted)return Promise.reject(new Error("Can't play with unmuted mode cause video.muted"));if(!this.state.controller.allowMuted)return Promise.reject(new Error("Can't play with unmuted mode cause allowMuted"));if(!this.canMuteForPlay)return Promise.reject(new Error("Can't play. Mute did not help earlier"));if(this.setMuted(!0),function(e){return void 0===e&&(e=window),(0,Ua.P)(e)&&(0,za.i)(e).toLowerCase().indexOf("iphone")>-1}()&&!(0,vd.B)()){const e=new Promise(e=>{this.once("Destroy",(0,sa.O)(this.video,"volumechange",e,{once:!0}))}),t=new Promise((e,t)=>{this.once("Destroy",()=>t(new Error("StreamPlayer destroy called")))});await Promise.race([e,t])}try{return void await e.play()}catch(n){return this.canMuteForPlay=!1,this.setMuted(!1),Promise.reject(new Error("Failed on play"))}}async logPlayAfterWaitingForDocumentVisibility(){const{videoController:e}=this,{startStage:t,initialAutoplay:r}=this.state.controller;t===Qi.o.waitForDocumentVisibility&&r&&e&&this.callbacks.logEvent({event:Ji.u.PlayAfterWaitingForDocumentVisibility,params:{}})}getContainerDocument(){return this.container.ownerDocument||document}getMainContainer(){return this.container}setPosterFitStyle(){var e,t;const{videoElementStyle:r,posterStyle:i}=this.playerStore.getState().controller,n=null!=(e=null!=(t=null==r?void 0:r.objectFit)?t:null==i?void 0:i.objectFit)?e:"cover";Xr(this.video,$r({},this.playerStore.getState().controller.videoElementStyle,{objectFit:n}))}resetPosterFitStyle(){Xr(this.video,$r({objectFit:"contain"},this.playerStore.getState().controller.videoElementStyle))}async saveVideoFrame(){if(!this.video)throw new Error("Video element is not available");if(this.video.readyState<HTMLMediaElement.HAVE_CURRENT_DATA)throw new Error("Video is not ready to capture frame");const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("Failed to get canvas context");return e.width=this.video.videoWidth||this.video.clientWidth,e.height=this.video.videoHeight||this.video.clientHeight,t.drawImage(this.video,0,0,e.width,e.height),new Promise((t,r)=>{e.toBlob(e=>{e?t(e):r(new Error("Failed to create blob from canvas"))},"image/png")})}hidePoster(){this.video.poster=wd.O}preloadVideoControllerSource(e){let{whileAd:t}=e;void 0!==this.videoController&&(this.callbacks.logEvent({event:Ji.u.PreloadSource,params:{reason:Wu.InternalApi,whileAd:t}}),(0,Ui.v)(this.videoController.preloadSource()))}updateVolumeInfo(){this.stateController.putVolumeInfo({volume:this.video.volume,muted:this.video.muted,changeReason:en.VolumeChangeEvent})}iosLandscapeScreenOrientationWorkaround(){if(!(0,Ua.P)())return;const e=()=>{if(this.state.controller.currentTime<=0)return;this.off("CurrentTimeChange",e);(0,Fi.Y)(()=>0===screen.orientation.type.indexOf("landscape-"))&&(Ee(this.video,bu().locals.StreamPlayer_iosLandscapeWorkaround),setTimeout(()=>fo(this.video,bu().locals.StreamPlayer_iosLandscapeWorkaround),10))};this.on("CurrentTimeChange",e)}createStreamPlayerCallbacks(){return{onDrmSystemChange:e=>this.emitEvent("onDrmSystemChange",e),onChangeStream:e=>this.emitEvent("onChangeStream",e),onError:e=>this.emitEvent("onError",e),onRecover:e=>this.emitEvent("onRecover",e),onStateChange:e=>{this.emitEvent("onStateChange",{playingState:e,reason:this.playingStateReason}),this.currentVideoPlayingState!==e&&(this.currentVideoPlayingState=e,this.playingStateReason=Xi.l.Unknown)},onAdStateChange:e=>{this.adState.state!==e.state&&(this.playingStateReason=Xi.l.Unknown);const t=$r({},this.adState);this.adState=e,this.emitEvent("onAdStateChange",{nextAdState:e,prevAdState:t})},onAdLoaded:e=>this.emitEvent("onAdLoaded",e),onAdError:e=>this.emitEvent("onAdError",e),onBeforeAdPodStart:e=>this.emitEvent("onBeforeAdPodStart",e),onAdPodStart:()=>this.emitEvent("onAdPodStart",void 0),onAdPodClick:()=>this.emitEvent("onAdPodClick",void 0),onAdPodSkip:()=>this.emitEvent("onAdPodSkip",void 0),onAdPodEnd:()=>this.emitEvent("onAdPodEnd",void 0),onAdSkippableStateChange:e=>this.emitEvent("onAdSkippableStateChange",e),onAdPodCloseStateChange:e=>this.emitEvent("onAdPodCloseStateChange",e),onAdPodDurationChange:e=>this.emitEvent("onAdPodDurationChange",e),onAdPodCurrentTimeChange:e=>this.emitEvent("onAdPodCurrentTimeChange",e),onAdPodTimeToSkipChange:e=>this.emitEvent("onAdPodTimeToSkipChange",e),onAdVolumeAvailabilityStateChange:e=>this.emitEvent("onAdVolumeAvailabilityStateChange",e),onAdInteraction:()=>this.emitEvent("onAdInteraction",void 0),onVideoTypeChange:e=>this.emitEvent("onVideoTypeChange",e),onDVRStartTimeChange:()=>{this.emitEvent("onTimelineInfoChange",this.getNormalizedTimelineInfo()),this.emitEvent("onPlaybackRateRangeChange",this.getPlaybackRateRanges())},onDVRDurationChange:()=>{this.emitEvent("onTimelineInfoChange",this.getNormalizedTimelineInfo()),this.emitEvent("onPlaybackRateRangeChange",this.getPlaybackRateRanges())},onCurrentTimeChange:()=>{this.emitEvent("onPositionChange",{time:this.getState().controller.currentTime,utcTime:this.getUtcPosition(),watchedTime:this.getState().controller.watchedTime,videoPlaybackQuality:this.getVideoPlaybackQuality(),liveLatency:this.getLiveLatency()}),this.emitEvent("onTimelineInfoChange",this.getNormalizedTimelineInfo()),this.emitEvent("onPlaybackRateRangeChange",this.getPlaybackRateRanges())},onFullScreenChange:e=>this.emitEvent("onFullScreenChange",e),onVolumeChange:e=>this.emitEvent("onVolumeChange",e),onVideoTrackChange:e=>{this.emitEvent("onVideoTrackChange",e),this.emitEvent("onCapSizeChange",this.getMaxCapAllowedVideoTrack())},onVideoTracksChange:e=>this.emitEvent("onVideoTracksChange",e),onAudioTrackChange:e=>this.emitEvent("onAudioTrackChange",e),onAudioTracksChange:e=>this.emitEvent("onAudioTracksChange",e),onTextTrackChange:e=>this.emitEvent("onTextTrackChange",e),onTextTracksChange:e=>this.emitEvent("onTextTracksChange",e),onSubtitlesChange:e=>this.emitEvent("onSubtitlesChange",e),onPlaybackRateChange:e=>this.emitEvent("onPlaybackRateChange",e),onThumbnailTileGeneralMetaInfoChange:e=>this.emitEvent("onThumbnailTileGeneralMetaInfoChange",e),onOriginalBroadcastAdStateChange:e=>this.emitEvent("onOriginalBroadcastAdStateChange",e),onAdblockDetected:e=>{this.isAdblockDetected=e,(0,Fi.Y)(()=>{(As.Z||window.Ya.Rum.updateErrors)({blocker:this.isAdblockDetected}),(As.Z||window.Ya.Rum.setVars)({"-blocker":this.isAdblockDetected}),(0,ah.s)(lh,0,!1,{[lh]:Number(this.isAdblockDetected)})})},onContentImpression:e=>this.emitEvent("onContentImpression",e),onResourcesIdle:()=>this.emitEvent("onResourcesIdle",void 0),onVisualStateChange:e=>this.emitEvent("onVisualStateChange",e),onBufferingRangesChange:e=>this.emitEvent("onBufferingRangesChange",this.normalizeBufferingRanges(e)),onStartStageChange:e=>this.emitEvent("onStartStageChange",e),onVideoSizeChange:e=>this.emitEvent("onVideoSizeChange",e),onNextAdRemainingTimeChange:e=>this.emitEvent("onNextAdRemainingTimeChange",e),logEvent:this.logEvent,onStreamsWithSupportInfoChange:e=>this.emitEvent("onStreamsWithSupportInfoChange",e),onEngineChange:e=>this.emitEvent("onEngineChange",e),onBandwidthEstimateChange:e=>this.emitEvent("onBandwidthEstimateChange",e),onCapSizeChange:e=>this.emitEvent("onCapSizeChange",e),onPlaybackQualityUpdate:e=>this.emitEvent("onPlaybackQualityUpdate",e),onExpectedStalledChange:e=>this.emitEvent("onExpectedStalledChange",e),onRequestFullscreenChange:e=>this.emitEvent("onRequestFullscreenChange",e),onInrollFrame:e=>this.emitEvent("onInrollFrame",e),onFrameRendered:e=>this.emitEvent("onFrameRendered",e),onTargetLatencyChange:e=>this.emitEvent("onTargetLatencyChange",e)}}getNormalizedTimelineInfo(){const e=this.getVideoType(),t=this.getTimelineInfo();if(e!==Jd.D.LIVE)return t;const{currentTime:r,utcStartTime:i,dvrStartTime:n,dvrDuration:s}=t;return{dvrDuration:s,dvrStartTime:(i||0)+n,utcStartTime:0,duration:1/0,currentTime:(i||0)+r}}normalizeBufferingRanges(e){if(this.getVideoType()!==Jd.D.LIVE)return e;const{utcStartTime:t=0}=this.getTimelineInfo();return e.map(e=>{let{start:r,end:i}=e;return{start:t+r,end:t+i}})}denormalizeTime(e){if(this.getVideoType()!==Jd.D.LIVE)return e;const{utcStartTime:t=0}=this.getTimelineInfo();return e-t}getPlaybackRateRanges(){var e;const{currentTime:t,dvrStartTime:r,dvrDuration:i}=this.getTimelineInfo();return Gt({videoType:this.getVideoType(),currentTime:t,dvrStartTime:r,dvrDuration:i,engine:null==(e=this.videoController)?void 0:e.engine})}setExternalVisualState(e){"boolean"===typeof e.isVisible&&this.visualState.setExternalVisibility(e.isVisible),"boolean"===typeof e.isFullscreen&&this.visualState.setExternalFullscreen(e.isFullscreen)}logDelta(e){(0,ad.uo)(e.deltaId,e.value,e.params)}}const gh=["contentId"],yh=["contentId"],Sh=Vo(window);class Ah extends Ma.h{publicEmit(e,t){if(e.indexOf("/")>-1)return this.emit(e,t);const r=new Error("Event "+e+" is invalid. Namespace is required: NAMESPACE/"+e);setTimeout(()=>{throw r},0)}emit(e,t){this.debug.logEvents&&console.log("[PLAYER] [EVENT]",e,t),super.emit(e,t)}getDebugConfig(){return this.debug}constructor(e){var r,i,n,s,o,l;if(super(e),this.skin=void 0,this.container=void 0,this.vhHelper=void 0,this.initStreamPlayerDeferred=new Ns.B,this.performOnInitStreamPlayer=(0,dd.P)(this.initStreamPlayerDeferred.promise),this.playingStateSynchronization=(0,Co.l)(),this.playerNode=void 0,this.visiblePlaybackController=void 0,this.screenWakeLockController=void 0,this.getSourceConfigForRecover=()=>{},this.completeInitAfterGettingSourceConfig=void 0,this.store=void 0,this.errorScreen=void 0,this.timecodes=void 0,this.preloadSkin=void 0,this.additionalParams=void 0,this.setSourceDeferred=void 0,this.telemetry=void 0,this.resourceTimingsMonitor=void 0,this.playerAliveData={bandwidthEstimate:0},this.planTaskForPlayerTracker=void 0,this.setSourceStage=un.LOADING,this.sourceIdSignal=new Wi.R(NaN,(e,t)=>!!isNaN(t)||!isNaN(e)&&t<=e),this.debugPanel=void 0,this.externalPlaybackCsrfToken=void 0,this.externalPlaybackTokenExpireTimeout=void 0,this.playerApiSourceConfig=void 0,this.loggingForExternalToolsAllowed=void 0,this.isReady=!1,this.debug={logCalls:!1,logEvents:!1,logInternals:!1,showDebugPanel:!1},this.destroyed=!1,this.config=void 0,this.readyPendingEvents=[],this.nextPreloadRequestId=0,this.loadComponents=(0,li.I)(()=>{return(0,Yi.v)({src:(e=gi.f.i18nLang,t("components_"+e+(Ts?".modern":"")+".js",13565,"1.0-",!1)),retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{e.crossOrigin="anonymous"},checkLoad:()=>(0,vi.m)(gi.f.initErrorScreen)&&(0,vi.m)(gi.f.initDebugPanel)}).catch(e=>{const t=(0,hh.K)(e),r=new bi.p(t).overridingClone({details:{errorDetails:t.details},code:"ERROR_SCREEN_LOAD_ERROR",isFatal:!1});throw this.emitError(r,H((0,Ds.w)(document))),r});var e}),this.streamPlayer=null,this.initStreamPlayerSubscriptions=e=>{const t=(t,r)=>{const i=e=>{const i={eventName:t,data:e.data,sourceId:e.sourceId};if(!this.isReady&&"onReady"!==t)return this.debug.logInternals&&console.warn("// not ready",t,e.data),void this.readyPendingEvents.push(i);const{sourceId:n}=e;this.sourceIdSignal.dispatch(n);const s=function(e){return na[e]}(t),a=(e=>{let{eventName:t,data:r}=e;if("onError"!==t)return!1;try{return!!r.isFatal&&("string"===typeof r.details?JSON.parse(r.details).stage===$i.E.SET_SOURCE:r.details.stage===$i.E.SET_SOURCE)}catch(Ph){return!1}})(i);this.setSourceStage!==un.LOADING||!s||a?this.setSourceStage===un.READY&&s&&n<this.sourceIdSignal.getValue()?this.debug.logInternals&&console.warn("// skip public and internal "+t+" because of old source",t,e.data):r(e):this.debug.logInternals&&console.warn("// skip public and internal "+t+" because setSource is in progress",t,e.data)};e.on(t,i),this.on(mi.E.Destroy,()=>{e.off(t,i)})};t("onVideoTypeChange",e=>{let{data:t}=e;this.emit(mi.E.VideoTypeChange,{videoType:t})}),t("onStateChange",e=>{let{data:t}=e;const{playingState:r,reason:i}=t;this.getState().playingState!==r&&(this.emit(mi.E.PlayingStateChange,{playingState:r,playingStateReason:i}),this.telemetry.writePlayerAliveStateManually())}),t("onExpectedStalledChange",e=>{let{data:t}=e;this.telemetry.onExpectedBuffering(t)}),t("onAdStateChange",e=>{let{data:t}=e;const{nextAdState:r,prevAdState:i}=t;this.emit(mi.E.AdStateChange,{adState:r});i.state===$i.M.NOT_PLAYING&&r.state===$i.M.PLAYING&&this.telemetry.onAdStart({adType:r.type});i.state===$i.M.PLAYING&&r.state===$i.M.NOT_PLAYING&&this.telemetry.onAdEnd({adType:i.type})}),t("onBeforeAdPodStart",e=>{let{data:t}=e;this.emit(mi.E.BeforeAdPodStart,t)}),t("onAdLoaded",e=>{let{data:t}=e;this.planTaskForPlayerTracker(e=>e.onAdLoaded(t)),this.emit(mi.E.AdLoaded,t)}),t("onAdError",e=>{let{data:t}=e;this.planTaskForPlayerTracker(e=>e.onAdError()),this.emit(mi.E.AdError,t)}),t("onAdPodClick",()=>{this.planTaskForPlayerTracker(e=>e.onAdPodClick()),this.emit(mi.E.AdPodClick,{})}),t("onAdPodStart",()=>{const{adState:{type:e},source:{params:{adConfig:t={}}={}}={}}=this.getState();void 0!==e&&this.emit(mi.E.AdPodStart,{type:e,adConfig:t})}),t("onAdPodSkip",()=>{this.emit(mi.E.AdPodSkip,{})}),t("onAdPodEnd",()=>{this.emit(mi.E.AdPodEnd,{}),this.telemetry.onAdBetween({adType:this.getState().adState.type})}),t("onAdSkippableStateChange",e=>{let{data:t}=e;this.emit(mi.E.AdSkippableStateChange,{adSkippableState:t})}),t("onAdVolumeAvailabilityStateChange",e=>{let{data:t}=e;this.emit(mi.E.AdVolumeAvailabilityStateChange,{adVolumeAvailabilityState:t})}),t("onAdPodCloseStateChange",e=>{let{data:t}=e;this.emit(mi.E.AdPodCloseStateChange,{adPodCloseState:t})}),t("onAdPodDurationChange",e=>{let{data:t}=e;this.emit(mi.E.AdPodDurationChange,{adPodDuration:t})}),t("onAdPodCurrentTimeChange",e=>{let{data:t}=e;this.emit(mi.E.AdPodCurrentTimeChange,{adPodCurrentTime:t})}),t("onAdPodTimeToSkipChange",e=>{let{data:t}=e;this.emit(mi.E.AdPodTimeToSkipChange,{adPodTimeToSkip:t})}),t("onAdInteraction",()=>{this.emit(mi.E.AdInteraction,void 0)}),t("onNextAdRemainingTimeChange",e=>{let{data:t}=e;this.emit(mi.E.NextAdRemainingTimeChange,{nextAdRemainingTime:t})}),t("onTimelineInfoChange",e=>{let{data:t}=e;const{currentTime:r,duration:i,utcStartTime:n,dvrStartTime:s,dvrDuration:a}=t;this.emit(mi.E.CurrentTimeChange,{currentTime:r}),this.emit(mi.E.DurationChange,{duration:i}),this.emit(mi.E.UtcStartTimeChange,{utcStartTime:n}),this.emit(mi.E.DVRStartTimeChange,{dvrStartTime:s}),this.emit(mi.E.DVRDurationChange,{dvrDuration:a})}),t("onPlaybackRateRangeChange",e=>{let{data:t}=e;this.emit(mi.E.PlaybackRateRangeChange,{playbackRateRange:t})}),t("onPositionChange",e=>{let{data:t}=e;const{watchedTime:r,liveLatency:i}=t;this.emit(mi.E.WatchedTimeChange,{watchedTime:r}),this.emit(mi.E.LiveLatencyChange,{liveLatency:i})}),t("onFullScreenChange",e=>{let{data:t}=e;this.emit(mi.E.FullscreenStateChange,{isFullscreen:t})}),t("onRequestFullscreenChange",e=>{let{data:t}=e;this.emit(mi.E.RequestFullscreenStateChange,{nextFullscreenState:t})}),t("onVolumeChange",e=>{let{data:t}=e;this.emit(mi.E.MutedChange,{muted:t.muted}),this.emit(mi.E.VolumeChange,{volume:t.volume}),this.emit(mi.E.VolumeChangeReasonChange,{volumeChangeReason:t.changeReason})}),t("onReady",()=>{this.emit(mi.E.Ready,this)}),t("onError",e=>{let{data:t}=e;this.emitError(t)}),t("onRecover",e=>{let{data:t}=e;this.telemetry.logEvent({name:"RecoverStreamError",data:{details:t}}),this.telemetry.onRecover({recoverReason:t.reason}),this.emit(mi.E.RecoverStart,t)}),t("onVideoTrackChange",e=>{let{data:t}=e;this.emit(mi.E.VideoTrackChange,{videoTrack:t})}),t("onVideoTracksChange",e=>{let{data:t}=e;this.emit(mi.E.VideoTracksChange,{videoTracks:t})}),t("onAudioTrackChange",e=>{let{data:t}=e;this.emit(mi.E.AudioTrackChange,{audioTrack:t})}),t("onAudioTracksChange",e=>{let{data:t}=e;this.emit(mi.E.AudioTracksChange,{audioTracks:t})}),t("onTextTrackChange",e=>{let{data:t}=e;this.emit(mi.E.TextTrackChange,{textTrack:t})}),t("onTextTracksChange",e=>{let{data:t}=e;this.emit(mi.E.TextTracksChange,{textTracks:t})}),t("onSubtitlesChange",e=>{let{data:t}=e;this.emit(mi.E.SubtitlesChange,{subtitles:t})}),t("onPlaybackRateChange",e=>{let{data:t}=e;const r=this.getState().playbackRate;this.emit(mi.E.PlaybackRateChange,{playbackRate:t}),r!==t&&this.telemetry.writePlayerAliveStateManually()}),t("onBufferingRangesChange",e=>{let{data:t}=e;this.emit(mi.E.BufferedRangesChange,{bufferedRanges:t})}),t("onThumbnailTileGeneralMetaInfoChange",e=>{let{data:t}=e;this.emit(mi.E.TileMetaInfoChange,{tileMetaInfo:t})}),t("onOriginalBroadcastAdStateChange",e=>{let{data:t}=e;const{cueId:r,originalBroadcastAdDuration:i}=t;this.logEventInternal(void 0===r?"OriginalBroadcastAdEnd":"OriginalBroadcastAdStart",{cueId:r,originalBroadcastAdDuration:i})}),t("onDrmSystemChange",e=>{let{data:t}=e;this.telemetry.setStaticParams({drm:t}),this.emit(mi.E.DrmSystemChange,{drmSystem:t})}),t("onChangeStream",e=>{let{data:t}=e;t&&this.telemetry.setStaticParams({streamUrl:t.url}),this.emit(mi.E.StreamChange,{stream:t}),this.emit(mi.E.TileMetaInfoUrlChange,{tileMetaInfoUrl:$(t?t.url:void 0)})}),t("onStreamsWithSupportInfoChange",e=>{let{data:t}=e;this.emit(mi.E.StreamsWithSupportInfoChange,t)}),t("onContentImpression",e=>{let{data:t}=e;this.emit(mi.E.ContentImpression,t)}),t("onResourcesIdle",()=>{this.emit(mi.E.ResourcesIdle,{})}),t("onVisualStateChange",e=>{let{data:t}=e;const{isFullscreen:r,isPictureInPicture:i}=this.getState();r===t.isFullScreen&&i===t.isPip||this.telemetry.writePlayerAliveStateManually(),this.emit(mi.E.PictureInPictureStateChange,{isPictureInPicture:t.isPip}),this.emit(mi.E.VisibleStateChange,{isVisible:t.isVisible}),this.telemetry.setStaticParams({visualState:t}),this.savePlayerAliveData({containerWidth:t.width*devicePixelRatio,containerHeight:t.height*devicePixelRatio})}),t("onCapSizeChange",e=>{let{data:t}=e;this.savePlayerAliveData({capWidth:null==t?void 0:t.width,capHeight:null==t?void 0:t.height})}),t("onPlaybackQualityUpdate",e=>{let{data:t}=e;const r={droppedFrames:t.droppedVideoFrames,shownFrames:t.totalVideoFrames-t.droppedVideoFrames};this.savePlayerAliveData(r),this.invokeOrQueueDebugPanelCallback(()=>{var e;return null==(e=this.debugPanel)?void 0:e.onFramesInfoChange(r)})}),t("onEngineChange",e=>{let{data:t}=e;this.telemetry.setStaticParams({engine:t}),this.invokeOrQueueDebugPanelCallback(()=>{var e;return null==(e=this.debugPanel)?void 0:e.onEngineChange(t)})}),t("onStartStageChange",e=>{let{data:t}=e;this.emit(mi.E.StartStageChange,{startStage:t}),t!==Qi.o.waitForDocumentVisibility&&t!==Qi.o.waitForUserPlay||this.telemetry.stopInitBufferingTimer(),t!==Qi.o.init&&t!==Qi.o.starting||this.telemetry.onInitBuffering()}),t("onVideoSizeChange",e=>{let{data:t}=e;this.emit(mi.E.VideoSizeChange,{videoSize:t})}),t("onBandwidthEstimateChange",e=>{let{data:t}=e;const r=Math.round(t.value),i=t.source;this.savePlayerAliveData({bandwidthEstimate:r,bandwidthSource:i});const n=function(e){return e.value<=5e5?Bs.SLOW:Bs.OK}(t);this.getState().connectionQuality!==n&&this.emit(mi.E.ConnectionQualityChange,{connectionQuality:n}),this.invokeOrQueueDebugPanelCallback(()=>{var e;return null==(e=this.debugPanel)?void 0:e.onBandwidthEstimateChange(t)})}),t("onInrollFrame",e=>{let{data:t}=e;this.emit(mi.E.InrollFrame,t)}),t("onLogEvent",e=>{let{data:t}=e;const r={name:t.event,data:t.params,labels:t.additionalStatsLabels};if("PreloadSource"===t.event){var i,n,s;const e=null==(i=t.params.source)||null==(n=i.streams)||null==(s=n[0])?void 0:s.url;r.extraRootFields={streamUrl:e}}this.telemetry.logEvent(r,t.sourceIndex)}),t("onFrameRendered",e=>{let{data:t}=e;this.emit(mi.E.FrameRendered,{currentTime:t})}),t("onTargetLatencyChange",e=>{let{data:t}=e;this.invokeOrQueueDebugPanelCallback(()=>{var e;null==(e=this.debugPanel)||e.onTargetLatencyChange(t)})})},this.onPanelInitCallbacks=[],this.getReportData=async()=>{var e;const t=this.isReady?await this.requestDebugInfo():{vsid:this.additionalParams.vsid,version:"1.0-13565",clientTimestamp:Date.now(),streamUrl:null==(e=this.getState().stream)?void 0:e.url,system:(0,Us.S)(),playerApiState:this.getState()};return(0,Ys.Y)(t)||""},!(0,fi.K)(e))throw new Bd.x({message:"Params is not an object"});(0,hn.Vc)(e);const d=e,c=(0,Os.lY)(13565,"WEB"),u=(0,Fi.Y)(()=>{var e;const t=null==d||null==(e=d.source.additionalParams)?void 0:e.from;return t&&(0,wi.H)(t)?t:void 0})||Un;this.additionalParams={vsid:c,from:u};const p=void 0!==d.vhParams,m=(0,vi.m)(Sh),v={vsid:c,vpuid:Os.M0.getVpuid(),version:"1.0-13565",service:"StreamPlayer",isVideoADB:m},f=(g=e.logUrl,!(0,wi.H)(g)||g.startsWith("https://"));var g;const y=f?e.logUrl:void 0;this.telemetry=new Os.M0({playerInfo:v,sendLog:(e,t)=>{const r=(0,Ys.Y)(e);if(!r)return;const i=((0,wi.H)(y)?y:"https://log.strm.yandex.ru/log")||(m?Ve():Uo),n=i===Uo||"https://log.strm.yandex.ru"===i?(0,zn.Sr)(i,t):i;(0,Lo.N)({url:n,data:r})},getState:()=>{const e=this.getState();if(!e)return;const t=e.audioTrack,r=e.videoTrack,i=e.videoTracks.map(e=>ti({},e,{selected:(null==r?void 0:r.value)===e.value,auto:Boolean(null==r?void 0:r.auto)})),n={total:(0,qo.p)(e.bufferedRanges,e.currentTime)||0};return ti({},e,this.playerAliveData,{videoTracks:i,remainingBufferedTime:n,audioTrack:t})}}),this.telemetry.setStaticParams({labels:{from:u}});const S=(0,wi.H)(e.perfLogUrl)?e.perfLogUrl:"https://log.strm.yandex.ru/perf";this.resourceTimingsMonitor=new Ko.$W({sendLog:(e,t)=>{const r=(0,Ys.Y)(e);r&&(0,Lo.N)({url:(0,zn.Sr)(S,t),data:r})}}),this.resourceTimingsMonitor.attach(window),this.once(mi.E.Destroy,()=>this.resourceTimingsMonitor.destroy());{!function(e){let{vsid:t}=e;(0,la.W)((0,zn.Sr)("https://mc.yandex.ru/watch/37773110",{vsid:t}))}({vsid:c});const e=t=>{let{watchedTime:r}=t;r>0&&(this.off(mi.E.WatchedTimeChange,e),(0,Fi.Y)(()=>function(e){let{vsid:t}=e;return(0,la.W)((0,zn.Sr)("https://mc.yandex.ru/watch/37773110",{vsid:t,"page-url":"goal://"+window.location.hostname+"/start"}))}({vsid:c}),Fe))};this.on(mi.E.WatchedTimeChange,e)}this.container=(()=>{try{return this.createInternalContainer(function(e){if(!(0,fi.K)(e))throw new pn.b({message:"paramsObject must be an object"});if(!e.element)throw new pn.b({message:"paramsObject must have property [element]"});const{element:t}=e;let r;if("string"===typeof t){const e=document.getElementById(t);if(!e)throw new pn.b({message:"cannot find element with id: ["+t+"]"});r=e}else{if(!Vi(t))throw new pn.b({message:"paramsObject.element must be a string or HTMLElement id"});r=t}return r}(e))}catch(t){const e=new Bd.x((0,hh.K)(t)).overridingClone({code:"InvalidConfigElementInCreatePlayer",isFatal:!0,cause:t});throw this.emitError(e,H((0,Ds.w)(document))),e}})(),this.savePlayerAliveData({containerHeight:this.container.clientHeight*devicePixelRatio,containerWidth:this.container.clientWidth*devicePixelRatio});const A=(()=>{try{return function(e){if(!(0,fi.K)(e))throw new Error("paramsObject must be an object");return mn.Qc3(fn,e.lang)}(e)}catch(t){const e=new Bd.x((0,hh.K)(t)).overridingClone({code:"InvalidConfigLangInCreatePlayer",isFatal:!1,cause:t});return this.emitError(e,H((0,Ds.w)(document))),"ru"}})();if(gi.f.i18nLang=A,this.initErrorScreen(),this.initDebugPanel(),!f){const t=new Bd.x({code:"InvalidLogUrl",isFatal:!0,details:{logUrl:e.logUrl}});throw this.emitError(t),t}this.prepareContainerNode(),this.playerNode=this.createPlayerNode(),h(this.container,this.playerNode);const b=function(e){el();const t=document.createElement("yaplayertag");return t.id=je(e),a(t,{width:"100%",height:"100%",position:"relative",overflow:"hidden",display:"block"}),t}(c);this.playerNode.appendChild(b);const E=(()=>{try{return function(e){return mn.Qc3(Bn,e)}(e)}catch(t){const r=(0,hh.K)(t),i=new Bd.x(r).overridingClone({details:{errorDetails:r.details,config:(0,Fi.Y)(()=>(0,Ys.Y)(e))||"UNSERIALIZABLE"},code:"InvalidConfigInCreatePlayer",isFatal:!0,cause:t});throw this.emitError(i,H((0,Ds.w)(document))),Fe(t),Fe(i),i}})();this.config=ti({},E,{vsid:c,vpuid:Os.M0.getVpuid()}),E.objectFit&&this.setVideoStyle({objectFit:E.objectFit}),this.store=this.initPlayerStore({config:E,vsid:c}),this.initOnlyOnePlayingUnmutePlayerControl();const w=(t,r)=>{try{return j(t,this.config,this.telemetry.getSourceIndex())}catch(i){if(r)return;const t=(0,hh.K)(i),n=new Bd.x(t).overridingClone({details:{errorDetails:t.details,config:(0,Fi.Y)(()=>(0,Ys.Y)(e))||"UNSERIALIZABLE"},code:"InvalidConfigInCreatePlayer",isFatal:!0,cause:i});throw this.emitError(n,H((0,Ds.w)(document))),Fe(i),Fe(n),n}},k=(()=>{try{return w(d.source,p)}catch(Ph){return}})();this.once(mi.E.Destroy,Ie(()=>this.destroyInternal(sn.Unload))),this.debug=E.debugConfig,this.initPlaybackTracking(),this.planTaskForPlayerTracker=this.initPlayerTrackerTaskQueue(),this.once(mi.E.Destroy,()=>this.planTaskForPlayerTracker(e=>e.destroy())),this.subscribeExternalFullscreenChange(this.container),this.once(mi.E.Destroy,()=>{clearTimeout(this.externalPlaybackTokenExpireTimeout)}),E.savedMutedRestored&&this.emit(mi.E.VolumeChangeReasonChange,{volumeChangeReason:en.RestoreSavedMuted}),this.on(mi.E.VolumeChangeReasonChange,e=>{let{volumeChangeReason:t}=e;if((r=t)===en.RequestAutoplaySettings||void 0===r)return;var r;const{volume:i,muted:n}=this.store.getState();xn.setSavedVolume(i),xn.setSavedMuted(n)}),this.once(mi.E.Ready,()=>{this.initTrackChangeLogging();const e={flags:(0,hn.qm)(),slots:this.additionalParams.slots,testids:(this.additionalParams.testIds||"").split(",").map(e=>parseInt(e,10)).filter(isFinite)},t=(0,hd.B)(e);this.logEventInternal("ExperimentCheck"+t,e)}),k&&(k.source.params.additionalParams=this.addRequiredFieldsToAdditionalParams(k.source.params.additionalParams),this.additionalParams=k.source.params.additionalParams,this.applySourceInfoToTelemetry(k)),this.telemetry.setStaticParams({device:E.streamPlayerParams.device?E.streamPlayerParams.device:{}}),this.telemetry.enableRemoteProgressSaving(De(this.playerApiSourceConfig));const C=ti({},e,{element:void 0,v2:!0});if(this.telemetry.onCreatePlayer(C,H((0,Ds.w)(document))),this.on(mi.E.Ready,()=>{this.isReady=!0,this.setSourceStage=un.READY,this.readyPendingEvents.forEach(e=>{var t;const{eventName:r,data:i,sourceId:n}=e;null==(t=this.streamPlayer)||t.emit(r,{data:i,sourceId:n})}),this.readyPendingEvents.length=0}),this.visiblePlaybackController=this.initVisiblePlaybackController(E.streamPlayerParams.togglePlaybackOnVisibilityChange,E.streamPlayerParams.autoplay),this.screenWakeLockController=new Jo({playerContainer:this.container,playerApi:this,onError:(0,li.I)(e=>{const t=(0,hh.K)(e);this.telemetry.logError({error:new Bd.x(t).overridingClone({code:"SCREEN_WAKE_LOCK_ERROR",isFatal:!1,details:{errorDetails:t.details,allowedFeaturePolicies:Me(),locationData:H((0,Ds.w)(document))},cause:e})})})}),this.once(mi.E.Destroy,()=>{var e;return null==(e=this.screenWakeLockController)?void 0:e.destroy()}),this.loggingForExternalToolsAllowed=void 0===e.loadSkin,this.preloadSkin=this.initPreloadSkin(E),k){var P,T,I;const e=E.streamPlayerParams.autoplay&&(!k.source.params.adConfig||!1===k.source.params.adConfig.hasPreroll)&&!k.source.params.startPosition.videoTime;null==(P=this.preloadSkin)||P.setPoster(k.source.params.preview,e?k.source.params.firstFrameHash:"",e?k.source.params.firstFrameUrl:"",k.source.params.thumbnails),null==(T=this.preloadSkin)||T.setStyle(ti({},k.source.params.posterStyle,{objectFit:e?E.objectFit||"contain":null==(I=k.source.params.posterStyle)?void 0:I.objectFit}))}if(this.timecodes=new ud(this),function(e){let t=!1,r=!1,i="start";const n=()=>t&&r,s=(0,li.I)(()=>{e.emit(mi.E.UserReady,{type:i})}),a=()=>{n()&&(i="poster",s())},o=()=>{if(e.off(mi.E.ContentImpression,s),e.off(mi.E.BeforeAdPodStart,u),e.off(mi.E.AdPodStart,c),n())return i="poster",s();t||e.once(mi.E.PosterReady,a),r||e.once(mi.E.SkinReady,a)},l=()=>{t=!0},d=()=>{t=!0,r=!0},c=()=>(i="start",s()),u=()=>{e.off(mi.E.ResourcesIdle,o),e.once(mi.E.AdPodStart,c)};e.once(mi.E.BeforeAdPodStart,u),e.once(mi.E.PosterReady,l),e.once(mi.E.SkinReady,d),e.once(mi.E.ResourcesIdle,o),e.once(mi.E.ContentImpression,s),e.once(mi.E.UserReady,()=>{e.off(mi.E.BeforeAdPodStart,u),e.off(mi.E.ResourcesIdle,o),e.off(mi.E.AdPodStart,c),e.off(mi.E.ContentImpression,s),e.off(mi.E.PosterReady,l),e.off(mi.E.SkinReady,d)})}(this),this.setFiltersForSourceRelatedEvents(),this.completeInitAfterGettingSourceConfig=(t,r)=>{var i,n,s,a;if(this.playerApiSourceConfig||this.destroyed)return;const{source:o}=t;this.playerApiSourceConfig=t,this.emit(mi.E.SourceChange,{source:o});const l=()=>{this.timecodes.parseAndLoadTimecodes({summaryUrl:o.params.summaryUrl,description:o.params.description})};!1===e.loadSkin?l():this.on(mi.E.SkinReady,l);const u=r&&(!o.params.adConfig||!1===o.params.adConfig.hasPreroll)&&!o.params.startPosition.videoTime;null==(i=this.preloadSkin)||i.setPoster(o.params.preview,u?o.params.firstFrameHash:"",u?o.params.firstFrameUrl:"",o.params.thumbnails),null==(n=this.preloadSkin)||n.setStyle(ti({},o.params.posterStyle,{objectFit:u?E.objectFit||"contain":null==(s=o.params.posterStyle)?void 0:s.objectFit}));const h=this.visiblePlaybackController.getVisualState(),p=ti({},E.streamPlayerParams,{isVisibilitySupported:h.isVisibilitySupported,initialVisibility:h.isElementVisible,source:t.source});null!=(a=p.togglePlaybackOnVisibilityChange)&&a.forceAutoplay||void 0===r||(p.autoplay=!0===r||(0,fi.K)(r),p.allowMuted=!0===r||r&&r.allowMuted),this.planTaskForPlayerTracker(e=>e.setTrackings(t.trackings)),this.telemetry.startInitBufferingTimer(),this.telemetry.setExternalStalledDuration(p.source.externalStalledDuration||(0,ui.no)()-Math.min(d.timeLoaderInit||1/0,Si.s.timeAPIInit||1/0)),o.params.additionalParams=this.addRequiredFieldsToAdditionalParams(o.params.additionalParams),this.additionalParams=o.params.additionalParams,this.applySourceInfoToTelemetry(t);try{const e=()=>({isVisible:this.visiblePlaybackController.getVisualState().isElementVisible}),t=ti({},p,{perfLogUrl:p.perfLogUrl,device:p.device,maxBufferLength:p.maxBufferLength,skinConfig:p.skinConfig,backgroundColor:p.backgroundColor,togglePlaybackOnVisibilityChange:p.togglePlaybackOnVisibilityChange,isVisibilitySupported:p.isVisibilitySupported,initialVisibility:p.initialVisibility});this.streamPlayer=new fh({config:t,container:b,vsid:c,vpuid:Os.M0.getVpuid(),getExternalVisualState:e,onEventEmitterInit:this.initStreamPlayerSubscriptions,originalContainer:this.container}),this.initStreamPlayerDeferred.resolve()}catch(m){this.playerApiSourceConfig=void 0;const e=(0,hh.K)(m),t=new Yu.T(e).overridingClone({isFatal:"boolean"!==typeof e.isFatal||e.isFatal,code:e.code||"ON_PLAYER_INIT_ERROR"});this.emitError(t),Fe(t)}Be({source:o})&&void 0!==o.params.adConfig&&(0,Ui.v)(wt(window,o.params.adConfig,c,E.useAbdBundle)),this.getSourceConfigForRecover=E.useFallbackStream?this.createSourceConfigForRecoverGetter(t):As.Z},k&&void 0===k.source.contentId&&!p)return void this.completeInitAfterGettingSourceConfig(k,void 0);const _=this.initVhHelper({contentId:(null==k?void 0:k.source.contentId)||(null==(r=d.vhParams)||null==(i=r.content)?void 0:i.content_id),poster:null==k?void 0:k.source.params.preview,thumbnails:null==k?void 0:k.source.params.thumbnails,vhParams:d.vhParams,queryParams:ti({autoplay:!1===d.autoplay?0:void 0,hidden:(0,fi.K)(d.skinParams)&&"skinConfig"in d.skinParams&&(0,fi.K)(null==(n=d.skinParams)?void 0:n.skinConfig)?null==(s=d.skinParams)||null==(o=s.skinConfig)?void 0:o.hiddenControls:void 0},null==(l=d.source)?void 0:l.queryParams)});this.vhHelper=_,_.on("SetSource",e=>{let{sourceConfig:t,skinConfig:r,externalPlayerConfig:i,autoplay:n}=e;this.configureSkin(r,i);const s=ei(ti({},t,d.source),gh);this.completeInitAfterGettingSourceConfig(w(s,!1),n)})}getState(){var e;return null==(e=this.store)?void 0:e.getState()}async destroy(){return this.destroyInternal(sn.PublicApiCall)}async sendReportLog(){const e=await this.getReportData();return{reportId:this.telemetry.sendReportLog(e)}}play(e){void 0===e&&(e=Xi.l.ExternalApi);const{error:t,playingState:r}=this.getState();if(null!=t&&t.isFatal)return Promise.reject(new Error("Unexpected play on fatal error"));this.emit(mi.E.RequestPlayingState,{playingState:qi.X.PLAY,playingStateReason:e}),(!this.config.streamPlayerParams.autoplay&&this.telemetry.getExpectedStalled().reason===Fo.k.Init||r===qi.X.PAUSE&&this.telemetry.getExpectedStalled().reason===Fo.k.SetSource)&&this.emit(mi.E.RequestPlayingState,{playingState:qi.X.BUFFERING,playingStateReason:Xi.l.Unknown});const i=new Promise((t,r)=>{this.performOnInitStreamPlayer(()=>{var i;null==(i=this.streamPlayer)||i.play(e).then(t).catch(r)},r)});return i.catch(()=>{this.emit(mi.E.RequestPlayingState,{playingState:qi.X.PAUSE,playingStateReason:Xi.l.PlayRejected})}),this.playingStateSynchronization.addLock(i)}pause(e){void 0===e&&(e=Xi.l.ExternalApi),this.emit(mi.E.RequestPlayingState,{playingState:qi.X.PAUSE,playingStateReason:e}),this.performOnInitStreamPlayer(()=>{var t;null==(t=this.streamPlayer)||t.pause(e)})}seek(e,t){var r;null==(r=this.streamPlayer)||r.seek(e),this.emit(mi.E.RequestSeek,{time:e,reason:t})}setDebugPanelVisibility(e){var t;this.debug.showDebugPanel=e,null==(t=this.debugPanel)||t.setVisibility(e)}async requestDebugInfo(){var e,t;const r=await(null==(e=this.streamPlayer)?void 0:e.requestDebugInfo());return ti({},null!=r?r:{},{playerApiState:this.getState(),streamUrl:null==(t=this.getState().stream)?void 0:t.url})}async requestExternalPlay(e){this.logEventInternal(Ji.u.ExternalPlaybackPlayerActivate);const t=await this.requestExternalCsrfToken();try{return await js(e,t),this.logEventInternal(Ji.u.ExternalPlaybackPlayerActivateSucceed),e.externalPlayerId}catch(r){throw this.updateExternalPlaybackCsrfToken(void 0),this.logEventInternal(Ji.u.ExternalPlaybackPlayerActivateFailed),new Error(e.externalPlayerId)}}async requestExternalPlayerList(e){let{currentPlayerListLength:t}=e;await this.requestExternalCsrfToken();try{this.logEventInternal(Ji.u.ExternalPlaybackPlayerListFetching);const e=await Ms();return this.logEventInternal(Ji.u.ExternalPlaybackPlayerListFetchSuccess),e.filter(e=>e.screen_capable).map(e=>({id:e.id,name:e.name,status:e.online?Ki.IDLE:Ki.OFFLINE})).sort(W)}catch(r){throw this.logEventInternal(Ji.u.ExternalPlaybackPlayerListFetchError,{status:(0,fi.K)(r)?r.status:0}),r}}setVolume(e){var t,r;e>0&&(null==(r=this.streamPlayer)||r.setMuted(!1));null==(t=this.streamPlayer)||t.setVolume(e)}setMuted(e){var t;null==(t=this.streamPlayer)||t.setMuted(e)}setVideoTrack(e){var t;null==(t=this.streamPlayer)||t.setVideoTrack(e)}setAudioTrack(e){var t;null==(t=this.streamPlayer)||t.setAudioTrack(e)}setTextTrack(e){var t;null==(t=this.streamPlayer)||t.setTextTrack(e)}changeAdditionalParams(e){(e=>{if(!(0,fi.K)(e))throw new pn.b({message:"changeAdditionalParams payload must be an Object"});if((0,da.Z)(e).some(e=>-1===ca.indexOf(e)))throw new pn.b({message:"changeAdditionalParams payload must contain only following keys: "+ca.toString()})})(e),this.telemetry.flushStates(),this.additionalParams=ti({},this.additionalParams,e),this.telemetry.setStaticParams({additionalParameters:Le(this.additionalParams)})}setNativeTextTrackVisibility(e){var t;null==(t=this.streamPlayer)||t.setNativeTextTrackVisibility(e)}setPlaybackRate(e){var t;null==(t=this.streamPlayer)||t.setPlaybackRate(e)}async setSource(e){var t,r,i;null==(t=this.setSourceDeferred)||t.reject(new Error("SetSource rejected cause of new #setSource()")),this.setSourceDeferred=new Ns.B;const n=this.setSourceDeferred;(0,Ui.v)(n.promise),this.timecodes.parseAndLoadTimecodes({}),this.isReady||this.store.getState().error||await Promise.race([this.waitForEvent(mi.E.Ready),this.waitForEvent(mi.E.ErrorChange),n.promise]),null==(r=this.vhHelper)||r.destroy(),this.vhHelper=void 0;const s=this.telemetry.onBeforeSetSource(),a=e=>{try{return j(e,this.config,s)}catch(t){const e=new Bd.x((0,hh.K)(t)).overridingClone({code:"InvalidConfigInSetSource",isFatal:!0,cause:t});throw this.emitError(e,{streamUrl:void 0},s),e}},o=a(e);this.emit(mi.E.ErrorChange,{error:void 0}),null==(i=this.errorScreen)||i.removeErrorMessage();const l=async e=>{if(this.telemetry.onSetSource(e,{streams:e.source.streams,params:e.source.params,externalStalledDuration:e.source.externalStalledDuration?e.source.externalStalledDuration/1e3:void 0},this.getTelemetryStaticParams(e)),this.telemetry.enableRemoteProgressSaving(De(e)),!T(e.source))throw new Bd.x({message:"setSource method receive a serializable object"});if(void 0===this.playerApiSourceConfig)return this.completeInitAfterGettingSourceConfig(e,void 0),void await Promise.race([this.waitForEvent(mi.E.Ready),this.waitForEvent(mi.E.ErrorChange).then(e=>{let{error:t}=e;throw t})]);this.planTaskForPlayerTracker(t=>t.setTrackings(F(e.trackings))),await this.setSourceInternal(e),this.timecodes.parseAndLoadTimecodes({summaryUrl:e.source.params.summaryUrl,description:e.source.params.description})};if(o.source.contentId){const t=this.initVhHelper({contentId:o.source.contentId,poster:o.source.params.preview,vhParams:void 0,thumbnails:o.source.params.thumbnails,queryParams:ti({autoplay:0},e.queryParams)});return this.vhHelper=t,void t.on("SetSource",async t=>{var r;let{sourceConfig:i,skinConfig:n,externalPlayerConfig:s,autoplay:o}=t;this.configureSkin(ti({},void 0!==n.title?{title:n.title}:{}),s),null!=i&&i.additionalParams&&(i.additionalParams.from=this.additionalParams.from,i.additionalParams.from_block=this.additionalParams.from_block);const d=ei(ti({},i,e),yh);try{await l(a(d)),(!0===o||(0,fi.K)(o))&&(0,Ui.v)(this.play()),await this.waitForPlay()}catch(c){}null==(r=this.preloadSkin)||r.setVisibility(!1)})}await Promise.race([l(o),n.promise])}async preloadSource(e,t){const{signal:r}=t||{},i=(()=>{try{const r=null!=t&&t.ignoreSourceIndexIncreasing?this.telemetry.getSourceIndex():this.telemetry.onBeforePreload();return j(e,this.config,r)}catch(r){return}})();if(void 0===i)return Promise.reject(new Error("source is invalid"));if(i.source.params.additionalParams=this.addRequiredFieldsToAdditionalParams(i.source.params.additionalParams),null!=r&&r.aborted)return Promise.reject(new Error("preload was aborted"));if(!T(i))return console.warn("preloadSource: sourceConfig is not serializable"),Promise.reject(new Error("sourceConfig is not serializable"));const n=String(this.nextPreloadRequestId++),s=new Ns.B,a=()=>{var e;null==r||r.removeEventListener("abort",a),s.reject(new Error("PreloadSource aborted")),null==(e=this.streamPlayer)||e.abortPreload(n)};return null==r||r.addEventListener("abort",a),this.streamPlayer?this.streamPlayer.preloadSource(i.source,n,t).then(s.resolve).catch(s.reject):s.resolve(),s.promise}async requestVideoElementFullscreen(){var e;null==(e=this.streamPlayer)||e.setFullscreen(!0)}exitVideoElementFullscreen(){var e;null==(e=this.streamPlayer)||e.setFullscreen(!1)}setNativeControlsVisibility(e){var t;null==(t=this.streamPlayer)||t.setHiddenControls(function(e){return(0,fi.K)(e)?!1===e.showTimeline?[wn.th.TIMELINE]:[]:e?[]:[wn.th.ALL]}(e))}setNativeAdControlsVisibility(e){var t;null==(t=this.streamPlayer)||t.setNativeAdControlsVisibility(e)}setPictureInPictureAllowed(e){var t;null==(t=this.streamPlayer)||t.setPictureInPictureEnabled(e)}setVideoStyle(e){this.performOnInitStreamPlayer(()=>{var t;null==(t=this.streamPlayer)||t.setVideoStyle(e)})}playInrollAd(e){var t;null==(t=this.streamPlayer)||t.playInrollAd(e)}skipAdPod(){var e;null==(e=this.streamPlayer)||e.skipAdPod()}async playAdViewers(e,t,r){var i;if("inroll"===e&&!r)throw new Error("playAdViewers error: no cueId for inroll");const n=t.map(t=>({adViewer:t,additionalData:"inroll"===e?{cueId:r}:{},adType:e}));return null==(i=this.streamPlayer)?void 0:i.playAdViewers(e,n,{},!0)}logEvent(e){let{event:t,params:r={}}=e;this.loggingForExternalToolsAllowed&&this.logEventInternal(t,r)}logError(e){this.loggingForExternalToolsAllowed&&this.telemetry.logError({error:e})}logSkinDelta(e,t,r){var i;this.loggingForExternalToolsAllowed&&(null==(i=this.streamPlayer)||i.logDelta({deltaId:e,value:t,params:r}))}logDelta(e,t,r){var i;null==(i=this.streamPlayer)||i.logDelta({deltaId:e,value:t,params:r})}async insertInto(e){var t,r;const{playingState:i}=this.getState();await(null==(t=this.streamPlayer)?void 0:t.stopAd({stopAdReason:Pd.InsertIntoCalled}));const n=(0,Bi.w)(this.container.querySelectorAll("video")),s=n.map(e=>e.style.objectPosition),a=n.map(e=>(0,nn.n)(e));e.appendChild(this.container),(0,Tc.z)()&&n.forEach((e,t)=>e.style.objectPosition=s[t]),(0,Li.p)(a),this.visiblePlaybackController.restartVisibilityObserver(),null==(r=this.screenWakeLockController)||r.restartVisibilityObserver(),i!==qi.X.PLAY&&i!==qi.X.BUFFERING||this.play(Xi.l.RestoreAfterInsertInto)}getReadyState(){return this.destroyed?xs.k.destroyed:xs.k.ready}getContainer(){return this.container}async saveVideoFrame(){if(!this.streamPlayer)throw new Error("Stream player is not initialized");return this.streamPlayer.saveVideoFrame()}async seekToNextFrame(){var e;return null==(e=this.streamPlayer)?void 0:e.seekToNextFrame()}async seekToPreviousFrame(){var e;return null==(e=this.streamPlayer)?void 0:e.seekToPreviousFrame()}releaseSource(e,t){var r;void 0===t&&(t=!1);const i=j(e,this.config,0),{source:n}=i;null==(r=this.streamPlayer)||r.releaseSource(n,t)}async setSourceInternal(e,t){var r;let{shouldSaveProgress:i=!1}=void 0===t?{}:t;const{source:n}=e;this.logEventInternal("SetSourceInternal",ti({},n,{shouldSaveProgress:i})),n.params.additionalParams=this.addRequiredFieldsToAdditionalParams(n.params.additionalParams),this.playerApiSourceConfig=e,this.updateStateForSetSource(n,{shouldSaveProgress:i});const s=this.waitForSetSourceComplete();this.setSourceStage=un.LOADING,this.resetPlayerAliveData(),null==(r=this.streamPlayer)||r.setSource(n,{shouldSaveProgress:i}),this.additionalParams=n.params.additionalParams,await s,this.planTaskForPlayerTracker(e=>e.onSetSourceComplete(n))}async destroyInternal(e){var t;this.destroyed||(this.destroyed=!0,this.telemetry.logEvent({name:"DestroyCalled",data:{message:e}}),this.emit(mi.E.StartStageChange,{startStage:Qi.o.destroyed}),null==(t=this.setSourceDeferred)||t.reject(new Error("SetSource rejected cause destroy player")),await this.destroyStreamPlayer(),p(this.container),this.emit(mi.E.Destroy,{}),super.destroy(),this.telemetry.destroy({reason:e}))}initTrackChangeLogging(){let e=this.getState().videoTrack,t=this.getState().audioTrack,r=this.getState().textTrack;this.on(mi.E.VideoTrackChange,t=>{let{videoTrack:r}=t;const i=e;e=r,!(0,fi.K)(i)||!(0,fi.K)(r)||i.auto&&r.auto||i.value===r.value&&i.auto===r.auto||this.telemetry.logEvent({name:"SetVideoTrack",data:{previous:Q(i),next:Q(r)}})}),this.on(mi.E.AudioTrackChange,e=>{let{audioTrack:r}=e;(0,fi.K)(t)&&(0,fi.K)(r)&&t.name!==r.name&&this.telemetry.logEvent({name:"SetAudioTrack",data:{previous:z(t),next:z(r)}}),t=r}),this.on(mi.E.TextTrackChange,e=>{let{textTrack:t}=e;void 0===r&&void 0===t||this.telemetry.logEvent({name:"SetTextTrack",data:{previous:K(r),next:K(t)}}),r=t})}initVisiblePlaybackController(e,t){const r=new Fa(this);this.once(mi.E.Destroy,()=>{r.destroy()});const i=new La({play:()=>{this.playingStateSynchronization.waitAndLock(()=>this.play(Xi.l.VisiblePlayback).catch(e=>{this.telemetry.logError({error:new bi.p(e).overridingClone({isFatal:!1,code:"PLAY_REJECTED",cause:e})})}))},pause:()=>{this.playingStateSynchronization.waitAndLock(async()=>{this.pause(Xi.l.VisiblePlayback)})},togglePlaybackVisibilitySetting:e,autoplay:t,playerStateAdaptor:r,logEvent:e=>this.telemetry.logEvent({name:e})}),n=e=>{let{playingState:t,playingStateReason:r}=e;r!==Xi.l.VisiblePlayback&&i.actualizeAutoplay(t===qi.X.PLAY)};this.on(mi.E.RequestPlayingState,n),this.once(mi.E.WatchedTimeChange,()=>{this.off(mi.E.RequestPlayingState,n)}),this.once(mi.E.Destroy,()=>{i.destroy()});const s=new Na({element:this.container,togglePlaybackVisibilitySetting:e,playerStateAdaptor:r,playPauseController:i});this.once(mi.E.Destroy,()=>{s.destroy()}),s.observeVisualState(e=>{this.performOnInitStreamPlayer(()=>{var t;null==(t=this.streamPlayer)||t.setExternalVisualState({isVisible:e.isElementVisible})})});const a=e=>{s.notifyFullScreen(e.isFullscreen)};this.on(mi.E.FullscreenStateChange,a),this.once(mi.E.Destroy,()=>{this.off(mi.E.FullscreenStateChange,a)});const o=e=>{s.notifyPip(e.isPictureInPicture)};return this.on(mi.E.PictureInPictureStateChange,o),this.once(mi.E.Destroy,()=>{this.off(mi.E.PictureInPictureStateChange,o)}),s}initErrorScreen(){this.once(mi.E.ResourcesIdle,this.loadComponents),this.on(mi.E.ErrorChange,async e=>{var t;let{error:r}=e;void 0!==r?Z(r)||(await this.loadComponents(),this.destroyed||(void 0===this.errorScreen&&(this.errorScreen=gi.f.initErrorScreen(ti({},this.additionalParams,{element:this.container,getReportId:()=>this.telemetry.generateReportId()})),this.once(mi.E.Destroy,()=>this.errorScreen.destroy())),r=void 0===this.store?r:this.store.getState().error,void 0!==r&&(null==(t=this.streamPlayer)||t.setPictureInPicture(!1),this.errorScreen.showErrorMessage(r.messageDetails||(0,Zi.e)(r))))):this.errorScreen&&this.errorScreen.changeVisibility(!1)})}addRequiredFieldsToAdditionalParams(e){return ti({},e,{vsid:this.additionalParams.vsid,from:e.from||this.additionalParams.from,puid:e.puid||this.additionalParams.puid,folder_id:e.folder_id||this.additionalParams.folder_id})}waitForSetSourceComplete(){return new Promise((e,t)=>{const r=this.sourceIdSignal.addOne(()=>{this.setSourceStage=un.READY,e(),s()}),i=e=>{let{error:r}=e;r&&r.isFatal&&(this.setSourceStage=un.ERROR,t(r),s())},n=()=>{t({message:"CANCELED",isFatal:!1}),s()},s=()=>{r(),this.off(mi.E.ErrorChange,i),this.off(mi.E.SourceChange,n)};this.on(mi.E.ErrorChange,i),this.once(mi.E.SourceChange,n)})}createInternalContainer(e){const t=e.ownerDocument.createElement("div");return a(t,{width:"100%",height:"100%"}),h(e,t),t}prepareContainerNode(){const e=l(this.container,o(this.container)).position;a(this.container,{position:e&&"static"!==e?e:"relative",webkitMaskImage:"-webkit-radial-gradient(white, black)",maskImage:"radial-gradient(white, black)"})}createPlayerNode(){const e=this.container.ownerDocument.createElement("div");return a(e,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0"}),e}initPlayerStore(e){let{config:t,vsid:r}=e;return new To(ti({},cn,{volume:t.streamPlayerParams.volume,muted:t.streamPlayerParams.muted,vsid:r}),(e,t)=>this.on(e,t))}async requestExternalCsrfToken(){if(this.externalPlaybackCsrfToken)return this.externalPlaybackCsrfToken;try{this.logEventInternal(Ji.u.ExternalPlaybackPlayerCsrfFetching);const{token:e}=await Fs();return this.logEventInternal(Ji.u.ExternalPlaybackPlayerCsrfFetchSuccess),this.updateExternalPlaybackCsrfToken(e),e}catch(e){return this.logEventInternal(Ji.u.ExternalPlaybackPlayerCsrfFetchError),""}}updateExternalPlaybackCsrfToken(e){this.externalPlaybackCsrfToken=e,void 0!==e&&(clearTimeout(this.externalPlaybackTokenExpireTimeout),this.externalPlaybackTokenExpireTimeout=window.setTimeout(()=>{this.externalPlaybackCsrfToken=void 0,this.logEventInternal(Ji.u.ExternalPlaybackCsrfTokenExpired)},6e4))}logEventInternal(e,t,r){void 0===t&&(t={}),this.telemetry.logEvent({name:e,data:t,extraRootFields:r})}async destroyStreamPlayer(){if(!this.streamPlayer)return;const{isFullscreen:e}=this.getState();if(e)return new Promise(t=>{e&&(this.once(mi.E.FullscreenStateChange,()=>{this.destroyStreamPlayer().then(t)}),this.exitVideoElementFullscreen())});await(0,Ui.v)(this.streamPlayer.destroy())}subscribeExternalFullscreenChange(e){this.once(mi.E.Destroy,function(e){let{element:t,onChange:r,stopAtElement:i}=e;const n=t.ownerDocument||window.document;let s=!1;r(s);const a=aa.map(e=>(s=s||X(n,t,i),(0,sa.O)(n,e.events.change,()=>{try{const e=X(n,t,i);if(e===s)return;r(e),s=e}catch(e){}},{passive:!0})));return()=>{a.forEach(e=>e())}}({element:e,onChange:e=>{this.performOnInitStreamPlayer(()=>{var t;null==(t=this.streamPlayer)||t.setExternalVisualState({isFullscreen:e})})},stopAtElement:this.container.parentElement||e}))}initPlaybackTracking(){this.on(mi.E.PlayingStateChange,e=>{let{playingState:t}=e;return this.telemetry.setPlayingState(t)})}initPlayerTrackerTaskQueue(){const t=(0,dd.P)(e.e(276).then(e.bind(e,57276)).then(e=>{let{PlayerTracker:t}=e;return new t({vsid:this.getState().vsid,getAdState:()=>this.getState().adState,getVideoTrack:()=>this.getState().videoTrack,getAudioTrack:()=>this.getState().audioTrack,getTextTrack:()=>this.getState().textTrack,getVideoType:()=>this.getState().videoType,getIsFullscreen:()=>this.getState().isFullscreen,getDrmSystemName:()=>this.getState().drmSystem,getIsDrmSupported:()=>{var e;if(void 0!==(null==(e=this.getState().stream)?void 0:e.drmConfig))return void 0===this.getState().error},getMuted:()=>this.getState().muted||0===this.getState().volume,getDuration:()=>this.getState().duration||0,getPlayingState:()=>this.getState().playingState,getCurrentTime:()=>this.getState().currentTime,getWatchedTime:()=>this.getState().watchedTime,getUtcPosition:()=>{const{utcStartTime:e,currentTime:t}=this.getState();return void 0===e?0:e+t}})}));return this.on(mi.E.Ready,()=>t(e=>e.onReady())),this.on(mi.E.ErrorChange,e=>{let{error:r}=e;void 0!==r&&t(e=>e.onError(r))}),this.on(mi.E.CurrentTimeChange,e=>{let{currentTime:r}=e;return t(e=>e.onCurrentTimeChange(r))}),this.on(mi.E.WatchedTimeChange,e=>{let{watchedTime:r}=e;return t(e=>e.onWatchedTimeChange(r))}),this.on(mi.E.AdStateChange,e=>{let{adState:r}=e;return t(e=>e.onAdStateChange(r))}),this.on(mi.E.PlayingStateChange,e=>{let{playingState:r}=e;return t(e=>e.onStateChange(r))}),this.on(mi.E.AdPodStart,()=>{t(e=>e.onAdPodStart())}),this.on(mi.E.AdPodEnd,()=>{t(e=>e.onAdPodEnd())}),this.on(mi.E.AdPodSkip,()=>{t(e=>e.onAdPodSkip())}),t}invokeOrQueueDebugPanelCallback(e){this.debugPanel?e():this.onPanelInitCallbacks.push(e)}initDebugPanel(){this.once(mi.E.ResourcesIdle,async()=>{if(await this.loadComponents(),!this.destroyed&&void 0===this.debugPanel){this.debugPanel=gi.f.initDebugPanel({container:this.container,getState:()=>this.getState(),getSourceId:()=>this.sourceIdSignal.getValue(),getAdditionalParams:()=>this.additionalParams,options:{qr:!0}}),this.once(mi.E.Destroy,()=>{var e;return null==(e=this.debugPanel)?void 0:e.destroy()});const e=()=>{var e;return null==(e=this.debugPanel)?void 0:e.update()};this.on(mi.E.CurrentTimeChange,e),this.on(mi.E.DurationChange,e),this.on(mi.E.WatchedTimeChange,e),this.on(mi.E.PlayingStateChange,e),this.on(mi.E.LiveLatencyChange,e),this.on(mi.E.VideoTypeChange,e),this.on(mi.E.SourceChange,e),this.on(mi.E.VideoTrackChange,e),this.on(mi.E.AudioTrackChange,e),this.on(mi.E.BufferedRangesChange,e),this.onPanelInitCallbacks.forEach(e=>e()),this.onPanelInitCallbacks.length=0,this.debugPanel.setVisibility(this.debug.showDebugPanel)}})}requestSourceConfigForRecover(e){if(e.isFatal&&function(e){return!Z(e)&&(e.category===Hs.q.DRM?"DRM_PROXY_ERROR_SIGNATURE_EXPIRED"===e.code:e.category===Hs.q.NETWORK_REQUEST?"REGIONAL_RESTRICTION"===e.code||"EXPIRED_SIGNATURE"===e.code||"INVALID_SIGNATURE"===e.code:e.category===Hs.q.REGIONAL||e.category===Hs.q.ACCESS)}(e))return Promise.resolve().then(()=>{var e;const t=null==(e=this.playerApiSourceConfig)?void 0:e.update();return ji(t)&&(this.emit(mi.E.PlayingStateChange,{playingState:qi.X.BUFFERING,playingStateReason:Xi.l.WaitForSourceConfigUpdate}),t.catch(e=>{throw this.emit(mi.E.PlayingStateChange,{playingState:qi.X.PAUSE,playingStateReason:Xi.l.Unknown}),e})),t})}async tryRecoverSourceConfigInAsyncMode(e){const t=await this.requestSourceConfigForRecover(e);if(void 0===t)return!1;const r=(()=>{try{return j(t,this.config,this.playerApiSourceConfig.source.sourceIndex)}catch(e){const t=new Bd.x((0,hh.K)(e)).overridingClone({code:"InvalidConfigInSourceUpdate",isFatal:!1});return void this.emitError(t)}})();return void 0!==r&&(setTimeout(()=>{this.logEventInternal("UpdateSourceConfig"),this.setSourceInternal(r,{shouldSaveProgress:!0})}),!0)}tryRecoverSourceConfigInSyncMode(e){const t=this.getSourceConfigForRecover(e);return!!t&&(setTimeout(()=>{this.logEventInternal("UpdateSourceConfigSync"),this.setSourceInternal(t,{shouldSaveProgress:!0})}),!0)}async tryRecoverSourceConfig(e){try{if(this.tryRecoverSourceConfigInSyncMode(e))return!0;if(await this.tryRecoverSourceConfigInAsyncMode(e))return!0}catch(t){}return!1}async emitError(e,t,r){if(e.isFatal&&e.category===Hs.q.DRM&&!Go&&(e=new Bd.x({code:m()?"IframeDoesNotAllowDrm":"DrmIsNotAllowed",isFatal:!0,details:{originalCode:e.code,originalDetails:e.details,allowedFeaturePolicies:Me()},vsid:this.additionalParams.vsid})),(e=e.overridingClone({isFatal:e.isFatal&&!this.destroyed&&(!this.container||u(this.container))})).isFatal&&this.emit(mi.E.PlayingStateChange,{playingState:qi.X.PAUSE,playingStateReason:Xi.l.Unknown}),e.isFatal&&function(e){return!(-1!==ra.indexOf(e.category))&&-1===ia.indexOf(e.code)}(e)){let t=de(this.getState())?qi.X.PLAY:qi.X.PAUSE;const r=e=>{let{playingState:r}=e;t=r};this.on(mi.E.RequestPlayingState,r);const i=await this.tryRecoverSourceConfig(e);this.off(mi.E.RequestPlayingState,r),i&&(e=e.overridingClone({isFatal:!1}),de({playingState:t})&&this.play(Xi.l.CompletedRecoverSourceConfig))}var i,n;e.isFatal&&(null==(i=this.setSourceDeferred)||i.reject(new Error("SetSource rejected cause fatal error")),null!=(n=this.getState())&&n.error?e=e.overridingClone({isFatal:!1}):(t=ti({},t,{topLocation:(0,Ds.w)(window.document)}),this.emit(mi.E.ErrorChange,{error:e})));e.category===Hs.q.NO_CODECS&&(0,jn.z)()||this.telemetry.logError({error:e,extraRootFields:t},r)}initPreloadSkin(e){if(!1===e.loadSkin)return;if(this.getState().playingState===qi.X.PLAY)return;const t={};e.objectFit&&(t.objectFit=e.objectFit);const r=Pe({document:this.container.ownerDocument,poster:void 0,firstFrameHash:void 0,firstFrameUrl:void 0,style:0===Object.keys(t).length?void 0:t,hiddenControls:e.originalHiddenControls,primaryColor:e.primaryColor,backgroundColor:e.streamPlayerParams.backgroundColor,onReady:()=>{this.emit(mi.E.PosterReady,{})}});return this.container.appendChild(r.element),this.once(mi.E.SkinReady,()=>{var e;!(this.vhHelper&&null!=(e=this.getState().error)&&e.isFatal)&&r.setVisibility(!1)}),this.once(mi.E.Destroy,()=>r.destroy()),this.waitForPlay().then(()=>{r.setVisibility(!1)}).catch(As.Z),r}updateStateForSetSource(e,t){let{shouldSaveProgress:r=!1}=void 0===t?{}:t;this.unsetFiltersForSourceRelatedEvents(),this.emit(mi.E.StreamChange,{stream:void 0}),this.emit(mi.E.SourceChange,{source:e}),this.emit(mi.E.StreamsWithSupportInfoChange,void 0),this.emit(mi.E.DrmSystemChange,{drmSystem:void 0}),this.emit(mi.E.VideoTrackChange,{videoTrack:void 0}),this.emit(mi.E.VideoTracksChange,{videoTracks:[]}),this.emit(mi.E.AudioTrackChange,{audioTrack:void 0}),this.emit(mi.E.AudioTracksChange,{audioTracks:[]}),this.emit(mi.E.TextTrackChange,{textTrack:void 0}),this.emit(mi.E.TextTracksChange,{textTracks:[]}),this.emit(mi.E.TileMetaInfoChange,{tileMetaInfo:void 0}),this.emit(mi.E.CurrentTimeChange,{currentTime:cn.currentTime}),this.emit(mi.E.DurationChange,{duration:cn.duration}),this.emit(mi.E.UtcStartTimeChange,{utcStartTime:cn.utcStartTime}),this.emit(mi.E.DVRStartTimeChange,{dvrStartTime:cn.dvrStartTime}),this.emit(mi.E.DVRDurationChange,{dvrDuration:cn.dvrDuration}),r||this.emit(mi.E.WatchedTimeChange,{watchedTime:cn.watchedTime}),this.emit(mi.E.VideoTypeChange,{videoType:cn.videoType}),this.emit(mi.E.AdStateChange,{adState:cn.adState}),this.setFiltersForSourceRelatedEvents()}setFiltersForSourceRelatedEvents(){this.setFilter(mi.E.CurrentTimeChange,e=>{let{currentTime:t}=e;return!zi()(t,this.getState().currentTime)}),this.setFilter(mi.E.WatchedTimeChange,e=>{let{watchedTime:t}=e;return!zi()(t,this.getState().watchedTime)}),this.setFilter(mi.E.DurationChange,e=>{let{duration:t}=e;return!zi()(t,this.getState().duration)}),this.setFilter(mi.E.UtcStartTimeChange,e=>{let{utcStartTime:t}=e;return!zi()(t,this.getState().utcStartTime)}),this.setFilter(mi.E.DVRStartTimeChange,e=>{let{dvrStartTime:t}=e;return!zi()(t,this.getState().dvrStartTime)}),this.setFilter(mi.E.DVRDurationChange,e=>{let{dvrDuration:t}=e;return!zi()(t,this.getState().dvrDuration)}),this.setFilter(mi.E.PlaybackRateRangeChange,e=>{let{playbackRateRange:t}=e;return!zi()(t,this.getState().playbackRateRange)}),this.setFilter(mi.E.AdStateChange,e=>{let{adState:t}=e;return!zi()(t,this.getState().adState)}),this.setFilter(mi.E.VolumeChange,e=>{let{volume:t}=e;return!zi()(t,this.getState().volume)}),this.setFilter(mi.E.VideoTracksChange,e=>{let{videoTracks:t}=e;return!(0===this.getState().videoTracks.length&&0===t.length)}),this.setFilter(mi.E.AudioTracksChange,e=>{let{audioTracks:t}=e;return!(0===this.getState().audioTracks.length&&0===t.length)}),this.setFilter(mi.E.TextTracksChange,e=>{let{textTracks:t}=e;return!(0===this.getState().textTracks.length&&0===t.length)})}unsetFiltersForSourceRelatedEvents(){this.unsetFilter(mi.E.CurrentTimeChange),this.unsetFilter(mi.E.WatchedTimeChange),this.unsetFilter(mi.E.DurationChange),this.unsetFilter(mi.E.UtcStartTimeChange),this.unsetFilter(mi.E.DVRStartTimeChange),this.unsetFilter(mi.E.DVRDurationChange),this.unsetFilter(mi.E.PlaybackRateRangeChange),this.unsetFilter(mi.E.VolumeChange),this.unsetFilter(mi.E.VideoTracksChange),this.unsetFilter(mi.E.AudioTracksChange),this.unsetFilter(mi.E.TextTracksChange)}savePlayerAliveData(e){this.playerAliveData=ti({},this.playerAliveData,e)}resetPlayerAliveData(){this.playerAliveData={bandwidthEstimate:0,containerHeight:this.playerAliveData.containerHeight,containerWidth:this.playerAliveData.containerWidth}}applySourceInfoToTelemetry(e){try{this.telemetry.setStaticParams(this.getTelemetryStaticParams(e)),this.telemetry.enableRemoteProgressSaving(De(e))}catch(Th){setTimeout(()=>{throw Th})}}getTelemetryStaticParams(e){var t;const{source:r}=e,{puid:i,from:n}=r.params.additionalParams;return{additionalParameters:Le(r.params.additionalParams),slots:(s=r.params.additionalParams,void 0===s?"":s.slots||""),testIds:y(r.params.additionalParams),videoContentId:r.params.videoInfo.videoContentId,streamUrl:null==(t=r.streams[0])?void 0:t.url,labels:{from:n},engine:void 0,drm:void 0,puid:i};var s}createSourceConfigForRecoverGetter(e){let t,r=e.source;return this.on(mi.E.SourceChange,e=>{let{source:t}=e;r=t}),this.on(mi.E.StreamsWithSupportInfoChange,e=>{t=e}),i=>{const n=void 0===t?void 0:tn(t);if(!this.canRecoverBySourceUpdate(i,r,n))return;const s=Ni(r),a=n.map(e=>{let{stream:t}=e;return t});return s.streams=this.removeCurrentStream(a),ti({},e,{source:s})}}canRecoverBySourceUpdate(e,t,r){if(!e.isFatal||!t||!r)return!1;const i=r.map(e=>{let{stream:t}=e;return t}),n=this.removeCurrentStream(i);return 0!==n.length&&n.length!==t.streams.length}removeCurrentStream(e){const{stream:t}=this.getState();return e.filter(e=>!zi()(e,t))}waitForEvent(e){return new Promise(t=>this.once(e,t))}initVhHelper(e){let{contentId:t,poster:r,vhParams:i,queryParams:n,thumbnails:s}=e;const a=new ta({contentId:t,vhParams:i,queryParams:(0,zo.r)(ti({},n),this.container),playerApi:this});return a.on("ShowAnnotation",async e=>{var t,r,i,n,s;e?(await this.loadComponents(),null==(t=this.preloadSkin)||t.setSpinnerVisibility(!1),null==(r=this.preloadSkin)||r.setAnnotationText(gi.f.i18nTranslateSandbox(e)),null==(i=this.preloadSkin)||i.setVisibility(!0)):(null==(n=this.preloadSkin)||n.setSpinnerVisibility(!1),null==(s=this.preloadSkin)||s.setVisibility(!0))}),a.on("SetPoster",e=>{var t,i;null==(t=this.preloadSkin)||t.setPoster(r||e||"","","",s),null==(i=this.preloadSkin)||i.setVisibility(!0)}),a.on("Destroy",()=>{var e,t,r;null==(e=this.preloadSkin)||e.setVisibility(!1),null==(t=this.preloadSkin)||t.setSpinnerVisibility(!1),null==(r=this.preloadSkin)||r.setPoster("","","",void 0)}),a.on("SetSource",()=>{var e,t;null==(e=this.preloadSkin)||e.setAnnotationText(""),null==(t=this.preloadSkin)||t.setSpinnerVisibility(!0)}),a.on("Error",e=>{var t;"REQUEST_SOURCE_ERROR"===e.code&&(null==(t=this.preloadSkin)||t.setVisibility(!1));this.emitError(e)}),a.on("UgcLiveStatusChange",e=>{this.emit(mi.E.UgcLiveStatusChange,{ugcLiveStatus:e})}),a}waitForPlay(){return new Promise((e,t)=>{var r;this.once(mi.E.Destroy,t),null==(r=this.setSourceDeferred)||r.promise.catch(t);const i=()=>{const e=this.getState();if(!e)return!1;const{playingState:t,adState:{state:r}}=e;return t===qi.X.PLAY||r===$i.M.PLAYING};if(i())return void e();const n=()=>{i()&&(e(),this.off(mi.E.PlayingStateChange,n),this.off(mi.E.AdStateChange,n))};this.on(mi.E.PlayingStateChange,n),this.on(mi.E.AdStateChange,n)})}configureSkin(e,t){if(void 0!==this.config.loadSkin)return;const r=()=>{this.skin&&(this.skin.configure(e),this.skin.updateExternalPlayerConfig(t))};this.skin?r():this.once(mi.E.SkinReady,e=>{let{error:t}=e;t||r()})}initOnlyOnePlayingUnmutePlayerControl(){const{vsid:e}=this.getState(),t=()=>{Dn.KK.setItem("videoplayer-playing-vsid",e),dispatchEvent(new StorageEvent("storage",{key:"videoplayer-playing-vsid"}))};addEventListener("storage",t=>{let{key:r}=t;if("videoplayer-playing-vsid"!==r)return;const i=Dn.KK.getItem("videoplayer-playing-vsid");if(!i)return;const{muted:n}=this.getState();i===e||n||this.pause(Xi.l.StartPlayingAnotherPlayer)}),this.on(mi.E.PlayingStateChange,e=>{let{playingState:r}=e;const{muted:i}=this.getState();r!==qi.X.PLAY||i||t()}),this.on(mi.E.MutedChange,e=>{let{muted:r}=e;const{playingState:i}=this.getState();i!==qi.X.PLAY||r||t()})}}var bh=e(88085);let Eh,wh;!function(e){e.PLAYER_API="player-api.js",e.PLAYER_API_MODERN="player-api.modern.js"}(Eh||(Eh={}));const kh=["setReadyInstance","setInstance"],Ch=e=>e.usePlayerApiMock?ai(e):s(e,e=>new Ah(e));oi.s.create=Ch;{const{createVhPlayerApi:t}=e(94125);oi.s.createVhPlayerApi=t}oi.p.init=Ch,oi.p.preloadScripts=()=>Promise.resolve([])})()})();