(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["ymaps"],{58040:e=>{function t(){var e;this.getSetting=function(e){var t=this._errorSettings[e];return null===t?null:t||""},function(e,t){var i={client:["690.2354",1e3,100,0],uncaught:["690.2361",100,10,0],external:["690.2854",100,10,0],script:["690.2609",100,10,0]},n={};t.ERROR_LEVEL={INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error",FATAL:"fatal"},t._errorSettings={clck:"https://yandex.ru/clck/click",beacon:!0,project:"unknown",page:"",env:"",experiments:[],additional:{},platform:"",region:"",dc:"",host:"",service:"",level:"",version:"",yandexuid:"",coordinates_gp:"",referrer:!0,preventError:!1,unhandledRejection:!1,uncaughtException:!0,debug:!1,limits:{},silent:{},filters:{},pageMaxAge:864e6,initTimestamp:+new Date};var r=!1;function o(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function a(e){return("boolean"==typeof e&&(e=+e),"number"==typeof e)?e+"":null}t.initErrors=function(i){o(t._errorSettings,i),!r&&t._errorSettings.uncaughtException&&(function(){var i=t._errorSettings;if(e.addEventListener)e.addEventListener("error",s),i.resourceFails&&e.addEventListener("error",u,!0),"Promise"in e&&i.unhandledRejection&&e.addEventListener("unhandledrejection",function(e){var t,i=e.reason,n={};i&&(i.stack&&i.message?t=i.message:"[object Event]"===(t=String(i))?t="event.type: "+i.type:"[object Object]"===t&&(n.unhandledObject=i),i.target&&i.target.src&&(n.src=i.target.src),s({message:"Unhandled rejection: "+t,stack:i.stack,additional:n}))});else{var n=e.onerror;e.onerror=function(e,t,i,r,o){s({error:o||Error(e||"Empty error"),message:e,lineno:i,colno:r,filename:t}),n&&n.apply(this,arguments)}}}(),r=!0)},t.updateErrors=function(e){o(t._errorSettings,e)},t.updateAdditional=function(e){t._errorSettings.additional=o(t._errorSettings.additional||{},e)},t._handleError=function(e,r){var o,a,s=t._errorSettings;if(s.preventError&&e.preventDefault&&e.preventDefault(),r)o=e,a="client";else{a=(o=t._normalizeError(e)).type;var u=s.onError;"function"==typeof u&&u(o);var l=s.transform;"function"==typeof l&&(o=l(o))}var c=+new Date,d=s.initTimestamp,h=s.pageMaxAge;if(-1===h||!d||!(d+h<c)){var _=i[a][1];"number"==typeof s.limits[a]&&(_=s.limits[a]);var m=i[a][2];"number"==typeof s.silent[a]&&(m=s.silent[a]);var f=i[a][3];if(f<_||-1===_){o.path=i[a][0];var p=(function(e){n[o.message]=!1,t._sendError(e.path,e.vars),i[a][3]++}).bind(this,t._getErrorData(o,{silent:f<m||-1===m?"no":"yes",isCustom:!!r},s));if(void 0===s.throttleSend)p();else{if(n[o.message])return;n[o.message]=!0,setTimeout(p,s.throttleSend)}}}},t._getReferrer=function(t){var i=t.referrer,n=typeof i;return"function"===n?i():"string"===n&&i?i:!1!==i&&e.location?e.location.href:void 0},t._buildExperiments=function(e){return e instanceof Array?e.join(";"):""},t._buildAdditional=function(e,t){var i="";try{var n=o(o({},e),t);0!==Object.keys(n).length&&(i=JSON.stringify(n))}catch(r){}return i},t._getErrorData=function(i,n,r){n=n||{};var o=t._buildExperiments(r.experiments),s=t._buildAdditional(r.additional,i.additional),u={"-stack":i.stack,"-url":i.file,"-line":i.line,"-col":i.col,"-block":i.block,"-method":i.method,"-msg":i.message,"-env":r.env,"-external":i.external,"-externalCustom":i.externalCustom,"-project":r.project,"-service":i.service||r.service,"-page":i.page||r.page,"-platform":r.platform,"-level":i.level,"-experiments":o,"-version":r.version,"-region":r.region,"-dc":r.dc,"-host":r.host,"-yandexuid":r.yandexuid,"-coordinates_gp":i.coordinates_gp||r.coordinates_gp,"-referrer":t._getReferrer(r),"-source":i.source,"-sourceMethod":i.sourceMethod,"-type":n.isCustom?i.type:"","-additional":s,"-adb":a(Ya.blocker)||a(r.blocker),"-cdn":e.YaStaticRegion,"-ua":navigator.userAgent,"-silent":n.silent,"-ts":+new Date,"-init-ts":r.initTimestamp};return r.debug&&e.console&&console[console[i.level]?i.level:"error"]("[error-counter] "+i.message,u,i.stack),{path:i.path,vars:u}},t._baseNormalizeError=function(e){var t=(e=e||{}).error,i=e.filename||e.fileName||"",n=t&&t.stack||e.stack||"",r=e.message||"",o=t&&t.additional||e.additional;return{file:i,line:e.lineno||e.lineNumber,col:e.colno||e.colNumber,stack:n,message:r,additional:o}},t._normalizeError=function(e){var i=t._baseNormalizeError(e),n="uncaught",r=t._isExternalError(i.file,i.message,i.stack),o="",a="";return r.hasExternal?(n="external",o=r.common,a=r.custom):/^Script error\.?$/.test(i.message)&&(n="script"),i.external=o,i.externalCustom=a,i.type=n,i},t._createVarsString=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&(e[i]||0===e[i])&&t.push(i+"="+encodeURIComponent(e[i]).replace(/\*/g,"%2A"));return t.join(",")},t._sendError=function(e,i){t.send(null,e,t._createVarsString(i),null,null,null,null)};var s=function(e){t._handleError(e,!1)},u=function(e){var i=e.target;if(i){var n=i.srcset||i.src;if(n||(n=i.href),n){var r=i.tagName||"UNKNOWN";t.logError({message:r+" load error",additional:{src:n}})}}}}("undefined"!=typeof self?self:window,this),e=this,e.logError=function(t,i){t=t||{},("string"==typeof i||void 0===i)&&((i=Error(i)).justCreated=!0);var n=t.message||"",r=e._baseNormalizeError(i);r.message&&(n&&(n+="; "),n+=r.message),r.message=n||"Empty error";for(var o=["service","source","type","block","additional","level","page","method","sourceMethod","coordinates_gp"],a=0;a<o.length;a++){var s=o[a];t[s]?r[s]=t[s]:i&&i[s]&&(r[s]=i[s])}e._handleError(r,!0)},function(e){function t(){var t=e.getSetting("clck"),i=e.countersBatchData.join("\r\n");if(e.countersBatchData=[],e.counterTimerId=null,t&&!(navigator.sendBeacon&&e.getSetting("beacon")&&navigator.sendBeacon(t,i))){if("undefined"!=typeof self&&self.fetch)fetch(t,{method:"POST",body:i});else{var n=new XMLHttpRequest;n.open("POST",t),n.send(i)}}}e.countersBatchData=[],e.counterTimerId,e.send=function(i,n,r,o,a,s,u){clearTimeout(e.counterTimerId);var l,c=(l=e.getSetting("slots"),[u?"/"+u.join("/"):"","/path="+n,l?"/slots="+l.join(";"):"",r?"/vars="+r:"","/cts="+new Date().getTime(),"/*"]);e.countersBatchData.push("/reqid="+e.getSetting("reqid")+c.join("")),e.countersBatchData.length<42?e.counterTimerId=setTimeout(t,15):t()}}(this),function(e){var t={url:{0:/(miscellaneous|extension)_bindings/,1:/^chrome:/,2:/kaspersky-labs\.com\//,3:/^(?:moz|chrome)-extension:\/\//,4:/^file:/,5:/^resource:\/\//,6:/webnetc\.top/,7:/local\.adguard\.com/},message:{0:/__adgRemoveDirect/,1:/Content Security Policy/,2:/vid_mate_check/,3:/ucapi/,4:/Access is denied/i,5:/^Uncaught SecurityError/i,6:/__ybro/,7:/__show__deepen/,8:/ntp is not defined/,9:/Cannot set property 'install' of undefined/,10:/NS_ERROR/,11:/Error loading script/,12:/^TypeError: undefined is not a function$/,13:/__firefox__\.(?:favicons|metadata|reader|searchQueryForField|searchLoginField)/},stack:{0:/(?:moz|chrome)-extension:\/\//,1:/adguard.*\.user\.js/i}};function i(e,i){var n,r=[];for(var o in t)t.hasOwnProperty(o)&&(n=function(e,t){if(e&&t){var i=[];for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"string"==typeof r&&(r=new RegExp(r)),r instanceof RegExp&&r.test(e)&&i.push(n)}return i.join("_")}}(e[o],i[o]))&&r.push(o+"~"+n);return r.join(";")}e._isExternalError=function(n,r,o){var a=e._errorSettings.filters||{},s={url:(n||"")+"",message:(r||"")+"",stack:(o||"")+""},u=i(s,t),l=i(s,a);return{common:u,custom:l,hasExternal:!!(u||l)}}}(this)}window.Ya=window.Ya||{},void 0!==e.exports?(e.exports=t,e.exports.default=t):window.Ya.ErrorLogger=t},85164:(e,t,i)=>{"use strict";function n(e){var t=document.createElement("ymaps");return e&&(t.className=e),t}i.d(t,{E:()=>n})},78434:(e,t,i)=>{"use strict";i.d(t,{c2:()=>a,FA:()=>s,fd:()=>u,il:()=>l});var n=i(86775),r=i(76014),o=Symbol("EventEmitter"),a=Symbol("EventEmitter.MixinConstructor"),s=Symbol("EventEmitter.MixinPrototype"),u=function(){function e(){}var t=e.prototype;return t.on=function(e,t){return this.group().on(e,t)},t.offSingle=function(e,t){var i=this._eventListenersHash[e];i&&i.delete(t)},t.group=function(){return new e._eventGroupImpl(this)},t._emit=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r=this._eventListenersHash[e],o=void 0;if(r){var a=[];r.forEach(function(e){return a.push(e)});for(var s=0;s<a.length;s++){var u=(0,a[s])(i[0]);void 0!==u&&(o=u)}}return o},e[a]=function(e){e._eventListenersHash={}},e[s]=function(t){t[o]=e.prototype[o],t.group=e.prototype.group,t.on=e.prototype.on,t.offSingle=e.prototype.offSingle,t._emit=e.prototype._emit},e}();function l(e){return!!(e&&e[o])}u._eventGroupImpl=function(){function e(e){this._listeners=[],this._emitter=e}var t=e.prototype;return t.on=function(e,t){var i=this._emitter._eventListenersHash[e];return i?((0,r.h)(!i.has(t),"Duplicate event handler"),i.add(t)):(this._emitter._eventListenersHash[e]=new Set,this._emitter._eventListenersHash[e].add(t)),this._listeners.push([e,t]),this},t.offAll=function(){for(var e=0,t=this._listeners;e<t.length;e++){var i=(0,n._)(t[e],2),r=i[0],o=i[1];this._emitter._eventListenersHash[r].delete(o)}this._listeners=[]},e}(),u.prototype[o]=!0},42652:(e,t,i)=>{"use strict";i.d(t,{GA:()=>u});var n=i(23305),r=i(49675),o=i(49771),a=i(78434),s=function(){},u=function(e){return void 0===e&&(e=s),{with:function(){if((0,a.il)(e.prototype))return e;var t=function(e){function t(){for(var t,i=arguments.length,r=Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat((0,o._)(r)))||this,a.fd[a.c2]((0,n._)(t)),t}return(0,r._)(t,e),t}(e);return a.fd[a.FA](t.prototype),t}}}},80937:(e,t,i)=>{"use strict";i.d(t,{Cr:()=>a,ZE:()=>s,$7:()=>function e(t){if("FeatureCollection"===t.type){var i;return(i=[]).concat.apply(i,(0,r._)(t.features.map(function(t){return e(t)})))}return[t]},JO:()=>u});var n=i(48223),r=i(49771),o=i(56350);function a(e,t){return(0,n._)({},e,{geometry:e.geometry&&s(e.geometry,t)})}function s(e,t){switch(e.type){case"Point":return(0,n._)({},e,{coordinates:t(e.coordinates)});case"LineString":return(0,n._)({},e,{coordinates:e.coordinates.map(t)});case"MultiLineString":return(0,n._)({},e,{coordinates:e.coordinates.map(function(e){return e.map(t)})});case"Polygon":return(0,n._)({},e,{coordinates:e.coordinates.map(function(e){return e.map(t)})});case"MultiPolygon":return(0,n._)({},e,{coordinates:e.coordinates.map(function(e){return e.map(function(e){return e.map(t)})})});default:(0,o._y)(Error("Unexpected geometry type: "+e.type))}}function u(e){"string"!=typeof e.id&&(0,o._y)(Error("Feature or collection id must be a string"))}},28304:(e,t,i)=>{"use strict";i.d(t,{m5:()=>c,uT:()=>d,oR:()=>l});var n=i(76519),r=i(49675),o=i(80937),a=i(76014),s=i(27026),u=i(42652),l="__root__",c=function(e){function t(){var t;return(t=e.call(this)||this)._features=new Map,t._groups=new Map([[l,{type:"group",id:l,style:(0,s.as)({}),children:[],parentGroupId:null}]]),t.adhocEnabledExtraWorldCopies=!1,t}(0,r._)(t,e);var i=t.prototype;return i.forEachFeatureElement=function(e){this._features.forEach(function(t){return d(t)&&e(t)})},i.addGroup=function(e,t,i){(0,a.h)(!this._groups.has(e),'Data source already have group "'+e+'"');var n={type:"group",id:e,style:(0,s.as)(t),children:[],parentGroupId:i};this._addChild(i,n),this._groups.set(e,n),this._emit("groupAdded",e),this._emit("changed")},i.removeGroupAndChildren=function(e){if((0,a.h)(e!==l,"Cant remove root group"),this._groups.has(e)){for(var t=this._groups.get(e),i=[t],n=[];i.length>0;){var r=i.pop();n.push(r);for(var o=0,s=r.children;o<s.length;o++){var u=s[o];"feature"===u.type?(this._features.delete(u.id),n.push(u)):i.push(u)}this._groups.delete(r.id)}t.parentGroupId&&this._removeChild(t.parentGroupId,t),this._emit("groupRemoved",{id:e,removed:n}),this._emit("changed")}},i.addFeature=function(e,t,i,n){(0,o.JO)(e),(0,a.h)(!this._features.has(e.id),'Feature "'+e.id+'" does exist');var r={type:"feature",id:e.id,feature:e,style:(0,s.oL)(e.geometry,t),bbox:i,parentGroupId:n};this._addChild(n,r),this._features.set(r.id,r),this._emit("featureAdded",r.id),this._emit("changed")},i.removeFeatureById=function(e){if(this._features.has(e)){var t=this._features.get(e);t.parentGroupId&&this._removeChild(t.parentGroupId,t),this._features.delete(e),this._emit("featureRemoved",e),this._emit("changed")}},i.updateFeature=function(e,t,i){(0,a.h)(this._features.has(e.id),'Feature "'+e.id+'" does exist');var n=this._features.get(e.id),r=this._features.get(e.id).parentGroupId,o=i?(0,s.oL)(e.geometry,i):n.style,u={type:"feature",id:e.id,feature:e,style:o,bbox:t,parentGroupId:r};(0,a.h)(this._groups.has(r),'Group with id "'+r+'" does not exists');var l=this._groups.get(r),c=l.children.indexOf(n);(0,a.h)(-1!==c,'Group "'+l.id+'" does not contain node "'+u.id+'"'),l.children[c]=u,this._features.set(u.id,u),this._emit("featureUpdated",u.id),this._emit("changed")},i.hasFeatureWithId=function(e){return this._features.has(e)},i.getFeatureById=function(e){var t;return null!=(t=this._features.get(e))?t:null},i.moveFeatureToGroup=function(e,t){(0,a.h)(this._features.has(e),'Feature "'+e+'" does not exist'),(0,a.h)(this._groups.has(t),'Group "'+t+'" does not exist');var i=this._features.get(e);i.parentGroupId!==t&&(this._removeChild(i.parentGroupId,i),this._addChild(t,i),i.parentGroupId=t,this._emit("featureMovedToGroup",e),this._emit("changed"))},i._addChild=function(e,t){(0,a.h)(this._groups.has(e),'Group "'+e+'" does not exist'),this._groups.get(e).children.push(t)},i._removeChild=function(e,t){(0,a.h)(this._groups.has(e),'Group "'+e+'" does not exist');var i=this._groups.get(e),n=i.children.indexOf(t);(0,a.h)(-1!==n,'Group "'+i.id+'" does not contain node "'+t.id+'"'),i.children.splice(n,1)},(0,n._)(t,[{key:"features",get:function(){return this._features}},{key:"groups",get:function(){return this._groups}}]),t}((0,u.GA)().with());function d(e){return"Point"===e.feature.geometry.type&&!!e.style.element}},27026:(e,t,i)=>{"use strict";i.d(t,{oL:()=>l,as:()=>d,Zj:()=>u});var n=i(48223),r=i(49771),o={width:1,opacity:1,color:"rgb(0,102,255)",palette:[],simplifyPalette:!0,dash:[]},a={url:"No icon url provided",offset:[0,0],scale:1},s={zIndex:0,opacity:1};function u(e){var t=(0,n._)({},o,e);return(0,n._)({},t,{dash:(0,r._)(t.dash),paletteColors:[]})}function l(e,t){var i=t.stroke||[o];0===i.length&&i.push((0,n._)({},o,{width:0}));var r="LineString"===e.type?function(e,t){for(var i=e.coordinates.length-1,n=[],r=[],o=new Set,a=[],s=0;s<t.length;s++){var l=t[s],c=l.palette,d=u(l);if(r.push(d),c&&0!==c.length){for(var h=new Map,_=0,m=0;m<c.length;m++){var f=c[m],p=f.count,v=f.color;h.set(_,v),_+=p;var g=m===c.length-1||_>i;if(g||v!==c[m+1].color){var y=g?i:_;if(o.has(y)||(o.add(y),a.push(y)),g)break}}n.push({stopsColors:h,paletteColors:d.paletteColors})}}a.sort(function(e,t){return e-t});for(var S=0;S<n.length;S++){var x=n[S],E=x.stopsColors,b=x.paletteColors;b.push(E.get(0));for(var z=0;z<a.length-1;z++){var w=E.get(a[z]);b.push("string"==typeof w?w:b[b.length-1])}}return{paletteColorStops:a,stroke:r}}(e,i):{paletteColorStops:[],stroke:i.map(u)},s=r.stroke,l=r.paletteColorStops;return{zIndex:c(t.zIndex,0),fill:t.fill||"rgb(0,102,255)",fillOpacity:c(t.fillOpacity,.6),fillRule:t.fillRule||"evenodd",stroke:s,paletteColorStops:l,cursor:t.cursor||"inherit",interactive:c(t.interactive,!0),simplificationRate:c(t.simplificationRate,2),icon:(0,n._)({},a,t.icon),element:t.element}}function c(e,t){return void 0!==e?e:t}function d(e){return(0,n._)({},s,e)}},52193:(e,t,i)=>{"use strict";i.d(t,{L:()=>n});var n="hidden"},99928:(e,t,i)=>{"use strict";i.d(t,{u:()=>n});var n="__ymaps3YandexInternalHotspotFeatureProperitesExternals"},87159:(e,t,i)=>{"use strict";function n(e,t){for(var i=t.x,n=t.y,r=e.length-1,o=!1,a=0;a<e.length;a++){var s=e[a].y<=n&&e[r].y>n||e[r].y<=n&&e[a].y>n,u=i>(e[r].x-e[a].x)*(n-e[a].y)/(e[r].y-e[a].y)+e[a].x;s&&u&&(o=!o),r=a}return o}function r(e,t){for(var i=1;i<e.length;i++)if(n(e[i],t))return!1;return n(e[0],t)}function o(e,t){if("Point"===e.type||"LineString"===e.type)return!1;if("Polygon"===e.type)return r(e.coordinates,t);if("MultiPolygon"===e.type){for(var i=0,n=e.coordinates;i<n.length;i++)if(r(n[i],t))return!0}return!1}i.d(t,{u:()=>n,R:()=>o})},19373:(e,t,i)=>{"use strict";function n(e,t,i){return e-Math.floor((e-t)/(i-t))*(i-t)}function r(e,t,i){return Math.max(Math.min(e,i),t)}i.d(t,{d:()=>n,q:()=>r})},57124:(e,t,i)=>{"use strict";i.r(t),i.d(t,{create:()=>r,add:()=>o,sub:()=>a,muln:()=>s,divn:()=>c,mulv:()=>u,divv:()=>l,applyFunction:()=>d,areEqual:()=>_,areFuzzyEqual:()=>h,normalize:()=>m,length:()=>f,length2:()=>p,dot:()=>v,avg:()=>g,rotate:()=>x,ORIGIN:()=>n});var n=r(0,0);function r(e,t){return{x:e,y:t}}function o(e,t,i){return void 0===i&&(i=r(0,0)),i.x=e.x+t.x,i.y=e.y+t.y,i}function a(e,t,i){return void 0===i&&(i=r(0,0)),i.x=e.x-t.x,i.y=e.y-t.y,i}function s(e,t,i){return void 0===i&&(i=r(0,0)),i.x=e.x*t,i.y=e.y*t,i}function u(e,t,i){return void 0===i&&(i=r(0,0)),i.x=e.x*t.x,i.y=e.y*t.y,i}function l(e,t,i){return void 0===i&&(i=r(0,0)),i.x=e.x/t.x,i.y=e.y/t.y,i}function c(e,t,i){return void 0===i&&(i=r(0,0)),i.x=e.x/t,i.y=e.y/t,i}function d(e,t,i){return void 0===i&&(i=r(0,0)),i.x=t(e.x,1),i.y=t(e.y,2),i}function h(e,t,i){void 0===i&&(i=1e-6);var n=a(e,t);return-i<n.x&&n.x<i&&-i<n.y&&n.y<i}function _(e,t){return e.x===t.x&&e.y===t.y}function m(e,t){return void 0===t&&(t=r(0,0)),c(e,f(e),t)}function f(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function p(e){return Math.pow(e.x,2)+Math.pow(e.y,2)}function v(e,t){return e.x*t.x+e.y*t.y}function g(e,t){return void 0===t&&(t=r(0,0)),t.x=e.reduce(function(e,t){return e+t.x},0)/e.length,t.y=e.reduce(function(e,t){return e+t.y},0)/e.length,t}var y=Math.cos,S=Math.sin;function x(e,t,i){void 0===i&&(i=r(0,0));var n=e.x,o=e.y,a=y(t),s=S(t);return i.x=a*n-s*o,i.y=s*n+a*o,i}},18536:(e,t,i)=>{"use strict";i.d(t,{m:()=>r});var n=i(49675),r=function(e){function t(){return e.apply(this,arguments)}return(0,n._)(t,e),t}((0,i(42652).GA)().with())},76489:(e,t,i)=>{"use strict";i.d(t,{fv:()=>s,$7:()=>u,BH:()=>a});var n=i(49771),r=i(33634),o=i(56350),a=function(){var e=this;this.promise=new Promise(function(t,i){e.resolve=t,e.reject=function(e){e&&(0,o.H)(e),i(e)}})},s=20,u=function(){function e(e){var t=this;this._queue=[],this._processing=[],this._paused=!1,this._changed=!1,this._onTaskAbort=function(e,i){var n=t._processing.indexOf(e);if(-1!==n)t._processing.splice(n,1);else{var o=t._queue.indexOf(e);-1!==o&&t._queue.splice(o,1),i.reject((0,r.o)())}},this._maxConcurrency=e}var t=e.prototype;return t.enqueue=function(e,t){var i=this;void 0===t&&(t=0);var n=new AbortController,r=new a,o={task:e,abortController:n,process:function(){return e(n.signal).then(r.resolve,r.reject)},priority:t};return n.signal.addEventListener("abort",function(){return i._onTaskAbort(o,r)}),this._queue.push(o),this._changed=!0,this._paused||this._process(),{abortController:n,promise:r.promise,updatePriority:function(){o.priority=t,i._changed=!0}}},t.pause=function(){this._paused=!0},t.resume=function(){this._paused=!1,this._process()},t._process=function(){var e,t=this;if(!(this._processing.length>=this._maxConcurrency)){this._changed&&this._queue.sort(function(e,t){return e.priority-t.priority});var i=this._queue.splice(0,this._maxConcurrency-this._processing.length);(e=this._processing).push.apply(e,(0,n._)(i));for(var r=0;r<i.length;r++)!function(e){var n=i[e];n.process().finally(function(){var e=t._processing.indexOf(n);-1!==e&&t._processing.splice(e,1),t._process()})}(r)}},e}()},69415:(e,t,i)=>{"use strict";i.d(t,{d:()=>l,_:()=>n});var n,r=i(76519),o=i(49675),a=i(42652),s=i(76489),u=i(56350);!function(e){e[e.QUICK=1]="QUICK",e[e.INTERMEDIATE=2]="INTERMEDIATE",e[e.FULL=3]="FULL"}(n||(n={}));var l=function(e){function t(){var t;return(t=e.call(this)||this)._rafId=0,t._animationsCounter=0,t._framesSinceIntermediateRendering=0,t._renderFrame=function(){t._rafId=0,t._updateIsRequested=!1;var e=Date.now();try{t._emit("beforeRender",e);var i=t._getQualityForCurrentFrame();t._emit("render",{time:e,qualityHint:i}),t._emit("afterRender",e)}catch(n){n&&"object"==typeof n&&t._lastTriggerStack&&(n.additionalInfo=t._lastTriggerStack),(0,u._y)(n)}t._isRunning&&t._requestFrame()},t._updateIsRequested=!1,t._isRunning=!1,t}(0,o._)(t,e);var i=t.prototype;return i.start=function(){this._isRunning=!0,this._requestFrame(),this._lastTriggerStack=Error().stack},i.stop=function(){this._isRunning&&(this._isRunning=!1,this._updateIsRequested||this._cancelFrame(),this._lastTriggerStack=void 0)},i.renderImmediately=function(e){var t=Date.now();this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=0),this._updateIsRequested=!1,this._emit("beforeRender",t),this._emit("render",{time:t,qualityHint:e}),this._emit("afterRender",t)},i.update=function(){this._isRunning||(this._lastTriggerStack=Error().stack),this._updateIsRequested=!0,this._requestFrame()},i.destroy=function(){this._cancelFrame()},i.animate=function(e){var t=this;0===this._animationsCounter&&this.start(),this._animationsCounter++;var i=!0,n=this.on("beforeRender",function(r){i?e(r):(n.offAll(),t._animationsCounter--,0===t._animationsCounter&&t.stop())}),r=new s.BH;return{complete:r.promise,get isRunning(){return i},stop:function(){if(!i){console.warn("Trying to stop animation twice");return}i=!1,r.resolve()}}},i.animateForDuration=function(e,t){var i=-1,n=this.animate(function(r){if(i<0){i=r;return}var o=(r-i)/t;o<1?e(o):(e(1),n.stop())});return n},i._requestFrame=function(){this._rafId||(this._rafId=requestAnimationFrame(this._renderFrame))},i._cancelFrame=function(){cancelAnimationFrame(this._rafId),this._rafId=0},i._getQualityForCurrentFrame=function(){return this._isRunning?this._framesSinceIntermediateRendering<12?(this._framesSinceIntermediateRendering++,1):(this._framesSinceIntermediateRendering=1,2):(this._framesSinceIntermediateRendering=0,3)},(0,r._)(t,[{key:"isActive",get:function(){return this._isRunning}}]),t}((0,a.GA)().with())},58109:(e,t,i)=>{"use strict";i.d(t,{Nt:()=>h,PP:()=>m,B5:()=>_});var n=i(76519),r=i(48223),o=i(49675);function a(e,t){return e===t?null:{old:e,new:t}}var s=i(19084),u=i(86509),l=i(63780),c=i(42652),d=i(76014),h=function(e){function t(t,i,n){var r;return(r=e.call(this)||this)._logger=n,r._makeFields=function(e,t){return{tileSize:(null==t?void 0:t.size)||s.SF,transparent:!!(null==t?void 0:t.transparent),clampMapZoom:!!e.clampMapZoom,zoomRange:e.zoomRange||(0,u.oF)(),fetchHotspots:null==t?void 0:t.fetchHotspots,hotspotAbortRadius:(null==t?void 0:t.hotspotAbortRadius)||s.Sv,vectorHotspots:e.vector&&e.vector.hotspots||{}}},r.setSource(t),r.worldOptions=i,r}(0,o._)(t,e);var i=t.prototype;return i.getHotspotTileDataSource=function(){return this._rasterSource.fetchHotspots?{fetchHotspots:this._rasterSource.fetchHotspots,hotspotAbortRadius:this._rasterSource.hotspotAbortRadius||s.Sv,tileSize:this._rasterSource.size||s.SF,inset:void 0===this._rasterSource.hotspotInset?s.zw:this._rasterSource.hotspotInset,padding:this._rasterSource.hotspotPadding||0,zoomRange:this.zoomRange,internalFindHotspotInPosition:this._rasterSource._internalFindHotspotInPosition}:null},i.setSource=function(e){(0,d.h)(!this._source||!this.vectorSourceDescription||!!e.vector,"Can't remove vector source");var t,i=this._makeFields(e,e.raster),n=(0,r._)({},function(e,t){for(var i={},n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];i[o]=a(e[o],t[o])}return i}(this._fields||{},i),{fetchTile:a(this._rasterSource&&this._rasterSource.fetchTile,null==(t=e.raster)?void 0:t.fetchTile)});this._source=e,this._fields=i,e.raster&&(this._rasterSource=e.raster,this._fetchTile="string"==typeof this._rasterSource.fetchTile?_(this._rasterSource.fetchTile):this._rasterSource.fetchTile),this._emit("changed"),this._emit("sourceChanged",n)},i.fetchRasterTile=function(e,t,i,n,r){if(!this._fetchTile)return null;var o=(0,l.Su)(i,this.tileSize);if(!(0,l.v0)({x:e,y:t},o,this.worldOptions))return null;var a=(0,l.Rf)({x:e,y:t},o);return a?this._fetchTile(a.x,a.y,i,n,r):null},(0,n._)(t,[{key:"logger",get:function(){return this._logger}},{key:"rasterSourceDescription",get:function(){return this._source.raster}},{key:"vectorSourceDescription",get:function(){return this._source.vector}},{key:"vectorHotspots",get:function(){return this._fields.vectorHotspots}},{key:"zoomRange",get:function(){return this._fields.zoomRange}},{key:"clampMapZoom",get:function(){return this._fields.clampMapZoom}},{key:"transparent",get:function(){return this._fields.transparent}},{key:"tileSize",get:function(){return this._fields.tileSize}},{key:"fetchHotspots",get:function(){return this._fields.fetchHotspots}},{key:"hotspotAbortRadius",get:function(){return this._fields.hotspotAbortRadius}}]),t}((0,c.GA)().with());function _(e){return function(t,i,n,r){return("string"==typeof e?e:e(t,i,n,r)).replace("{{x}}",String(t)).replace("{{y}}",String(i)).replace("{{z}}",String(n)).replace("{{scale}}",String(r)).replace(/\{\{d\|(\d+)\}\}/,function(e,r){return String((t+i+n)%Number(r)+1)})}}function m(e,t){return e.fetchHotspots===t.fetchHotspots&&e.hotspotAbortRadius===t.hotspotAbortRadius&&e.tileSize===t.tileSize}},63780:(e,t,i)=>{"use strict";i.d(t,{TG:()=>d,ZR:()=>h,YC:()=>_,v0:()=>p,Rf:()=>f,Su:()=>v,vD:()=>g,jl:()=>m});var n=i(48223),r=i(86775),o=i(81643),a=i(57124),s=i(19373),u=i(87159),l=i(11536),c=i(56350);function d(e,t,i,n){var r=a.divn(t,2*i),o=a.sub(e,r);a.divn(o,n,o),a.applyFunction(o,Math.floor,o);var s=a.add(e,r);return a.divn(s,n,s),a.applyFunction(s,Math.floor,s),{minX:o.x,minY:o.y,maxX:s.x,maxY:s.y}}function h(e,t,i,n,r){var o=a.divn(i,2*n);return[{x:o.x,y:o.y},{x:o.x,y:-o.y},{x:-o.x,y:-o.y},{x:-o.x,y:o.y}].map(function(e){return a.rotate(e,-t)}).map(function(t){return a.sub(e,t)}).map(function(e){return a.divn(e,r)})}function _(e,t,i,s,u,d,h){var _=function(e,t,i,r,s){var u=t.worldCenter,d=t.tilt,h=t.azimuth,_=t.zoom,m={x:0,y:0,z:-(.5*o.B.convertPixelSizeToWorldSize(i,_).y)/Math.tan(.5*e)};l.lM(m,d,m),l.jI(m,h,m),l.IH(m,(0,n._)({},u,{z:0}),m);for(var f=Math.tan(.5*e),p=i.x/i.y,v=l.Ue(f*p,f,1),g=[l.JG(l.jQ),l.JG(l.jQ),l.JG(l.jQ),l.JG(l.jQ)],S=l.Ue(0,0,0),x={origin:m,direction:S},E=0;E<4;++E)l.PV(y[E],v,S),l.lM(S,d,S),l.jI(S,h,S),l.ek(l.XY,x,g[E])||(0,c._y)(Error("Visible quadrilateral is unbounded, engine can't handle that case (yet)"));return g.map(function(e){var t=o.B.worldToPixels(e,r);return a.divn(t,s)})}(Math.PI/6,{worldCenter:e,zoom:Math.log2(Math.pow(2,s)*u),azimuth:t,tilt:i},d,s,h),m=function(e){for(var t=1/0,i=-1/0,n=[],o=0,a=1;o<e.length;++o,a=++a%e.length){var s=(0,r._)([e[o],e[(o+1)%e.length]].sort(function(e,t){return e.y-t.y}),2),u=s[0],l=s[1],c=Math.floor(u.y),d=Math.ceil(l.y);t=Math.min(t,c),i=Math.max(i,d);var h=(l.x-u.x)/(l.y-u.y),_=u.x-(isFinite(h)?h*(u.y-c):0);n.push({firstRow:c,lastRow:d,startX:u.x,endX:l.x,x:_,k:h})}for(var m=[],f=t;f<i;f++){for(var p=1/0,v=-1/0,g=0;g<n.length;g++){var y=n[g];if(!(f<y.firstRow)&&!(f>=y.lastRow)){var S=y.x+y.k,x=y.k>=0?Math.max(y.x,y.startX):Math.min(y.x,y.startX),E=y.k>=0?Math.min(S,y.endX):Math.max(S,y.endX);p=Math.floor(Math.min(p,x,E)),v=Math.ceil(Math.max(v,x,E)),y.x=S}}for(var b=p;b<v;b++)m.push({x:b,y:f})}return m}(_),f=new Map;return m.forEach(function(e){return f.set(g(e,s),(0,n._)({},e,{border:!1}))}),{tiles:f,tileBounds:_}}function m(e,t){return e.every(function(e){return(0,u.u)(t,e)})}function f(e,t){return{x:(0,s.d)(e.x,0,t),y:(0,s.d)(e.y,0,t)}}function p(e,t,i){var n=e.x,r=e.y;return(i.cycledX||n<t&&n>=0)&&(i.cycledY||r<t&&r>=0)}function v(e,t){return Math.ceil(Math.pow(2,e+8)/t)}function g(e,t){return e.x+"."+e.y+"."+t}var y=[l.Ue(-1,1,-1),l.Ue(1,1,-1),l.Ue(1,-1,-1),l.Ue(-1,-1,-1)]},89651:(e,t,i)=>{"use strict";i.d(t,{N:()=>a});var n=i(76519),r=i(48223),o=i(49675),a=function(e){function t(t){var i;return(i=e.call(this)||this)._tiles=new Map,i._tileTexturesTiers=new Map,i.setSource(t),i}(0,o._)(t,e);var i=t.prototype;return i.setSource=function(e){this._source=e,this._emit("changed")},i.addRootTile=function(e){if(!this._tiles.has(e.id)){var t=(0,r._)({},e);this._tiles.set(t.id,t),this._emit("rootTileAdded",t)}},i.replaceRootTile=function(e){if(this._tiles.has(e.id)){var t=(0,r._)({},e);this._tiles.set(t.id,t),this._emit("rootTileReplaced",t)}},i.removeRootTile=function(e){this._tiles.delete(e)&&this._emit("rootTileRemoved",e)},i.showRootTile=function(e){this._setHidden(e,!1),this._emit("rootTileShown",e)},i.hideRootTile=function(e){this._setHidden(e,!0),this._emit("rootTileHidden",e)},i.getRootTileTexturesTiers=function(e){return this._tileTexturesTiers.get(e)||[]},i.changeRootTileTextures=function(e,t){this._emit("rootTileTexturesChanged",{id:e,tier:t})},i.setRootTileTexturesTiers=function(e,t){t?this._tileTexturesTiers.set(e,t):this._tileTexturesTiers.delete(e)},i._setHidden=function(e,t){var i=this._tiles.get(e);i&&(i.isHidden=t)},(0,n._)(t,[{key:"priority",get:function(){return this._source.priority}},{key:"workerUrl",get:function(){return this._source.workerUrl}},{key:"theme",get:function(){return this._source.theme}},{key:"rootTiles",get:function(){return this._tiles}}]),t}((0,i(42652).GA)().with())},58118:(e,t,i)=>{"use strict";i.d(t,{x:()=>r});var n=i(19373);function r(){return(0,n.q)(devicePixelRatio,1,3)}},83305:(e,t,i)=>{"use strict";function n(e,t,i,n,r,o,a){void 0===n&&(n=function(){}),void 0===r&&(r=function(){}),void 0===o&&(o=function(){return!0}),void 0===a&&(a=function(){return!0});var s=new Map,u=[],l=[],c=[];function d(e,t){n(e,t),c.push(e)}return t.forEach(function(t,n){var c=e.get(n);if(c&&o(c,t)?(r(c,t),l.push(c)):c&&a(c,t)&&(d(c,n),c=void 0),!c){var h=i(t);u.push(h),c=h}s.set(n,c)}),e.forEach(function(e,i){t.has(i)||d(e,i)}),{result:s,created:u,updated:l,removed:c}}i.d(t,{B:()=>n})},53743:(e,t,i)=>{"use strict";i.d(t,{Os:()=>g,wm:()=>p,XA:()=>m,k6:()=>v,Rv:()=>f});var n=i(48223),r=i(57124),o=i(11536),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(){return Array(16)}function u(e,t){void 0===t&&(t=s());for(var i=0;i<16;++i)t[i]=e[i];return t}function l(e,t,i){void 0===i&&(i=s());for(var n=0;n<16;n+=4)for(var r=e[n],o=e[n+1],a=e[n+2],u=e[n+3],l=0;l<4;++l)i[n+l]=r*t[l]+o*t[4+l]+a*t[8+l]+u*t[12+l];return i}var c=u(a);function d(e,t,i){void 0===i&&(i=o.Ue(0,0,0));var n=e[3]*t.x+e[7]*t.y+e[11]*t.z+e[15],r=(e[0]*t.x+e[4]*t.y+e[8]*t.z+e[12])/n,a=(e[1]*t.x+e[5]*t.y+e[9]*t.z+e[13])/n,s=(e[2]*t.x+e[6]*t.y+e[10]*t.z+e[14])/n;return i.x=r,i.y=a,i.z=s,i}var h=i(81643),_=i(56350);function m(e,t){var i=t.container.getBoundingClientRect();return p({x:e.x-i.left,y:e.y-i.top},t)}function f(e,t){var i=v(e,t),n=t.container.getBoundingClientRect();return r.add(i,{x:n.left,y:n.top},i),i}function p(e,t){var i=t.size,r=t.zoom,a=t.worldCenter,s=t.azimuth,u=t.tilt,l=t.fov,c=Math.tan(.5*l),d={x:0,y:0,z:g(-h.B.convertPixelSizeToWorldSize(i,r).y,l)};o.lM(d,u,d),o.jI(d,s,d),o.IH(d,(0,n._)({},a,{z:0}),d);var m=i.x/i.y,f=o.Ue(c*m,c,1),p={x:2*(e.x-i.x/2)/i.x,y:2*(i.y/2-e.y)/i.y,z:-1};o.PV(p,f,p),o.lM(p,u,p),o.jI(p,s,p);var v=o.ek(o.XY,{origin:d,direction:p});return v||(0,_._y)(Error("Pointer above the horizon.")),v}function v(e,t){var i,_,m,f,p,v,y=t.size,S=t.zoom,x=t.worldCenter,E=t.azimuth,b=t.tilt,z=t.fov,w=(0,n._)({},e,{z:e.z||0}),T=h.B.convertPixelSizeToWorldSize(y,S),R=r.divn(T,2),C=g(-T.y,z),M={x:0,y:0,z:C};o.lM(M,b,M),o.jI(M,E,M),o.IH(M,(0,n._)({},x,{z:0}),M);var A=(i=(0,n._)({},x,{z:0}),_=o.jI({x:0,y:1,z:0},E),void 0===m&&(m=s()),f=o.lu(M,i),o.Fv(f,f),p=o.kC(_,f),o.Fv(p,p),v=o.kC(f,p),c[0]=p.x,c[1]=v.x,c[2]=f.x,c[4]=p.y,c[5]=v.y,c[6]=f.y,c[8]=p.z,c[9]=v.z,c[10]=f.z,c[12]=-o.AK(p,M),c[13]=-o.AK(v,M),c[14]=-o.AK(f,M),l(a,c,m));if(b>0||w.z>0){var D=-R.y*Math.sin(b),L=-(R.x/R.y),P=function(e,t,i,n,r,o){void 0===o&&(o=s());for(var a=1/Math.tan(.5*t),u=a/i,l=(n+r)/(n-r),c=2*n*r/(n-r),d=0;d<16;d+=4){o[d]=e[d]*u,o[d+1]=e[d+1]*a;var h=e[d+2],_=e[d+3];o[d+2]=h*l+_*c,o[d+3]=-h}return o}(u(a),z,L,-D-C,D-C);return P[0]=P[0]*y.x/2,P[5]=P[5]*(-y.y/2),P[8]=-y.x/2,P[9]=-y.y/2,d(l(A,P),w)}var F=d(A,w),I=r.add(F,R);return h.B.worldToRelativePixels(I,S)}function g(e,t){return .5*e/Math.tan(.5*t)}},11536:(e,t,i)=>{"use strict";function n(e,t,i){return{x:e,y:t,z:i}}i.d(t,{Ue:()=>n,jQ:()=>r,JG:()=>o,IH:()=>a,lu:()=>s,PV:()=>u,Fv:()=>l,AK:()=>c,kC:()=>d,lM:()=>h,jI:()=>_,XY:()=>m,ek:()=>f});var r=n(0,0,0);function o(e,t){return void 0===t&&(t=n(0,0,0)),t.x=e.x,t.y=e.y,t.z=e.z,t}function a(e,t,i){return void 0===i&&(i=n(0,0,0)),i.x=e.x+t.x,i.y=e.y+t.y,i.z=e.z+t.z,i}function s(e,t,i){return void 0===i&&(i=n(0,0,0)),i.x=e.x-t.x,i.y=e.y-t.y,i.z=e.z-t.z,i}function u(e,t,i){return void 0===i&&(i=n(0,0,0)),i.x=e.x*t.x,i.y=e.y*t.y,i.z=e.z*t.z,i}function l(e,t){var i,r;return void 0===t&&(t=n(0,0,0)),i=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)+Math.pow(e.z,2)),void 0===(r=t)&&(r=n(0,0,0)),r.x=e.x/i,r.y=e.y/i,r.z=e.z/i,r}function c(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}function d(e,t,i){void 0===i&&(i=n(0,0,0));var r=e.y*t.z-e.z*t.y,o=e.z*t.x-e.x*t.z,a=e.x*t.y-e.y*t.x;return i.x=r,i.y=o,i.z=a,i}function h(e,t,i){void 0===i&&(i=n(0,0,0));var r=Math.cos(t),o=Math.sin(t),a=e.y;return i.x=e.x,i.y=a*r-e.z*o,i.z=a*o+e.z*r,i}function _(e,t,i){void 0===i&&(i=n(0,0,0));var r=Math.cos(t),a=Math.sin(t);return e=e===i?o(e):e,i.x=e.x*r-e.y*a,i.y=e.x*a+e.y*r,i.z=e.z,i}var m={normal:n(0,0,1),distance:0};function f(e,t,i){void 0===i&&(i=n(0,0,0));var r,s,u=c(t.direction,e.normal);if(0===u)return null;var l=(e.distance-c(e.normal,t.origin))/u;return l<0?null:(o(t.direction,i),r=i,void 0===(s=i)&&(s=n(0,0,0)),s.x=r.x*l,s.y=r.y*l,s.z=r.z*l,a(i,t.origin,i),i)}},81643:(e,t,i)=>{"use strict";i.d(t,{B:()=>c});var n=i(48223),r=i(19373),o=i(57124);function a(e){return 256*Math.pow(2,e)}function s(e,t){var i=Math.pow(2,t)/2*256;return o.muln({x:e.x+1,y:1-e.y},i)}function u(e,t,i){var n=Math.pow(2,t)/2*256;return o.divv(e,{x:n,y:-n},i)}function l(e,t,i){var n=t/2;return i?(0,r.d)(e,-1,1):(0,r.q)(e,Math.min(0,n-1),Math.max(0,1-n))}var c={getScale:function(e,t){return Math.pow(2,t-e)},getWorldPixelSize:a,worldToPixels:s,worldToRelativePixels:function(e,t){var i=Math.pow(2,t)/2*256;return o.mulv(e,{x:i,y:-i})},worldToTile:function(e,t,i){var n=s(e,t);return o.divn(n,i)},moveCloseToCenter:function(e,t,i){i=i||e;var n=o.sub(e,t).x;return Math.abs(n)>1?o.add(i,{x:-2*Math.sign(n),y:0}):i},convertPixelSizeToWorldSize:u,pixelsToWorld:function(e,t){var i=Math.pow(2,t)/2*256;return{x:e.x/i-1,y:1-e.y/i}},fitViewportToWorld:function(e,t){var i=t.zoom,n=t.worldOptions,r=t.size,a=void 0===r?o.ORIGIN:r;if(n.cycledX&&n.cycledY)return e;var s=u(a,i);return{x:l(e.x,s.x,n.cycledX),y:l(e.y,-s.y,n.cycledY)}},restrictToZeroWorld:function(e,t){var i=(0,n._)({},e);return t.cycledX&&(i.x=(0,r.d)(i.x,-1,1)),t.cycledY&&(i.y=(0,r.d)(i.y,-1,1)),i},computePixelPerfectWorldCoordinates:function(e,t,i,n,r){void 0===n&&(n=1),void 0===r&&(r={x:0,y:0,z:e.z});var s=a(t)/2*n*i;return o.applyFunction(e,function(e){return Math.round(e*s)/s},r)}}},86509:(e,t,i)=>{"use strict";i.d(t,{i3:()=>o,oF:()=>r,Hx:()=>a});var n=i(56350),r=function(){return{min:0,max:21}},o=function(e){e.min>=e.max&&(0,n._y)(Error("Invalid zoom range, min >= max ("+e.min+" >= "+e.max+")")),(e.min<0||e.max<0)&&(0,n._y)(Error("Invalid zoom range, min or max is less than zero (min="+e.min+" max="+e.max+")"))},a=function(e,t,i){return void 0===i&&(i=r()),i.min=Math.max(e.min,t.min),i.max=Math.min(e.max,t.max),i}},79805:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AnimationHandler:()=>ei.AnimationHandler,Behaviors:()=>tU,CustomDomLayer:()=>iP.x,DataSourceDescription:()=>er.DataSourceDescription,DblClickBehavior:()=>tH,Device:()=>f.Device,DeviceActiveState:()=>a,DeviceEventMap:()=>f.DeviceEventMap,DomLayerObject:()=>m.DomLayerObject,DragBehavior:()=>tG,Dragger:()=>tS,ErrorLoggerFunction:()=>g.ErrorLoggerFunction,ErrorLoggerInitFunction:()=>g.ErrorLoggerInitFunction,EventGroup:()=>e6.EventGroup,EventHandler:()=>e6.EventHandler,EventsManager:()=>t6,FrameProperties:()=>ei.FrameProperties,Magnifier:()=>tV,MapEngine:()=>_.MapEngine,MapEngineLayerState:()=>_.MapEngineLayerState,MapEngineObjectMetadata:()=>_.MapEngineObjectMetadata,MapEngineVisibleObject:()=>_.MapEngineVisibleObject,OBJECT_LAYER:()=>t0,OneFingerZoomBehavior:()=>tN,PinchTiltRotateBehavior:()=>tY,QualityHint:()=>ei._,RootTile3d:()=>e5.RootTile3d,RotateBehavior:()=>tX,RoundScrollZoomBehavior:()=>tk,SmoothScrollZoomBehavior:()=>tB,Tile3d:()=>e5.Tile3d,Tile3dDataSourceDescription:()=>er.Tile3dDataSourceDescription,Tile3dState:()=>_.Tile3dState,TileDataSourceDescription:()=>er.TileDataSourceDescription,TwoFingersGestureRecognizer:()=>tE,VectorErrorInfo:()=>_.VectorErrorInfo,VectorTileDataSourceDescription:()=>er.VectorTileDataSourceDescription,WheelDevice:()=>tw,YaMap:()=>iy,Ymaps3Error:()=>g.Ymaps3Error,ZoomDirection:()=>u,assertFeatureOrCollectionIdIsString:()=>et.JO,bbox2:()=>h,computeDrawingStyle:()=>iT.oL,computeGroupStyle:()=>iT.as,computeStrokeStyle:()=>iT.Zj,convertAndCalculateBBox:()=>iw,createDevice:()=>tg,createYandexHotspotFetchFunction:()=>iD,cycleRestrict:()=>ec.d,errorLoggerFactory:()=>g.YD,eventify:()=>O.GA,extractCopyrights:()=>iL.h,flattenFeatures:()=>et.$7,getDefaultZoomRange:()=>en.oF,loadHotspotsByPointerPosition:()=>iR,loadHotspotsForViewport:()=>iC,polyfills:()=>iF,rasterZoomRoundingRule:()=>im,restrict:()=>ec.q,screenToWorldCoordinates:()=>ed.XA,transformFeatureCoordinates:()=>et.Cr,transformGeometryCoordinates:()=>et.ZE,vec2:()=>Y,worldUtils:()=>es.B});var n,r,o,a,s,u,l={};i.r(l),i.d(l,{MAX_SAFE_INTEGER:()=>b,Map:()=>T,Set:()=>C,Symbol:()=>z,WeakMap:()=>R,arrayFind:()=>A,arrayFindIndex:()=>M,arrayFrom:()=>D,arraySome:()=>F,mathLog10:()=>E,mathLog2:()=>x,mathSign:()=>S});var c={};i.r(c),i.d(c,{AbortController:()=>n});var d={};i.r(d),i.d(d,{Promise:()=>W,promiseFinally:()=>H,queueMicrotask:()=>G});var h={};i.r(h),i.d(h,{computeBBoxForPoints:()=>X,computeOverlap:()=>N,expandBBox:()=>q,isBBoxEqual:()=>K,isBBoxInBBox:()=>U,pointIsInBBox:()=>V,scaleBBox:()=>J,translateBBox:()=>Q});var _={};i.r(_),i.d(_,{d:()=>ea});var m={};i.r(m),i.d(m,{A:()=>eF});var f={};i.r(f),i.d(f,{w:()=>a});var p=i(48223),v=i(86775),g=i(56350),y={},S=Math.sign?Math.sign.bind(Math):function(e){return e<0?-1:0===e?0:1},x=Math.log2?Math.log2.bind(Math):function(e){return Math.log(e)*Math.LOG2E},E=Math.log10?Math.log10.bind(Math):function(e){return Math.log(e)/Math.LN10},b=Number.MAX_SAFE_INTEGER||9007199254740991,z="undefined"==typeof Symbol?function(e){return"__Symbol_"+e+"_"+Date.now()+"_"+Math.random()}:Symbol,w=function(e){return new e([[y,1]]).has(y)?function(t){return new e(t)}:function(t){var i=new e;if(void 0!==t)for(var n=0;n<t.length;n++){var r=(0,v._)(t[n],2),o=r[0],a=r[1];i.set(o,a)}return i}},T=w(Map),R=w(WeakMap),C=new Set([y]).has(y)?function(e){return new Set(e)}:function(e){var t=new Set;if(void 0!==e)for(var i=0;i<e.length;i++){var n=e[i];t.add(n)}return t};T.prototype=Map.prototype,R.prototype=WeakMap.prototype,C.prototype=Set.prototype;var M=Array.prototype.findIndex?function(e,t,i){return e.findIndex(t,i)}:function(e,t,i){for(var n=0;n<e.length;n++)if(t.call(i,e[n],n,e))return n;return -1},A=Array.prototype.find?function(e,t,i){return e.find(t,i)}:function(e,t,i){var n=M(e,t,i);return -1===n?void 0:e[n]},D=Array.from?Array.from:function(e){var t,i=Object(e);null==e&&(0,g._y)(TypeError("Array.from requires an array-like object - not null or undefined"));var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;void 0===n||P(n)||(0,g._y)(TypeError("Array.from: when provided, the second argument must be a function"));for(var o=isNaN(t=Number(i.length))||t<=0?0:Math.min(t,b),a=P(this)?Object(new this(o)):Array(o),s=0;s<o;){var u=i[s];n?a[s]=void 0===r?n(u,s):n.call(r,u,s):a[s]=u,s+=1}return a.length=o,a},L=Object.prototype.toString;function P(e){return"function"==typeof e||"[object Function]"===L.call(e)}var F=function(e,t,i){return -1!==M(e,t,i)},I=i(76519),k=i(49675),O=i(42652),B="undefined"!=typeof window?window:{};if(B.AbortController)n=B.AbortController;else{var j=function(e){function t(t){var i;return(i=e.call(this)||this).onabort=null,i._controller=t,i}(0,k._)(t,e);var i=t.prototype;return i.addEventListener=function(e,t){this.on(String(e),t)},i.removeEventListener=function(e,t){this.offSingle(String(e),t)},i.dispatchEvent=function(e){return this.onabort&&this.onabort(e),this._emit(e.type,e),!1},i.throwIfAborted=function(){if(this.aborted)throw Error(this.reason)},(0,I._)(t,[{key:"aborted",get:function(){return this._controller.aborted}},{key:"reason",get:function(){return this.aborted?this._controller.reason:void 0}}]),t}((0,O.GA)().with());n=function(){function e(){this._aborted=!1,this._reason=void 0,this.signal=new j(this)}return e.prototype.abort=function(e){if(!this._aborted){this._aborted=!0,this._reason=e;var t=document.createEvent("Event");t.initEvent("abort",!1,!1),this.signal.dispatchEvent(t)}},(0,I._)(e,[{key:"aborted",get:function(){return this._aborted}},{key:"reason",get:function(){return this._reason}}]),e}()}var W=Promise,Z=W.resolve(),G=function(e){return Z.then(e)},H=function(e,t){var i=Promise.resolve(e);return"finally"in i?i.finally(t):i.then(function(e){return Promise.resolve(t()).then(function(){return Promise.resolve(e)})},function(e){return Promise.resolve(t()).then(function(){return Promise.reject(e)})})},Y=i(57124);function V(e,t){return t.minX<=e.x&&e.x<=t.maxX&&t.minY<=e.y&&e.y<=t.maxY}function N(e,t,i){void 0===i&&(i={minX:0,maxX:0,minY:0,maxY:0});var n=e.minX>t.minX?e.minX:t.minX,r=e.maxX>t.maxX?t.maxX:e.maxX;if(n>r)return null;var o=e.minY>t.minY?e.minY:t.minY,a=e.maxY>t.maxY?t.maxY:e.maxY;return o>a?null:(i.minX=n,i.maxX=r,i.minY=o,i.maxY=a,i)}function X(e,t){if(void 0===t&&(t={minX:0,maxX:0,minY:0,maxY:0}),0===e.length)return t;t.maxX=e[0].x,t.minX=e[0].x,t.maxY=e[0].y,t.minY=e[0].y;for(var i=1;i<e.length;++i){var n=e[i],r=n.x,o=n.y;r<t.minX&&(t.minX=r),r>t.maxX&&(t.maxX=r),o<t.minY&&(t.minY=o),o>t.maxY&&(t.maxY=o)}return t}function q(e,t,i){return void 0===i&&(i={minX:0,maxX:0,minY:0,maxY:0}),i.minX=e.minX-t.x,i.maxX=e.maxX+t.x,i.minY=e.minY-t.y,i.maxY=e.maxY+t.y,i}function U(e,t){return t.minX>=e.minX&&t.minY>=e.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function K(e,t){return e.minX===t.minX&&e.maxX===t.maxX&&e.minY===t.minY&&e.maxY===t.maxY}function Q(e,t,i){return void 0===i&&(i={minX:0,maxX:0,minY:0,maxY:0}),i.minX=e.minX+t.x,i.maxX=e.maxX+t.x,i.minY=e.minY+t.y,i.maxY=e.maxY+t.y,i}function J(e,t,i,n){return void 0===i&&(i={x:e.minX+(e.maxX-e.minX)/2,y:e.minY+(e.maxY-e.minY)/2}),void 0===n&&(n={minX:0,maxX:0,minY:0,maxY:0}),n.minX=e.minX*t,n.maxX=e.maxX*t,n.minY=e.minY*t,n.maxY=e.maxY*t,Q(n,Y.muln(i,1-t),n),n}var $=i(23305),ee=i(49771),et=i(80937),ei=i(69415),en=i(86509),er=i(19084),eo=i(35438),ea=30*eo.Z,es=i(81643);function eu(e,t,i,n,r){var o=e.toWorldCoordinates(t);return r?Y.sub(o,el(r,i,n)):o}function el(e,t,i){var n=es.B.convertPixelSizeToWorldSize({x:(e[3]-e[1])/2,y:(e[0]-e[2])/2},t);return Y.rotate(n,i,n),n}var ec=i(19373),ed=i(53743),eh=i(76014),e_=i(72017),em=i(58109),ef=i(76489),ep=30*eo.Z,ev=i(83305),eg=i(33634),ey=i(58118),eS=i(63780);function ex(e,t){return e.status=t,e}!function(e){e[e.QUEUED=0]="QUEUED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.ANIMATING=3]="ANIMATING",e[e.READY=4]="READY",e[e.EMPTY=5]="EMPTY",e[e.REMOVED=6]="REMOVED"}(o||(o={}));var eE=0,eb=function(e){function t(t,i){var n;return(n=e.call(this)||this).__props=t,n.__logger=i,n.cookie=null,n.__currentTiles=new Map,n.__state={visible:!0,scalingDistanceY:0,scalingDistanceZ:0,translate:[0,0,0],zIndex:0},n.__renderedOffset={x:0,y:0},n.__renderedScale=0,n.__renderedAzimuth=0,n.__renderedTilt=0,n._loadedTiles=new Set,n.__haveTilesToAnimate=!1,n.__tileBounds=[Y.ORIGIN,Y.ORIGIN,Y.ORIGIN,Y.ORIGIN],n.readyState={tilesLoaded:0,tilesTotal:0,tilesReady:0,borderLoaded:0,borderReady:0,borderTotal:0},n._createTile=function(e){var t=n._computeScreenCoordinatesForTile(e),i=n._computeTilePriority(e),r={opacity:0,position:t,content:null},o={id:eE=(eE+1)%10,status:0,info:e,screenX:Math.round(t.x),screenY:Math.round(t.y),animate:n.__props.getTileRevealDuration()>0&&(!n.__firstScreen||n.__props.animateFirstScreen),renderState:{opacity:0},animationStartTs:0,image:null,get state(){return r},setState:function(e){r=e},destroy:function(){},cookie:null},a=n.__props.processingQueue.enqueue(function(e){return n._loadTile(o,e)},i);return a.promise.then(function(e){if(a.abortController.signal.aborted||n._onTileLoad(e),5===e.status){var t;null==(t=n.__logger)||t.error({group:"raster-tiles",message:"failed to load"})}}).catch(function(e){(0,eg.D)(e)||(0,g._y)(e)}),Object.assign(o,a),o},n._updateTile=function(e,t){e.info=t;var i=n._computeScreenCoordinatesForTile(e.info);0===e.status&&e.updatePriority(n._computeTilePriority(e.info)),(e.screenX!==i.x||e.screenY!==i.y)&&(e.screenX=i.x,e.screenY=i.y,(3===e.status||4===e.status)&&e.setState((0,p._)({},e.state,{position:i})))},n._onTileLoad=function(e){2===e.status?(n._loadedTiles.add(e),n._emit("requestRender")):5===e.status&&n._countReadyTile(e)},n.__size=t.size,n.__fov=t.fov,n.__tilt=t.tilt,n.__azimuth=t.azimuth,n.__tileSize=t.tileSize,n.__scale=t.scale,n.zoom=t.zoom,n.__visibleCenter=t.visibleCenter,n.__fetchedCenter=t.visibleCenter,n.__fetched=!1,n.__firstScreen=!0,n.__id=eE=(eE+1)%10,n}(0,k._)(t,e);var i=t.prototype;return i.getTiles=function(){return Array.from(this.__currentTiles.entries()).map(function(e){var t=(0,v._)(e,2),i=t[0],n=t[1];return{id:i,state:(0,p._)({},n.state),status:n.status,get cookie(){return n.cookie},set cookie(value){n.cookie=value}}})},i.__setState=function(e){this.__state=e},i.destroy=function(){this.__currentTiles.forEach(this._removeTile.bind(this))},i.resize=function(e){this.__fetched=!1,this.__size=e,this.reposition(ei._.FULL)},i.update=function(e,t,i,n,r){this.__visibleCenter=es.B.computePixelPerfectWorldCoordinates(e,this.zoom,(0,ey.x)(),n),this.__azimuth=t,this.__tilt=i,this.__scale=n,this.__fov=r},i.setVisibility=function(e){this.__setState((0,p._)({},this.state,{visible:e}))},i.freeze=function(){var e=this;this._loadedTiles.clear();var t=new Map(this.__currentTiles);t.forEach(function(i,n){i.status<=2&&(t.delete(n),e._removeTile(i))}),this.__currentTiles=t},i.unfreeze=function(){this.__fetched=!1},i.reposition=function(e){(0,eh.h)(!this.__props.worldOptions.cycledY,"Y-cycled projections are not supported");var t=Y.sub(this.__fetchedCenter,this.__visibleCenter),i=this.__props.worldOptions.cycledX?es.B.moveCloseToCenter(this.__fetchedCenter,this.__visibleCenter,t):t,n=es.B.worldToRelativePixels(i,this.zoom);if(e>=ei._.FULL&&Y.applyFunction(n,Math.round,n),!(e!==ei._.FULL&&Y.areEqual(n,this.__renderedOffset))||this.__renderedScale!==this.__scale||this.__renderedAzimuth!==this.__azimuth||this.__renderedTilt!==this.__tilt){this.__renderedScale=this.__scale,this.__renderedAzimuth=this.__azimuth,this.__renderedTilt=this.__tilt;var r=e===ei._.QUICK?Y.ORIGIN:this._computeContainerSubpixelOffset((0,ey.x)());this.__renderedOffset=Y.sub(n,r,n);var o=(0,ed.Os)(this.__size.y,this.__fov),a=o-o/this.__scale,s=a*Math.sin(this.__tilt),u=a*Math.cos(this.__tilt);this.__setState((0,p._)({},this.__state,{scalingDistanceY:s,scalingDistanceZ:u,translate:[this.__renderedOffset.x,this.__renderedOffset.y,0]}))}},i.render=function(e){var t=e.qualityHint,i=e.time,n=(0,eS.ZR)(es.B.worldToPixels(this.__visibleCenter,this.zoom),this.__azimuth,this.__size,this.__scale,this.__tileSize);(!this.__fetched||(0,eS.jl)(n,this.__tileBounds))&&this._fetch(),this._fetch(),this.reposition(t),this.__props.shouldAwaitAllTiles()&&this.readyState.tilesLoaded!==this.readyState.tilesTotal||(this._attachLoadedTiles(i),this._revealNewTiles(i))},i.finishTileAnimations=function(){var e=this;this.__haveTilesToAnimate&&(this.__currentTiles.forEach(function(t){3===t.status&&(t.setState((0,p._)({},t.state,{opacity:1})),e._countReadyTile(ex(t,4)))}),this.__haveTilesToAnimate=!1)},i._computeContainerSubpixelOffset=function(e){var t,i,n;return null!=(n=null==(i=this.__props)?void 0:null==(t=i.getContainerSubpixelOffset)?void 0:t.call(i,e))?n:{x:0,y:0}},i.setZIndex=function(e){this.__setState((0,p._)({},this.__state,{zIndex:e}))},i._fetch=function(){var e=this,t=Y.sub(this.__fetchedCenter,this.__visibleCenter).x;this.__fetchedCenter=this.__visibleCenter;var i=es.B.worldToPixels(this.__fetchedCenter,this.zoom);this.__centralTilePoint=Y.add(Y.divn(i,this.__tileSize),{x:-.5,y:-.5});var n=(0,eS.YC)(this.__visibleCenter,this.__azimuth,this.__tilt,this.zoom,this.__scale,this.__size,this.__tileSize),r=n.tiles,o=n.tileBounds;this.__tileBounds=o;var a=(0,eS.Su)(this.zoom,this.__tileSize),s=this.__currentTiles,u=t>1;(u||t<-1)&&(s=new Map,this.__currentTiles.forEach(function(t){var i=t.info,n=i.x,r=i.y;s.set((0,eS.vD)({x:n+(u?-a:a),y:r},e.zoom),t)}));var l=(0,ev.B)(s,r,this._createTile,this._removeTile.bind(this),this._updateTile);this.__currentTiles=l.result,this._updateReadyState()&&this._emitReadyStateChanged(),this.__fetched=!0,this.__firstScreen=!1},i._removeTile=function(e){(0===e.status||1===e.status)&&e.abortController.abort(),2===e.status&&this._loadedTiles.delete(e),ex(e,6),null==e.destroy||e.destroy.call(e)},i._loadTile=function(e,t){var i=ex(e,1),n=(0,ey.x)(),r=this.__props.fetchTile(i.info.x,i.info.y,this.zoom,n,t);if(!r){var o=ex(i,5);return this._countReadyTile(o),Promise.resolve(o)}return"string"==typeof r?this._loadTileByUrl(i,r,t):this._loadTileByPromise(i,r,t)},i._loadTileByPromise=function(e,t,i){var n=this;return t.then(function(t){if(i.aborted)throw(0,eg.o)();var r=ex(e,2);return"function"==typeof t.destroy&&(r.destroy=t.destroy),r.setState((0,p._)({},r.state,{content:t})),n._countLoadedTile(r),r}).catch(function(t){if(i.aborted)throw(0,eg.o)();(0,g.H)(t);var r=ex(e,5);return n._countReadyTile(r),r})},i._loadTileByUrl=function(e,t,i){var n=this,r=new ef.BH,o=new Image,a=function(t){if(o.onerror=null,o.onload=null,i.removeEventListener("abort",s),0===t){var a=ex(e,2);a.setState((0,p._)({},a.state,{content:{image:o}})),r.resolve(a),n._countLoadedTile(a)}else if(1===t){var u=ex(e,5);r.resolve(u),n._countReadyTile(u)}else 2===t&&(o.src="",r.reject((0,eg.o)()))},s=a.bind(null,2);i.addEventListener("abort",s);var u=a.bind(null,0),l=a.bind(null,1);return o.decode?(o.src=t,o.decode().then(u,l)):(o.onload=u,o.onerror=l,o.src=t),r.promise},i._attachLoadedTiles=function(e){var t=this;0!==this._loadedTiles.size&&(this._loadedTiles.forEach(function(i){i.setState((0,p._)({},i.state,{position:{x:i.screenX,y:i.screenY},opacity:i.animate?0:1})),i.animate?ex(i,3).animationStartTs=e:t._countReadyTile(ex(i,4))}),this._loadedTiles.clear())},i._revealNewTiles=function(e){var t=this;this.__haveTilesToAnimate=!1,this.__currentTiles.forEach(function(i){if(3===i.status){var n=t.__props.getTileRevealDuration(),r=n>0?Math.min(1,(e-i.animationStartTs)/n):1;i.setState((0,p._)({},i.state,{opacity:r})),r<1?t.__haveTilesToAnimate=!0:t._countReadyTile(ex(i,4))}}),this.__haveTilesToAnimate?this._emit("requestRender"):this.__props.releaseAwaitAllTilesTrigger()},i._countLoadedTile=function(e){e.info.border?this.readyState.borderLoaded++:this.readyState.tilesLoaded++,this._emitReadyStateChanged()},i._countReadyTile=function(e){e.info.border?this.readyState.borderReady++:this.readyState.tilesReady++,this._emitReadyStateChanged()},i._emitReadyStateChanged=function(){this.readyState=(0,p._)({},this.readyState),this._emit("readyStateChanged")},i._updateReadyState=function(){var e={borderTotal:0,borderLoaded:0,borderReady:0,tilesTotal:0,tilesReady:0,tilesLoaded:0};this.__currentTiles.forEach(function(t){t.info.border?e.borderTotal++:e.tilesTotal++,(2===t.status||3===t.status||4===t.status)&&(t.info.border?e.borderLoaded++:e.tilesLoaded++),4===t.status&&(t.info.border?e.borderReady++:e.tilesReady++)});var t=e.borderTotal!==this.readyState.borderTotal||e.borderLoaded!==this.readyState.borderLoaded||e.borderReady!==this.readyState.borderReady||e.tilesTotal!==this.readyState.tilesTotal||e.tilesReady!==this.readyState.tilesReady||e.tilesLoaded!==this.readyState.tilesLoaded;return t&&(this.readyState=e),t},i._computeTilePriority=function(e){var t;return(e.border?Number.MAX_SAFE_INTEGER/2:0)+(t=this.__centralTilePoint,Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},i._computeScreenCoordinatesForTile=function(e){var t=es.B.worldToPixels(this.__visibleCenter,this.zoom),i=Y.muln(e,this.__tileSize),n=Y.add(Y.sub(i,t),Y.divn(this.__size,2));return Y.applyFunction(n,Math.round)},(0,I._)(t,[{key:"id",get:function(){return this.__id}},{key:"state",get:function(){return this.__state}},{key:"needsRender",get:function(){return 0!==this._loadedTiles.size||this.__haveTilesToAnimate}}]),t}((0,O.GA)().with()),ez={min:0,max:22},ew=Object.freeze({tileSize:256,zoomRange:ez,fov:ep,processingQueue:new ef.$7(ef.fv),animateFirstScreen:!1,zoomRoundingRule:Math.round}),eT=function(e){function t(t,i){(d=e.call(this)||this).__logger=i,d.__needsRender=!0,d.__awaitAllTilesTrigger=!1,d.__deprecatedLayers=[],d._onForegroundTileReady=function(){(d.__layer.readyState.tilesReady===d.__layer.readyState.tilesTotal||d.__transparent&&d.__layer.readyState.tilesLoaded>0)&&d._cleanUpDeprecatedLayers(),d._emit("readyStateChanged")},d._shouldAwaitAllTiles=function(){return d.__awaitAllTilesTrigger},d._releaseAwaitAllTilesTrigger=function(){d.__awaitAllTilesTrigger=!1,d.__oldDataSourceLayer&&(d.__oldDataSourceLayer.destroy(),d.__oldDataSourceLayer=void 0)},d._getTileRevealDuration=function(){return d._tileRevealDuration};for(var n,r,o,a,s,u=(0,p._)({},t),l=0,c=Object.entries(ew);l<c.length;l++){var d,h=(0,v._)(c[l],2),_=h[0],m=h[1];null!=u[_]||(u[_]=m)}return d.__props=u,d.__fov=null!=(n=t.fov)?n:ep,d.__camera=t.camera,d.__size=t.size,d.__zoomRange=null!=(r=t.zoomRange)?r:ez,d.__zoomRoundingRule=null!=(o=t.zoomRoundingRule)?o:Math.round,d.__fetchTile=t.fetchTile,d.__tileSize=null!=(a=t.tileSize)?a:er.SF,d.__transparent=!!t.transparent,d.__awaitAllTilesOnFirstDisplay=!!t.awaitAllTilesOnFirstDisplay,d.__tileRevealDuration=null!=(s=t.tileRevealDuration)?s:0,d.__awaitAllTilesTrigger=d.__awaitAllTilesOnFirstDisplay,d.__roundZoom=d.__zoomRoundingRule(t.camera.zoom),d._createLayerForCurrentZoom(!!t.animateFirstScreen),d.__inZoomRange=!0,d}(0,k._)(t,e);var i=t.prototype;return i.computeState=function(){return{tileSize:this.__tileSize,layers:[this.__layer].concat((0,ee._)(this.__deprecatedLayers)).map(function(e){return{id:e.id,tiles:e.getTiles(),state:(0,p._)({},e.state),zoom:e.zoom,set cookie(cookie){e.cookie=cookie},get cookie(){return e.cookie}}})}},i.destroy=function(){this.__layer.destroy(),this._cleanUpDeprecatedLayers()},i._updateCameraAndFov=function(e,t){var i;(this.__fov!==t||this.__camera!==e)&&(this.__needsRender=!0,i=this.__camera,Y.areFuzzyEqual(i.worldCenter,e.worldCenter)&&i.zoom===e.zoom&&i.azimuth===e.azimuth&&i.tilt===e.tilt||this._releaseAwaitAllTilesTrigger(),this.__camera=e,this.__fov=t,this.__roundZoom=this.__zoomRoundingRule(e.zoom),this.__roundZoom!==this.__layer.zoom&&this.__layer.freeze())},i._resize=function(e){if(!(0,Y.areEqual)(this.__size,e)){this.__needsRender=!0,this.__size=e,this.__layer.resize(e);for(var t=0,i=this.__deprecatedLayers;t<i.length;t++)i[t].resize(e)}},i.update=function(e){if((void 0!==e.fetchTile||void 0!==e.tileSize)&&this._updateFetchTileOrTileSize(e.fetchTile,e.tileSize),void 0!==e.camera||void 0!==e.fov){var t,i,n;this._updateCameraAndFov(null!=(t=e.camera)?t:this.__camera,null!=(n=null!=(i=e.fov)?i:this.__fov)?n:ep)}void 0!==e.size&&this._resize(e.size),void 0!==e.tileRevealDuration&&(this.__tileRevealDuration=e.tileRevealDuration),void 0!==e.transparent&&(this.__transparent=e.transparent),void 0!==e.awaitAllTilesOnFirstDisplay&&(this.__awaitAllTilesOnFirstDisplay=e.awaitAllTilesOnFirstDisplay,this.__awaitAllTilesTrigger=!!e.awaitAllTilesOnFirstDisplay),void 0!==e.zoomRange&&(this.__zoomRange=e.zoomRange)},i._updateFetchTileOrTileSize=function(e,t){this.__awaitAllTilesTrigger=!!this.__props.awaitAllTilesOnFirstDisplay,this.__fetchTile=null!=e?e:this.__fetchTile,this.__tileSize=null!=t?t:this.__tileSize,e&&this.__awaitAllTilesTrigger?this.__oldDataSourceLayer||(this.__oldDataSourceLayer=this.__layer,this.__oldDataSourceLayer.freeze()):this.__layer.destroy(),this._cleanUpDeprecatedLayers(),this._createLayerForCurrentZoom(!0),this._emit("requestRender")},i.render=function(e){void 0===e&&(e={});var t,i,n=null!=(t=e.qualityHint)?t:ei._.FULL,r=null!=(i=e.time)?i:Date.now();if(!this.__needsRender&&!this.__layer.needsRender&&n!==ei._.FULL)return this.computeState();if(this._checkZoomInZoomRange())this.__inZoomRange||(this.__layer.unfreeze(),this.__layer.setVisibility(!0),this.__inZoomRange=!0);else{if(!this.__inZoomRange)return this.computeState();this.__layer.freeze(),this.__layer.setVisibility(!1),this._cleanUpDeprecatedLayers(),this.__inZoomRange=!1}this.__needsRender=!1,n===ei._.FULL&&this.__roundZoom!==this.__layer.zoom&&(this.__layerEventGroup.offAll(),Math.abs(this.__layer.zoom-this.__roundZoom)>3?this.__layer.destroy():this.__deprecatedLayers.push(this.__layer),this._createLayerForCurrentZoom(!0));for(var o=0,a=this.__deprecatedLayers;o<a.length;o++){var s=a[o];this.__updateLayer(s),s.reposition(n),s.finishTileAnimations()}return this.__updateLayer(this.__layer),this.__roundZoom===this.__layer.zoom?this.__layer.render({time:r,qualityHint:n}):this.__layer.reposition(n),this._sortLayers(),this.computeState()},i.__updateLayer=function(e){var t=es.B.getScale(e.zoom,this.__camera.zoom);e.update(this.__camera.worldCenter,this.__camera.azimuth,this.__camera.tilt,t,this.__fov)},i._checkZoomInZoomRange=function(){return this.__roundZoom>=this.__zoomRange.min&&this.__roundZoom<=this.__zoomRange.max},i._cleanUpDeprecatedLayers=function(){for(var e=0,t=this.__deprecatedLayers;e<t.length;e++)t[e].destroy();this.__deprecatedLayers=[]},i._createLayerForCurrentZoom=function(e){var t=this,i=this.__deprecatedLayers.find(function(e){return e.zoom===t.__roundZoom});if(i)this.__deprecatedLayers.splice(this.__deprecatedLayers.indexOf(i),1),i.unfreeze();else{var n=this.__camera,r=(0,ec.q)(this.__zoomRoundingRule(n.zoom),this.__zoomRange.min,this.__zoomRange.max),o=es.B.getScale(r,n.zoom);i=new eb({tileSize:this.__tileSize,visibleCenter:n.worldCenter,worldOptions:this.__props.worldOptions,scale:o,azimuth:n.azimuth,tilt:n.tilt,fov:this.__fov,zoom:r,size:this.__size,animateFirstScreen:e,processingQueue:this.__props.processingQueue,shouldAwaitAllTiles:this._shouldAwaitAllTiles,releaseAwaitAllTilesTrigger:this._releaseAwaitAllTilesTrigger,getTileRevealDuration:this._getTileRevealDuration,getContainerSubpixelOffset:this.__props.getContainerSubpixelOffset,fetchTile:this.__fetchTile},this.__logger)}this.__layer=i,this.__layerEventGroup=this.__layer.on("readyStateChanged",this._onForegroundTileReady).on("requestRender",function(){return t._emit("requestRender")})},i._sortLayers=function(){for(var e=Math.round(this.__camera.zoom),t=[this.__layer].concat((0,ee._)(this.__deprecatedLayers)),i=t.reduce(function(e,t){return Math.max(t.zoom,e)},-1/0),n=0;n<t.length;n++){var r=t[n];e===r.zoom?r.setZIndex(i):e>r.zoom?r.setZIndex(r.zoom-e):r.setZIndex(i-r.zoom)}},(0,I._)(t,[{key:"readyState",get:function(){return this.__layer.readyState}},{key:"_tileRevealDuration",get:function(){var e;return null!=(e=this.__tileRevealDuration)?e:0}}]),t}((0,O.GA)().with()),eR=i(85164),eC=function(e){function t(t){(i=e.call(this)||this)._props=t,i.__previousLayers=new Map;var i,n=t.dataSource;return(0,eh.h)(n instanceof em.Nt,"Data source should be instanced of TileDataSource"),i.__tileManager=new eT((0,p._)({},t,{tileSize:n.tileSize,zoomRange:n.zoomRange,transparent:n.transparent,fetchTile:n.fetchRasterTile.bind(n),tileRevealDuration:200,getContainerSubpixelOffset:function(e){var i=t.element.getBoundingClientRect(),n={x:i.left,y:i.top};return Y.applyFunction(n,function(t){var i=t*e;return(i-Math.round(i))/e})}}),n.logger),i.__tileManagerSubscription=i.__tileManager.group().on("readyStateChanged",function(){return i._emit("stateChanged")}).on("requestRender",function(){return i._emit("requestRender")}),i.__tileSourceSubscription=n.group().on("sourceChanged",function(e){var t,r,o,a,s,u;return i.__tileManager.update({tileSize:null!=(a=null==(t=e.tileSize)?void 0:t.new)?a:void 0,zoomRange:null!=(s=null==(r=e.zoomRange)?void 0:r.new)?s:void 0,transparent:null!=(u=null==(o=e.transparent)?void 0:o.new)?u:void 0,fetchTile:e.fetchTile?n.fetchRasterTile.bind(n):void 0})}),i}(0,k._)(t,e);var i=t.prototype;return i.setOptions=function(e){this.__tileManager.update({awaitAllTilesOnFirstDisplay:e.awaitAllTilesOnFirstDisplay,tileRevealDuration:e.tileRevealDuration})},i.findObjectInPosition=function(){return null},i.findFeatureByElement=function(){return null},i.update=function(e,t){this.__tileManager.update({camera:e,fov:t})},i.resize=function(e){this.__tileManager.update({size:e})},i.render=function(e){var t,i,n=this,r=this.__tileManager.render(e);t=this._props.element,i=(0,ed.Os)(e.size.y,e.fov),t.style.perspective=""+i+"px";var o=new Map(r.layers.map(function(e){return[e.id,e]}));(0,ev.B)(this.__previousLayers,o,function(t){var i=n.__addNewLayer(t);return t.cookie=i,n.__updateLayer(t,t,e),n.__reconcileTiles(i,r.tileSize,t),t},function(e){return n.__removeLayer(e)},function(t,i){n.__reconcileTiles(t.cookie,r.tileSize,i,t),n.__updateLayer(i,t,e)},function(e,t){return!!(e.cookie&&e.cookie===t.cookie)}),this.__previousLayers=o},i.__addNewLayer=function(e){var t=(0,eR.E)("ymaps3x0--tile-layer__container");return t.dataset.z=String(e.zoom),t.addEventListener("dragstart",function(e){e.stopPropagation(),e.preventDefault()}),this._props.element.appendChild(t),t},i.__updateLayer=function(e,t,i){var n,r,o,a=t.cookie;a&&(n=i.camera.tilt,r=i.camera.azimuth,o=i.qualityHint>=ei._.FULL?e.state.translate:e.state.translate.map(eM),a.style.transform=["rotateX("+eM(n)+"rad)","translate3d(0px, "+e.state.scalingDistanceY+"px, "+e.state.scalingDistanceZ+"px)","rotateZ("+eM(r)+"rad) translate3d("+o[0]+"px, "+o[1]+"px, 0px)"].join(" "),a.style.zIndex=String(e.state.zIndex),a.style.display=e.state.visible?"":"none")},i.__reconcileTiles=function(e,t,i,n){var r=new Map(i.tiles.map(function(e){return[e.id,e]})),a=n?new Map(n.tiles.map(function(e){return[e.id,e]})):new Map,s=new Set,u=new Set;(0,ev.B)(a,r,function(i){return i.status>o.LOADED&&i.state.content&&i.status!==o.REMOVED&&(null!=i.cookie||(i.cookie=eL(i,t,e))),u.add(i.cookie),i},function(e){return s.add(e.cookie)},function(i,n){var r=n.cookie;i.cookie&&i.cookie!==n.cookie&&s.add(i.cookie),n.status>o.LOADED&&n.state.content&&!r&&n.status!==o.REMOVED&&(r=eL(n,t,e)),r&&(eD(r,n.state),u.add(r))},function(){return!0},function(){return!1}),s.forEach(function(e){e&&!u.has(e)&&e.remove()})},i.__removeLayer=function(e){var t;null==(t=e.cookie)||t.remove()},i.destroy=function(){this.__tileManagerSubscription.offAll(),this.__tileSourceSubscription.offAll(),this.__tileManager.destroy(),this.__previousLayers.forEach(function(e){var t;return null==(t=e.cookie)?void 0:t.remove()})},(0,I._)(t,[{key:"state",get:function(){return(0,p._)({},this.__tileManager.readyState,{graphicsReady:0,graphicsTotal:0})}}]),t}((0,O.GA)().with()),eM=function(e){return Math.abs(e)>=1e21?e.toPrecision(100):e.toFixed(5)};function eA(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}function eD(e,t){e.style.opacity=String(t.opacity),e.style.left=t.position.x+"px",e.style.top=t.position.y+"px"}function eL(e,t,i){var n=function(e,t){var i,n=e.state.content.image;if(!(n instanceof HTMLImageElement)&&!(n instanceof HTMLCanvasElement)&&!eA(n))throw Error("Unsupported image type allow only HTMLImageElement, HTMLCanvasElement or ImageBitmap");if(eA(n)){var r=document.createElement("canvas");r.width=n.width,r.height=n.height,r.style.position="absolute",r.getContext("2d").drawImage(n,0,0),i=r}else i=n;return i.style.width=""+t+"px",i.style.height=""+t+"px",i}(e,t);return eD(n,e.state),i.appendChild(n),e.cookie=n,n}var eP=i(77543),eF={tilesLoaded:0,tilesReady:0,tilesTotal:0,borderLoaded:0,borderReady:0,borderTotal:0,graphicsReady:0,graphicsTotal:0},eI="http://www.w3.org/2000/svg";function ek(e,t){for(var i=Math.floor((e+1)/2),n=Math.floor((t+1)/2),r=[],o=i;o<=n;o++)r.push(o);return r}function eO(e,t){if(e.length<3||t<=0)return(0,ee._)(e);var i=[];return i.push(e[0]),function e(t,i,n,r,o){for(var a=t[n],s=t[r],u=s.x-a.x,l=s.y-a.y,c=Math.pow(u,2)+Math.pow(l,2),d=0,h=0,_=-1/0,m=-1,f=n+1;f<r;f++){d=t[f].x-a.x,h=t[f].y-a.y;var p=c>0?(u*d+l*h)/c:0,v=0;if(p>1)v=Math.pow(t[f].x-s.x,2)+Math.pow(t[f].y-s.y,2);else if(p>0){var g=a.x+u*p,y=a.y+l*p;v=Math.pow(t[f].x-g,2)+Math.pow(t[f].y-y,2)}else v=Math.pow(d,2)+Math.pow(h,2);v>_&&(_=v,m=f)}_>o&&(e(t,i,n,m,o),i.push(t[m]),e(t,i,m,r,o))}(e,i,0,e.length-1,Math.pow(t,2)),i.push(e[e.length-1]),i}function eB(e,t,i){for(var n=[],r={x:0,y:0},o={x:1/0,y:1/0},a={x:t,y:-t},s=0,u=0,l=0;l<e.length;l++){var c=e[l];s=c.x-o.x,u=c.y-o.y,(n.length<2||s>=i||s<=-i||u>=i||u<=-i)&&(Y.mulv(c,a,r),n.push({x:r.x,y:r.y}),o.x=c.x,o.y=c.y)}return n}var ej=function(){function e(e,t,i){var n=this;this._strokeStamp="",this._lineSegments=[],this._simplifiedLineSegments=new Map,this._colorLines=new Map,this.worldsTranslations=[],this.geometry=(0,p._)({},e.geometry),this.bbox=i,ek(i.minX,i.maxX).reduce(function(e,t){return e.add(t).add(-t)},new Set).forEach(function(e){return n.worldsTranslations.push({x:2*e,y:0})}),this.worldsTranslations.sort(function(e,t){return e.x-t.x}),this.updateStyle(t)}var t=e.prototype;return t.updateStyle=function(e){this._style=e,this._strokeSize="LineString"===this.geometry.type||"MultiLineString"===this.geometry.type?this._style.stroke.length:1,this._maxStrokeWidth=-1/0,this._strokeStamp="";for(var t=0;t<this._strokeSize;t++){var i=this.style.stroke[t];i.width>this._maxStrokeWidth&&(this._maxStrokeWidth=i.width),this._strokeStamp+=i.paletteColors.length>0?"c":"p"}"LineString"===this.geometry.type&&e.paletteColorStops.length>0&&(this._lineSegments=function(e,t){for(var i=[],n=0,r=0;r<t.length;r++){var o=t[r],a=e.slice(n,o+1);i.push({coordinates:a,length:function(e){for(var t={x:0,y:0},i=0,n=1;n<e.length;n++)Y.sub(e[n-1],e[n],t),i+=Y.length(t);return i}(a)}),n=o}return i}(this.geometry.coordinates,e.paletteColorStops))},t.getStrokeStyleForStrokeIndex=function(e){return this.style.stroke.length-1<e&&(0,g._y)(Error("Can't find stroke style for stroke with index "+e)),this.style.stroke[this.style.stroke.length-1-e]},t.getSimplifiedLineSegments=function(e,t){var i=this;if(e=Math.round(e),!this._simplifiedLineSegments.has(e)){var n=es.B.getWorldPixelSize(e)/2,r=this._lineSegments.map(function(e){var r=eB(e.coordinates,n,t);return(0,p._)({},e,{coordinates:eO(r,i.style.simplificationRate)})});this._simplifiedLineSegments.set(e,r)}return this._simplifiedLineSegments.get(e)},t.getColorLine=function(e,t,i){var n=e+"_"+(t=Math.round(t));if(!this._colorLines.has(n)){var r=this.getStrokeStyleForStrokeIndex(e),o=r.paletteColors,a=r.simplifyPalette;this._colorLines.set(n,function(e,t,i,n){for(var r=[],o=e.length-1,a=1.5/es.B.getWorldPixelSize(i),s=[],u=0,l="",c=0,d={},h=0;h<e.length;h++){var _,m=e[h],f=m.coordinates,p=m.length;n?(_=s).push.apply(_,(0,ee._)(f)):s=f,u+=p;var v=t[h];d[v]=void 0===d[v]?p:d[v]+p,d[v]>c&&(c=d[v],l=v);var g=r[r.length-1];n&&h!==o&&(!g||l!==g.color)&&u<a||(g&&l===g.color?g.coordinates=g.coordinates.concat(s):r.push({coordinates:s,color:l}),s=[],u=0,l="",c=0,d={})}return r}(this.getSimplifiedLineSegments(t,i),o,t,a))}return this._colorLines.get(n)},t.hasStructuralDifferenceWithOtherModel=function(e){return this.geometry.type!==e.geometry.type||this._strokeStamp!==e.strokeStamp||"MultiPolygon"===this.geometry.type&&"MultiPolygon"===e.geometry.type&&this.geometry.coordinates.length!==e.geometry.coordinates.length},(0,I._)(e,[{key:"style",get:function(){return this._style}},{key:"strokeSize",get:function(){return this._strokeSize}},{key:"maxStrokeWidth",get:function(){return this._maxStrokeWidth}},{key:"strokeStamp",get:function(){return this._strokeStamp}},{key:"hasPalette",get:function(){return this.style.paletteColorStops.length>0}}]),e}();function eW(e,t,i,n){var r=t.y-e.y,o=e.x-t.x,a=r*e.x+o*e.y,s=n.y-i.y,u=i.x-n.x,l=s*i.x+u*i.y,c=r*u-s*o;return 1e-12>Math.abs(c)?null:Y.create((u*a-o*l)/c,(l*r-a*s)/c)}function eZ(e,t,i){return(t.x-e.x)*(i.y-e.y)>(t.y-e.y)*(i.x-e.x)}var eG=i(52193);function eH(e){for(;e.firstChild;)e.removeChild(e.firstChild)}var eY=i(28304),eV=function(e){function t(t){var i,n=t.element,r=t.size,o=t.camera,a=t.worldOptions,s=t.projection,u=t.dataSource;return(i=e.call(this)||this)._fov=ep,i._fullRenderedZoom=-1/0,i._features=new Map,i._featureToWrapper=new Map,i._elementToFeature=new WeakMap,i._element=n,i._size=r,i._camera=o,i._needsRender=!0,(0,eh.h)(u instanceof eY.m5,"Data source should be instance of FeaturesDataSource"),i._dataSource=u,i.projection=s,i.worldOptions=a,i._dataSourceEventGroup=i._dataSource.group().on("featureAdded",function(e){return i._addFeatureById(e)}).on("featureRemoved",function(e){return i._removeFeatureById(e)}).on("featureUpdated",function(e){return i._updateFeatureById(e)}),i._dataSource.forEachFeatureElement(function(e){i._addFeatureById(e.id)}),i}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){var e=this;this._dataSource.forEachFeatureElement(function(t){return e._removeFeatureById(t.id)}),this._dataSourceEventGroup.offAll()},i.update=function(e,t){(this._fov!==t||this._camera!==e)&&(this._needsRender=!0,this._camera=e,this._fov=t)},i.resize=function(e){(0,Y.areEqual)(this._size,e)||(this._needsRender=!0,this._size=e)},i.render=function(e){var t=e.qualityHint,i=e.camera,n=e.fov;this.update(i,n),this._needsRender&&(t>=ei._.FULL&&(this._fullRenderedZoom=this._camera.zoom),this._needsRender=t<ei._.FULL,this.__repositionAll(t>=ei._.FULL||this._fullRenderedZoom===this._camera.zoom))},i.findFeatureByElement=function(e){for(var t=e;t&&t!==this._element;){var i=this._elementToFeature.get(t);if(i)return{type:"feature",feature:i};t=t.parentElement}return null},i.findObjectInPosition=function(e){var t=(0,ed.Rv)(e,(0,p._)({},this._camera,{size:this._size,container:this._element,fov:this._fov}));if(!isFinite(t.x)||!isFinite(t.y))return null;var i=document.elementFromPoint(t.x,t.y);return i&&this._element.contains(i)?this.findFeatureByElement(i):null},i._addFeatureById=function(e){var i=this._dataSource.getFeatureById(e);if((0,eh.h)(null!=i,"Feature "+e+" not found"),(0,eY.uT)(i)){this._elementToFeature.set(i.style.element,i),this._features.set(e,i);var n=t.wrapElement(i.style.element);this._featureToWrapper.set(e,n),this.__repositionFeature(i),this.__safeAddElement(n),this._needsRender=!0}},i._removeFeatureById=function(e){var t=this._features.get(e);if(t){this._elementToFeature.delete(t.style.element);var i=this._featureToWrapper.get(e);(0,eh.h)(null!=i,"Wrapper for feature "+e+" not found"),this._featureToWrapper.delete(e),this.__safeRemoveElement(i),t.style.element.isConnected&&i.removeChild(t.style.element),this._needsRender=!0,this._features.delete(e)}},i._updateFeatureById=function(e){var t=this._dataSource.getFeatureById(e);(0,eh.h)(null!=t,"Feature ${featureId} not found"),(0,eY.uT)(t)&&(this._features.set(e,t),this.__repositionFeature(t,!0))},i.__repositionAll=function(e){var t=this;void 0===e&&(e=!1),this._element.style.transformOrigin=this._size.x/2+"px "+this._size.y/2+"px",this._dataSource.forEachFeatureElement(function(i){return t.__repositionFeature(i,e)})},i.__repositionFeature=function(e,t){void 0===t&&(t=!1);var i=eN(this._fov,this._size,this._camera,this.worldOptions,e.feature.geometry.coordinates,!e.feature.disableRoundCoordinates&&t),n=i.x,r=i.y,o=this._featureToWrapper.get(e.id);(0,eh.h)(null!=o,"Wrapper for feature "+e.id+" not found"),this.__shouldBeVisible(e)?this.__safeAddElement(o):this.__safeRemoveElement(o),o.style.transform="translate("+n.toFixed(10)+"px, "+r.toFixed(10)+"px)",o.style.zIndex=String(e.style.zIndex)},i.__shouldBeVisible=function(e){var t=e.feature,i=t.hideOutsideViewport,n=t.geometry;if(!i)return!0;var r=!0===i?100:i.extent,o=this._camera,a=o.worldCenter,s=o.zoom,u=r?es.B.convertPixelSizeToWorldSize({x:r,y:r},s):{x:0,y:0},l=es.B.convertPixelSizeToWorldSize(this._size,s),c={x:a.x-Math.abs(l.x)/2-Math.abs(u.x),y:a.y-Math.abs(l.y)/2-Math.abs(u.y)},d={x:a.x+Math.abs(l.x)/2+Math.abs(u.x),y:a.y+Math.abs(l.y)/2+Math.abs(u.x)},h=n.coordinates,_=h.x,m=h.y;return!(_<c.x||_>d.x||m<c.y||m>d.y)},i.__safeRemoveElement=function(e){e.isConnected&&e.parentElement===this._element&&this._element.removeChild(e)},i.__safeAddElement=function(e){e.isConnected||this._element.appendChild(e)},t.wrapElement=function(e){var t=(0,eR.E)("ymaps3x0--marker");return t.appendChild(e),t},(0,I._)(t,[{key:"state",get:function(){return eF}}]),t}((0,O.GA)().with());function eN(e,t,i,n,r,o,a){void 0===a&&(a=!0),(0,eh.h)(!n.cycledY,"Y-cycled projections are not supported");var s=i.zoom,u=i.tilt,l=i.azimuth,c=i.worldCenter,d=o&&0===u?es.B.computePixelPerfectWorldCoordinates(c,s,(0,ey.x)(),1):c,h=o?es.B.computePixelPerfectWorldCoordinates(r,s,(0,ey.x)(),1):r,_=a&&n.cycledX?es.B.moveCloseToCenter(h,d):h;return _.y=(0,ec.q)(_.y,-1,1),(0,ed.k6)(_,{azimuth:l,tilt:u,worldCenter:d,zoom:s,size:t,fov:e})}var eX=[(0,p._)({},Y.ORIGIN)],eq=function(){function e(e,t,i){this._recreateDomStructureOnNextRender=!1,this._clippedPointElements=[],this._renderedCenter=Y.ORIGIN,this._renderedZoom=-1/0,this._renderedBBoxes=[],this._isVisible=!1,this._translation={x:0,y:0};var n="ymaps3x0--feature-"+e+"-"+t;this._model=i,this.element=document.createElementNS(eI,"g"),"Point"!==i.geometry.type&&(this.element.setAttribute("stroke-linejoin","round"),this.element.setAttribute("stroke-linecap","round")),this.element.setAttribute("id",n),this.elementCopy=document.createElementNS(eI,"use"),this.elementCopy.setAttribute("href","#"+n),this.elementCopy.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+n),this.elementCopy.setAttribute("data-feature-id",t),this._featureId=t,this._fullWorldVisibleData={worldsTranslations:eX,bboxes:[i.bbox]},this._createDomStructure()}var t=e.prototype;return t.setModel=function(e){this._recreateDomStructureOnNextRender=this._recreateDomStructureOnNextRender||this._model.hasStructuralDifferenceWithOtherModel(e),this._model=e,this._teardownRenderedState(),this._fullWorldVisibleData={worldsTranslations:eX,bboxes:[e.bbox]}},t.render=function(e){var t=e.fullWorldVisible?this._fullWorldVisibleData:this._computeWorldsTranslationsAndBBoxes(e.svgBBox,e.viewportWorldsTranslations),i=t.worldsTranslations,n=t.bboxes;if(0===i.length){this._setVisibility(!1);return}this._setVisibility(!0),this._needsFullRender(n,e.zoom)?(this._fullRender(e,i,n),this.adjustStrokeWidthAndDash(e.clippingPadding)):this._reposition(e)},t.adjustStrokeWidthAndDash=function(e,t){void 0===t&&(t=1),Math.min(this.model.maxStrokeWidth/t,e)===e&&(t=this.model.maxStrokeWidth/e);for(var i=0;i<this.model.strokeSize;i++){var n=this.model.getStrokeStyleForStrokeIndex(i),r=n.dash,o=(n.width/t).toFixed(3),a=(1===t?r:r.map(function(e){return e/t})).join(" ");if("MultiPolygon"===this.model.geometry.type||"Polygon"===this.model.geometry.type){this.element.setAttribute("stroke-width",o),this.element.setAttribute("stroke-dasharray",a);return}var s=this.element.childNodes[i];s&&(s.setAttribute("stroke-width",o),s.setAttribute("stroke-dasharray",a))}},t._computeWorldsTranslationsAndBBoxes=function(e,t){for(var i=this.model,n=i.bbox,r=i.worldsTranslations,o={},a={worldsTranslations:[],bboxes:[]},s=0,u=t.concat(r);s<u.length;s++){var l=u[s];if(o[l.x]=o[l.x]||{},!o[l.x][l.y]){o[l.x][l.y]=!0;var c=N(e,{minX:n.minX+l.x,maxX:n.maxX+l.x,minY:n.minY+l.y,maxY:n.maxY+l.y});c&&(a.worldsTranslations.push(l),a.bboxes.push(c))}}return a},t._needsFullRender=function(e,t){if(this._recreateDomStructureOnNextRender||0===this._renderedBBoxes.length||this._renderedBBoxes.length!==e.length||this._renderedZoom!==t)return!0;for(var i=0;i<this._renderedBBoxes.length;i++)if(!U(this._renderedBBoxes[i],e[i]))return!0;return!1},t._reposition=function(e){if("Point"===this.model.geometry.type)return this._renderIconPoint(this.model.geometry.coordinates,e);var t=Y.sub(this._renderedCenter,e.pixelCenter);this._setTranslation(t.x,t.y)},t._fullRender=function(e,t,i){var n=e.fullWorldVisible||1===i.length&&K(this._model.bbox,i[0]);switch(this._renderedCenter=e.pixelCenter,this._renderedZoom=e.zoom,this._renderedBBoxes=i,this.element.style.cursor=this.model.style.cursor,this.model.style.interactive?this.element.style.pointerEvents="":this.element.style.pointerEvents="none",this._setTranslation(0,0),this._recreateDomStructureOnNextRender&&(this._recreateDomStructureOnNextRender=!1,this._createDomStructure()),this.model.geometry.type){case"Point":if(this.model.style.element)return;this.element.setAttribute("fill","none"),this._renderIconPoint(this.model.geometry.coordinates,e);break;case"LineString":case"MultiLineString":if(this.element.setAttribute("fill","none"),this.model.hasPalette)this._renderLineWithPalette(t,e,n);else{var r="LineString"===this.model.geometry.type?[this.model.geometry.coordinates]:this.model.geometry.coordinates;this._renderLinesWithoutPalette(r,t,e,n)}break;case"Polygon":case"MultiPolygon":this.element.setAttribute("fill",this.model.style.fill),this.element.setAttribute("fill-opacity",String(this.model.style.fillOpacity)),this.element.setAttribute("fill-rule",this.model.style.fillRule);var o=this.model.geometry,a="Polygon"===o.type?[o.coordinates]:o.coordinates;this._renderPolygons(a,t,e,n);break;default:(0,g._y)(Error("Unexpected geometry type: "+this.model.geometry.type))}},t._renderLineWithPalette=function(e,t,i){for(var n=null,r=0;r<this.model.strokeSize;r++){var o=this.element.childNodes[r],a=this.model.getStrokeStyleForStrokeIndex(r);a.paletteColors.length>0?this._renderColorLineStroke(o,r,t,i,e):(null===n&&(n=this._computeSplittedLinePath(t,i,e)),eQ(o,n,a))}},t._renderLinesWithoutPalette=function(e,t,i,n){for(var r=[],o=0;o<e.length;o++){var a=eB(e[o],i.halfWorldSize,i.pointFilterBox);r.push(eU(a,i,n,t,this.model.style.simplificationRate))}for(var s=r.join(" "),u=0;u<this.model.strokeSize;u++)eQ(this.element.childNodes[u],s,this.model.getStrokeStyleForStrokeIndex(u))},t._renderPolygons=function(e,t,i,n){for(var r=0;r<e.length;r++){for(var o=[],a=0,s=e[r];a<s.length;a++){var u=eB(s[a],i.halfWorldSize,i.pointFilterBox);o.push(eU(u,i,n,t,this.model.style.simplificationRate,!0))}eQ(this.element.childNodes[r],o.join(" "),this.model.style.stroke[0])}},t._renderColorLineStroke=function(e,t,i,n,r){var o=this,a=this.model.getColorLine(t,i.zoom,i.pointFilterBox),s=this.model.getStrokeStyleForStrokeIndex(t);eH(e);var u=document.createDocumentFragment(),l=es.B.getScale(Math.round(i.zoom),i.zoom),c=null;a.forEach(function(e){var t=e.coordinates,a=e.color;if(a!==eG.L){var d=eU(t,i,n,r,0,!1,l),h=eK(o._featureId);eQ(h,d,s),h.setAttribute("stroke",a),u.insertBefore(h,c),c=h}}),e.appendChild(u)},t._computeSplittedLinePath=function(e,t,i){for(var n=this.model.getSimplifiedLineSegments(e.zoom,e.pointFilterBox),r=[],o=0;o<n.length;o++){var a=n[o].coordinates;r.push.apply(r,(0,ee._)(a))}var s=es.B.getScale(Math.round(e.zoom),e.zoom);return eU(r,e,t,i,0,!1,s)},t._renderIconPoint=function(e,t){this._setImageElementsCount(t.viewportWorldsTranslations.length);for(var i=this.model.style.icon,n=i.scale,r=i.offset,o=["scale("+n+")","translate("+100*r[0]+"%, "+100*r[1]+"%)"],a=0;a<t.viewportWorldsTranslations.length;a++){var s=this.element.children[a];s.getAttribute("href")!==this.model.style.icon.url&&s.setAttribute("href",this.model.style.icon.url);var u=eN(t.fov,t.size,t.camera,t.worldOptions,{x:e.x+t.viewportWorldsTranslations[a].x,y:e.y,z:e.z},!1,!1),l=u.x,c=u.y;s.style.transform=["translate3d("+l.toFixed(10)+"px, "+c.toFixed(10)+"px, 0)"].concat((0,ee._)(o)).join(" ")}},t._setImageElementsCount=function(e){for(;this.element.children.length<e;){var t=document.createElementNS(eI,"image");t.style.transformBox="fill-box",t.setAttribute("data-feature-id",this._featureId),this.element.appendChild(t)}for(;this.element.children.length>e&&this.element.lastChild;)this.element.removeChild(this.element.lastChild)},t._setPointVisibility=function(e){e?this._unclipPoint():this._clipPoint()},t._clipPoint=function(){this._clippedPointElements.length=0;for(var e=0;e<this.element.children.length;e++){var t=this.element.children[e];this._clippedPointElements.push(t),this.element.removeChild(t)}},t._unclipPoint=function(){for(var e=0,t=this._clippedPointElements;e<t.length;e++){var i=t[e];this.element.appendChild(i)}this._clippedPointElements.length=0},t._createDomStructure=function(){if(eH(this.element),"Point"!==this.model.geometry.type){if("MultiPolygon"===this.model.geometry.type){for(var e=0;e<this.model.geometry.coordinates.length;e++){var t=eK(this._featureId);this.element.appendChild(t)}return}for(var i=0;i<this.model.strokeSize;i++){var n=this.model.getStrokeStyleForStrokeIndex(i).paletteColors.length>0&&"LineString"===this.model.geometry.type?document.createElementNS(eI,"g"):eK(this._featureId);this.element.appendChild(n)}}},t._setVisibility=function(e){this._isVisible!==e&&(this.element.style.display=e?"":"none","Point"===this._model.geometry.type&&this._setPointVisibility(e),this._isVisible=e)},t._setTranslation=function(e,t){(this._translation.x!==e||this._translation.y!==t)&&(this.element.setAttribute("transform","translate("+e+" "+t+")"),this._translation={x:e,y:t})},t._teardownRenderedState=function(){this._renderedZoom=-1/0,this._renderedBBoxes=[],this._renderedCenter=Y.ORIGIN},(0,I._)(e,[{key:"model",get:function(){return this._model}}]),e}();function eU(e,t,i,n,r,o,a){void 0===r&&(r=0),void 0===o&&(o=!1),void 0===a&&(a=1);for(var s=[],u={x:0,y:0},l=0;l<n.length;l++)!function(l){var c=n[l],d=es.B.worldToRelativePixels(c,t.zoom),h=e;if(!i){var _,m=Y.sub(t.pixelCenter,d),f=t.clippingWindow.map(function(e){var t=Y.add(e,m);return 1===a?t:Y.divn(t,a,t)});void 0===(_=o)&&(_=!1),h=function(e,t,i){for(var n=e,r=[],o=t[t.length-1],a=0;a<t.length;a++){for(var s=t[a],u=n[i?n.length-1:0],l=0;l<n.length;l++){var c=n[l],d=eZ(o,s,u);if(eZ(o,s,c)){if(!d){var h=eW(o,s,u,c);if(null===h)continue;r.push(h)}r.push(c)}else if(d){var _=eW(o,s,u,c);if(null===_)continue;r.push(_)}u=c}n=r,r=[],o=s}return n}(e,f,_)}if(h.length>0){var p=0===r?h:eO(h,r),v=Y.sub(d,t.pixelCenter),g="M"+p.map(function(e){return 1!==a&&(e=Y.muln(e,a,u)),Y.add(e,v,u),u.x+","+u.y}).join(" L");o&&(g+=" Z"),s.push(g)}}(l);return s.join(" ")}function eK(e){var t=document.createElementNS(eI,"path");return t.setAttribute("data-feature-id",e),t}function eQ(e,t,i){e.setAttribute("d",t);var n=i.opacity,r=i.color;e.setAttribute("stroke-opacity",String(n)),e.setAttribute("stroke",r)}var eJ={x:50,y:50},e$=2/180*10,e0=18*eo.Z,e1=function(){function e(e,t){var i=this,n=t.dataSource,r=t.element,o=t.size,a=t.camera,s=t.worldOptions,u=t.tiltRange;this.type=e,this._svg=document.createElementNS(eI,"svg"),this._zeroWorld=document.createElementNS(eI,"g"),this._groups=new Map,this._children=[],this._nodesToRemove=new Set,this._renderedWorldCopies=new Set,this._multiWorldsSource=document.createDocumentFragment(),this._elementChildrenKey=Symbol("childrenSet"),this._needsRender=!0,this._fullWorldRendered=!1,this._lastTimeStrokeAdjusted=0,this._willChangeFlag=!1,this._size={x:1/0,y:1/0},this._fov=ep,this._isSvgFixedAtAzimuth=!1,this._dataSource=n,this._camera=a,this._tiltRange=u,this.__resize(o),this._worldOptions=s,this._renderedZoom=a.zoom,this._zoomOfAdjustedStoke=a.zoom,this._renderedCenter=a.worldCenter;var l=document.createElementNS(eI,"g");this._multiWorldsSource.appendChild(l),this._groups.set(eY.oR,{id:eY.oR,element:this._zeroWorld,elementCopy:l}),this._svg.appendChild(this._zeroWorld),this._svg.setAttributeNS("xmlns","xlink","http://www.w3.org/1999/xlink"),this._svg.ondragstart=function(){return!1},r.appendChild(this._svg),this._dataSource.groups.forEach(function(e){e.id!==eY.oR&&i.addGroup(e.id)})}var t=e.prototype;return t.needsRender=function(){this._needsRender=!0},t.destroy=function(){for(var e=0,t=this._children;e<t.length;e++){var i=t[e];this.removeFeature(i)}this._cleanupNodesToRemove(),this._needsRender=!0,this._svg.remove()},t.update=function(e,t){return this.__update(e,t)},t.resize=function(e){return this.__resize(e)},t.__resize=function(e){(0,Y.areEqual)(this._size,e)||(this._size=e,this._halfSize=Y.divn(this._size,2),this._setSvgSizeValues(),this._needsRender=!0)},t.__update=function(e,t){(this._fov!==t||this._camera!==e)&&(this._camera=e,this._fov=t,this._needsRender=!0)},t.render=function(e){var t=e.qualityHint,i=e.camera,n=e.fov;if(this.__update(i,n),this._cleanupNodesToRemove(),0===this._children.length){this._svg.style.display="none";return}this._svg.style.setProperty("display",null);var r=this._getVisibleWorlds(),o=es.B.getScale(this._renderedZoom,this._camera.zoom);if(t===ei._.QUICK?(this._setWillChange(!0),this._positionZeroWorld(o)):this._needsFullRender(t)?(this._fullRender(r),this._renderWorldCopies(this._camera.zoom,!0)):(this._adjustStrokeWidthAndDash(o),this._positionZeroWorld(o),this._renderWorldCopies(this._renderedZoom)),"linear"===this.type){var a=this._getRenderVariables(r);this._children.forEach(function(e){return e.renderer.render(a)})}},t.removeFeature=function(e){var t=this._children.findIndex(function(t){return t.id===e.id});(0,eh.h)(-1!==t,'Layer does not have feature with id "'+e.id+'"'),this._children.splice(t,1),this._nodesToRemove.add(e)},t.addFeatureAt=function(e,t){var i=this._children.findIndex(function(t){return t.id===e.id});-1!==i&&this._children.splice(i,1),this._children.splice(t,0,e),this._needsRender=!0},t.addGroup=function(e){(0,eh.h)(!this._groups.has(e),'Layer already have group with id "'+e+'"');var t=document.createElementNS(eI,"g");this._groups.set(e,{id:e,element:t,elementCopy:t.cloneNode()}),this._needsRender=!0},t.removeGroup=function(e){var t=e.id,i=e.removed;(0,eh.h)(this._groups.has(t),'Layer does not have group with id "'+t+'"'),this._nodesToRemove.add(this._groups.get(t));for(var n=0;n<i.length;n++){var r=i[n];"group"===r.type&&((0,eh.h)(this._groups.has(r.id),'Layer does not have group with id "'+r.id+'"'),this._groups.delete(r.id))}this._needsRender=!0},t._needsFullRender=function(e){if(e===ei._.QUICK)return!1;if(this._needsRender||e===ei._.FULL&&this._camera.zoom!==this._renderedZoom)return!0;var t=this._computeHalfSvgWorldSize(),i={minX:this._renderedCenter.x-t.x,maxX:this._renderedCenter.x+t.x,minY:this._renderedCenter.y-t.y,maxY:this._renderedCenter.y+t.y},n=this._computeHalfViewportSize(),r=!U(i,{minX:this._camera.worldCenter.x-n.x,maxX:this._camera.worldCenter.x+n.x,minY:this._camera.worldCenter.y-n.y,maxY:this._camera.worldCenter.y+n.y}),o=Math.abs(this._renderedZoom-this._camera.zoom);return r||o>=2},t._fullRender=function(e){var t=this;(0,eh.h)(!this._worldOptions.cycledY,"Y-cycled projections are not supported"),this._setSvgSizeValues(),this._setSvgAttributes();var i=this._getRenderVariables(e);this._setWillChange(!1),this._needsRender=!1,this._renderedZoom=this._camera.zoom,this._renderedCenter=this._camera.worldCenter,this._fullWorldRendered=i.fullWorldVisible,this._zoomOfAdjustedStoke=this._camera.zoom,this._lastTimeStrokeAdjusted=performance.now(),this._positionZeroWorld(),this._dataSource.groups.forEach(function(e){(0,eh.h)(t._groups.has(e.id),'Layer does not have group with id "'+e.id+'"');var n=t._groups.get(e.id),r=n.element,o=n.elementCopy;r.setAttribute("opacity",String(e.style.opacity)),o.setAttribute("opacity",String(e.style.opacity)),t._renderChildren(e.children,r,o,i)})},t._renderChildren=function(e,t,i,n){for(var r,o=null,a=null,s=e.sort(function(e,t){return t.style.zIndex-e.style.zIndex}),u=0;u<s.length;u++)r=this,function(e){var u=s[e],l=void 0,c=void 0;switch(u.type){case"group":(0,eh.h)(r._groups.has(u.id),'Layer does not have group with id "'+u.id+'"');var d=r._groups.get(u.id);l=d.element,c=d.elementCopy;break;case"feature":if((0,eY.uT)(u))return;var h=r._children.findIndex(function(e){return e.id===u.id});if(-1===h)return;var _=r._children[h];_.renderer.render(n),l=_.element,c=_.elementCopy}r._insertElementBefore(t,l,o),r._insertElementBefore(i,c,a),o=l,a=c}(u)},t._getCachedChildren=function(e){var t;return e[t=this._elementChildrenKey]||(e[t]=new Set)},t._insertElementBefore=function(e,t,i){var n=this._getCachedChildren(e);n.has(t)||(e.insertBefore(t,i),n.add(t))},t._removeElement=function(e){var t=e.parentNode;t&&(t.removeChild(e),this._getCachedChildren(t).delete(e))},t._adjustStrokeWidthAndDash=function(e){var t=performance.now(),i=t-this._lastTimeStrokeAdjusted;Math.abs(this._zoomOfAdjustedStoke-this._camera.zoom)>=.5&&i>250?(this._setWillChange(!1),this._zoomOfAdjustedStoke=this._camera.zoom,this._lastTimeStrokeAdjusted=t,this._children.forEach(function(t){t.renderer.adjustStrokeWidthAndDash(50,e)})):this._setWillChange(!0)},t._cleanupNodesToRemove=function(){var e=this;0!==this._nodesToRemove.size&&(this._nodesToRemove.forEach(function(t){e._removeElement(t.element),e._removeElement(t.elementCopy)}),this._nodesToRemove.clear())},t._getSvgPixelBBox=function(){var e=es.B.worldToPixels(this._camera.worldCenter,this._camera.zoom);return{minX:e.x-this._halfSvgSize.x,maxX:e.x+this._halfSvgSize.x,minY:e.y-this._halfSvgSize.y,maxY:e.y+this._halfSvgSize.y}},t._getClippingWindow=function(e){var t=q(e,eJ),i=t.minX,n=t.maxX,r=t.minY,o=t.maxY,a=es.B.worldToPixels(this._camera.worldCenter,this._camera.zoom),s=Y.sub({x:i,y:r},a);return[Y.sub({x:i,y:o},a),s,Y.sub({x:n,y:r},a),Y.sub({x:n,y:o},a)]},t._positionZeroWorld=function(e){if(void 0===e&&(e=1),"linear"!==this.type){(0,eh.h)(!this._worldOptions.cycledY,"Y-cycled projections are not supported");var t=this._worldOptions.cycledX?es.B.moveCloseToCenter(this._renderedCenter,this._camera.worldCenter):this._renderedCenter,i=this._camera,n=i.zoom,r=i.azimuth,o=i.tilt,a=es.B.worldToRelativePixels(t,n),s=es.B.worldToRelativePixels(this._camera.worldCenter,n),u=Y.sub(a,s),l=Y.sub(this._halfSize,this._halfSvgSize),c="translate3d("+u.x+"px, "+u.y+"px, 0px)",d=["translate3d("+l.x+"px, "+l.y+"px, 0px)","rotateX("+o+"rad)","rotateZ("+r+"rad)",""+c,"scale("+e+")"];this._svg.style.setProperty("transform",d.join(" "))}},t._clearWorldCopies=function(){for(var e=this._svg.querySelectorAll("g[data-world-copy]"),t=0;t<e.length;t++)this._svg.removeChild(e[t]);this._renderedWorldCopies.clear()},t._renderWorldCopies=function(e,t){void 0===t&&(t=!1),"linear"!==this.type&&this._worldOptions.cycledX&&(t&&this._clearWorldCopies(),this._fullWorldRendered&&this._makeMissingWorldCopies(e))},t._makeMissingWorldCopies=function(e){(0,eh.h)(!this._worldOptions.cycledY,"Y-cycled projections are not supported");for(var t=es.B.getWorldPixelSize(e),i=0,n=[-1,1].concat((0,ee._)(this._getVisibleWorlds()));i<n.length;i++){var r=n[i];if(0!==r&&!this._renderedWorldCopies.has(r)){var o=document.createElementNS(eI,"g");if(o.setAttribute("data-world-copy",String(r)),"transformed"===this.type){var a=this._halfSvgSize.x+t*r;o.setAttribute("transform","translate("+a+", "+this._halfSvgSize.y+")")}o.appendChild(this._multiWorldsSource.cloneNode(!0)),this._svg.appendChild(o),this._renderedWorldCopies.add(r)}}},t._getVisibleWorlds=function(){var e=this._computeHalfViewportSize().x+e$,t=this._camera.worldCenter;return this._dataSource.adhocEnabledExtraWorldCopies&&(e+=2),ek(t.x-e,t.x+e)},t._getRenderVariables=function(e){var t,i,n,r,o,a,s,u=es.B.getWorldPixelSize(this._camera.zoom),l=this._getSvgPixelBBox(),c=(t=this._camera.zoom,i=l.minX,n=l.maxX,r=l.minY,o=l.maxY,a=es.B.pixelsToWorld({x:i,y:o},t),s=es.B.pixelsToWorld({x:n,y:r},t),{minX:a.x,maxX:s.x,minY:a.y,maxY:s.y}),d=c.minX<=-1&&c.maxX>=1;return{pixelCenter:es.B.worldToRelativePixels(this._camera.worldCenter,this._camera.zoom),zoom:this._camera.zoom,worldSize:u,halfWorldSize:u/2,clippingWindow:this._getClippingWindow(l),clippingPadding:50,pointFilterBox:1/u,fullWorldVisible:d,viewportWorldsTranslations:e.map(function(e){return{x:2*e,y:0}}),svgBBox:c,worldOptions:this._worldOptions,rendererType:this.type,camera:this._camera,fov:this._fov,size:this._size}},t._setWillChange=function(e){this._willChangeFlag!==e&&(this._willChangeFlag=e,this._svg.style.setProperty("will-change",e?"transform":""))},t._computeHalfViewportSize=function(){var e=es.B.convertPixelSizeToWorldSize(this._halfSize,this._camera.zoom);return Y.applyFunction(e,Math.abs,e),e},t._computeHalfSvgWorldSize=function(){var e=es.B.convertPixelSizeToWorldSize(this._halfSvgSize,this._renderedZoom);if(Y.applyFunction(e,Math.abs,e),this._camera.tilt){var t=Math.cos(this._tiltRange.max),i={x:this._camera.azimuth?t:1,y:t};Y.mulv(e,i,e)}if(this._camera.azimuth){var n=(0,ec.d)(-e0,0,2*Math.PI)<this._camera.azimuth||this._camera.azimuth<e0,r=this._isSvgFixedAtAzimuth||n?.65:.45;Y.muln(e,r,e)}return e},t._setSvgSizeValues=function(){var e=Y.muln(this._size,2);if(this._camera.tilt){var t={x:1,y:1/Math.cos(this._tiltRange.max)};Y.mulv(e,t,e)}if(this._camera.azimuth){var i=Y.length(e);e={x:i,y:i},this._isSvgFixedAtAzimuth=!0}else this._isSvgFixedAtAzimuth=!1;this._svgSize=e,this._halfSvgSize=Y.divn(e,2)},t._setSvgAttributes=function(){this._svg.setAttribute("width",String(this._svgSize.x)),this._svg.setAttribute("height",String(this._svgSize.y)),this._svg.setAttribute("viewBox","0 0 "+this._svgSize.x+" "+this._svgSize.y),"transformed"===this.type&&this._zeroWorld.setAttribute("transform","translate("+this._halfSvgSize.x+", "+this._halfSvgSize.y+")")},(0,I._)(e,[{key:"children",get:function(){return this._children.slice()}}]),e}(),e2=0,e3=function(e){function t(t){var i,n=t.element,r=t.size,o=t.camera,a=t.dataSource,s=t.tiltRange,u=t.worldOptions;return(i=e.call(this)||this)._layerId=String(e2++),i._renderers=[],i._featuresDescriptions=new Map,i._fov=ep,i._featureToRenderer=new Map,i._needReconcileRenderers=!0,i.__removeExtraChildrenFromRenderer=function(e,t){for(var n=e.children,r=t;r<n.length;r++)e.removeFeature(n[r]),i._featureToRenderer.delete(n[r].id)},i._size=r,i._camera=o,i._element=n,i._tiltRange=s,i._worldOptions=u,(0,eh.h)(a instanceof eY.m5,"Data source should be instance of FeaturesDataSource"),i._dataSource=a,i._dataSourcesSubscriptions=a.group().on("groupAdded",function(e){return i._addGroup(e)}).on("groupRemoved",function(e){return i._removeGroup(e)}).on("featureAdded",function(e){return i._addFeatureById(e)}).on("featureRemoved",function(e){return i._removeFeatureById(e)}).on("featureUpdated",function(e){return i._updateFeatureById(e)}).on("featureMovedToGroup",function(){return i._renderers.forEach(function(e){e.needsRender()})}),i._dataSource.groups.forEach(function(e){var t=e.id;t!==eY.oR&&i._addGroup(t)}),i._dataSource.features.forEach(function(e){var t=e.id;return i._addFeatureById(t)}),i}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this._featuresDescriptions.clear(),this._renderers.forEach(function(e){return e.destroy()}),this._dataSourcesSubscriptions.offAll()},i.update=function(e,t){this._camera=e,this._fov=t,this._renderers.forEach(function(i){return i.update(e,t)})},i.resize=function(e){this._size=e,this._updatePerspective(),this._renderers.forEach(function(t){return t.resize(e)})},i.render=function(e){this._updatePerspective(),this._needReconcileRenderers&&this._reconcileRenderers(),this._renderers.forEach(function(t){return t.render(e)})},i.findObjectInPosition=function(e){var t=(0,ed.Rv)(e,(0,p._)({},this._camera,{size:this._size,container:this._element,fov:this._fov}));if(!isFinite(t.x)||!isFinite(t.y))return null;var i=document.elementFromPoint(t.x,t.y);if(!i)return null;var n=i.getAttribute("data-feature-id");return null!==n&&this._dataSource.hasFeatureWithId(n)&&this._element.contains(i)?{type:"feature",feature:this._dataSource.getFeatureById(n)}:null},i.findFeatureByElement=function(){return null},i._addGroup=function(e){this._renderers.forEach(function(t){return t.addGroup(e)})},i._removeGroup=function(e){this._renderers.forEach(function(t){return t.removeGroup(e)})},i._addFeatureById=function(e){var t=this._dataSource.getFeatureById(e);if(!(0,eY.uT)(t)){var i=t.feature,n=new ej(i,t.style,t.bbox),r=new eq(this._layerId,i.id,n),o={id:i.id,element:r.element,elementCopy:r.elementCopy,renderer:r};this._featuresDescriptions.set(i.id,o),this._needReconcileRenderers=!0}},i._removeFeatureById=function(e){this._featuresDescriptions.has(e)&&(this._featuresDescriptions.delete(e),this._needReconcileRenderers=!0)},i._updateFeatureById=function(e){if(this._featuresDescriptions.has(e)){var t,i=this._featuresDescriptions.get(e),n=this._dataSource.features.get(e),r=n.feature,o=n.style,a=n.bbox,s=i.renderer.model;i.renderer.setModel(new ej(r,o,a)),s.style.zIndex!==o.zIndex&&(this._needReconcileRenderers=!0),null==(t=this._featureToRenderer.get(e))||t.needsRender()}},i._updatePerspective=function(){var e=(0,ed.Os)(this._size.y,this._fov);this._perspective!==e&&(this._perspective=e,this._element.style.perspective=""+e+"px")},i._reconcileRenderers=function(){for(var e=Array.from(this._featuresDescriptions.values()).sort(function(e,t){var i=e.renderer.model.style.zIndex,n=t.renderer.model.style.zIndex,r=void 0!==i,o=void 0!==n;return r&&o?i-n:r?1:o?-1:0}),t=[],i=0,n=0,r=0;r<e.length;r++){var o=e[r],a="Point"===o.renderer.model.geometry.type?"linear":"transformed",s=this._renderers[i],u=t[t.length-1],l=u&&u.type===a,c=s&&s.type===a;l||(c?(t.push(s),this.__removeExtraChildrenFromRenderer(s,n),u=s,i++):(u=this._makeRenderer(a),t.push(u)),n=0);var d=this._featureToRenderer.get(o.id);d&&d!==u&&d.removeFeature(o),u.addFeatureAt(o,n),n++,this._featureToRenderer.set(o.id,u)}var h=t[t.length-1];h&&this.__removeExtraChildrenFromRenderer(h,n);for(var _=i;_<this._renderers.length;_++){for(var m=0;m<this._renderers[_].children.length;m++)this._featureToRenderer.delete(this._renderers[_].children[m].id);this._renderers[_].destroy()}this._renderers=t,t.forEach(function(e){return e.needsRender()}),this._needReconcileRenderers=!1},i._makeRenderer=function(e){return new e1(e,{dataSource:this._dataSource,element:this._element,size:this._size,camera:this._camera,worldOptions:this._worldOptions,tiltRange:this._tiltRange})},(0,I._)(t,[{key:"state",get:function(){return eF}}]),t}((0,O.GA)().with()),e5=i(89651),e4=i(62462),e6=i(78434),e9=Symbol("__hotspotCookieKey"),e7=function(e){function t(t,i){var n;return(n=e.call(this)||this)._props=i,n.state={tilesLoaded:0,tilesReady:0,tilesTotal:0,borderLoaded:0,borderReady:0,borderTotal:0,graphicsReady:0,graphicsTotal:0},n.__fov=ep,n.__customLayer=new t({requestRender:i.requestRender,size:i.size,element:i.element,camera:i.camera,worldOptions:i.worldOptions,projection:i.projection,options:i.options}),n.__camera=i.camera,n.__size=i.size,n}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){null==this.__customLayer.destroy||this.__customLayer.destroy.call(this.__customLayer)},i.findFeatureByElement=function(){return null},i.findObjectInPosition=function(e){var t,i=this,n=null==this.__customLayer.findObjectInPosition?void 0:this.__customLayer.findObjectInPosition.call(this.__customLayer,{worldCoordinates:e,get screenCoordinates(){return(0,ed.Rv)(e,(0,p._)({},i.__camera,{fov:i.__fov,size:i.__size,container:i._props.element}))}});return(t=n)&&t[e9]&&(n={type:"raw-hotspot",feature:{type:"Feature",id:n.id,geometry:n.geometry,cookie:n[e9],properties:n.properties}}),null!=n?n:null},i.update=function(e,t){this.__camera=e,this.__fov=t},i.resize=function(e){this.__size=e},i.render=function(e){this.__customLayer.render({size:this.__size,camera:(0,p._)({},e.camera,{fov:this.__fov}),get worlds(){return e.worlds}})},t}((0,O.GA)().with()),e8=new WeakMap,te=new Set([eP.K,eC,eV,e3]);e4.M.raster=function(e){return"markers"===e.type?eV:"features"===e.type||"geojson"===e.source?e3:eC};var tt=function(e){function t(t,i,n,r,o,a,s,u,l){var c;return(c=e.call(this)||this)._layerImplementationsById=new Map,c._dataSourceSubscriptions=[],c._fov=0,c._dataSources={},c._processingQueue=new ef.$7(ef.fv),c.element=(0,eR.E)(),c._layerElementMap=new WeakMap,c._createLayerImplementation=function(e){var t=c._dataSources[e.source];if(t instanceof e5.N)throw Error("Tile3dDataSource is not supported by raster engine");var i=e.implementation({source:c._getDataSourceType(t),type:e.type,effectiveMode:"raster"}),n=c.__createLayerElement(t,e.type),r={element:n,processingQueue:c._processingQueue,requestRender:c._requestRenderLoopUpdate,animateFirstScreen:c.animateFirstScreen,size:c._size,camera:c._camera,projection:c._projection,worldOptions:c._worldOptions,zoomRoundingRule:c._zoomRoundingRule,dataSource:t,options:e.options,tiltRange:c._tiltRange},o=te.has(i)?new i(r):new e7(i,r);if(c._layerElementMap.set(o,n),!(0,e6.il)(o))return(0,p._)({},e,{layer:o});if(t instanceof em.Nt)return c._createTileLayerImplementation(e,o,t);var a=o.group().on("requestRender",c._requestRenderLoopUpdate);return(0,p._)({},e,{layer:o,eventGroup:a})},c._destroyLayerImplementation=function(e){var t;c._removeLayerElementFromDom(e.layer),null==e.layer.destroy||e.layer.destroy.call(e.layer),null==(t=e.eventGroup)||t.offAll(),c._resetTileHotspotsLayer(e,null),e.tileSourceEventGroup&&e.tileSourceEventGroup.offAll()},c._requestRenderLoopUpdate=function(){return c.renderLoop.update()},c._emitHotspotsChanged=function(){return c._emit("hotspotsChanged")},c._onLayerStateChange=function(){var e=!0,t=!1,i=!0,n=!1;c._layerImplementationsById.forEach(function(r){var o,a,s,u,l=r.layer,c=e8.get(l),d=c.loaded;c.loaded=(null==(o=l.state)?void 0:o.tilesLoaded)===(null==(a=l.state)?void 0:a.tilesTotal),e=e&&c.loaded,!d&&c.loaded&&(t=!0);var h=c.ready;c.ready=(null==(s=l.state)?void 0:s.tilesReady)===(null==(u=l.state)?void 0:u.tilesTotal),i=i&&c.ready,!h&&c.ready&&(n=!0)}),c._emit("stateChanged"),e&&t&&c._emit("tilesLoaded"),i&&n&&c._emit("tilesReady")},c._size=t,c._camera=i,c._worldOptions=r,c._projection=o,c.renderLoop=n,c._zoomRoundingRule=s,c._tiltRange=l,c.animateFirstScreen=u,c._layers=[],c._renderLoopSubscriptions=c.renderLoop.on("render",c._render.bind((0,$._)(c))),c.setDataSources(a),c}(0,k._)(t,e);var i=t.prototype;return i.setDataSources=function(e){this._destroyDataSourceSubscriptions(),this._dataSources=(0,p._)({},e);for(var t=0,i=Object.keys(this._dataSources);t<i.length;t++){var n=i[t];this._dataSourceSubscriptions.push(this._dataSources[n].on("changed",this._requestRenderLoopUpdate))}},i.setLayers=function(e){var t=this,i=[];this._layerImplementationsById.forEach(function(e,t){return i.push(t)});for(var n=new Map,r=0;r<e.length;r++){var o=e[r];if(o.implementation({source:o.source,type:o.type,effectiveMode:"raster"})){var a,s=this._dataSources[o.source];(s instanceof em.Nt&&(null==(a=s.rasterSourceDescription)?void 0:a.type)===o.type||s instanceof eY.m5||"custom"===o.type)&&n.set(o.id,o)}}var u=(0,ev.B)(this._layerImplementationsById,n,this._createLayerImplementation,this._destroyLayerImplementation,function(){t._applyLayersOptions()},function(e,t){return e.source===t.source&&e.type===t.type&&e.originalImplementation===t.originalImplementation});this._layerImplementationsById=u.result,this._flattenLayers(),this._layerImplementationsById.forEach(function(e){var t,i,n,r,o=e.layer;e8.has(o)||e8.set(o,{ready:(null==(t=o.state)?void 0:t.tilesReady)===(null==(i=o.state)?void 0:i.tilesTotal),loaded:(null==(n=o.state)?void 0:n.tilesLoaded)===(null==(r=o.state)?void 0:r.tilesTotal)})}),this._applyLayersOptions(),this._addLayerElementsToDom(),(0!==u.created.length||0!==u.removed.length||!function(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}(i,e.map(function(e){return e.id})))&&(this._emit("stateChanged"),this.renderLoop.update())},i.getIndoorPlans=function(){return null},i.getVisibleObjects=function(){return null},i.getTile3dState=function(){return null},i.getLayerReadyState=function(e,t){var i=this._layerImplementationsById.get(e);if(i){if(t){var n=i.layer;switch(!0){case"tile"===t&&!(n instanceof eC):case"markers"===t&&!(n instanceof eV):case"features"===t&&!(n instanceof e3):return}}return i.layer.state}},i.destroy=function(){this.setLayers([]),this._destroyDataSourceSubscriptions(),this._renderLoopSubscriptions.offAll(),this._removeLayerElementsFromDom()},i.update=function(e,t){this._camera=e,this._fov=t,this._layers.forEach(function(i){return null==i.layer.update?void 0:i.layer.update.call(i.layer,e,t)}),this._requestRenderLoopUpdate()},i.resize=function(e){this._size=e,this._layers.forEach(function(t){return null==t.layer.resize?void 0:t.layer.resize.call(t.layer,e)}),this._requestRenderLoopUpdate()},i.findObjectInPosition=function(e){for(var t=this._layers.length-1;t>=0;t--){var i=this._layers[t],n=i.layer,r=i.implementation,o=r.id,a=r.source,s=null==n.findObjectInPosition?void 0:n.findObjectInPosition.call(n,e);if(s)return(0,p._)({layer:o,source:a},s)}return null},i.findObjectInPositionEx=function(e){for(var t={layers:[]},i=this._layers.length-1;i>=0;i--){var n=this._layers[i],r=n.layer,o=n.implementation,a=o.id,s=o.source,u=null==r.findObjectInPosition?void 0:r.findObjectInPosition.call(r,e);if(t.layers.push({layer:a,object:u&&(0,p._)({layer:a,source:s},u)}),u)break}return t},i.findFeatureByElement=function(e){for(var t=this._layers.length-1;t>=0;t--){var i=this._layers[t],n=i.layer,r=i.implementation,o=r.id,a=r.source,s=null==n.findFeatureByElement?void 0:n.findFeatureByElement.call(n,e);if(s)return(0,p._)({layer:o,source:a},s)}return null},i._flattenLayers=function(){var e=this;this._layers=[],this._layerImplementationsById.forEach(function(t){e._layers.push({layer:t.layer,implementation:t}),t.hotspots&&e._layers.push({layer:t.hotspots.layer,implementation:t})})},i.preloadHotspotsInPoint=function(e){this._layerImplementationsById.forEach(function(t){var i=t.hotspots;i&&i.layer.preloadHotspotsInPoint(e)})},i.preloadHotspotsForViewport=function(){this._layerImplementationsById.forEach(function(e){var t=e.hotspots;t&&t.layer.preloadHotspotsForViewport()})},i.setObjectFilters=function(e){},i.setInvisibleCollidingPrimitives=function(e){},i.setObjectHighlight=function(e){},i.setTileContentClippingGeometry=function(e){},i._createTileLayerImplementation=function(e,t,i){var n=this,r=t.group().on("stateChanged",this._onLayerStateChange).on("requestRender",this._requestRenderLoopUpdate),o=i.group(),a=(0,p._)({},e,{layer:t,eventGroup:r,tileSourceEventGroup:o});return o.on("sourceChanged",function(){n._resetTileHotspotsLayer(a,i.getHotspotTileDataSource())}),this._resetTileHotspotsLayer(a,i.getHotspotTileDataSource()),a},i._resetTileHotspotsLayer=function(e,t){if(!(!t&&!e.hotspots||t&&e.hotspots&&(0,em.PP)(e.hotspots.source,t))){if(e.hotspots&&(e.hotspots.eventGroup.offAll(),e.hotspots.layer.destroy(),e.hotspots=void 0),t){var i=new eP.K({element:this.__createLayerElement(t,"hotspot"),size:this._size,camera:this._camera,dataSource:t,processingQueue:this._processingQueue,worldOptions:this._worldOptions,zoomRoundingRule:this._zoomRoundingRule,tiltRange:this._tiltRange}),n=i.on("hotspotsChanged",this._emitHotspotsChanged).on("requestRender",this._requestRenderLoopUpdate);e.hotspots={layer:i,eventGroup:n,source:t}}this._flattenLayers()}},i._render=function(e){var t=this;t._processingQueue.pause();var i=(0,p._)({camera:this._camera,size:this._size,fov:this._fov,get worlds(){for(var n=t._size,r=(0,ed.k6)({x:0,y:0},(0,p._)({size:n},t._camera,{fov:t._fov})),o=es.B.getWorldPixelSize(this.camera.zoom),a=[],s=t._worldOptions.cycledX?Math.floor((o/2-r.x)/o):0,u=t._worldOptions.cycledX?Math.ceil((n.x-o/2-r.x)/o):0,l=0,c=s;c<=u;c+=1,l+=1)a.push({left:c*o+r.x-o/2,top:r.y-o/2,width:o,height:o});return a}},e);t._layers.forEach(function(e){return e.layer.render(i)}),this._processingQueue.resume()},i._removeLayerElementFromDom=function(e){var t;null==(t=this._layerElementMap.get(e))||t.remove()},i._removeLayerElementsFromDom=function(){for(var e=0,t=this._layers;e<t.length;e++){var i=t[e].layer;this._removeLayerElementFromDom(i)}},i._addLayerElementsToDom=function(){for(var e=new Map,t=0,i=this._layers;t<i.length;t++){var n=i[t].layer,r=this._layerElementMap.get(n);if(r){var o=this.element,a=e.get(o)||0,s=o.childNodes[a];r!==s&&o.insertBefore(r,s||null),e.set(o,a+1)}}},i._applyLayersOptions=function(){for(var e=0,t=this._layers;e<t.length;e++){var i=t[e],n=i.layer,r=i.implementation;null==n.setOptions||n.setOptions.call(n,r.options.raster);var o=this._layerElementMap.get(n);if(o){var a,s=(0,ec.q)(null!=(a=r.options.raster.opacity)?a:1,0,1);o.style.opacity=String(s)}}},i._destroyDataSourceSubscriptions=function(){for(var e=0,t=this._dataSourceSubscriptions;e<t.length;e++)t[e].offAll();this._dataSourceSubscriptions=[]},i._getDataSourceType=function(e){switch(!0){case e instanceof eY.m5:return"geojson";case e instanceof em.Nt:return"tile";default:return"none"}},i.__createLayerElement=function(e,t){var i=(0,eR.E)("ymaps3x0--layer");switch(!0){case"markers"===t:i.classList.add("ymaps3x0--marker-layer");break;case"hotspot"===t:case e instanceof eY.m5:i.classList.add("ymaps3x0--graphics-layer");break;case e instanceof em.Nt:i.classList.add("ymaps3x0--tile-layer")}return i},(0,I._)(t,[{key:"fov",get:function(){return ep}}]),t}((0,O.GA)().with());!function(e){e[e.INACTIVE=-1]="INACTIVE",e[e.PRIMARY=0]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.CTRL_PRIMARY=8]="CTRL_PRIMARY",e[e.CMD_PRIMARY=16]="CMD_PRIMARY"}(a||(a={}));var ti={windows:/Windows/,macos:/Macintosh/,ios:/iPad|iPod|iPhone/},tn={firefox:/Firefox/,chrome:/Chrome/},tr=new Map;function to(e,t){var i=(null==t?void 0:t.withoutCache)?void 0:tr.get(e);return void 0===i&&(i=RegExp(ti[e],"i").test(navigator.userAgent),tr.set(e,i)),i}var ta=/(\d+)/,ts=new Map;function tu(e,t){var i=(null==t?void 0:t.withoutCache)?void 0:ts.get(e);if(void 0===i){var n=RegExp(tn[e].source+"/"+ta.source,"i").exec(navigator.userAgent);i=!!n&&Number(n[1]),ts.set(e,i)}return!!i&&(null==t||!t.gte||i>=(null==t?void 0:t.gte))}function tl(){var e=to("ios"),t=tu("firefox")&&to("windows");return!e&&!t&&"PointerEvent"in window}var tc=function(e){function t(i,n,r){var o;return(o=e.call(this)||this)._suppressNextClickStartTs=0,o.destroyed=!1,o.state=a.INACTIVE,o._spots=[],o._onElementPointerDown=function(){if(void 0===t._owner)t._owner=(0,$._)(o);else if(t._owner!==(0,$._)(o))return;o.element.removeEventListener(o._eventMap.start,o._onElementPointerDown),document.addEventListener(o._eventMap.start,o._onDocumentPointerDown),document.addEventListener(o._eventMap.end,o._onPointerUp)},o._onDocumentPointerDown=function(e){if(t._owner===(0,$._)(o)){var i=0===o._spots.length;o.state=i?o._getEventState(e):o.state,o._handleAdd(e),o._emit("spotsAdded"),i&&o._emit("stateChanged")}},o._onPointerMove=function(e){t._owner===(0,$._)(o)&&(o._handleChange(e),o._spots.length>0&&o._emit("spotsChanged"))},o._onPointerUp=function(e){t._owner===(0,$._)(o)&&(o._handleRemove(e),0===o._spots.length?(document.removeEventListener(o._eventMap.start,o._onDocumentPointerDown),document.removeEventListener(o._eventMap.end,o._onPointerUp),o.element.addEventListener(o._eventMap.start,o._onElementPointerDown),t._owner=void 0,o._emit("spotsRemoved"),o.state=a.INACTIVE,o._emit("stateChanged")):o._emit("spotsRemoved"))},o._onClick=function(e){var t=Date.now();o._suppressNextClickStartTs+500>t&&(o._suppressNextClickStartTs=0,e.stopPropagation(),e.preventDefault())},o._onDragStart=function(e){e.stopPropagation(),e.preventDefault()},o.element=i,o._eventMap=n,o.options=r,o.element.style.touchAction="none",o.element.addEventListener(o._eventMap.start,o._onElementPointerDown),o.element.addEventListener("click",o._onClick,!0),o.element.addEventListener("dragstart",o._onDragStart),document.addEventListener(o._eventMap.move,o._onPointerMove),o}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this.destroyed||(this.element.removeEventListener(this._eventMap.start,this._onElementPointerDown),document.removeEventListener(this._eventMap.start,this._onDocumentPointerDown),document.removeEventListener(this._eventMap.move,this._onPointerMove),document.removeEventListener(this._eventMap.end,this._onPointerUp),this.element.removeEventListener("dragstart",this._onDragStart),this.element.removeEventListener("click",this._onClick,!0),this.element.style.touchAction="auto",this.destroyed=!0,t._owner!==this||(t._owner=void 0))},i.suppressNextClick=function(){this._suppressNextClickStartTs=Date.now()},i.suppressSelection=function(){},i._getEventState=function(e){return"undefined"!=typeof MouseEvent&&e instanceof MouseEvent?e.ctrlKey&&0===e.button?a.CTRL_PRIMARY:e.metaKey&&0===e.button&&to("macos")?a.CMD_PRIMARY:e.button:a.PRIMARY},(0,I._)(t,[{key:"spots",get:function(){return this._spots}},{key:"pointerPosition",get:function(){return this._spots.length>0?Y.avg(this._spots):this._getPointerPositionWithoutSpots()}}]),t}((0,O.GA)().with()),td={start:"pointerdown",move:"pointermove",end:"pointerup"};function th(e){var t=[];return e.forEach(function(e){t.push(e)}),t}var t_=function(e){function t(t,i){var n;return(n=e.call(this,t,td,i)||this)._spotMap=new Map,n._pointerPosition={x:0,y:0},n._suppressSelection=!1,n._onWheel=function(e){("boolean"!=typeof e.isTrusted||e.isTrusted)&&(n._pointerPosition={x:e.clientX,y:e.clientY})},document.addEventListener("wheel",n._onWheel,!0),document.addEventListener("pointercancel",function(){n._spotMap.clear(),n.state=a.INACTIVE,n._emit("stateChanged")}),n}(0,k._)(t,e);var i=t.prototype;return i.suppressSelection=function(){this._suppressSelection=!0},i.destroy=function(){document.removeEventListener("wheel",this._onWheel,!0),e.prototype.destroy.call(this)},i._handleAdd=function(e){var t,i=this;if(null==(t=this.options)||!t.filter(e)){this._spotMap.set(e.pointerId,{x:e.clientX,y:e.clientY}),this._spots=th(this._spotMap),this._pointerPosition={x:e.clientX,y:e.clientY};var n=e.target;if(n){var r=function(e){n.removeEventListener("pointerup",r),i._handleRemove(e)};n.addEventListener("pointerup",r)}}},i._handleChange=function(e){var t;(null==(t=this.options)||!t.filter(e))&&(this._suppressSelection&&1===this._spots.length&&e.preventDefault(),this._pointerPosition={x:e.clientX,y:e.clientY},this._spots.length>0&&this._spotMap.has(e.pointerId)&&(this._spotMap.set(e.pointerId,this._pointerPosition),this._spots=th(this._spotMap)))},i._handleRemove=function(e){var t;null!=(t=this.options)&&t.filter(e)||(this._spotMap.delete(e.pointerId),this._spots=th(this._spotMap),this._suppressSelection=!1)},i._getPointerPositionWithoutSpots=function(){return this._pointerPosition},t}(tc),tm={start:"touchstart",move:"touchmove",end:"touchend"},tf=function(e){function t(i,n){var r;return(r=e.call(this,i,tm,n)||this)._mouseCoords={x:0,y:0},r._holdingMouseButton=!1,r._onMouseDown=function(e){if(void 0===t._mouseOwner)t._mouseOwner=(0,$._)(r);else if(t._mouseOwner!==(0,$._)(r))return;r._mouseCoords={x:e.clientX,y:e.clientY};var i=r.state===a.INACTIVE;r.state=i?r._getEventState(e):r.state,r._holdingMouseButton=!0,document.addEventListener("mouseup",r._onMouseUp),r._emit("spotsAdded"),i&&r._emit("stateChanged")},r._onMouseMove=function(e){r._mouseCoords={x:e.clientX,y:e.clientY},t._mouseOwner===(0,$._)(r)&&r._holdingMouseButton&&r._emit("spotsChanged")},r._onMouseUp=function(){t._mouseOwner===(0,$._)(r)&&(t._mouseOwner=void 0,r._holdingMouseButton=!1,document.removeEventListener("mouseup",r._onMouseUp),r._emit("spotsRemoved"),r.state=a.INACTIVE,r._emit("stateChanged"))},r._onWheel=function(e){("boolean"!=typeof e.isTrusted||e.isTrusted)&&(r._mouseCoords={x:e.clientX,y:e.clientY})},r.element.addEventListener("mousedown",r._onMouseDown),document.addEventListener("mousemove",r._onMouseMove),r.element.addEventListener("wheel",r._onWheel),/ipad|iphone/i.test(navigator.userAgent)&&r.element.addEventListener("touchmove",function(e){var t;null!=(t=r.options)&&t.filter(e)||e.preventDefault()}),r}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this.destroyed||(this.element.removeEventListener("mousedown",this._onMouseDown),document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),this.element.removeEventListener("wheel",this._onWheel),e.prototype.destroy.call(this))},i._handleAdd=function(e){var t;null!=(t=this.options)&&t.filter(e)||(this._spots=tp(e.touches))},i._handleChange=function(e){if(null==(t=this.options)||!t.filter(e)){var t,i=this._spots.length;this._spots=tp(e.touches),this._spots.length<i?this._emit("spotsRemoved"):this._spots.length>i&&this._emit("spotsAdded")}},i._handleRemove=function(e){var t;null!=(t=this.options)&&t.filter(e)||(this._spots=tp(e.touches))},i._getPointerPositionWithoutSpots=function(){return this._mouseCoords},(0,I._)(t,[{key:"spots",get:function(){return 0!==this._spots.length?this._spots:this._holdingMouseButton?[this._mouseCoords]:[]}}]),t}(tc);function tp(e){for(var t=[],i=0;i<e.length;i++)t[i]={x:e[i].clientX,y:e[i].clientY};return t}var tv=new WeakMap;function tg(e,t){var i=tv.get(e);return(!i||i.destroyed)&&(i=tl()?new t_(e,t):new tf(e,t),tv.set(e,i)),i}!function(e){e[e.IDLE=0]="IDLE",e[e.DRAGGING_BEYOND_THRESHOLD=1]="DRAGGING_BEYOND_THRESHOLD",e[e.DRAGGING=2]="DRAGGING"}(s||(s={}));var ty={tremorPixels:3,listenToButtons:new Set([a.PRIMARY]),minSpotsCount:1},tS=function(e){function t(t,i){var n;return void 0===i&&(i={}),(n=e.call(this)||this)._state=0,n._startingPoint={x:0,y:0},n._dragOffset={x:0,y:0},n._pointerPosition={x:0,y:0},n._onSpotAdded=function(){if(!(n._device.spots.length<n._options.minSpotsCount)){var e=n._device.state;if(n._state<1&&n._options.listenToButtons.has(e)){var t=n._device.pointerPosition;n._state=1,n._startingPoint.x=t.x,n._startingPoint.y=t.y,n._dragOffset={x:0,y:0},n._pointerPosition=n._device.pointerPosition}else n._skip(n._device.pointerPosition)}},n._onSpotsChanged=function(){if(!(n._state<1)){var e=n._device.pointerPosition,t=n._dragOffset;n._dragOffset=Y.sub(e,n._startingPoint),n._pointerPosition=n._device.pointerPosition,n._state<=1&&Math.max(Math.abs(n._dragOffset.x),Math.abs(n._dragOffset.y))>n._options.tremorPixels?(n._emit("dragStart"),n._state=2,n._device.suppressSelection()):2!==n._state||Y.areEqual(t,n._dragOffset)||n._emit("dragMove")}},n._onSpotsRemoved=function(){n._device.spots.length<n._options.minSpotsCount?(n._emit("dragEnd"),2===n._state&&n._device.suppressNextClick(),n._state=0,n._dragOffset={x:0,y:0},n._pointerPosition={x:0,y:0}):n._skip(n._device.pointerPosition)},n._device=t,n._options=(0,p._)({},ty,i),n._deviceSubscription=n._device.on("spotsAdded",n._onSpotAdded).on("spotsChanged",n._onSpotsChanged).on("spotsRemoved",n._onSpotsRemoved),n}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this._deviceSubscription.offAll()},i._skip=function(e){if(this._state<2){this._startingPoint=e,this._pointerPosition=e;return}this._emit("dragEnd"),this._startingPoint=e,this._pointerPosition=e,this._emit("dragStart")},(0,I._)(t,[{key:"dragStartingPoint",get:function(){return this._startingPoint}},{key:"pointerPosition",get:function(){return this._pointerPosition}},{key:"dragOffset",get:function(){return 2===this._state?this._dragOffset:{x:0,y:0}}},{key:"isDragging",get:function(){return 0!==this._state}},{key:"points",get:function(){return this._device.spots.length}}]),t}((0,O.GA)().with()),tx=12*eo.Z,tE=function(e){function t(t){var i;return(i=e.call(this)||this)._scale=1,i._state=0,i._angle=0,i._angleDelta=0,i._panTiltDelta=0,i._initialTouchDistance=1,i._initialTouchesY=[0,0],i._initialDirection={x:0,y:0},i._device=t,i._deviceSubscription=i._device.on("spotsAdded",function(){2===i._device.spots.length&&(i._state=1,i._initialTouchDistance=tb(i._device.spots),i._initialTouchesY=[i._device.spots[0].y,i._device.spots[1].y],i._initialDirection=tz(i._device.spots),i._updateState())}).on("spotsChanged",function(){if(!(i._device.spots.length<=1)&&(i._updateState(),1===i._state)){var e=Math.abs(tb(i._device.spots)-i._initialTouchDistance),t=Math.abs(i._angle)>tx,n=e>=15,r=i._device.spots[0].y-i._initialTouchesY[0],o=i._device.spots[1].y-i._initialTouchesY[1],a=!t&&Math.sign(r)===Math.sign(o)&&Math.abs(r)>=5&&Math.abs(o)>=5&&e<10;(t||n||a)&&(i._state=2,i._initialTouchDistance=tb(i._device.spots),i._initialDirection=tz(i._device.spots),i._updateState(),i._emit(n||t?"pinchRotateStart":"panTiltStart"))}}).on("spotsRemoved",function(){i._device.spots.length<=1?(2===i._state&&i._emit("gestureEnd"),i._scale=1,i._angle=0,i._angleDelta=0,i._panTiltDelta=0,i._initialDirection={x:0,y:0},i._initialTouchDistance=0,i._initialTouchesY=[0,0]):i._updateState()}),i}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this._deviceSubscription.offAll()},i._updateState=function(){var e,t,i=this._device.spots,n=tb(i);this._scale=n?n/this._initialTouchDistance:1,this._angle=(e=tz(i),t=this._initialDirection,Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)),this._panTiltDelta=this._initialTouchesY[0]-i[0].y},i._getCorrectedAngle=function(){var e=Math.abs(this._angle)>tx;return!this._angleDelta&&e&&(this._angleDelta=-Math.sign(this._angle)*tx),this._angleDelta?this._angle+this._angleDelta:0},(0,I._)(t,[{key:"scale",get:function(){return 2===this._state?this._scale:1}},{key:"angle",get:function(){return 2===this._state?this._getCorrectedAngle():0}},{key:"panTiltDelta",get:function(){return 2===this._state?this._panTiltDelta:0}}]),t}((0,O.GA)().with());function tb(e){if(e.length<2)return 0;var t=Y.sub(e[0],e[1]);return Y.length(t)}function tz(e){return Y.sub(e[0],e[1])}!function(e){e[e.SCROLL_DOWN=-1]="SCROLL_DOWN",e[e.SCROLL_UP=1]="SCROLL_UP"}(u||(u={}));var tw=function(e){function t(t,i){var n;return(n=e.call(this)||this)._disabled=!1,n._onWheel=function(e){if(!(n._disabled||"boolean"==typeof e.isTrusted&&!e.isTrusted||(null==(t=n.options)?void 0:t.filter(e)))){e.preventDefault(),e.stopPropagation();var t,i=e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?1:40,r=!1;tu("firefox",{gte:90})&&e.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i=1),e.ctrlKey&&to("macos")&&tu("firefox")&&(i*=6),e.ctrlKey&&to("macos")&&tu("chrome",{gte:100})&&(i*=6,r=!0);var o=(r||void 0===e.wheelDeltaY?-e.deltaY:e.wheelDeltaY)*i*(e.shiftKey?.25:1);n._emit("wheel",o)}},n._element=t,n._element.addEventListener("wheel",n._onWheel,{passive:!1}),n.options=i,n}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this._element.removeEventListener("wheel",this._onWheel)},i.disable=function(){this._disabled=!0},i.enable=function(){this._disabled=!1},t}((0,O.GA)().with()),tT=i(94408),tR=(0,tT.u)("ease");function tC(e,t,i,n,r){void 0===r&&(r=tR);var o=n?es.B.worldToRelativePixels(Y.sub(n,e.worldCenter),e.zoom):null,a=tD(r,t-e.zoom,o);return e.animateForDuration(i,a)}function tM(e,t,i,n){if(void 0===n&&(n=tR),Y.areFuzzyEqual(t,Y.ORIGIN,1e-10))return{complete:Promise.resolve(),isRunning:!1,stop:function(){}};var r=(0,tT.u)(n);return e.animateForDuration(i,function(e,i,n){var o=Y.muln(t,r(i)-r(i-n)),a=Y.add(e.worldCenter,o);return(0,p._)({},e,{worldCenter:a})})}function tA(e,t,i,n,r){var o,a,s,u,l;return void 0===r&&(r=tR),1e-10>Math.abs(i-e.zoom)?tM(e,Y.sub(t,e.worldCenter),n,r):(void 0===(o=r)&&(o=tR),a=e.worldCenter,s={x:0,y:0},u={x:!1,y:!1},l=tD(o,i-e.zoom,s),e.animateForDuration(n,function(n,r,o){if(1===r)return(0,p._)({},n,{worldCenter:t,zoom:i});var c=es.B.convertPixelSizeToWorldSize(e.size,n.zoom),d={x:!e.worldOptions.cycledX&&c.x>2,y:!e.worldOptions.cycledY&&Math.abs(c.y)>2};if(!u.x&&!d.x){var h=tL(t,i,a,n.zoom).x;s.x=h,u.x=!0}if(!u.y&&!d.y){var _=tL(t,i,a,n.zoom).y;s.y=_,u.y=!0}return l(n,r,o)}))}function tD(e,t,i){var n=(0,tT.u)(e);return function(e,r,o){var a=e.zoom+t*(n(r)-n(r-o));if(!i)return(0,p._)({},e,{zoom:a});var s=Y.sub(es.B.convertPixelSizeToWorldSize(i,e.zoom),es.B.convertPixelSizeToWorldSize(i,a)),u=Y.add(e.worldCenter,s);return(0,p._)({},e,{worldCenter:u,zoom:a})}}function tL(e,t,i,n){var r=t-n,o=Y.sub(e,i),a=Y.muln(o,Math.sign(r)/(Math.pow(2,Math.abs(r))-1)),s=Y.add(r>0?e:i,a);return es.B.worldToRelativePixels(Y.sub(s,i),n)}function tP(e,t,i,n,r){void 0===r&&(r=tR);var o=(0,tT.u)(r);return e.animateForDuration(n,function(e,n,r){if(1===n)return(0,p._)({},e,{azimuth:i});var a=e.azimuth+t*(o(n)-o(n-r));return(0,p._)({},e,{azimuth:a})})}function tF(e,t,i,n){void 0===n&&(n=tR);var r=t-e.tilt,o=(0,tT.u)(n);return e.animateForDuration(i,function(e,i,n){if(1===i)return(0,p._)({},e,{tilt:t});var a=e.tilt+r*(o(i)-o(i-n));return(0,p._)({},e,{tilt:a})})}function tI(e,t,i){var n=t.zoom,r=t.azimuth,o=es.B.getScale(n,i),a=Y.muln(e,o-1);return Y.rotate(es.B.convertPixelSizeToWorldSize(a,i,a),r)}var tk=function(e){function t(t,i,n,r){var o;return(o=e.call(this)||this)._deltaAccumulator=0,o._zoomPointCenterOffset=Y.ORIGIN,o._onWheel=function(e){var t=Date.now();o._deltaAccumulator=e;var i=o.zoomDuration;if(o._updateWheelTrend(e)&&(!o._state||!(t-o._state.startTs<i))){o._zoomPointCenterOffset=Y.sub(o._zoomPointSource(),Y.divn(o._map.size,2));var n=Math.sign(o._deltaAccumulator);o._deltaAccumulator=0;var r=o._computeNewState(o._state,t,n);if(r){var a=!o._state;o._state=r,a&&o._emit("zoomStart")}o._state&&!o.isInAction&&(o._animation=o._map.animate(o._animationStep),o._animation.complete.finally(function(){return o._emit("zoomEnd")}))}},o._animationStep=function(e){var t=tO(o._state,Date.now()),i=t.zoom;if(t.dt>=o._state.duration+50&&(o._animation.stop(),o._animation=void 0,o._state=void 0,o._currentWheelTrend=void 0),i===e.zoom)return e;var n=tI(o._zoomPointCenterOffset,e,i),r=Y.add(e.worldCenter,n);return(0,p._)({},e,{worldCenter:r,zoom:i})},o._map=t,o._device=i,o._zoomPointSource=n,o.zoomDuration=r,o._init(),o}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this._suspend()},i.enable=function(){this._init()},i.disable=function(){this._suspend()},i._init=function(){this._deviceSubscription||(this._deviceSubscription=this._device.on("wheel",this._onWheel))},i._suspend=function(){this._animation&&this._animation.isRunning&&this._animation.stop(),this._deviceSubscription&&(this._deviceSubscription.offAll(),this._deviceSubscription=void 0)},i._computeNewState=function(e,t,i){var n=e?tO(e,t).zoom:this._map.zoom,r=n+i;if(e&&(r=(0,ec.q)(r,e.startZoom-4,e.startZoom+4)),(r=Number((r=Math.round(r=(0,ec.q)(r,this._map.zoomRange.min,this._map.zoomRange.max))).toFixed(2)))!==n)return{startZoom:n,targetZoom:r,startTs:t,duration:this.zoomDuration}},i._updateWheelTrend=function(e){var t=this._currentWheelTrend,i=Math.sign(e);return!(1e-10>Math.abs(i))&&(this._currentWheelTrend=i,!t||i===t)},(0,I._)(t,[{key:"isInAction",get:function(){return void 0!==this._animation&&this._animation.isRunning}}]),t}((0,O.GA)().with());function tO(e,t){var i=t-e.startTs,n=(0,ec.q)(i/e.duration,0,1);return{zoom:e.startZoom+(e.targetZoom-e.startZoom)*n,dt:i}}var tB=function(e){function t(t,i,n){var r;return(r=e.call(this)||this)._wheelAccumulator=0,r._zoomPointCenterOffset=Y.ORIGIN,r._deltaZoom=0,r._prevFrameTimestamp=0,r._onWheel=function(e){r._wheelAccumulator+=e,r._zoomPointCenterOffset=Y.sub(r._zoomPointSource(),Y.divn(r._map.size,2)),r._animation||(r._prevFrameTimestamp=Date.now(),r._animation=r._map.animate(r._animationStep),r._animation.complete.finally(function(){clearTimeout(r._zoomEndTimer),r._zoomEndTimer=window.setTimeout(function(){r._emit("zoomEnd"),r._zoomEndTimer=void 0})}),clearTimeout(r._zoomEndTimer),r._zoomEndTimer=void 0,r._emit("zoomStart"))},r._animationStep=function(e){r._wheelAccumulator&&(Math.sign(r._wheelAccumulator)!==Math.sign(r._deltaZoom)&&(r._deltaZoom=0),r._deltaZoom+=(t=r._wheelAccumulator,i=Math.min(1,1/Math.abs(5.5*Math.abs(r._deltaZoom)-1)),Math.sign(t)*(0,ec.q)(Math.abs(t)*i/600,.005,2)),r._wheelAccumulator=0);var t,i,n,o=Date.now();if(o-r._prevFrameTimestamp>400||.03>=Math.abs(r._deltaZoom)){var a=e.zoom,s=(0,ec.q)(a+r._deltaZoom,r._map.zoomRange.min,r._map.zoomRange.max);r._deltaZoom=0,r._animation.stop(),r._animation=void 0;var u=tI(r._zoomPointCenterOffset,e,s),l=Y.add(e.worldCenter,u);return(0,p._)({},e,{worldCenter:l,zoom:s})}n=Math.abs(r._deltaZoom)>.12?.25*r._deltaZoom:.03*Math.sign(r._deltaZoom),r._deltaZoom-=n;var c=(0,ec.q)(e.zoom+n,r._map.zoomRange.min,r._map.zoomRange.max),d=tI(r._zoomPointCenterOffset,e,c),h=Y.add(e.worldCenter,d);return r._prevFrameTimestamp=o,(0,p._)({},e,{worldCenter:h,zoom:c})},r._map=t,r._device=i,r._zoomPointSource=n,r._init(),r}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this._suspend()},i.enable=function(){this._init()},i.disable=function(){this._suspend()},i._init=function(){this._deviceSubscription||(this._deviceSubscription=this._device.on("wheel",this._onWheel))},i._suspend=function(){this._animation&&this._animation.isRunning&&this._animation.stop(),this._deviceSubscription&&(this._deviceSubscription.offAll(),this._deviceSubscription=void 0)},(0,I._)(t,[{key:"isInAction",get:function(){return void 0!==this._animation&&this._animation.isRunning}}]),t}((0,O.GA)().with()),tj=Math.cos(Math.PI/6),tW=(0,tT.u)("ease-out"),tZ=function(){function e(){this._history=[]}var t=e.prototype;return t.push=function(e){this._history.push({position:e,ts:Date.now()}),this._history.length>=30&&this._history.shift()},t.computeMovement=function(){var e=Date.now(),t=this._history.filter(function(t){return t.ts>=e-500});if(t.length<2||e-t[t.length-1].ts>=100)return null;var i=Y.sub(t[t.length-2].position,t[t.length-1].position);if(Y.areFuzzyEqual(i,Y.ORIGIN,2))return null;Y.normalize(i,i);for(var n=0,r=t.length-1;r>=1;r--){var o=Y.sub(t[r-1].position,t[r].position),a=Y.length(o);if(Y.dot(o,i)/a<=tj)break;n+=a/Math.log2(2+(e-t[r].ts)/500)}return Y.muln(i,Math.min(n,500))},e}(),tG=function(e){function t(t,i){var n;return(n=e.call(this)||this)._map=t,n._dragger=i,n._dragSubscription=n._initDrag(),n}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this._stopAnimationIfAny(),this._stopAllSubscriptions()},i.enable=function(){this._dragSubscription||(this._dragSubscription=this._initDrag())},i.disable=function(){this._stopAnimationIfAny(),this._stopAllSubscriptions(),this._dragger.isDragging&&this._emit("dragEnd")},i._stopAllSubscriptions=function(){this._dragEndSubscription&&(this._dragEndSubscription.offAll(),this._dragEndSubscription=void 0),this._dragSubscription&&(this._dragSubscription.offAll(),this._dragSubscription=void 0)},i._initDrag=function(){var e=this,t=this._dragger.group();return t.on("dragStart",function(){if(!e._map.dragger.isDragging){var i={points:{length:e._dragger.points}};if(!e._emit("dragStart",i)){e._stopAnimationIfAny();var n=(0,ed.XA)(e._dragger.dragStartingPoint,e._map),r=new tZ;r.push(e._dragger.pointerPosition),t.on("dragMove",function(){return r.push(e._dragger.pointerPosition)}),e._dragAnimation=e._map.animate(function(t){return(0,p._)({},t,{worldCenter:e._computeWorldCenter(n)})}),e._dragEndSubscription=e._dragger.on("dragEnd",function(){e._dragEndSubscription.offAll();var t={worldCenter:e._computeWorldCenter(n),zoom:e._map.zoom,azimuth:e._map.azimuth,tilt:e._map.tilt};e._map.setCamera(t),e._stopAnimationIfAny();var i=r.computeMovement();if(!i){e._emit("dragEnd");return}var o=es.B.convertPixelSizeToWorldSize(i,e._map.zoom),a=Y.rotate(o,t.azimuth),s=Y.add(e._map.worldCenter,a);e._emit("inertiaStart",{targetPositionWcs:s}),e._dragAnimation=tM(e._map,a,400,tW),e._dragAnimation.complete.finally(function(){return e._emit("dragEnd")})})}}}),t},i._stopAnimationIfAny=function(){this._dragAnimation&&this._dragAnimation.isRunning&&this._dragAnimation.stop()},i._computeWorldCenter=function(e){var t=(0,ed.XA)(this._dragger.pointerPosition,this._map),i=Y.sub(t,e);return Y.sub(this._map.worldCenter,i)},(0,I._)(t,[{key:"isInAction",get:function(){return void 0!==this._dragAnimation&&this._dragAnimation.isRunning}}]),t}((0,O.GA)().with()),tH=function(e){function t(t,i,n){var r;return(r=e.call(this)||this)._isEnabled=!1,r._onDblClick=function(){r._zoomOn(1)},r._onRightDblClick=function(){r._zoomOn(-1)},r._map=t,r._zoomDuration=i,r._zoomPointSrc=n,r._init(),r}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this._suspend()},i.enable=function(){this._init()},i.disable=function(){this._suspend()},i._init=function(){this._isEnabled||(this._map.events.on("dblclick","any",this._onDblClick),this._map.events.on("rightdblclick","any",this._onRightDblClick),this._isEnabled=!0)},i._suspend=function(){this._isEnabled&&(this._map.events.off("dblclick","any",this._onDblClick),this._map.events.off("rightdblclick","any",this._onRightDblClick)),this._animation&&this._animation.isRunning&&this._animation.stop(),this._isEnabled=!1},i._zoomOn=function(e){var t=this;this._emit("zoomStart");var i=(0,ed.wm)(this._zoomPointSrc(),this._map);this._animation=tC(this._map,this._map.zoom+e,this._zoomDuration,i),this._animation.complete.finally(function(){return t._emit("zoomEnd")})},(0,I._)(t,[{key:"isInAction",get:function(){return void 0!==this._animation&&this._animation.isRunning}}]),t}((0,O.GA)().with()),tY=function(e){function t(t,i,n){var r;return(r=e.call(this)||this).rotationAllowed=!1,r.tiltAllowed=!1,r._onTiltStart=function(){if(!r.tiltAllowed)return r._onPinchRotateStart();r._stopAnimationIfAny(),r._emit("tiltStart"),r._map.updateCameraOptions({enabledTiltTransition:!0});var e=r._map.tilt,t=r._map.animate(function(t){var i=e+Math.PI*r._gestureRecognizer.panTiltDelta/r._map.size.y;return r._emit("tiltChanged"),(0,p._)({},t,{tilt:i})}),i=r._gestureRecognizer.on("gestureEnd",function(){i.offAll(),t.stop();var e=function(){r._emit("tiltEnd"),r._map.updateCameraOptions({enabledTiltTransition:!1})},n=r._map.tilt<r._tiltRange.min;if(n||r._map.tilt>r._tiltRange.max){var o=n?r._tiltRange.min:r._tiltRange.max;r._stopTiltAnimationIfAny(),r._tiltAnimation=tF(r._map,o,r._tiltDuration),r._tiltAnimation.complete.finally(e)}else e()})},r._onPinchRotateStart=function(){r._stopAnimationIfAny(),r._emit("zoomStart");var e=r._map.zoom,t=r._map.azimuth,i=r._map.animate(function(i){var n,o=e+Math.log2(r._gestureRecognizer.scale);n=r.rotationAllowed?t+r._gestureRecognizer.angle:i.azimuth;var a=i.worldCenter;if("zoomToCenter"===r._getZoomStrategy()){var s=tI(Y.sub(r._getZoomPointSrc(),Y.divn(r._map.size,2)),i,o);a=Y.add(i.worldCenter,s)}return r._emit("zoomChanged"),(0,p._)({},i,{worldCenter:a,azimuth:n,zoom:o})}),n=r._gestureRecognizer.on("gestureEnd",function(){n.offAll(),i.stop();var e=Math.round(r._map.zoom),o=[];if(r.rotationAllowed&&Math.abs(r._gestureRecognizer.angle)<r._rotateThreshold&&(r._stopRotateAnimationIfAny(),r._rotateAnimation=tP(r._map,-r._gestureRecognizer.angle,t,r._rotateDuration),o.push(r._rotateAnimation.complete)),r.snapToRound&&e!==r._map.zoom){if(r._stopZoomAnimationIfAny(),"zoomToCenter"===r._getZoomStrategy()){var a,s=(0,v._)(r._map.center,2),u=s[0],l=s[1];a=r._map.projection.toWorldCoordinates([u,l])}r._zoomAnimation=tC(r._map,e,r._zoomDuration,a),o.push(r._zoomAnimation.complete)}o.length?Promise.all(o).finally(function(){return r._emit("zoomEnd")}).catch(function(e){return(0,g.H)(e)}):r._emit("zoomEnd")})},r._map=t,r.snapToRound=n.snapToRound,r._zoomDuration=n.zoomDuration,r._rotateDuration=n.rotateDuration,r._rotateThreshold=n.rotateThreshold,r._tiltDuration=n.tiltDuration,r._tiltRange=n.tiltRange,r._getZoomPointSrc=n.getZoomPointSrc,r._getZoomStrategy=n.getZoomStrategy,r._gestureRecognizer=i,r._init(),r}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this._suspend()},i.enable=function(){this._init()},i.disable=function(){this._suspend()},i._init=function(){this._deviceSubscription||(this._deviceSubscription=this._gestureRecognizer.on("pinchRotateStart",this._onPinchRotateStart).on("panTiltStart",this._onTiltStart))},i._suspend=function(){this._deviceSubscription&&(this._deviceSubscription.offAll(),this._deviceSubscription=void 0),this._stopAnimationIfAny()},i._stopAnimationIfAny=function(){this._stopZoomAnimationIfAny(),this._stopRotateAnimationIfAny(),this._stopTiltAnimationIfAny()},i._stopZoomAnimationIfAny=function(){var e;(null==(e=this._zoomAnimation)?void 0:e.isRunning)&&(this._zoomAnimation.stop(),this._zoomAnimation=void 0)},i._stopRotateAnimationIfAny=function(){var e;(null==(e=this._rotateAnimation)?void 0:e.isRunning)&&(this._rotateAnimation.stop(),this._rotateAnimation=void 0)},i._stopTiltAnimationIfAny=function(){var e;(null==(e=this._tiltAnimation)?void 0:e.isRunning)&&(this._tiltAnimation.stop(),this._tiltAnimation=void 0)},(0,I._)(t,[{key:"isInAction",get:function(){var e,t,i;return!!((null==(e=this._zoomAnimation)?void 0:e.isRunning)||(null==(t=this._rotateAnimation)?void 0:t.isRunning)||(null==(i=this._tiltAnimation)?void 0:i.isRunning))}}]),t}((0,O.GA)().with()),tV=function(e){function t(t,i,n){var r;return(r=e.call(this)||this)._element=(0,eR.E)("ymaps3x0--magnifier"),r._backdropElement=(0,eR.E)("ymaps3x0--magnifier-backdrop"),r._onDragStart=function(){r._selectionInfo=r._computeSelectionInfo(),r._map.container.appendChild(r._element),document.body.appendChild(r._backdropElement),r._updateElementDimensions(r._selectionInfo),r._emit("selectionStart")},r._onDragMove=function(){r._selectionInfo&&(r._selectionInfo=r._computeSelectionInfo(),r._updateElementDimensions(r._selectionInfo))},r._onDragEnd=function(){r._selectionInfo&&(r._animation=r._zoomByCurrentSelection(r._selectionInfo),r._animation.complete.finally(function(){return r._emit("selectionEnd")}),r._cleanupSelection()),setTimeout(function(){return r._detachBackdrop()})},r._onKeyDown=function(e){"Escape"===e.key&&r._selectionInfo&&(r._emit("selectionEnd"),r._cleanupSelection())},r._backdropElement.addEventListener("contextmenu",function(e){return e.preventDefault()}),r._map=t,r._dragger=i,r.snapToRound=n,r._init(),r}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this._suspend(),this._detachElement()},i.enable=function(){this._init()},i.disable=function(){this._suspend()},i._init=function(){this._subscriptions||(document.addEventListener("keydown",this._onKeyDown),this._subscriptions=this._dragger.group().on("dragStart",this._onDragStart).on("dragMove",this._onDragMove).on("dragEnd",this._onDragEnd))},i._suspend=function(){this._animation&&this._animation.isRunning&&this._animation.stop(),document.removeEventListener("keydown",this._onKeyDown),this._subscriptions&&(this._subscriptions.offAll(),this._subscriptions=void 0),this._detachBackdrop()},i._cleanupSelection=function(){this._selectionInfo=void 0,this._detachElement()},i._detachElement=function(){this._element.parentNode&&this._element.parentNode.removeChild(this._element)},i._detachBackdrop=function(){this._backdropElement.parentNode&&this._backdropElement.parentNode.removeChild(this._backdropElement)},i._updateElementDimensions=function(e){var t=e.point,i=e.offset;this._element.style.left=""+Math.round(t.x)+"px",this._element.style.top=""+Math.round(t.y)+"px",this._element.style.width=""+Math.abs(Math.round(i.x))+"px",this._element.style.height=""+Math.abs(Math.round(i.y))+"px",this._element.style.transform="scale("+(i.x<0?-1:1)+", "+(i.y<0?-1:1)+")"},i._zoomByCurrentSelection=function(e){var t,i,n,r,o,a,s,u,l,c,d,h,_,m,f,p=(t=this._map,i=this.snapToRound,n=t.size,r=t.worldCenter,o=t.zoom,a=t.zoomRange,s=t.azimuth,u=t.tilt,l=t.fov,c=(0,ec.q)(Math.abs(e.offset.x),1e-10,n.x),d=(0,ec.q)(Math.abs(e.offset.y),1e-10,n.y),h=o+Math.min(Math.log2(n.x/c),Math.log2(n.y/d)),i&&(h=Math.floor(h)),_=e.point,m=Y.add(e.point,e.offset),f=Y.divn(Y.add(_,m),2),{zoom:Math.min(Math.max(h,a.min),a.max),center:(0,ed.wm)(f,{size:n,worldCenter:r,zoom:o,azimuth:s,tilt:u,fov:l})}),v=p.center,g=p.zoom;return tA(this._map,v,g,300)},i._computeSelectionInfo=function(){var e=this._map.container.getBoundingClientRect(),t=e.left,i=e.top;return{point:Y.sub(this._dragger.dragStartingPoint,{x:t,y:i}),offset:this._dragger.dragOffset}},(0,I._)(t,[{key:"isInAction",get:function(){return void 0!==this._animation&&this._animation.isRunning}}]),t}((0,O.GA)().with()),tN=function(e){function t(t,i,n,r){var o;return(o=e.call(this)||this)._isEnabled=!1,o._deviceStateChangedEventGroup=void 0,o._onClick=function(e){if(o._dragEventGroup){o._destroyDragEvents();return}var t=Y.create(e.x,e.y);o._dragEventGroup=o._initDragEvents(t),window.clearTimeout(o._clickTimer),o._clickTimer=window.setTimeout(function(){o._destroyDragEvents()},300)},o._map=t,o._device=i,o._dragger=n,o.zoomStrategy=r,o._init(),o}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this._suspend()},i.enable=function(){this._init()},i.disable=function(){this._suspend()},i._init=function(){this._isEnabled||(this._addListeners(),this._isEnabled=!0)},i._suspend=function(){this._isEnabled&&(window.clearTimeout(this._clickTimer),this._destroyDragEvents(),this._removeListeners(),this._animation&&this._animation.isRunning&&this._animation.stop(),this._isEnabled=!1)},i._addListeners=function(){var e,t=this;this._deviceStateChangedEventGroup||(this._deviceStateChangedEventGroup=this._device.on("stateChanged",function(){if(t._device.state===a.PRIMARY){e=t._device.pointerPosition;return}e&&7>=Y.length(Y.sub(e,t._device.pointerPosition))&&t._onClick(e),e=void 0}))},i._removeListeners=function(){this._deviceStateChangedEventGroup&&(this._deviceStateChangedEventGroup.offAll(),this._deviceStateChangedEventGroup=void 0)},i._initDragEvents=function(e){var t=this,i=this._dragger.group();return i.on("dragStart",function(){var n=t._dragger.dragStartingPoint;window.clearTimeout(t._clickTimer),Y.length(Y.sub(e,n))>20||(t._emit("zoomStart"),i.on("dragMove",function(){var i=t._dragger.pointerPosition,r=Y.sub(i,n);n=i;var o=r.y/t._map.size.y*10,a=t._map.zoom+o,s=t._map.zoomRange;if(!(a<s.min)&&!(a>s.max)){var u="zoomToCenter"===t.zoomStrategy?t._map.worldCenter:(0,ed.XA)(e,t._map);t._animation=tC(t._map,a,0,u)}}),i.on("dragEnd",function(){t._destroyDragEvents(),t._animation?t._animation.complete.finally(function(){return t._emit("zoomEnd")}):t._emit("zoomEnd")}))}),i},i._destroyDragEvents=function(){this._dragEventGroup&&(this._dragEventGroup.offAll(),this._dragEventGroup=void 0)},(0,I._)(t,[{key:"isInAction",get:function(){return void 0!==this._animation&&this._animation.isRunning}}]),t}((0,O.GA)().with()),tX=function(e){function t(t,i){var n;return(n=e.call(this)||this)._isRotateStartEmitted=!1,n._isTiltStartEmitted=!1,n._state={type:0},n.rotationAllowed=!0,n.tiltAllowed=!0,n._onDragStart=function(){0===n._state.type&&(n._state={type:1,animation:n._map.animate(n._onAnimationStep),previousPoint:n._dragger.dragStartingPoint})},n._onDragMove=function(){if(1!==n._state.type)return},n._onDragEnd=function(){1===n._state.type&&(n._state.animation.stop(),n._state={type:0},n._stopRotate(),n._stopTilt())},n._onAnimationStep=function(e){if(1!==n._state.type)return e;var t=Y.sub(n._state.previousPoint,n._dragger.pointerPosition);n._state.previousPoint=n._dragger.pointerPosition;var i=n.rotationAllowed?Math.PI*t.x/n._map.size.x:0,r=n.tiltAllowed?Math.PI*t.y/n._map.size.y:0;return i&&!n._isRotateStartEmitted&&(n._emit("rotateStart"),n._isRotateStartEmitted=!0),r&&!n._isTiltStartEmitted&&(n._emit("tiltStart"),n._isTiltStartEmitted=!0),(0,p._)({},e,{azimuth:e.azimuth+i,tilt:e.tilt+r})},n._map=t,n._dragger=i,n._draggerSubscription=n._dragger.on("dragStart",n._onDragStart).on("dragMove",n._onDragMove).on("dragEnd",n._onDragEnd),n.enable(),n}(0,k._)(t,e);var i=t.prototype;return i.enable=function(){this._state={type:0}},i.disable=function(){this.stop(),this._state={type:2}},i.stop=function(){1===this._state.type&&(this._state.animation.stop(),this._state={type:0},this._stopRotate(),this._stopTilt())},i.destroy=function(){this.disable(),this._draggerSubscription.offAll()},i._stopRotate=function(){this._isRotateStartEmitted&&(this._emit("rotateEnd"),this._isRotateStartEmitted=!1)},i._stopTilt=function(){this._isTiltStartEmitted&&(this._emit("tiltEnd"),this._isTiltStartEmitted=!1)},(0,I._)(t,[{key:"isInAction",get:function(){return 1===this._state.type}}]),t}((0,O.GA)().with()),tq=18*eo.Z,tU=function(e){function t(t,i){(n=e.call(this)||this)._subscriptions=[],n._zoomStrategy="zoomToPointer",n._userEnabled=[],n._mapEnabledRotation=!0,n._restoreDrag=function(){-1!==n._userEnabled.indexOf("drag")&&n.drag.enable()},n._deviceEventsFilter=function(e){var i=e.target,n=i instanceof Element?t.findFeatureByElement(i):null;return!!(null==n?void 0:n.feature.blockBehaviors)};var n,r=tg(t.container,{filter:n._deviceEventsFilter});n._map=t;var o="snap"===n._map.effectiveZoomRounding;n._zoomPointSrc=function(){if("zoomToCenter"===n._zoomStrategy){var e=(0,v._)(n._map.center,2),i=e[0],o=e[1],a=n._map.projection.toWorldCoordinates([i,o]);return(0,ed.k6)(a,n._map)}var s=r.pointerPosition,u=t.container.getBoundingClientRect();return{x:s.x-u.left,y:s.y-u.top}},n._leftButtonDragger=new tS(r),n._rightButtonDragger=new tS(r,{listenToButtons:new Set([a.SECONDARY])}),n.magnifier=new tV(t,n._rightButtonDragger,o),n._proxyEvents(n.magnifier,"magnifier",["selectionStart","selectionEnd"]),n.drag=new tG(t,n._leftButtonDragger),n._proxyEvents(n.drag,"drag",["dragStart","dragEnd"]),n.dblClick=new tH(t,200,n._zoomPointSrc),n._proxyEvents(n.dblClick,"dblClick",["zoomStart","zoomEnd"]),n.magnifier.disable();var s={zoomDuration:200,rotateDuration:200,rotateThreshold:tq,tiltDuration:200,getZoomStrategy:function(){return n._zoomStrategy},getZoomPointSrc:n._zoomPointSrc,snapToRound:o,tiltRange:n._map.tiltRange};n._twoFingersGesture=new tE(r),n.pinchZoom=new tY(t,n._twoFingersGesture,s),n._proxyEvents(n.pinchZoom,"pinchZoom",["zoomStart","zoomEnd"]),n._proxyEvents(n.pinchZoom,"panTilt",["tiltStart","tiltEnd"]);var u=n.pinchZoom.on("zoomStart",function(){"zoomToCenter"===n._zoomStrategy&&n.drag.disable()}).on("zoomEnd",n._restoreDrag).on("tiltStart",function(){return n.drag.disable()}).on("tiltEnd",n._restoreDrag);n._subscriptions.push(u),n._wheelDevice=new tw(n._map.container,{filter:n._deviceEventsFilter}),n._roundScrollZoom=new tk(n._map,n._wheelDevice,n._zoomPointSrc,200),n._proxyEvents(n._roundScrollZoom,"scrollZoom",["zoomStart","zoomEnd"]),n._smoothScrollZoom=new tB(n._map,n._wheelDevice,n._zoomPointSrc),n._proxyEvents(n._smoothScrollZoom,"scrollZoom",["zoomStart","zoomEnd"]),n.oneFingerZoom=new tN(t,r,n._leftButtonDragger,n._zoomStrategy),n._proxyEvents(n.oneFingerZoom,"oneFingerZoom",["zoomStart","zoomEnd"]);var l=n.oneFingerZoom.on("zoomStart",function(){return n.drag.disable()}).on("zoomEnd",n._restoreDrag);n._subscriptions.push(l);var c=new tS(r,{listenToButtons:new Set([a.CTRL_PRIMARY,a.CMD_PRIMARY])});return n.rotate=new tX(n._map,c),n._proxyEvents(n.rotate,"mouseRotate",["rotateStart","rotateEnd"]),n._proxyEvents(n.rotate,"mouseTilt",["tiltStart","tiltEnd"]),n._behaviorsRegistry={drag:n.drag,pinchZoom:n.pinchZoom,scrollZoom:o?n._roundScrollZoom:n._smoothScrollZoom,dblClick:n.dblClick,magnifier:n.magnifier,oneFingerZoom:n.oneFingerZoom,mouseRotate:!1,mouseTilt:!1,pinchRotate:!1,panTilt:!1},n.setEnabled(i),n._updateZoomRounding(),n}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){this._subscriptions.forEach(function(e){return e.offAll()}),this.drag.destroy(),this.pinchZoom.destroy(),this.dblClick.destroy(),this.magnifier.destroy(),this.oneFingerZoom.destroy(),this.rotate.destroy(),this._roundScrollZoom.destroy(),this._smoothScrollZoom.destroy(),this._leftButtonDragger.destroy(),this._rightButtonDragger.destroy(),this._twoFingersGesture.destroy(),this._wheelDevice.destroy()},i.setEnabled=function(e){var t;(t=this._userEnabled).splice.apply(t,[0,1/0].concat((0,ee._)(e)));for(var i=0,n=Object.keys(this._behaviorsRegistry);i<n.length;i++){var r=n[i];this._setEnabledSingle(r,-1!==e.indexOf(r))}},i.setZoomStrategy=function(e){this._zoomStrategy=e,this.oneFingerZoom.zoomStrategy=e},i.mapToggleRotation=function(e){this._mapEnabledRotation=e,this.setEnabled(this._userEnabled)},i._updateZoomRounding=function(){var e="snap"===this._map.effectiveZoomRounding;this.magnifier.snapToRound=e,this.pinchZoom.snapToRound=e,e?(this._roundScrollZoom.enable(),this._smoothScrollZoom.disable(),this._behaviorsRegistry.scrollZoom=this._roundScrollZoom):(this._roundScrollZoom.disable(),this._smoothScrollZoom.enable(),this._behaviorsRegistry.scrollZoom=this._smoothScrollZoom)},i._setEnabledSingle=function(e,t){"pinchRotate"===e?this._behaviorsRegistry.pinchZoom.rotationAllowed=this._mapEnabledRotation&&t:"panTilt"===e?this._behaviorsRegistry.pinchZoom.tiltAllowed=this._mapEnabledRotation&&t:"mouseRotate"===e?this.rotate.rotationAllowed=this._mapEnabledRotation&&t:"mouseTilt"===e?this.rotate.tiltAllowed=this._mapEnabledRotation&&t:t?this._behaviorsRegistry[e].enable():this._behaviorsRegistry[e].disable(),"scrollZoom"===e&&(t?this._wheelDevice.enable():this._wheelDevice.disable())},i._proxyEvents=function(e,t,i){var n=this,r=this;this._subscriptions.push(e.on(i[0],function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return r._emit("actionStart",{type:t,details:i[0]?i[0]:{}})}).on(i[1],function(){return n._emit("actionEnd",t)}))},(0,I._)(t,[{key:"isInAction",get:function(){for(var e=0,t=Object.keys(this._behaviorsRegistry);e<t.length;e++){var i=t[e];if("pinchRotate"!==i&&"panTilt"!==i&&"mouseRotate"!==i&&"mouseTilt"!==i&&this._behaviorsRegistry[i].isInAction)return!0}return!1}},{key:"zoomStrategy",get:function(){return this._zoomStrategy}}]),t}((0,O.GA)().with()),tK=function(){function e(e,t){void 0===e&&(e=6378137),void 0===t&&(t=.0818191908426),this.radius=e,this.e=t,this._e2=this.e*this.e,this._e4=this._e2*this._e2,this._e6=this._e4*this._e2,this._e8=this._e4*this._e4,this._subradius=1/e,this._d2=this._e2/2+5*this._e4/24+this._e6/12+13*this._e8/360,this._d4=7*this._e4/48+29*this._e6/240+811*this._e8/11520,this._d6=7*this._e6/120+81*this._e8/1120,this._d8=4279*this._e8/161280}var t=e.prototype;return t.mercatorToGeo=function(e){var t=this.xToLongitude(e.x),i=this.yToLatitude(e.y),n=void 0!==e.z?this.zToAltitude(e.z,i):void 0;return void 0!==n?[t,i,n]:[t,i]},t.geoToMercator=function(e){var t=3===e.length?e[2]:void 0;return{x:this.longitudeToX(e[0]),y:this.latitudeToY(e[1]),z:void 0!==t?this.altitudeToZ(t,e[1]):void 0}},t.xToLongitude=function(e){return eo.j*(0,ec.d)(e*this._subradius,-Math.PI,Math.PI)},t.yToLatitude=function(e){var t=.5*Math.PI-2*Math.atan(1/Math.exp(e*this._subradius)),i=t+this._d2*Math.sin(2*t)+this._d4*Math.sin(4*t)+this._d6*Math.sin(6*t)+this._d8*Math.sin(8*t);return eo.j*i},t.zToAltitude=function(e,t){return e*Math.cos(eo.Z*t)},t.longitudeToX=function(e){var t=(0,ec.d)(eo.Z*e,-Math.PI,Math.PI);return this.radius*t},t.latitudeToY=function(e){var t=eo.Z*(0,ec.q)(e,-89.9999999999,89.9999999999),i=this.e*Math.sin(t),n=Math.tan(.25*Math.PI+.5*t),r=Math.pow(Math.tan(.25*Math.PI+.5*Math.asin(i)),this.e);return this.radius*Math.log(n/r)},t.altitudeToZ=function(e,t){return e/Math.cos(eo.Z*t)},e}(),tQ=new(function(){function e(e){var t=e.radius,i=e.e,n=e.type;this._mercator=new tK(t,i),this._halfEquator=Math.PI*this._mercator.radius,this.type=n}var t=e.prototype;return t.toWorldCoordinates=function(e){var t=this._mercator.geoToMercator(e);return{x:(this._halfEquator+t.x)/this._halfEquator-1,y:(0,ec.q)(1-(this._halfEquator-t.y)/this._halfEquator,-1,1),z:void 0!==t.z?t.z/this._halfEquator:void 0}},t.fromWorldCoordinates=function(e){var t=this._mercator.yToLatitude(this._halfEquator-(1-e.y)*this._halfEquator);t=(0,ec.q)(t,-90,90);var i=eo.j*(0,ec.d)(Math.PI*e.x,-Math.PI,Math.PI),n=void 0!==e.z?e.z*this._halfEquator:void 0;return void 0!==n?[i,t,n]:[i,t]},e}())({type:"EPSG:3395"}),tJ=i(1994),t$="none",t0=Symbol("object"),t1=Symbol(),t2=["touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointercancel","click","dblclick","mouseup","mousedown","mouseenter","mouseleave","mousemove","contextmenu"],t3=["mousedown","touchstart","pointerdown","contextmenu"],t5=function(){},t4=new Set(["click","fastclick","dblclick","contextmenu","rightdblclick"]),t6=function(){function e(e,t){var i=this;this._stopWaitingHotspots=t5,this._handlers={},this._activeObject=null,this.clickTimeout=300,this.waitHotspotsTimeout=1e3,this._onEvent=function(e){if("dblclick"!==e.type&&!i._map.isInAction){var t=e.target instanceof HTMLElement?i._map.findFeatureByElement(e.target):null;if(null==t||!t.feature.blockEvents||(null==t?void 0:t.feature.draggable)){t3.indexOf(e.type)>=0&&i._stopWaitingHotspots(!1);var n=function(t){void 0===t&&(t=!1);var n=t?"contextmenu":"click",r=t?"rightdblclick":"dblclick";if(void 0!==i._clickTimer){window.clearTimeout(i._clickTimer),i._clickTimer=void 0;var o,a=t9(e);225>Math.pow((o=i._previousClickPosition).x-a.x,2)+Math.pow(o.y-a.y,2)&&i._processEvent(r,e)}else i._previousClickPosition=t9(e),i._clickTimer=window.setTimeout(function(){i._clickTimer=void 0,i._map.isInAction||i._waitHotspots(e).then(function(t){t&&!i._map.isInAction&&i._processEvent(n,e)})},i.clickTimeout)};"click"===e.type?(i._processEvent("fastclick",e),n()):"contextmenu"===e.type?n(!0):i._processEvent(e.type,e)}}},this._waitHotspots=function(e){return new Promise(function(t){var n=i._computeAllCoordinates(e);if(!n){t(!1);return}var r=(0,v._)(n,2)[1],o=function(){var e=i._map.findObjectInWorldPositionEx(r).layers.find(function(e){return null!==e.object});e&&void 0===e.object||i._stopWaitingHotspots(!0)},a=window.setTimeout(function(){return i._stopWaitingHotspots(!0)},i.waitHotspotsTimeout),s=i._map.on("hotspotsChanged",o);i._stopWaitingHotspots=function(e){window.clearTimeout(a),s.offAll(),t(e),i._stopWaitingHotspots=t5},o()}).catch(function(e){(0,g._y)(e)})},this._computeAllCoordinates=function(e){var t=t9(e);if(!isFinite(t.x)||!isFinite(t.y))return null;var n=(0,ed.XA)(t,i._map),r=i._map.projection.fromWorldCoordinates(n);return[t,n,r]},this._processEvent=function(e,t){if(!t.target||i._map.container.contains(t.target)){var n,r,o=i._computeAllCoordinates(t);if(o){var a=(0,v._)(o,3),s=a[0],u=a[1],l=a[2],c=i._map.findObjectInWorldPosition(u);i._eventObjectsFilter&&!i._eventObjectsFilter(c)&&(c=null);var d=(n={type:t.type,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,ctrlKey:t.ctrlKey},t4.has(e)&&(t instanceof PointerEvent?n=(0,p._)({},n,{pointerId:t.pointerId,pointerType:t.pointerType,button:t.button,buttons:t.buttons}):t instanceof MouseEvent?n=(0,p._)({},n,{button:t.button,buttons:t.buttons}):t instanceof TouchEvent&&(n=(0,p._)({},n,{touches:Array.from(t.touches,function(e){return e.identifier})}))),n),h=(r={coordinates:[l[0],l[1]],screenCoordinates:[s.x,s.y],details:d},(0,tJ._)(r,t1,!1),(0,tJ._)(r,"stopPropagation",function(){this[t1]=!0}),r);if("mousemove"===t.type){c&&i._emitLayerEvent("mousemove",c,h,t);var _,m=i._activeObject;m&&c&&(_=c,m.type===_.type&&m.layer===_.layer&&("hotspot"===m.type&&m.feature.id===_.feature.id||"feature"===m.type&&m.feature.id===_.feature.id))||(m&&i._emitLayerEvent("mouseleave",m,h,t),c&&i._emitLayerEvent("mouseenter",c,h,t)),i._activeObject=c}else c&&i._emitLayerEvent(e,c,h,t);c||(i._initHandlers(e,t$),i._handlers[e][t$].forEach(function(e){return e(null,h,t)}),i._initHandlers(e,"any"),i._handlers[e].any.forEach(function(e){return e(null,h,t)}))}}},this._emitLayerEvent=function(e,t,n,r){i._initHandlers(e,t0),i._handlers[e][t0].forEach(function(e){return e(t,n,r)}),!n[t1]&&(!r.target||i._map.container.contains(r.target))&&(i._initHandlers(e,t.layer),i._handlers[e][t.layer].forEach(function(e){return e(t,n,r)}),!n[t1]&&(!r.target||i._map.container.contains(r.target))&&(i._initHandlers(e,"any"),i._handlers[e].any.forEach(function(e){return e(t,n,r)})))},this._initHandlers=function(e,t){i._handlers[e]=i._handlers[e]||{},i._handlers[e][t]=i._handlers[e][t]||[]},this._map=e,this._eventObjectsFilter=t,t2.forEach(function(e){return i._map.container.addEventListener(e,i._onEvent)})}var t=e.prototype;return t.destroy=function(){var e=this;this._stopWaitingHotspots(!1),window.clearInterval(this._clickTimer),t2.forEach(function(t){return e._map.container.removeEventListener(t,e._onEvent)})},t.on=function(e,t,i){this._initHandlers(e,t),this._handlers[e][t].push(i)},t.off=function(e,t,i){this._initHandlers(e,t);var n=this._handlers[e][t].indexOf(i);-1!==n&&this._handlers[e][t].splice(n,1)},e}();function t9(e){if("touches"in e){var t=e.touches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY}}return{x:e.clientX,y:e.clientY}}var t7=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t.element=(0,eR.E)(),t}(0,k._)(t,e);var i=t.prototype;return i.getLayerReadyState=function(){},i.destroy=function(){},i.update=function(){},i.resize=function(){},i.setLayers=function(){},i.setObjectFilters=function(){},i.setInvisibleCollidingPrimitives=function(){},i.findObjectInPosition=function(){return null},i.findObjectInPositionEx=function(){return{layers:[]}},i.preloadHotspotsInPoint=function(){},i.preloadHotspotsForViewport=function(){},i.setDataSources=function(){},i.getIndoorPlans=function(){return null},i.getVisibleObjects=function(){return null},i.getTile3dState=function(){return null},i.setObjectHighlight=function(){},i.setTileContentClippingGeometry=function(){},(0,I._)(t,[{key:"fov",get:function(){return ep}}]),t}((0,O.GA)().with()),t8=i(83548),ie=function(){function e(e,t,i,n){var r=this;this._dataSources={},this._layers=new Map,this._onMouseEnter=function(e){if("feature"===e.type){var t,i=null==(t=r._dataSources[e.source].features.get(e.feature.id))?void 0:t.style.cursor;void 0!==i&&(void 0===r._prevCursor&&(r._prevCursor=r._element.style.cursor),r._element.style.cursor=i)}},this._onMouseLeave=function(){void 0!==r._prevCursor&&(r._element.style.cursor=r._prevCursor,r._prevCursor=void 0)},this._map=e,this._element=t,this.setDataSources(i),this.setLayers(n)}var t=e.prototype;return t.destroy=function(){var e=this;this._layers.forEach(function(t,i){return e._unsubscribeFromLayerEvents(i)})},t.setDataSources=function(e){this._dataSources=(0,p._)({},e)},t.setLayers=function(e){for(var t=this,i=new Set,n=0;n<e.length;n++){var r=e[n];r.source in this._dataSources&&i.add(r.id)}var o=(0,ev.B)(this._layers,i,function(e){return t._subscribeToLayerEvents(e)},function(e,i){return t._unsubscribeFromLayerEvents(i)}).result;this._layers=o},t._subscribeToLayerEvents=function(e){this._map.events.on("mouseenter",e,this._onMouseEnter),this._map.events.on("mouseleave",e,this._onMouseLeave)},t._unsubscribeFromLayerEvents=function(e){this._map.events.off("mouseenter",e,this._onMouseEnter),this._map.events.off("mouseleave",e,this._onMouseLeave)},e}();function it(e,t,i){var n=Y.applyFunction(es.B.pixelsToWorld(t,i),function(e){return(0,ec.q)(e,-1,1-1e-15)});return e.fromWorldCoordinates(n)}function ii(e,t,i){var n=e.toWorldCoordinates(t);return es.B.worldToPixels(n,i)}function ir(e,t,i){var n=ii(e,t[0],i),r=ii(e,t[1],i),o=es.B.getWorldPixelSize(i),a=[[n.x,n.y],[r.x,r.y]];return n.x>r.x&&(a[0][0]=n.x,a[1][0]=r.x+o),n.y>r.y&&(a[0][1]=r.y,a[1][1]=n.y),a}function io(e,t){return{x:Math.max(e.x-(t?t[1]+t[3]:0),1),y:Math.max(e.y-(t?t[0]+t[2]:0),1)}}function ia(e,t,i,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=(0,en.oF)());var a,s,u,l,c,d,h,_,m,f,p,g,y,S,x,E,b,z=io(i,n),w=(a=r,s=o,u=(0,v._)(ir(e,t,0),2),c=(l=(0,v._)(u[0],2))[0],d=l[1],_=(h=(0,v._)(u[1],2))[0],m=h[1],f=Math.max(Math.abs(_-c),1e-10),p=Math.max(Math.abs(m-d),1e-10),g=(0,ec.q)(Math.min(Math.log2(z.x/f),Math.log2(z.y/p)),s.min,s.max),a?Math.floor(g+1e-6):g);return{center:(y=(0,v._)(ir(e,t,w),2),x=(S=(0,v._)(y[0],2))[0],E=S[1],it(e,{x:(x+(b=(0,v._)(y[1],2))[0])/2,y:(E+b[1])/2},w)),zoom:w}}var is={x:0,y:0},iu=[25,25,25,25],il={pointer:{start:["pointerdown"],move:["pointermove"],end:["pointerup"]},touchMouse:{start:["touchstart","mousedown"],move:["touchmove","mousemove"],end:["touchend","mouseup"]}},ic=function(e){function t(t,i){var n;return void 0===i&&(i={tremorPixels:3}),(n=e.call(this)||this)._map=t,n._options=i,n._filters=new Set,n._draggableObjectPointer=null,n._startDiff=null,n._startCursorPosition=null,n._pointerPosition=is,n._state=0,n._mapCenterOffsetWcs=is,n._eventsNames=tl()?il.pointer:il.touchMouse,n._onDragStart=function(e,t){var i=t.screenCoordinates;if(e&&"feature"===e.type){var r=n._draggableObject(e);if(n._isDraggable(r)){n._state=1,n._draggableObjectPointer=(0,p._)({},e),n._startCursorPosition=i,n._pointerPosition={x:i[0],y:i[1]};var o=id(r),a=(0,ed.XA)({x:i[0],y:i[1]},n._map);n._startDiff={world:Y.sub(o,a),pixels:Y.sub(es.B.worldToPixels(o,n._map.zoom),es.B.worldToPixels(a,n._map.zoom))},n._eventsNames.move.forEach(function(e){n._map.events.on(e,"any",n._onDrag)}),n._eventsNames.end.forEach(function(e){window.addEventListener(e,n._onDragEnd)})}}},n._onDrag=function(e,t){var i=t.screenCoordinates;(0,eh.h)(null!==n._draggableObjectPointer,"The dragged object must exist"),(0,eh.h)(null!==n._startCursorPosition,"Cursor start coordinates must be defined");var r=n._draggableObject(n._draggableObjectPointer);if(!r)return n._onDragEnd();n._pointerPosition={x:i[0],y:i[1]};var o=(0,ed.XA)(n._pointerPosition,n._map),a=n._getNewGeometry(o,r);1===n._state?Math.max(Math.abs(n._startCursorPosition[0]-i[0]),Math.abs(n._startCursorPosition[1]-i[1]))>n._options.tremorPixels&&!1!==n._emit("dragStart",{object:r,newGeometry:a})&&(n._state=2,n._map.on("update",n._onMapUpdate)):(n._startCursorPosition=i,!1!==n._emit("dragMove",{object:r,newGeometry:a})&&(n._updateCoordinates(a,r),n._dragMapFollowerHandler()))},n._onMapUpdate=function(){n._onDrag(null,{screenCoordinates:[n._pointerPosition.x,n._pointerPosition.y]})},n._onDragEnd=function(){if(0!==n._state){if(n._stopMapDragFollowAnimation(),n._eventsNames.move.forEach(function(e){n._map.events.off(e,"any",n._onDrag)}),n._eventsNames.end.forEach(function(e){window.removeEventListener(e,n._onDragEnd)}),n._map.offSingle("update",n._onMapUpdate),2===n._state){var e=n._draggableObject(n._draggableObjectPointer);e&&n._emit("dragEnd",{object:e,newGeometry:e.geometry})}n._draggableObjectPointer=null,n._state=0}},n._eventsNames.start.forEach(function(e){n._map.events.on(e,"any",n._onDragStart)}),n}(0,k._)(t,e);var i=t.prototype;return i.destroy=function(){var e=this;this._eventsNames.start.forEach(function(t){e._map.events.off(t,"any",e._onDragStart)}),this._onDragEnd(),this._stopMapDragFollowAnimation()},i.addFilter=function(e){return this._filters.add(e),this},i.removeFilter=function(e){return this._filters.delete(e),this},i._draggableObject=function(e){return e?"feature"===e.type?this._map.getFeatureInWorldCoordinatesById(e.source,e.feature.id):void(0,g._y)(Error("Need implementation for type: "+e.type)):null},i._isDraggable=function(e){if(!e||!this._filters.size)return!1;var t=!1;return this._filters.forEach(function(i){i(e)&&(t=!0)}),t},i._getNewGeometry=function(e,t){if((0,eh.h)(null!==this._draggableObjectPointer,"The dragged object must exist"),(0,eh.h)(null!==this._startDiff,"Need difference between cursor coordinates and object start"),(0,eh.h)("Feature"===t.type,"Need implementation for type: "+t.type),"Point"===t.geometry.type)return this._calculateWorldWithPixelFixedOffset(e);var i=Y.sub(id(t),Y.add(e,this._startDiff.world));return(0,et.ZE)(t.geometry,function(e){return Y.sub(e,i)})},i._updateCoordinates=function(e,t){(0,eh.h)(null!==this._draggableObjectPointer,"The dragged object must exist"),(0,eh.h)(null!==this._startDiff,"Need difference between cursor coordinates and object start"),(0,eh.h)("Feature"===t.type,"Need implementation for type: "+t.type),t.geometry.coordinates=e.coordinates,this._map.updateInWorldCoordinatesFeature(this._draggableObjectPointer.source,t)},i._calculateWorldWithPixelFixedOffset=function(e){(0,eh.h)(null!==this._startDiff,"Need difference between cursor coordinates and object start");var t=es.B.worldToPixels(e,this._map.zoom);return{type:"Point",coordinates:es.B.pixelsToWorld(Y.add(t,this._startDiff.pixels),this._map.zoom)}},i._dragMapFollowerHandler=function(){var e=this._draggableObject(this._draggableObjectPointer);if(e&&e.mapFollowsOnDrag){var t=this._map;if(!t||!this.isDragging){this._setMapCenterOffsetWcs(is);return}var i="boolean"!=typeof e.mapFollowsOnDrag&&e.mapFollowsOnDrag.activeZoneMargin?(0,ee._)(e.mapFollowsOnDrag.activeZoneMargin):iu.slice();t.margin&&(i[0]+=t.margin[0],i[1]+=t.margin[1],i[2]+=t.margin[2],i[3]+=t.margin[3]);var n=t.container.getBoundingClientRect(),r={x:n.width,y:n.height};r.x-=i[1]+i[3],r.y-=i[0]+i[2];var o=Y.add(Y.divn(r,2),{x:i[3],y:i[0]}),a=function(e,t,i){var n=Y.divn(e,2),r=Y.sub(i,t);if(r.x>-n.x&&r.x<n.x&&r.y>-n.y&&r.y<n.y)return{x:0,y:0};var o={x:0,y:0};if(0===r.x)o.x=0,o.y=n.y*Math.sign(r.y);else{var a=r.y/r.x,s=a*n.x;if(s>=-n.y&&s<=n.y){var u=Math.sign(r.x);o.x=n.x*u,o.y=s*u}else{var l=1/a*n.y,c=Math.sign(r.y);o.x=l*c,o.y=n.y*c}}return Y.sub(r,o)}(r,o,Y.sub(this._pointerPosition,{x:n.left,y:n.top}));Y.divn(a,2,a);var s=Y.length(a);s>120&&Y.muln(a,120/s,a),this._setMapCenterOffsetWcs(es.B.convertPixelSizeToWorldSize(a,t.zoom))}},i._animateMap=function(){var e=this;if(this._hasOffset&&this.isDragging){var t=this._map,i=this._draggableObject(this._draggableObjectPointer);i&&(this._mapDragFollowHandler=this._map.animate(function(){return e._updateCoordinates((0,et.ZE)(i.geometry,function(t){return Y.add(t,e._mapCenterOffsetWcs)}),i),{worldCenter:Y.add(e._mapCenterOffsetWcs,t.worldCenter),azimuth:t.azimuth,zoom:t.zoom,tilt:t.tilt,fov:t.fov}}))}},i._stopMapDragFollowAnimation=function(){var e;(null==(e=this._mapDragFollowHandler)?void 0:e.isRunning)&&this._mapDragFollowHandler.stop()},i._setMapCenterOffsetWcs=function(e){var t=e.x,i=e.y;(this._mapCenterOffsetWcs.x!==t||this._mapCenterOffsetWcs.y!==i)&&(this._mapCenterOffsetWcs={x:t,y:i},null==this._stopMapDragFollowAnimation||this._stopMapDragFollowAnimation.call(this),this._animateMap())},(0,I._)(t,[{key:"filters",get:function(){var e=[];return this._filters.forEach(function(t){e.push(t)}),e}},{key:"isDragging",get:function(){return this._state>0}},{key:"_hasOffset",get:function(){return 0!==this._mapCenterOffsetWcs.x||0!==this._mapCenterOffsetWcs.y}}]),t}((0,O.GA)().with());function id(e){switch((0,eh.h)("Feature"===e.type,"Need implementation for type: "+e.type),e.geometry.type){case"Point":return e.geometry.coordinates;case"LineString":return e.geometry.coordinates[0];case"Polygon":case"MultiLineString":return e.geometry.coordinates[0][0];case"MultiPolygon":return e.geometry.coordinates[0][0][0]}}var ih=i(18536),i_=Math.round,im=Math.round,ip=function(e){var t=Math.floor(e);return e-t<.5?t:t+1},iv="ymaps3x0--main-engine-container",ig="ymaps3",iy=function(e){function t(t){(n=e.call(this)||this)._renderLoop=new ei.d,n._dataSources={},n._filters=new Set,n._invisibleCollidingPrimitives=new Map,n._collidingGeometriesBySource=new Map,n._topRasterLayers=[],n._mainLayers=[],n._vectorFailed=!1,n._featuresByDataSource=new Map,n._cameraOptions={enabledTiltTransition:!1},n._destroyed=!1,n.container=(0,eR.E)("ymaps3x0--map");var i,n,o=t.element,a=t.dataSources,s=t.topRasterLayers,u=t.mainLayers,l=t.mode,c=t.margin,d=t.tiltRange,h=t.zoomRange,_=t.zoomRounding,m=t.behaviors,f=t.projection,v=void 0===f?tQ:f,g=t.worldOptions,y=t.restrictMapArea,S=t.eventObjectsFilter,x=t.experiments,E=t.nonRotatableRasterSources,b=t.metricsTransport,z=t.tilt,w=t.azimuth;i=void 0===b?function(){}:b,r||(r=i),n._experiments=void 0===x?{}:x,n._projection=v,n.worldOptions=void 0===g?{cycledX:!0,cycledY:!1}:g,n._restrictMapArea=void 0!==y&&y,n._worldRestrictMapArea=n._restrictMapArea&&n._restrictMapArea.map(function(e){return v.toWorldCoordinates(e)}),n._nonRotatableRasterSources=new Set(void 0===E?[]:E),n.tiltRange=null!=d?d:t8.T,n._topEngineContainer=(0,eR.E)("ymaps3x0--top-engine-container"),n._mainEngineContainer=(0,eR.E)(iv),n.container.appendChild(n._mainEngineContainer),n.container.appendChild(n._topEngineContainer),o.appendChild(n.container);var T=iS(n.container.parentElement),R=T.size,C=T.offset;n._size=R,n._offset=C,n._resizeContainer(),n._zoomRange=h?(0,p._)({},h):(0,en.oF)(),n._zoomRounding=void 0===_?"auto":_,"raster"===l&&(n._effectiveZoomRounding="snap"),n._margin=c;var M=t.bounds,A=t.center,D=t.zoom;n._camera=n._createCamera(M,A,D,void 0===w?0:w,void 0===z?0:z),n._effectiveMode=null,n._desiredMode=l,n._dataSourceDescriptions={};for(var L=0,P=Object.keys(a);L<P.length;L++){var F=P[L];n._dataSourceDescriptions[F]=(0,er.wo)(a[F]);var I=n._createDataSource(n._dataSourceDescriptions[F]);null!==I&&(n._dataSources[F]=I)}iE(n._zoomRange,n._dataSourceDescriptions),n._mainLayers=ix(u,a),n._topRasterLayers=ix(s,a),n._assertLayersIsValid(n._topRasterLayers,n._mainLayers);var k=n._createTopEngine(),O=k.topEngine,B=k.eventGroup;return n._topRasterEngine=O,n._topRasterEngineEventGroup=B,n._applyMode(),n.events=new t6((0,$._)(n),S),n.behaviors=new tU((0,$._)(n),void 0===m?["drag","scrollZoom","pinchZoom","dblClick","magnifier"]:m),n.dragger=new ic((0,$._)(n)),n.dragger.addFilter(function(e){return(null==e?void 0:e.type)==="Feature"&&!!e.draggable}),n._subscribeToDomEvents(),n._handleRotatability(),n._update(),n.on("ready",function(){n._topRasterEngine.animateFirstScreen=!0,"raster"===n._mainEngine.type&&(n._mainEngine.engine.animateFirstScreen=!0)}),n}(0,k._)(t,e);var i=t.prototype;return i._createCamera=function(e,t,i,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),e){var o;t=(o=ia(this.projection,e,this.size,this.margin,"snap"===this.effectiveZoomRounding,this.zoomRange)).center,i=o.zoom}var a=eu(this.projection,t,i,n,this.margin),s=es.B.restrictToZeroWorld(a,this.worldOptions);return this._restrictCamera({zoom:i,worldCenter:s,azimuth:n,tilt:r})},i.setZoomRounding=function(e){e!==this._zoomRounding&&(this._zoomRounding=e,this._chooseEffectiveZoomRounding())},i.addObjectFilter=function(e){this._filters.add(e),this._applyFilters()},i.removeObjectFilter=function(e){this._filters.delete(e),this._applyFilters()},i.getInvisibleCollidingPrimitives=function(){return this._invisibleCollidingPrimitives},i.addInvisibleCollidingPrimitives=function(e){var t=this;e.forEach(function(e,i){t._invisibleCollidingPrimitives.set(i,{anchor:t.projection.toWorldCoordinates(e.anchor),rect:e.rect})}),this._applyInvisibleCollidingPrimitives()},i.removeInvisibleCollidingPrimitives=function(e){var t=this;e.forEach(function(e){t._invisibleCollidingPrimitives.delete(e)}),this._applyInvisibleCollidingPrimitives()},i.setObjectHighlight=function(e){this._mainEngine.engine.setObjectHighlight(e),"transitionToVector"===this._mainEngine.type&&this._mainEngine.vector.engine.setObjectHighlight(e)},i.calculateCenter=function(e){return function(e,t,i,n,r){if(r){var o=el(r,i,n);t=Y.add(t,o)}return e.fromWorldCoordinates(t)}(this.projection,e,this._camera.zoom,this._camera.azimuth,this._margin)},i.setProjection=function(e){this._projection=e,this._update()},i.setCamera=function(e){var t=e.worldCenter,i=e.zoom;isFinite(t.x)&&isFinite(t.y)||(0,g._y)(Error("Trying to set non-finite center")),isFinite(i)||(0,g._y)(Error("Trying to set non-finite zoom")),this._camera=this._restrictCamera((0,p._)({},e,{zoom:i})),this._update()},i.animate=function(e){var t=this,i=this._renderLoop.animate(function(i){var n=t._camera,r=e(n,i);r!==n&&t.setCamera(r)});return i.complete.then(function(){return t._emit("update")}),i},i.animateForDuration=function(e,t){var i=this,n=0,r=this._renderLoop.animateForDuration(function(e){var r=e-n;n=e;var o=i._camera,a=t(o,e,r);a!==o&&i.setCamera(a)},e);return r.complete.then(function(){return i._emit("update")}),r},i.setZoomRange=function(e){iE(e,this._dataSourceDescriptions),this._zoomRange=(0,p._)({},e),this._emit("zoomRangeChange")},i.getMode=function(){return this._desiredMode},i.getEffectiveMode=function(){return this._effectiveMode},i.setMode=function(e){this._desiredMode!==e&&(this._desiredMode=e,this._applyMode())},i.setMargin=function(e){this._margin=e,this._emit("update")},i.setCenter=function(e){this.setCenterAndZoom(e,this.zoom)},i.setCenterAndZoom=function(e,t){var i=eu(this.projection,e,t,this._camera.azimuth,this._margin);Y.areFuzzyEqual(i,this._camera.worldCenter,1e-10)&&t===this._camera.zoom||this.setCamera((0,p._)({},this._camera,{worldCenter:i,zoom:t,azimuth:0,tilt:0}))},i.setZoom=function(e){this.setCenterAndZoom(this.center,e)},i.setBounds=function(e){var t=ia(this.projection,e,this.size,this.margin,"snap"===this.effectiveZoomRounding,this.zoomRange),i=t.center,n=t.zoom;this.setCenterAndZoom(i,n)},i.setRestrictMapArea=function(e){var t=this;this._restrictMapArea=e,this._worldRestrictMapArea=this._restrictMapArea&&this._restrictMapArea.map(function(e){return t.projection.toWorldCoordinates(e)})},i.animateCenterAndZoom=function(e,t,i,n){this._animateHandler&&this._animateHandler.isRunning&&this._animateHandler.stop();var r=this.zoomRange,o=(0,ec.q)(t,r.min,r.max),a=eu(this.projection,e,t,this._camera.azimuth,this._margin),s=es.B.moveCloseToCenter(a,this._camera.worldCenter);return this._animateHandler=tA(this,s,o,i,n),this._animateHandler.complete},i.animateTilt=function(e,t,i){return(this._animateHandlerTilt&&this._animateHandlerTilt.isRunning&&this._animateHandlerTilt.stop(),t)?(this._animateHandlerTilt=tF(this,null!=e?e:0,t,i),this._animateHandlerTilt.complete):(this.setCamera((0,p._)({},this.camera,{tilt:e})),Promise.resolve())},i.animateAzimuth=function(e,t,i){return(this._animateHandlerAzimuth&&this._animateHandlerAzimuth.isRunning&&this._animateHandlerAzimuth.stop(),t)?(this._animateHandlerAzimuth=tP(this,e-this.azimuth,e,t,i),this._animateHandlerAzimuth.complete):(this.setCamera((0,p._)({},this.camera,{azimuth:e})),Promise.resolve())},i.getLayerReadyState=function(e){var t=this._topRasterEngine.getLayerReadyState(e),i=this._mainEngine.engine.getLayerReadyState(e);return t||i},i.getLayerState=function(e,t,i){i||(i="vector"===this._getEffectiveMode()?"vector":"raster");var n=this._mainEngine;if(n.type===i||"transitionToVector"===n.type||"preVector"===n.type){var r=n.engine;return"transitionToVector"===n.type&&"vector"===i&&(r=n.vector.engine),r.getLayerReadyState(e,t)}},i.destroy=function(){this._destroyed||(this._emit("beforeDestroy"),this.dragger.destroy(),this.events.destroy(),this.behaviors.destroy(),this._destroyMainEngine(),this._topRasterEngineEventGroup.offAll(),this._topRasterEngine.destroy(),this.container.removeChild(this._topEngineContainer),this.container.removeChild(this._mainEngineContainer),this.container.parentElement.removeChild(this.container),this._destroyed=!0)},i.resize=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var i=iS(this.container.parentElement),n=i.size,r=i.offset;if(!Y.areEqual(n,this._size)){var o=this._camera.worldCenter;if(e){var a=Y.divn(Y.sub(n,this._size),2);Y.rotate(a,this._camera.azimuth,a);var s=es.B.convertPixelSizeToWorldSize({x:a.x,y:-a.y},this._camera.zoom);o=Y.sub(this._camera.worldCenter,s)}var u=es.B.convertPixelSizeToWorldSize(Y.divn(n,2),this._camera.zoom);o={x:o.x,y:(0,ec.q)(o.y,-1-u.y,1+u.y)},Y.areEqual(o,this._camera.worldCenter)||this.setCamera((0,p._)({},this._camera,{worldCenter:o})),this._size=n,this._offset=r,this._resizeContainer(),this._topRasterEngine.resize(this._size),this._mainEngine.engine.resize(this._size),"transitionToVector"===this._mainEngine.type&&this._mainEngine.vector.engine.resize(this._size),this._emit("resize"),t?this.renderImmediately():this._renderLoop.update()}},i._resizeContainer=function(){this.container.style.width=this._size.x+"px",this.container.style.height=this._size.y+"px"},i.addGroup=function(e,t,i,n){void 0===i&&(i={}),void 0===n&&(n=eY.oR),this._getFeaturesDataSource(e).addGroup(t,i,n)},i.removeGroupAndChildren=function(e,t){this._getFeaturesDataSource(e).removeGroupAndChildren(t)},i.addFeature=function(e,t,i,n){void 0===i&&(i={}),void 0===n&&(n=eY.oR);var r=this._convertFeatureToWorld(t),o=r.feature,a=r.bbox;this._getFeaturesDataSource(e).addFeature(o,i,a,n),this._getFeaturesForDataSource(e).set(t.id,t)},i.addFeatureInWorldCoordinates=function(e,t,i,n){void 0===i&&(i={}),void 0===n&&(n=eY.oR);var r=this._convertFeatureToGeo(t),o=r.feature,a=r.bbox;this._getFeaturesDataSource(e).addFeature(t,i,a,n),this._getFeaturesForDataSource(e).set(t.id,o)},i.getFeatureById=function(e,t){var i,n=this._getFeaturesForDataSource(e);return n.has(t)&&null!=(i=n.get(t))?i:null},i.getFeatureInWorldCoordinatesById=function(e,t){var i,n;return null!=(n=null==(i=this._getFeaturesDataSource(e).getFeatureById(t))?void 0:i.feature)?n:null},i.removeFeatureById=function(e,t){this._getFeaturesDataSource(e).removeFeatureById(t),this._getFeaturesForDataSource(e).delete(t)},i.updateFeature=function(e,t,i){var n=this._convertFeatureToWorld(t),r=n.feature,o=n.bbox;this._getFeaturesDataSource(e).updateFeature(r,o,i),this._getFeaturesForDataSource(e).set(t.id,t)},i.updateInWorldCoordinatesFeature=function(e,t,i){var n=this._convertFeatureToGeo(t),r=n.feature,o=n.bbox;this._getFeaturesDataSource(e).updateFeature(t,o,i),this._getFeaturesForDataSource(e).set(t.id,r)},i.upsertFeature=function(e,t,i,n){void 0===i&&(i={}),void 0===n&&(n=eY.oR);var r=this._getFeaturesDataSource(e),o=this._convertFeatureToWorld(t),a=o.feature,s=o.bbox;r.hasFeatureWithId(t.id)?(r.updateFeature(a,s,i),r.moveFeatureToGroup(t.id,n)):r.addFeature(a,i,s,n),this._getFeaturesForDataSource(e).set(t.id,t)},i.moveFeatureToGroup=function(e,t,i){return void 0===i&&(i=eY.oR),this._getFeaturesDataSource(e).moveFeatureToGroup(t,i)},i.hasFeature=function(e,t){return this._getFeaturesDataSource(e).hasFeatureWithId(t)},i.addTile3d=function(e,t){this._getTile3dDataSource(e).addRootTile(t)},i.replaceTile3d=function(e,t){this._getTile3dDataSource(e).replaceRootTile(t)},i.removeTile3d=function(e,t){this._getTile3dDataSource(e).removeRootTile(t)},i.showTile3d=function(e,t){this._getTile3dDataSource(e).showRootTile(t)},i.hideTile3d=function(e,t){this._getTile3dDataSource(e).hideRootTile(t)},i.changeTile3dTextures=function(e,t,i){this._getTile3dDataSource(e).changeRootTileTextures(t,i)},i.getTile3dTexturesTiers=function(e,t){return this._getTile3dDataSource(e).getRootTileTexturesTiers(t)},i.getTile3dState=function(e,t){return"vector"===this._mainEngine.type?this._mainEngine.engine.getTile3dState(e,t):"transitionToVector"===this._mainEngine.type?this._mainEngine.vector.engine.getTile3dState(e,t):null},i.setTileContentClippingGeometry=function(e,t){var i,n,r=this,o=this._getDataSourceById(e);if((0,eh.h)(o instanceof em.Nt,'"'+e+'" must be TileDataSource'),!t){this._collidingGeometriesBySource.delete(e),null==(n=this._getVectorEngine())||n.setTileContentClippingGeometry(this._collidingGeometriesBySource);return}var a={type:"MultiPolygon",coordinates:("Polygon"===t.type?[t.coordinates]:t.coordinates).map(function(e){return e.map(function(e){return e.map(function(e){return r._projection.toWorldCoordinates(e)})})})};this._collidingGeometriesBySource.set(e,a),null==(i=this._getVectorEngine())||i.setTileContentClippingGeometry(this._collidingGeometriesBySource)},i._getVectorEngine=function(){return"vector"===this._mainEngine.type?this._mainEngine.engine:"transitionToVector"===this._mainEngine.type?this._mainEngine.vector.engine:null},i.setLayers=function(e){var t=e.topRasterLayers,i=e.mainLayers;t&&(this._topRasterLayers=ix(t,this._dataSourceDescriptions)),i&&(this._mainLayers=ix(i,this._dataSourceDescriptions)),this._assertLayersIsValid(this._topRasterLayers,this._mainLayers),this._topRasterEngine.setLayers(this._topRasterLayers),"vector"===this._mainEngine.type&&this._mainEngine.initLayersTimer||this._setMainEngineLayers(this._mainLayers),"transitionToVector"===this._mainEngine.type&&this._mainEngine.vector.setLayersAbortController&&this._mainEngine.vector.engine.setLayers(this._mainLayers),this._chooseEffectiveZoomRounding(),this._handleRotatability(),this._emit("update"),this._emit("copyrightsChange")},i.getLayers=function(){return{topRasterLayers:this._topRasterLayers.map(ib),mainLayers:this._mainLayers.map(ib)}},i.getLayersEx=function(){return{topRasterLayers:this._topRasterLayers.map(function(e){return(0,p._)({},e)}),mainLayers:this._mainLayers.map(function(e){return(0,p._)({},e)})}},i.getDataSource=function(e){var t=this._dataSourceDescriptions[e];return t?(0,er.wo)(t):void 0},i.addDataSource=function(e,t,i){this._dataSourceDescriptions[e]=(0,er.wo)(t);var n=this._createDataSource(this._dataSourceDescriptions[e],i);null!==n&&(this._dataSources[e]=n),this._setEngineDataSources(this._dataSources)},i.removeDataSource=function(e){(0,ee._)(this._mainLayers).concat((0,ee._)(this._topRasterLayers)).some(function(t){return t.source===e})&&(0,g._y)(Error("Can't remove, data source with id=\""+e+' is used"')),delete this._dataSourceDescriptions[e],delete this._dataSources[e],this._setEngineDataSources(this._dataSources)},i.updateTileDataSource=function(e,t){var i=this._getTileDataSource(e),n=(0,er.wo)(t);this._dataSourceDescriptions[e]=n,i.setSource(n),iE(this._zoomRange,this._dataSourceDescriptions),this._emit("zoomRangeChange"),this._emit("copyrightsChange")},i.updateTile3dDataSource=function(e,t){var i=this._getTile3dDataSource(e),n=(0,er.wo)(t);i.setSource(n)},i.provideVectorMapEngineFactory=function(e){this._vectorMapEngineFactory=e,this._emit("vectorLoad"),"raster"!==this._desiredMode&&this._applyMode()},i.isVectorMapEngineFactoryProvided=function(){return!!this._vectorMapEngineFactory},i.findFeatureByElement=function(e){var t=this._topRasterEngine.findFeatureByElement(e);if(t){var i=this._getFeaturesForDataSource(t.source).get(t.feature.id);return{type:"feature",layer:t.layer,source:t.source,feature:i}}return null},i.findObjectInWorldPosition=function(e){var t=this._topRasterEngine.findObjectInPosition(e)||this._mainEngine.engine.findObjectInPosition(e);return this._toMapObject(t)||null},i.findObjectInWorldPositionEx=function(e){var t=this,i=this._topRasterEngine.findObjectInPositionEx(e),n=i.layers.find(function(e){return e.object})?{layers:[]}:this._mainEngine.engine.findObjectInPositionEx(e);return{layers:(0,ee._)(i.layers.map(function(e){var i=e.layer,n=e.object;return{layer:i,object:t._toMapObject(n)}})).concat((0,ee._)(n.layers.map(function(e){var i=e.layer,n=e.object;return{layer:i,object:t._toMapObject(n)}})))}},i.renderImmediately=function(e){void 0===e&&(e=ei._.FULL),this._renderLoop.renderImmediately(e)},i.preloadHotspotsInPoint=function(e){var t=es.B.restrictToZeroWorld(e,this.worldOptions);this._topRasterEngine.preloadHotspotsInPoint(t),this._mainEngine.engine.preloadHotspotsInPoint(t),"transitionToVector"===this._mainEngine.type&&this._mainEngine.vector.engine.preloadHotspotsInPoint(e)},i.preloadHotspotsForViewport=function(){this._topRasterEngine.preloadHotspotsForViewport(),this._mainEngine.engine.preloadHotspotsForViewport(),"transitionToVector"===this._mainEngine.type&&this._mainEngine.vector.engine.preloadHotspotsForViewport()},i.getIndoorPlans=function(){return"vector"===this._mainEngine.type?this._mainEngine.engine.getIndoorPlans():"transitionToVector"===this._mainEngine.type?this._mainEngine.vector.engine.getIndoorPlans():null},i.getVisibleObjects=function(e){return"vector"===this._mainEngine.type?this._mainEngine.engine.getVisibleObjects(e):"transitionToVector"===this._mainEngine.type?this._mainEngine.vector.engine.getVisibleObjects(e):null},i.addCompositeDataSource=function(e,t,i,n,r){var o=this._getVectorEngine().addCompositeDataSource(e,t,i,n,r);return this._emit("afterCompositeDataSourceAdded",e),o},i.getCompositeDataSource=function(e){var t,i;return null==(i=this._getVectorEngine())?void 0:null==(t=i.getCompositeDataSource)?void 0:t.call(i,e)},i.getVector=function(){var e;return null==(e=this._getVectorEngine())?void 0:e.getVector()},i.removeCompositeDataSource=function(e){this._emit("beforeCompositeDataSourceRemoved",e),this._getVectorEngine().removeCompositeDataSource(e)},i._setMainEngineLayers=function(e){this._mainEngine.engine.setLayers(e),"vector"===this._mainEngine.type&&this._mainEngine.cursorController&&this._mainEngine.cursorController.setLayers(e)},i._setEngineDataSources=function(e){this._topRasterEngine.setDataSources(e),this._mainEngine.engine.setDataSources(e),"transitionToVector"===this._mainEngine.type&&this._mainEngine.vector.engine.setDataSources(e),"vector"===this._mainEngine.type&&this._mainEngine.cursorController&&this._mainEngine.cursorController.setDataSources(e)},i._getEffectiveMode=function(){return"raster"===this._desiredMode||this._vectorFailed?"raster":this._vectorMapEngineFactory?"vector":"auto"===this._desiredMode?"raster":"vector"===this._desiredMode?this._mainEngine&&"preVector"!==this._mainEngine.type?"raster":"preVector":void(0,eh.h)(!1,"Cant get effective map mode")},i._applyMode=function(){var e=this,t=this._getEffectiveMode();if(this._effectiveMode===t){this._setMainEngineLayers(this._mainLayers),this._renderLoop.update();return}if(this._emit("beforeEffectiveModeChanged"),this._effectiveMode=t,"preVector"===this._effectiveMode){var i=new t7;this._mainEngine={type:"preVector",engine:i,eventGroup:i.group()}}else if("raster"===this._effectiveMode){this._destroyMainEngine();var n=new tt(this._size,this._camera,this._renderLoop,this.worldOptions,this.projection,this._dataSources,im,this._topRasterEngine.animateFirstScreen,this.tiltRange);this._mainEngineContainer.appendChild(n.element),n.setLayers(this._mainLayers),n.setObjectFilters(this._filters);var o=n.group().on("tilesReady",function(){return e._emit("ready")}).on("tilesLoaded",function(){return e._emit("loaded")}).on("stateChanged",function(){return e._emit("stateChanged")}).on("hotspotsChanged",function(){return e._emit("hotspotsChanged")});this._mainEngine={type:"raster",engine:n,eventGroup:o},this._emit("mainEngineChanged"),this._chooseEffectiveZoomRounding(),this._handleRotatability(),this._topRasterEngine.update(this._camera,this._mainEngine.engine.fov)}else{var a,s={init:performance.now(),duration:-1,revealDuration:-1};try{a=this._vectorMapEngineFactory(this._size,this._camera,this._dataSources,this._renderLoop,this.worldOptions,this.tiltRange,this._experiments)}catch(t){this._onVectorError({source:""+ig+"/engine_create",message:ig+": failed to create vector engine: "+t});return}if("preVector"===this._mainEngine.type){var u=this._switchMainEngineToVector(a);u.initLayersTimer=window.setTimeout(function(){var t=a.on("stateChanged",function(){if(e._isReadyToShowVector(a)){var i;t.offAll(),s.revealDuration=performance.now()-s.init,e._mainEngineContainer.appendChild(a.element),e._onVectorStart(s),i={vectorStart:s.duration,vectorReveal:s.revealDuration},null==r||r(i)}e._emit("stateChanged")});e._setVectorLayers(u,s),u.initLayersTimer=void 0})}else{var l=a.on("internalError",function(t){return e._onVectorError(t)}).on("contentError",function(t){return e._onVectorContentError(t)}).on("indoorPlansChanged",function(){return e._emit("indoorPlansChanged")}).on("hotspotsChanged",function(){return e._emit("hotspotsChanged")}).on("tile3dChanged",function(t){return e._emit("tile3dChanged",t)}).on("tile3dVisibilityChange",function(t){return e._emit("tile3dVisibilityChange",t)}).on("visibleObjectsChanged",function(){return e._emit("visibleObjectsChanged")}),c={type:"vector",engine:a,eventGroup:l};this._mainEngine={engine:this._mainEngine.engine,eventGroup:this._mainEngine.eventGroup,type:"transitionToVector",vector:c},this._mainEngine.vector.initLayersTimer=window.setTimeout(function(){if("transitionToVector"!==e._mainEngine.type){e._onBadMainEngineState();return}e._mainEngine.vector.transitionEventGroup=a.on("stateChanged",function(){if(e._isReadyToShowVector(a,e._mainEngine.engine)){var t;if("transitionToVector"!==e._mainEngine.type){e._onBadMainEngineState();return}null==(t=e._mainEngine.vector.transitionEventGroup)||t.offAll(),s.revealDuration=performance.now()-s.init,e._finalizeSwitchingToVector(s)}e._emit("stateChanged")}),e._setVectorLayers(c,s),e._mainEngine.vector.initLayersTimer=void 0})}}this._emit("afterEffectiveModeChanged"),this._renderLoop.update(),this._emit("indoorPlansChanged")},i._setVectorLayers=function(e,t){var i=this;return new Promise(function(n){var r=e.engine,o=function(e){(0,eg.D)(e)||i._onVectorError({source:""+ig+"/layers",message:ig+": failed to set vector layers: "+e})},a=function(){r.setObjectFilters(i._filters),r.setInvisibleCollidingPrimitives(i._invisibleCollidingPrimitives),r.setTileContentClippingGeometry(i._collidingGeometriesBySource),t.duration=performance.now()-t.init,n()};try{if(r.initLayersAsync){e.setLayersAbortController=new AbortController;var s=e.setLayersAbortController.signal;r.initLayersAsync(i._mainLayers,s).then(a).catch(o)}else r.setLayers(i._mainLayers),a();e.cursorController&&e.cursorController.setLayers(i._mainLayers)}catch(u){o(u)}})},i._switchMainEngineToVector=function(e){var t=this;return this._mainEngine.eventGroup.offAll(),this._mainEngine.engine.destroy(),"transitionToVector"===this._mainEngine.type&&this._mainEngine.vector.eventGroup.offAll(),this._mainEngine={type:"vector",engine:e,cursorController:new ie(this,e.element,this._dataSources,this._mainLayers),eventGroup:e.group().on("internalError",function(e){return t._onVectorError(e)}).on("contentError",function(e){return t._onVectorContentError(e)}).on("tilesReady",function(){return t._emit("ready")}).on("tilesLoaded",function(){return t._emit("loaded")}).on("stateChanged",function(){return t._emit("stateChanged")}).on("indoorPlansChanged",function(){return t._emit("indoorPlansChanged")}).on("tile3dChanged",function(e){return t._emit("tile3dChanged",e)}).on("tile3dVisibilityChange",function(e){return t._emit("tile3dVisibilityChange",e)}).on("visibleObjectsChanged",function(){return t._emit("visibleObjectsChanged")})},this._topRasterEngine.update(this._camera,this._mainEngine.engine.fov),this._emit("indoorPlansChanged"),this._emit("mainEngineChanged"),this._chooseEffectiveZoomRounding(),this._handleRotatability(),this._mainEngine},i._isReadyToShowVector=function(e,t){if(e.isReadyToShow())return!0;var i=0,n=0,r=0,o=0,a=0,s=0;if(this._mainLayers.forEach(function(u){var l=e.getLayerReadyState(u.id);l&&(o+=l.tilesTotal,r+=l.tilesReady),l&&(a+=l.graphicsTotal,s+=l.graphicsReady);var c=null==t?void 0:t.getLayerReadyState(u.id);c&&(n+=c.tilesTotal,i+=c.tilesReady)}),0===o||0===r)return!1;var u=s===a&&(r>=.75*o||r/o>=i/n);return 0===n||u||!!(null==e?void 0:e.isMapReady)},i._onVectorStart=function(e){this._emit("vectorStart",{duration:e.duration,revealDuration:e.revealDuration})},i._onVectorError=function(e){if(this._vectorFailed=!0,this._applyMode(),this._emit("vectorError",e),e.source.startsWith(ig))(0,g.H)(Error(e.message));else{var t;(0,g.H)(Error("vector: internal error")),(0,g.vp)(Error(e.message),"fatal / "+function(e){if(null==(t=e.source)?void 0:t.startsWith("Worker"))return"worker";var t,i,n=null==(i=e.source)?void 0:i.split("/");return n&&n.length>0?n[n.length-1]:"unknown"}(e),{type:"fatal error",source:e.source,nestedError:null==(t=e.error)?void 0:t.message})}},i._onVectorContentError=function(e){var t;(0,g.vp)(Error(e.message),"content / "+function(e){if("internal task error"===e.message)return"internal task";var t,i=null==(t=e.source)?void 0:t.split("/");return i&&i.length>0?i[i.length-1]:"unknown"}(e),{type:"content error",source:e.source,nestedError:null==(t=e.error)?void 0:t.message})},i._onBadMainEngineState=function(){this._onVectorError({source:""+ig+"/engine_state",message:ig+": unexpected main engine state: "+this._mainEngine.type})},i._finalizeSwitchingToVector=function(e){var t,i=this;if("transitionToVector"!==this._mainEngine.type){this._onBadMainEngineState();return}var n=this._mainEngine.vector.engine;this._mainEngine.vector.animationAbortController=new AbortController;var r=this._mainEngine.vector.animationAbortController.signal,o=this._mainEngineContainer;this._mainEngineContainer=(0,eR.E)(iv),this._mainEngineContainer.appendChild(n.element),this._onVectorStart(e),(t=this._mainEngineContainer,new Promise(function(e,i){o.parentElement.insertBefore(t,o),r.addEventListener("abort",function(){i((0,eg.o)())}),o.addEventListener("transitionend",function(){iz(o),e()}),o.classList.add("ymaps3x0--hide"),getComputedStyle(o).opacity})).then(function(){if("transitionToVector"!==i._mainEngine.type){i._onBadMainEngineState();return}i._switchMainEngineToVector(n)}).catch(function(e){(0,eg.D)(e)||i._onVectorError({source:""+ig+"/engine_switch",message:ig+": switch to vector aborted: "+e})})},i._handleRotatability=function(){var e,t=this,i=(0,ee._)(this._topRasterLayers).concat((0,ee._)("vector"!==this._mainEngine.type?this._mainLayers:[])).every(function(e){return!t._nonRotatableRasterSources.has(e.source)});null==(e=this.behaviors)||e.mapToggleRotation(i),!i&&(0!==this._camera.azimuth||this._camera.tilt>0)&&(this._camera=(0,p._)({},this._camera,{azimuth:0,tilt:0}),this._update())},i._assertLayersIsValid=function(e,t){for(var i=0;i<t.length;i++){var n=t[i].source,r=this._dataSourceDescriptions[n];r?"tile"!==r.type||r.hasOwnProperty("vector")?"indoor"!==n||"tile"===r.type&&r.vector&&r.vector.indoorPlanUrl||(0,g._y)(Error('Source "indoor" has a special meaning and must be a vector indoor data source.')):(0,g._y)(Error('Source "'+n+'" in main engine does not have vector field')):(0,g._y)(Error("Unknown data source "+n))}var o=(0,ee._)(t).concat((0,ee._)(e)).map(function(e){return e.id}),a=new Set(o);(0,eh.h)(o.length===a.size,'Layers have duplicates "'+o+'"')},i._destroyMainEngine=function(){this._mainEngine&&("vector"===this._mainEngine.type&&(this._mainEngine.setLayersAbortController&&this._mainEngine.setLayersAbortController.abort(),this._mainEngine.cursorController&&this._mainEngine.cursorController.destroy(),clearTimeout(this._mainEngine.initLayersTimer),iz(this._mainEngine.engine.element)),"transitionToVector"===this._mainEngine.type&&(this._mainEngine.vector.animationAbortController&&this._mainEngine.vector.animationAbortController.abort(),this._mainEngine.vector.setLayersAbortController&&this._mainEngine.vector.setLayersAbortController.abort(),this._mainEngine.vector.transitionEventGroup&&this._mainEngine.vector.transitionEventGroup.offAll(),clearTimeout(this._mainEngine.vector.initLayersTimer),this._mainEngine.vector.eventGroup.offAll(),iz(this._mainEngine.vector.engine.element),this._mainEngine.vector.engine.destroy()),this._mainEngine.eventGroup.offAll(),this._mainEngine.engine.destroy())},i._createTopEngine=function(){var e=this,t=new tt(this._size,this._camera,this._renderLoop,this.worldOptions,this.projection,this._dataSources,function(t){return e._mainEngine&&"vector"===e._mainEngine.type?ip(t):im(t)},!1,this.tiltRange);this._topEngineContainer.appendChild(t.element);var i=t.group().on("tilesReady",function(){return e._emit("ready")}).on("tilesLoaded",function(){return e._emit("loaded")}).on("stateChanged",function(){return e._emit("stateChanged")}).on("hotspotsChanged",function(){return e._emit("hotspotsChanged")});return t.setLayers(this._topRasterLayers),t.setObjectFilters(this._filters),{topEngine:t,eventGroup:i}},i._update=function(){this._mainEngine.engine.update(this._camera,ea),"transitionToVector"===this._mainEngine.type&&this._mainEngine.vector.engine.update(this._camera),this._topRasterEngine.update(this._camera,this._mainEngine.engine.fov),this._renderLoop.update(),this._emit("update")},i._subscribeToDomEvents=function(){this.container.addEventListener("contextmenu",function(e){return e.preventDefault()})},i.convertScreenToWorldCoordinates=function(e){var t=e.clientX,i=e.clientY,n=(0,ed.XA)({x:t,y:i},this);return{worldCoordinates:n,coordinates:this.projection.fromWorldCoordinates(n)}},i._restrictZoom=function(e){var t=this.zoomRange,i=t.min,n=t.max;return(0,ec.q)(e,i,n)},i._convertFeatureToWorld=function(e){var t=this;return iw(this.worldOptions,e,function(e){return t.projection.toWorldCoordinates(e)},function(e,t){return{geo:e,global:t}})},i._convertFeatureToGeo=function(e){var t=this;return iw(this.worldOptions,e,function(e){return t.projection.fromWorldCoordinates(e)},function(e,t){return{geo:t,global:e}})},i._getFeaturesForDataSource=function(e){return this._featuresByDataSource.has(e)||this._featuresByDataSource.set(e,new Map),this._featuresByDataSource.get(e)},i._createDataSource=function(e,t){switch(e.type){case"markers":case"geojson":return new eY.m5;case"tile":return new em.Nt(e,this.worldOptions,t);case"tile3d":return new e5.N(e)}return new ih.m},i._getFeaturesDataSource=function(e){var t=this._getDataSourceById(e);return(0,eh.h)(t instanceof eY.m5,'"'+e+'" must be FeaturesDataSource'),t},i._getTile3dDataSource=function(e){var t=this._getDataSourceById(e);return(0,eh.h)(t instanceof e5.N,'"'+e+'" must be Tile3dDataSource'),t},i._getTileDataSource=function(e){var t=this._getDataSourceById(e);return(0,eh.h)(t instanceof em.Nt,'"'+e+'" must be TileDataSource'),t},i._getDataSourceById=function(e){return(0,eh.h)(void 0!==this._dataSources[e],'Unknown data source "'+e+'"'),this._dataSources[e]},i._getEffectiveZoomRounding=function(){return"auto"!==this._zoomRounding?this._zoomRounding:this._vectorFailed||!this._mainLayers.length?"snap":"raster"!==this._effectiveMode?"smooth":"snap"},i._chooseEffectiveZoomRounding=function(){var e,t=this._getEffectiveZoomRounding();if(this._effectiveZoomRounding!==t){if(this._effectiveZoomRounding=t,"snap"===this._effectiveZoomRounding){var i=i_(this._camera.zoom);this.setCamera((0,p._)({},this._camera,{zoom:i}))}null==(e=this.behaviors)||e._updateZoomRounding(),this._emit("zoomRoundingChanged")}},i._applyFilters=function(){this._mainEngine.engine.setObjectFilters(this._filters),this._topRasterEngine.setObjectFilters(this._filters),"transitionToVector"===this._mainEngine.type&&this._mainEngine.vector.engine.setObjectFilters(this._filters)},i._applyInvisibleCollidingPrimitives=function(){this._mainEngine.engine.setInvisibleCollidingPrimitives(this._invisibleCollidingPrimitives),"transitionToVector"===this._mainEngine.type&&this._mainEngine.vector.engine.setInvisibleCollidingPrimitives(this._invisibleCollidingPrimitives)},i._toMapObject=function(e){var t=this;if(!e)return e;if("raw-hotspot"===e.type){var i=(0,p._)({},e.feature,{geometry:e.feature.geometry&&(0,et.ZE)(e.feature.geometry,function(e){var t=(0,v._)(e,2),i=t[0];return[t[1],i]})});return{type:"hotspot",layer:e.layer,source:e.source,feature:i}}if("hotspot"===e.type){var n=(0,p._)({},e.feature,{geometry:e.feature.geometry&&(0,et.ZE)(e.feature.geometry,function(e){return t.projection.fromWorldCoordinates(e)})});return{type:"hotspot",layer:e.layer,source:e.source,feature:n}}if("feature"===e.type){var r=this._getFeaturesForDataSource(e.source).get(e.feature.id);return r?{type:"feature",layer:e.layer,source:e.source,feature:r}:null}return"empty-object"===e.type?(0,p._)({},e):null},i.updateCameraOptions=function(e){this._cameraOptions=(0,p._)({},this._cameraOptions,e)},i._restrictCamera=function(e){var t,i,n,r,o,a,s,u,l,c,d,h,_,m=this._restrictZoom(e.zoom),f=this._cameraOptions.enabledTiltTransition,v={zoom:m,worldCenter:es.B.fitViewportToWorld(e.worldCenter,{zoom:m,worldOptions:this.worldOptions,size:this.size}),azimuth:(0,ec.d)(e.azimuth,0,2*Math.PI),tilt:(0,ec.q)(e.tilt,this.tiltRange.min-(f?this.tiltRange.expansion:0),this.tiltRange.max+(f?this.tiltRange.expansion:0))};return this._worldRestrictMapArea?(t=this._worldRestrictMapArea,i=io(this.size,this.margin),r=(n=es.B.convertPixelSizeToWorldSize(i,v.zoom)).x,o=n.y,a=r/2,s=-o/2,l=(u=v.worldCenter).x,c=u.y,h=(d=v.worldCenter).x,_=d.y,(h-a<t[0].x&&(h=t[0].x+a),_-s<t[0].y&&(_=t[0].y+s),h+a>t[1].x&&(h=t[1].x-a),_+s>t[1].y&&(_=t[1].y-s),h!==l||_!==c)?(0,p._)({},v,{worldCenter:{x:h,y:_}}):v):v},(0,I._)(t,[{key:"projection",get:function(){return this._projection}},{key:"size",get:function(){return this._size}},{key:"offset",get:function(){return this._offset}},{key:"center",get:function(){return this.calculateCenter(this._camera.worldCenter)}},{key:"worldCenter",get:function(){return this._camera.worldCenter}},{key:"zoom",get:function(){return this._camera.zoom}},{key:"bounds",get:function(){var e,t,i,n,r,o,a;return e=this.projection,t=this.center,i=this.zoom,n=io(this.size,this.margin),o={x:(r=ii(e,t,i)).x-n.x/2,y:r.y-n.y/2},a={x:r.x+n.x/2,y:r.y+n.y/2},[it(e,o,i),it(e,a,i)]}},{key:"tilt",get:function(){return this._camera.tilt}},{key:"azimuth",get:function(){return this._camera.azimuth}},{key:"camera",get:function(){return this._camera}},{key:"fov",get:function(){var e,t;return null!=(t=null==(e=this._mainEngine)?void 0:e.engine.fov)?t:ea}},{key:"zoomRange",get:function(){for(var e=(0,p._)({},this._zoomRange),t=(0,ee._)(this._topRasterLayers).concat((0,ee._)(this._mainLayers)),i=0;i<t.length;i++){var n=t[i];if(n.source&&n.source!==e_.X_){var r=this._dataSourceDescriptions[n.source];"tile"===r.type&&r.clampMapZoom&&(e=(0,en.Hx)(e,r.zoomRange||this._zoomRange))}}return e}},{key:"destroyed",get:function(){return this._destroyed}},{key:"isInAction",get:function(){return!!(this._animateHandler&&this._animateHandler.isRunning||this.behaviors&&this.behaviors.isInAction||this._animateHandlerAzimuth&&this._animateHandlerAzimuth.isRunning||this._animateHandlerTilt&&this._animateHandlerTilt.isRunning)}},{key:"restrictMapArea",get:function(){return this._restrictMapArea}},{key:"zoomRounding",get:function(){return this._zoomRounding}},{key:"effectiveZoomRounding",get:function(){return this._effectiveZoomRounding}},{key:"margin",get:function(){if(this._margin)return this._margin}}]),t}((0,O.GA)().with());function iS(e){var t=e.getBoundingClientRect(),i=t.top,n=t.left,r=t.right,o=t.bottom;return{size:{x:e.clientWidth,y:e.clientHeight},offset:{top:i,left:n,right:window.innerWidth-r,bottom:window.innerHeight-o}}}function ix(e,t){return e.map(function(e){var i="string"==typeof e?(0,e_.F7)(e):e,n=(0,e_.XK)(i);return n.source===e_.X_||t[n.source]||(0,g._y)(Error('Nonexistent data source "'+n.source+'" in "'+i.id+'"')),n})}function iE(e,t){(0,en.i3)(e);for(var i=(0,p._)({},e),n=0,r=Object.keys(t);n<r.length;n++){var o=t[r[n]];if("tile"===o.type&&(o.zoomRange&&(0,en.i3)(o.zoomRange),o.clampMapZoom)){var a=o.zoomRange||e;(0,en.Hx)(i,a,i)}}(0,en.i3)(i)}function ib(e){return e.id}function iz(e){e.parentElement&&e.parentElement.removeChild(e)}function iw(e,t,i,n){(0,eh.h)(!e.cycledY,"Y-cycled projections are not supported");var r=1/0,o=-1/0,a=1/0,s=-1/0;return{feature:(0,et.Cr)(t,function(t){var u=i(t),l=n(t,u),c=l.geo,d=l.global;if(e.cycledX){var h=c[0]<-180||c[0]>180?Math.round(c[0]/360):0;d.x+=2*h}return r=d.x<r?d.x:r,o=d.x>o?d.x:o,a=d.y<a?d.y:a,s=d.y>s?d.y:s,u}),bbox:{minX:r,maxX:o,minY:a,maxY:s}}}var iT=i(27026);function iR(e){var t,i=function(){if(!e.behaviors.isInAction&&t){var i={x:t.clientX,y:t.clientY},n=(0,ed.XA)(i,e);e.preloadHotspotsInPoint(n)}},n=function(e){t=e,i()},r=e.behaviors.on("actionEnd",function(){i()}),o=e.on("beforeDestroy",function(){o.offAll(),r.offAll(),e.container.removeEventListener("mousemove",n)});e.container.addEventListener("mousemove",n)}function iC(e){var t,i=e.behaviors.on("actionStart",function(){t&&(t.offAll(),t=void 0)}).on("actionEnd",function(){t||e.behaviors.isInAction||(e.preloadHotspotsForViewport(),t=e.on("update",function(){return e.preloadHotspotsForViewport()}))}),n=e.on("beforeDestroy",function(){n.offAll(),i.offAll(),t&&(t.offAll(),t=void 0)});t=e.on("update",function(){return e.preloadHotspotsForViewport()})}var iM=i(99928),iA=function(e){function t(t,i){var n;return(n=e.call(this,t)||this).xhr=i,n}return(0,k._)(t,e),t}((0,i(29009)._)(Error));function iD(e){var t=(0,em.B5)(e);return function(e,i,n,r){return(function(e,t){if(t.aborted)return Promise.reject((0,eg.o)());var i=new XMLHttpRequest;i.open("get",e,!0);var n=i.abort.bind(i);t.addEventListener("abort",n);var r=new Promise(function(n,r){i.onload=function(){if(200===i.status)try{n(JSON.parse(i.responseText))}catch(e){(0,g.H)(e),r(e)}else 204===i.status?n(null):r(Error("Bad status code: "+i.status))},i.onerror=function(){if(t.aborted){r((0,eg.o)());return}r(new iA("Error on GET to "+e+".",i))},i.onabort=function(){return r((0,eg.o)())}});return i.send(),r.finally(function(){return t.removeEventListener("abort",n)})})(t(e,i,n,1),r).then(function(e){if(!e||e.error&&404===e.error.code)return[];if(e.error)throw Error("Server sent an error (code = "+e.error.code+"): "+e.error.message);return(0,et.$7)(e.data).map(function(e){var t,i,n,r,o,a;return{type:"rendered",feature:(r=null==(n=e.properties.URIMetaData)?void 0:null==(i=n.URIs)?void 0:null==(t=i[0])?void 0:t.uri,{type:"Feature",id:String(e.properties.HotspotMetaData.id),geometry:e.geometry,properties:(0,p._)({},e.properties,(0,tJ._)({uri:r},iM.u,(0,p._)({uri:r},(o=e.properties,a={},o.id&&(a.id=o.id),o.name&&(a.name=o.name),o.hintContent&&(a.hint=o.hintContent),a))))}),geometry:(0,et.ZE)(e.properties.HotspotMetaData.RenderedGeometry,function(e){var t=(0,v._)(e,2);return{x:t[0],y:t[1]}})}})}).catch(function(e){if(e instanceof iA&&0===e.xhr.status&&4===e.xhr.readyState)return[];(0,g._y)(e)})}}var iL=i(32721),iP=i(80609),iF=(0,p._)({},l,c,d)},77543:(e,t,i)=>{"use strict";i.d(t,{K:()=>v});var n=i(76519),r=i(48223),o=i(49675),a=i(63780),s=i(42652),u=i(87159),l=i(81643),c=i(80937),d=i(19373),h=i(57124),_=i(56350),m=i(69415),f=i(33634),p=function(){},v=function(e){function t(t){var i,n=t.size,r=t.camera,o=t.dataSource,a=t.worldOptions,s=t.processingQueue,u=t.zoomRoundingRule;return(i=e.call(this)||this)._newTiles=new Map,i._loadingTiles=new Map,i._readyTiles=new Map,i._size=n,i._camera=r,i._tileSource=o,i._zoomRoundingRule=u,i._worldOptions=a,i._queue=s,i}(0,o._)(t,e);var i=t.prototype;return i.destroy=function(){this._loadingTiles.forEach(function(e){e.abortController.abort()})},i.preloadHotspotsInPoint=function(e){for(var t=this._zoomRoundingRule(this._camera.zoom),i=this._computeAffectedTiles(e,t),n=!1,r=0;r<i.length;r++){var o=i[r],s=(0,a.vD)(o,o.zoom);this._isTileDataReadyOrLoading(s)||this._newTiles.has(s)||(this._newTiles.set(s,{id:o}),n=!0)}var u=this._stopLoadingTilesOutsideRadius(e);(n||u)&&this._emit("hotspotsChanged"),n&&this._emit("requestRender")},i.preloadHotspotsForViewport=function(){for(var e=this,t=this._getTilesForViewport().filter(function(t){return!e._isTileDataReadyOrLoading((0,a.vD)(t,t.zoom))}),i=!1,n=0;n<t.length;n++){var r=t[n],o=(0,a.vD)(r,r.zoom);this._isTileDataReadyOrLoading(o)||this._newTiles.has(o)||(this._newTiles.set(o,{id:r}),i=!0)}i&&(this._emit("hotspotsChanged"),this._emit("requestRender"))},i.resize=function(e){!h.areEqual(e,this._size)&&(this._size=e,this._removeTilesOutsideViewport()&&this._emit("hotspotsChanged"))},i.update=function(e,t){var i=e.worldCenter,n=e.zoom;(i!==this._camera.worldCenter||n!==this._camera.zoom)&&(this._camera=e,this._removeTilesOutsideViewport()&&this._emit("hotspotsChanged"))},i.render=function(e){var t=this;e.qualityHint<m._.FULL||this._camera.zoom<this._tileSource.zoomRange.min||this._camera.zoom>this._tileSource.zoomRange.max||(this._newTiles.forEach(function(e){var i=(0,a.vD)(e.id,e.id.zoom),n=t._loadTile(e);t._loadingTiles.set(i,n),n.promise.then(function(o){var a=o.map(function(i){var n,r,o;return"world"===i.type?i:(n=e.id,r=t._tileSource.tileSize,o=h.muln(n,r),{type:"world",feature:i.feature,geometry:(0,c.ZE)(i.geometry,function(e){return l.B.pixelsToWorld(h.add(e,o),n.zoom)})})}),s=t._zoomRoundingRule(t._camera.zoom),u=t._tileSource.padding/l.B.getWorldPixelSize(s),d=0===t._tileSource.padding?a:a.map(function(e){return(0,r._)({},e,{geometry:function(e,t){if("Polygon"!==e.type)return e;for(var i=e.coordinates[0],n=i.reduce(function(e,t){return h.add(e,t,e)},h.create(0,0)),r=h.divn(n,i.length),o=1+t/i.reduce(function(e,t){return Math.max(e,h.length(h.sub(t,r)))},0),a=0;a<i.length;a++){var s=i[a],u=h.sub(s,r);h.muln(u,o,u),h.add(u,r,s)}return e}(e.geometry,u)})});t._readyTiles.set(i,{id:n.id,hotspots:d}),t._emit("hotspotsChanged")}).finally(function(){return t._loadingTiles.delete(i)}).catch(function(e){(0,f.D)(e)||(0,_._y)(e)})}),this._newTiles.clear())},i.findObjectInPosition=function(e){for(var t=l.B.restrictToZeroWorld(e,this._worldOptions),i=this._zoomRoundingRule(this._camera.zoom),n=this._computeAffectedTiles(t,i),r=!0,o=0;o<n.length;o++){var s=n[o],c=this._readyTiles.get((0,a.vD)(s,i));if(c)for(var d=c.hotspots.length-1;d>=0;d--){var h=c.hotspots[d];if((0,u.R)(h.geometry,t))return{type:"raw-hotspot",feature:h.feature}}else r=!1}return(null==this._tileSource.internalFindHotspotInPosition?void 0:this._tileSource.internalFindHotspotInPosition.call(this._tileSource,t,i))||(r?null:void 0)},i.findFeatureByElement=function(){return null},i._stopLoadingTilesOutsideRadius=function(e){var t=this._zoomRoundingRule(this._camera.zoom),i=h.divn(l.B.worldToPixels(e,t),this._tileSource.tileSize),n=Math.max(this._tileSource.hotspotAbortRadius,this._tileSource.inset)/this._tileSource.tileSize;return g(this._loadingTiles,function(e){var t,r;return t=e.id,r=h.create((0,d.q)(i.x,t.x,t.x+1),(0,d.q)(i.y,t.y,t.y+1)),h.sub(r,i,r),h.length2(r)<=Math.pow(n,2)},function(e){return e.abortController.abort()})},i._removeTilesOutsideViewport=function(){var e=this._zoomRoundingRule(this._camera.zoom),t=l.B.getScale(e,this._camera.zoom),i=h.create(this._size.x+2*this._tileSource.inset,this._size.y+2*this._tileSource.inset),n=l.B.worldToPixels(this._camera.worldCenter,e),r=(0,a.TG)(n,i,t,this._tileSource.tileSize),o=function(t){var i=t.id;return i.zoom===e&&i.x<=r.maxX&&i.x+1>=r.minX&&i.y<=r.maxY&&i.y+1>=r.minY},s=g(this._newTiles,o),u=g(this._loadingTiles,o,function(e){return e.abortController.abort()}),c=g(this._readyTiles,o);return s||u||c},i._isTileDataReadyOrLoading=function(e){return this._loadingTiles.has(e)||this._readyTiles.has(e)},i._getTilesForViewport=function(){for(var e=this._zoomRoundingRule(this._camera.zoom),t=l.B.getScale(e,this._camera.zoom),i=l.B.worldToPixels(this._camera.worldCenter,e),n=(0,a.TG)(i,this._size,t,this._tileSource.tileSize),r=[],o=n.minX;o<=n.maxX;o++)for(var s=n.minY;s<=n.maxY;s++)r.push({x:o,y:s,zoom:e});return r},i._loadTile=function(e){var t=this,i=(0,a.Su)(e.id.zoom,this._tileSource.tileSize),n=h.applyFunction(e.id,function(e){return(0,d.d)(e,0,i)}),r=this._queue.enqueue(function(i){var r=t._tileSource.fetchHotspots;return!i.aborted&&r?Promise.resolve(r(n.x,n.y,e.id.zoom,i)).catch(function(e){return(0,_._y)(e)}):Promise.resolve([])}),o=r.promise,s=r.abortController;return{id:e.id,abortController:s,promise:o}},i._computeAffectedTiles=function(e,t){var i=l.B.worldToTile(e,t,this._tileSource.tileSize),n=h.applyFunction(i,Math.floor),r=h.sub(i,n);h.muln(r,this._tileSource.tileSize,r);var o=r.x<this._tileSource.inset,a=r.x>this._tileSource.tileSize-this._tileSource.inset,s=r.y<this._tileSource.inset,u=r.y>this._tileSource.tileSize-this._tileSource.inset,c=[{x:n.x,y:n.y,zoom:t}];return o&&c.push({x:n.x-1,y:n.y,zoom:t}),a&&c.push({x:n.x+1,y:n.y,zoom:t}),s&&c.push({x:n.x,y:n.y-1,zoom:t}),u&&c.push({x:n.x,y:n.y+1,zoom:t}),o&&s&&c.push({x:n.x-1,y:n.y-1,zoom:t}),o&&u&&c.push({x:n.x-1,y:n.y+1,zoom:t}),a&&s&&c.push({x:n.x+1,y:n.y-1,zoom:t}),a&&u&&c.push({x:n.x+1,y:n.y+1,zoom:t}),c},(0,n._)(t,[{key:"state",get:function(){return{tilesLoaded:0,tilesReady:0,tilesTotal:0,borderTotal:0,borderLoaded:0,borderReady:0,graphicsTotal:0,graphicsReady:0}}}]),t}((0,s.GA)().with());function g(e,t,i){void 0===i&&(i=p);var n=!1;return e.forEach(function(r,o){t(r)||(i(r),e.delete(o),n=!0)}),n}},19377:(e,t,i)=>{"use strict";i.r(t),i.d(t,{EventBlockerLayer:()=>r});var n=i(18007),r=function(e){function t(t){var i=e.call(this,t),n=document.createElement("div");return n.style.width="100%",n.style.height="100%",n.style.position="absolute",n.style.top="0",n.style.left="0",t.element.appendChild(n),i}(0,n._)(t,e);var i=t.prototype;return i.findObjectInPosition=function(){return{type:"empty-object"}},i.destroy=function(){},t}(i(80609).x)},23305:(e,t,i)=>{"use strict";function n(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(t,{_:()=>n})},76519:(e,t,i)=>{"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}i.d(t,{_:()=>r})},1994:(e,t,i)=>{"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{_:()=>n})}}]);